if(void 0===deconcept)var deconcept=new Object;void 0===deconcept.util&&(deconcept.util=new Object),void 0===deconcept.SWFObjectUtil&&(deconcept.SWFObjectUtil=new Object),deconcept.SWFObject=function(t,e,i,n,s,o,l,r,a,h){if(document.getElementById){this.DETECT_KEY=h||"detectflash",this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY),this.params=new Object,this.variables=new Object,this.attributes=new Array,t&&this.setAttribute("swf",t),e&&this.setAttribute("id",e),i&&this.setAttribute("width",i),n&&this.setAttribute("height",n),s&&this.setAttribute("version",new deconcept.PlayerVersion(s.toString().split("."))),this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion(),!window.opera&&document.all&&this.installedVer.major>7&&(deconcept.SWFObject.doPrepUnload=!0),o&&this.addParam("bgcolor",o);var d=l||"high";this.addParam("quality",d),this.setAttribute("useExpressInstall",!1),this.setAttribute("doExpressInstall",!1);var c=r||window.location;this.setAttribute("xiRedirectUrl",c),this.setAttribute("redirectUrl",""),a&&this.setAttribute("redirectUrl",a)}},deconcept.SWFObject.prototype={useExpressInstall:function(t){this.xiSWFPath=t||"expressinstall.swf",this.setAttribute("useExpressInstall",!0)},setAttribute:function(t,e){this.attributes[t]=e},getAttribute:function(t){return this.attributes[t]},addParam:function(t,e){this.params[t]=e},getParams:function(){return this.params},addVariable:function(t,e){this.variables[t]=e},getVariable:function(t){return this.variables[t]},getVariables:function(){return this.variables},getVariablePairs:function(){var t,e=new Array,i=this.getVariables();for(t in i)e[e.length]=t+"="+i[t];return e},getSWFHTML:function(){var t="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","PlugIn"),this.setAttribute("swf",this.xiSWFPath)),t='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"',t+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var e=this.getParams();for(var i in e)t+=[i]+'="'+e[i]+'" ';(n=this.getVariablePairs().join("&")).length>0&&(t+='flashvars="'+n+'"'),t+="/>"}else{this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","ActiveX"),this.setAttribute("swf",this.xiSWFPath)),t='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">',t+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var n;e=this.getParams();for(var i in e)t+='<param name="'+i+'" value="'+e[i]+'" />';(n=this.getVariablePairs().join("&")).length>0&&(t+='<param name="flashvars" value="'+n+'" />'),t+="</object>"}return t},write:function(t){if(this.getAttribute("useExpressInstall")){var e=new deconcept.PlayerVersion([6,0,65]);this.installedVer.versionIsValid(e)&&!this.installedVer.versionIsValid(this.getAttribute("version"))&&(this.setAttribute("doExpressInstall",!0),this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl"))),document.title=document.title.slice(0,47)+" - Flash Player Installation",this.addVariable("MMdoctitle",document.title))}return this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))?(("string"==typeof t?document.getElementById(t):t).innerHTML=this.getSWFHTML(),!0):(""!=this.getAttribute("redirectUrl")&&document.location.replace(this.getAttribute("redirectUrl")),!1)}},deconcept.SWFObjectUtil.getPlayerVersion=function(){var t=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var e=navigator.plugins["Shockwave Flash"];e&&e.description&&(t=new deconcept.PlayerVersion(e.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")))}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0)for(var i=1,n=3;i;)try{n++,i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n),t=new deconcept.PlayerVersion([n,0,0])}catch(t){i=null}else{try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");t=new deconcept.PlayerVersion([6,0,21]),i.AllowScriptAccess="always"}catch(e){if(6==t.major)return t}try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){}}null!=i&&(t=new deconcept.PlayerVersion(i.GetVariable("$version").split(" ")[1].split(",")))}return t},deconcept.PlayerVersion=function(t){this.major=null!=t[0]?parseInt(t[0]):0,this.minor=null!=t[1]?parseInt(t[1]):0,this.rev=null!=t[2]?parseInt(t[2]):0},deconcept.PlayerVersion.prototype.versionIsValid=function(t){return!(this.major<t.major)&&(this.major>t.major||!(this.minor<t.minor)&&(this.minor>t.minor||!(this.rev<t.rev)))},deconcept.util={getRequestParameter:function(t){var e=document.location.search||document.location.hash;if(null==t)return e;if(e)for(var i=e.substring(1).split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==t)return i[n].substring(i[n].indexOf("=")+1);return""}},deconcept.SWFObjectUtil.cleanupSWFs=function(){for(var t=document.getElementsByTagName("OBJECT"),e=t.length-1;e>=0;e--)for(var i in t[e].style.display="none",t[e])"function"==typeof t[e][i]&&(t[e][i]=function(){})},deconcept.SWFObject.doPrepUnload&&(deconcept.unloadSet||(deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){},window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)},window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload),deconcept.unloadSet=!0)),!document.getElementById&&document.all&&(document.getElementById=function(t){return document.all[t]});var getQueryParamValue=deconcept.util.getRequestParameter,FlashObject=deconcept.SWFObject,SWFObject=deconcept.SWFObject,globalActiveDHTMLGridObject;function getLightBoxMaxHeight(){return jQuery(window).height()-50}function getLightBoxMaxWidth(){return jQuery(window).width()-50}function showElementInLightBox(t,e){var i;jQuery(t).addClass("ui-lightbox-element");var n=jQuery('<div class="ui-lightbox-bg"></div>');jQuery("body").append(n),i=jQuery('<div class="ui-lightbox-fg" style="top:0px;left:0px;width:'+jQuery(window).width()+"px;height:"+jQuery(window).height()+'px;"><table cellpadding="0" cellspacing="0" style="width:100%;height:100%;text-align:center;vertical-align:middle;"><tr><td class="ui-lightbox-container"></td></tr></table></div>'),jQuery("body").append(i),jQuery(i).bind("click.LightBox",function(s){if("video"==e){if("video"==jQuery(s.target).prop("tagName").toLowerCase())return!0;jQuery("video",this)[0].pause(),jQuery("video",this).remove()}jQuery(t).unbind(".LightBox"),jQuery(i).unbind(".LightBox"),jQuery(i).animate({opacity:0},500,function(){jQuery(i).remove(),jQuery(n).animate({opacity:0},500,function(){jQuery(n).remove()})})});var s=jQuery('<span class="ui-lightbox-action-icon ui-lightbox-delete-action-icon"></span>'),o=!1,l=!1,r=!1,a=function(){o&&!l&&(l=!0,jQuery(i).animate({opacity:1},500,function(){d(),jQuery(s).animate({opacity:1},500,function(){})}))},h=function(){r=!0,jQuery(n).animate({opacity:.3},500,function(){a()})},d=function(){try{var i=jQuery(t).position(),n=i.left+(jQuery(t).width()-23),o=i.top+5;"video"==e&&(n=i.left+jQuery(t).width(),o=i.top-18),jQuery(s).css({top:o+"px",left:n+"px"})}catch(t){}},c=function(){jQuery(t).css({visibility:""}),jQuery(t).unbind("load.LightBox"),jQuery(".ui-lightbox-container",i).append(s),d(),o=!0,r?a():h()};jQuery(t).css({maxWidth:getLightBoxMaxWidth()+"px",maxHeight:getLightBoxMaxHeight()+"px"}),"img"==e?(jQuery(t).bind("load.LightBox",function(){c()}),"video"==e&&c()):c(),jQuery(".ui-lightbox-container",i).append(t),r||h()}function showImageInLightBox(t){var e="",i=null;if(/\.(gif|jpg|jpeg|png)$/.test(t.toLowerCase()))i=jQuery('<img style="visibility:hidden;" src="'+t+'">'),e="img";else if(/\.mp4$/.test(t)||/\.webm$/.test(t)){e="video",i=document.createElement("video");var n=document.createElement("source");n.src=t,/\.mp4$/.test(t)?n.type="video/mp4":/\.webm$/.test(t)&&(n.type="video/webm"),i.setAttribute("autoplay","autoplay"),i.setAttribute("controls","controls"),i.appendChild(n)}showElementInLightBox(jQuery(i),e),i=null}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}if(function(t,e){"use strict";if(!t||!t.document)throw new Error("SoundManager requires a browser with window and document objects.");var i=null;function n(i,n){this.setupOptions={url:i||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var s,o,l,r,a,h,d,c,u,f,p,m,g,_,v,b,y,w,x,C,S,k,I,N,T,P,D,O,M,E,j,A,L,H,B,R,F,X,z,V,W,G,U,$,q,Y,K,Q,J,Z,tt,et,it,nt,st,ot,lt,rt,at,ht,dt,ct,ut,ft,pt=this,mt=null,gt=null,_t="soundManager",vt=_t+": ",bt="HTML5::",yt=navigator.userAgent,wt=t.location.href.toString(),xt=document,Ct=[],St=!0,kt=!1,It=!1,Nt=!1,Tt=!1,Pt=!1,Dt=0,Ot=["log","info","warn","error"],Mt=null,Et=null,jt=!1,At=!1,Lt=0,Ht=null,Bt=[],Rt=null,Ft=Array.prototype.slice,Xt=!1,zt=0,Vt=yt.match(/(ipad|iphone|ipod)/i),Wt=yt.match(/android/i),Gt=yt.match(/msie/i),Ut=yt.match(/webkit/i),$t=yt.match(/safari/i)&&!yt.match(/chrome/i),qt=yt.match(/opera/i),Yt=yt.match(/(mobile|pre\/|xoom)/i)||Vt||Wt,Kt=!wt.match(/usehtml5audio/i)&&!wt.match(/sm2\-ignorebadua/i)&&$t&&!yt.match(/silk/i)&&yt.match(/OS X 10_6_([3-7])/i),Qt=t.console!==e&&console.log!==e,Jt=xt.hasFocus!==e?xt.hasFocus():null,Zt=$t&&(xt.hasFocus===e||!xt.hasFocus()),te=!Zt,ee=/(mp3|mp4|mpa|m4a|m4b)/i,ie=xt.location?xt.location.protocol.match(/http/i):null,ne=ie?"":"http://",se=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,oe=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],le=new RegExp("\\.("+oe.join("|")+")(\\?.*)?$","i");function re(t){return pt.preferFlash&&lt&&!pt.ignoreFlash&&pt.flash[t]!==e&&pt.flash[t]}function ae(t){return function(e){var i,n=this._s;return n&&n._a?i=t.call(this,e):(n&&n.id?pt._wD(n.id+": Ignoring "+e.type):pt._wD(bt+"Ignoring "+e.type),i=null),i}}this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ie,F={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==e&&(qt&&opera!==e&&opera.version()<10?new Audio(null):new Audio).canPlayType!==e}catch(t){return!1}}(),this.setup=function(t){var i=!pt.url;return t!==e&&Nt&&Rt&&pt.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e)&&W(H("setupLate")),p(t),Xt||(Yt?pt.setupOptions.ignoreMobileRestrictions&&!pt.setupOptions.forceUseGlobalHTML5Audio||(Bt.push(S.globalHTML5),Xt=!0):pt.setupOptions.forceUseGlobalHTML5Audio&&(Bt.push(S.globalHTML5),Xt=!0)),!ft&&Yt&&(pt.setupOptions.ignoreMobileRestrictions?Bt.push(S.ignoreMobile):(pt.setupOptions.useHTML5Audio&&!pt.setupOptions.preferFlash||pt._wD(S.mobileUA),pt.setupOptions.useHTML5Audio=!0,pt.setupOptions.preferFlash=!1,Vt?pt.ignoreFlash=!0:(Wt&&!yt.match(/android\s2\.3/i)||!Wt)&&(pt._wD(S.globalHTML5),Xt=!0))),t&&(i&&T&&t.url!==e&&pt.beginDelayedInit(),T||t.url===e||"complete"!==xt.readyState||setTimeout(I,1)),ft=!0,pt},this.ok=function(){return Rt?Nt&&!Tt:pt.useHTML5Audio&&pt.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return o(e)||xt[e]||t[e]},this.createSound=function(t,i){var n,o,l,r=null;if(o=(n=_t+".createSound(): ")+H(Nt?"notOK":"notReady"),!Nt||!pt.ok())return W(o),!1;if(i!==e&&(t={id:t,url:i}),(l=f(t)).url=Y(l.url),l.id===e&&(l.id=pt.setupOptions.idPrefix+zt++),l.id.toString().charAt(0).match(/^[0-9]$/)&&pt._wD(n+H("badID",l.id),2),pt._wD(n+l.id+(l.url?" ("+l.url+")":""),1),G(l.id,!0))return pt._wD(n+l.id+" exists",1),pt.sounds[l.id];function a(){return l=z(l),pt.sounds[l.id]=new s(l),pt.soundIDs.push(l.id),pt.sounds[l.id]}if(J(l))r=a(),pt.html5Only||pt._wD(l.id+": Using HTML5"),r._setup_html5(l);else{if(pt.html5Only)return pt._wD(l.id+": No HTML5 support for this sound, and no Flash. Exiting."),a();if(pt.html5.usingFlash&&l.url&&l.url.match(/data\:/i))return pt._wD(l.id+": data: URIs not supported via Flash. Exiting."),a();h>8&&(null===l.isMovieStar&&(l.isMovieStar=!!(l.serverURL||l.type&&l.type.match(se)||l.url&&l.url.match(le))),l.isMovieStar&&(pt._wD(n+"using MovieStar handling"),l.loops>1&&c("noNSLoop"))),l=V(l,n),r=a(),8===h?gt._createSound(l.id,l.loops||1,l.usePolicyFile):(gt._createSound(l.id,l.url,l.usePeakData,l.useWaveformData,l.useEQData,l.isMovieStar,!!l.isMovieStar&&l.bufferTime,l.loops||1,l.serverURL,l.duration||null,l.autoPlay,!0,l.autoLoad,l.usePolicyFile),l.serverURL||(r.connected=!0,l.onconnect&&l.onconnect.apply(r))),l.serverURL||!l.autoLoad&&!l.autoPlay||r.load(l)}return!l.serverURL&&l.autoPlay&&r.play(),r},this.destroySound=function(t,e){if(!G(t))return!1;var i,n=pt.sounds[t];for(n.stop(),n._iO={},n.unload(),i=0;i<pt.soundIDs.length;i++)if(pt.soundIDs[i]===t){pt.soundIDs.splice(i,1);break}return e||n.destruct(!0),n=null,delete pt.sounds[t],!0},this.load=function(t,e){return!!G(t)&&pt.sounds[t].load(e)},this.unload=function(t){return!!G(t)&&pt.sounds[t].unload()},this.onPosition=function(t,e,i,n){return!!G(t)&&pt.sounds[t].onposition(e,i,n)},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,i){return!!G(t)&&pt.sounds[t].clearOnPosition(e,i)},this.play=function(t,e){var i=null,n=e&&!(e instanceof Object);if(!Nt||!pt.ok())return W(_t+".play(): "+H(Nt?"notOK":"notReady")),!1;if(G(t,n))n&&(e={url:e});else{if(!n)return!1;n&&(e={url:e}),e&&e.url&&(pt._wD(_t+'.play(): Attempting to create "'+t+'"',1),e.id=t,i=pt.createSound(e).play())}return null===i&&(i=pt.sounds[t].play(e)),i},this.start=this.play,this.setPosition=function(t,e){return!!G(t)&&pt.sounds[t].setPosition(e)},this.stop=function(t){return!!G(t)&&(pt._wD(_t+".stop("+t+")",1),pt.sounds[t].stop())},this.stopAll=function(){var t;for(t in pt._wD(_t+".stopAll()",1),pt.sounds)pt.sounds.hasOwnProperty(t)&&pt.sounds[t].stop()},this.pause=function(t){return!!G(t)&&pt.sounds[t].pause()},this.pauseAll=function(){var t;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].pause()},this.resume=function(t){return!!G(t)&&pt.sounds[t].resume()},this.resumeAll=function(){var t;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].resume()},this.togglePause=function(t){return!!G(t)&&pt.sounds[t].togglePause()},this.setPan=function(t,e){return!!G(t)&&pt.sounds[t].setPan(e)},this.setVolume=function(t,i){var n,s;if(t===e||isNaN(t)||i!==e)return!!G(t)&&pt.sounds[t].setVolume(i);for(n=0,s=pt.soundIDs.length;n<s;n++)pt.sounds[pt.soundIDs[n]].setVolume(t)},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return!!G(t)&&(pt._wD(_t+'.mute(): Muting "'+t+'"'),pt.sounds[t].mute());for(pt._wD(_t+".mute(): Muting all sounds"),e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].mute();return pt.muted=!0,!0},this.muteAll=function(){pt.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return!!G(t)&&(pt._wD(_t+'.unmute(): Unmuting "'+t+'"'),pt.sounds[t].unmute());for(pt._wD(_t+".unmute(): Unmuting all sounds"),e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].unmute();return pt.muted=!1,!0},this.unmuteAll=function(){pt.unmute()},this.toggleMute=function(t){return!!G(t)&&pt.sounds[t].toggleMute()},this.getMemoryUse=function(){var t=0;return gt&&8!==h&&(t=parseInt(gt._getMemoryUse(),10)),t},this.disable=function(i){var n;if(i===e&&(i=!1),Tt)return!1;for(Tt=!0,c("shutdown",1),n=pt.soundIDs.length-1;n>=0;n--)j(pt.sounds[pt.soundIDs[n]]);return u(i),st.remove(t,"load",v),!0},this.canPlayMIME=function(t){var e;return pt.hasHTML5&&(e=Z({type:t})),!e&&Rt&&(e=t&&pt.ok()?!!(h>8&&t.match(se)||t.match(pt.mimePattern)):null),e},this.canPlayURL=function(t){var e;return pt.hasHTML5&&(e=Z({url:t})),!e&&Rt&&(e=t&&pt.ok()?!!t.match(pt.filePattern):null),e},this.canPlayLink=function(t){return!(t.type===e||!t.type||!pt.canPlayMIME(t.type))||pt.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var i=pt.sounds[t];return i||e||pt._wD(_t+'.getSoundById(): Sound "'+t+'" not found.',2),i},this.onready=function(e,i){if("function"!=typeof e)throw H("needFunction","onready");return Nt&&pt._wD(H("queue","onready")),i||(i=t),g("onready",e,i),_(),!0},this.ontimeout=function(e,i){var n="ontimeout";if("function"!=typeof e)throw H("needFunction",n);return Nt&&pt._wD(H("queue",n)),i||(i=t),g(n,e,i),_({type:n}),!0},this._writeDebug=function(t,i){var n,s;return!!pt.setupOptions.debugMode&&(!!(Qt&&pt.useConsole&&(i&&"object"==typeof i?console.log(t,i):Ot[i]!==e?console[Ot[i]](t):console.log(t),pt.consoleOnly))||!!(n=o("soundmanager-debug"))&&(s=xt.createElement("div"),++Dt%2==0&&(s.className="sm2-alt"),i=i===e?0:parseInt(i,10),s.appendChild(xt.createTextNode(t)),i&&(i>=2&&(s.style.fontWeight="bold"),3===i&&(s.style.color="#ff3333")),n.insertBefore(s,n.firstChild),n=null,!0))},-1!==wt.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){t.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var t,e;for(c("currentObj",1),t=0,e=pt.soundIDs.length;t<e;t++)pt.sounds[pt.soundIDs[t]]._debug()},this.reboot=function(e,i){var n,s,o;for(pt.soundIDs.length&&pt._wD("Destroying "+pt.soundIDs.length+" SMSound object"+(1!==pt.soundIDs.length?"s":"")+"..."),n=pt.soundIDs.length-1;n>=0;n--)pt.sounds[pt.soundIDs[n]].destruct();if(gt)try{Gt&&(Et=gt.innerHTML),Mt=gt.parentNode.removeChild(gt)}catch(t){c("badRemove",2)}if(Et=Mt=Rt=gt=null,pt.enabled=T=Nt=jt=At=kt=It=Tt=Xt=pt.swfLoaded=!1,pt.soundIDs=[],pt.sounds={},zt=0,ft=!1,e)Ct=[];else for(n in Ct)if(Ct.hasOwnProperty(n))for(s=0,o=Ct[n].length;s<o;s++)Ct[n][s].fired=!1;return i||pt._wD(_t+": Rebooting..."),pt.html5={usingFlash:null},pt.flash={},pt.html5Only=!1,pt.ignoreFlash=!1,t.setTimeout(function(){i||pt.beginDelayedInit()},20),pt},this.reset=function(){return c("reset"),pt.reboot(!0,!0)},this.getMoviePercent=function(){return gt&&"PercentLoaded"in gt?gt.PercentLoaded():null},this.beginDelayedInit=function(){Pt=!0,I(),setTimeout(function(){return!At&&(D(),k(),At=!0,!0)},20),b()},this.destruct=function(){pt._wD(_t+".destruct()"),pt.disable(!0)},s=function(t){var i,n,s,o,l,r,a,u,p,m,g=this,_=!1,v=[],b=0,y=null;p={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=f(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,m=!this.url,this.id3={},this._debug=function(){pt._wD(g.id+": Merged options:",g.options)},this.load=function(t){var i;if(t!==e?g._iO=f(t,g.options):(t=g.options,g._iO=t,y&&y!==g.url&&(c("manURL"),g._iO.url=g.url,g.url=null)),g._iO.url||(g._iO.url=g.url),g._iO.url=Y(g._iO.url),g.instanceOptions=g._iO,i=g._iO,pt._wD(g.id+": load ("+i.url+")"),!i.url&&!g.url)return pt._wD(g.id+": load(): url is unassigned. Exiting.",2),g;if(g.isHTML5||8!==h||g.url||i.autoPlay||pt._wD(g.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),i.url===g.url&&0!==g.readyState&&2!==g.readyState)return c("onURL",1),3===g.readyState&&i.onload&&ut(g,function(){i.onload.apply(g,[!!g.duration])}),g;if(g.loaded=!1,g.readyState=1,g.playState=0,g.id3={},J(i))g._setup_html5(i)._called_load?pt._wD(g.id+": Ignoring request to load again"):(g._html5_canplay=!1,g.url!==i.url&&(pt._wD(c("manURL")+": "+i.url),g._a.src=i.url,g.setPosition(0)),g._a.autobuffer="auto",g._a.preload="auto",g._a._called_load=!0);else{if(pt.html5Only)return pt._wD(g.id+": No flash support. Exiting."),g;if(g._iO.url&&g._iO.url.match(/data\:/i))return pt._wD(g.id+": data: URIs not supported via Flash. Exiting."),g;try{g.isHTML5=!1,g._iO=V(z(i)),g._iO.autoPlay&&(g._iO.position||g._iO.from)&&(pt._wD(g.id+": Disabling autoPlay because of non-zero offset case"),g._iO.autoPlay=!1),i=g._iO,8===h?gt._load(g.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):gt._load(g.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(t){c("smError",2),d("onload",!1),O({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return g.url=i.url,g},this.unload=function(){return 0!==g.readyState&&(pt._wD(g.id+": unload()"),g.isHTML5?(o(),g._a&&(g._a.pause(),y=et(g._a))):8===h?gt._unload(g.id,"about:blank"):gt._unload(g.id),i()),g},this.destruct=function(t){pt._wD(g.id+": Destruct"),g.isHTML5?(o(),g._a&&(g._a.pause(),et(g._a),Xt||s(),g._a._s=null,g._a=null)):(g._iO.onfailure=null,gt._destroySound(g.id)),t||pt.destroySound(g.id,!0)},this.play=function(t,i){var n,s,o,a,d,c,p=!0,v=null;if(n=g.id+": play(): ",i=i===e||i,t||(t={}),g.url&&(g._iO.url=g.url),g._iO=f(g._iO,g.options),g._iO=f(t,g._iO),g._iO.url=Y(g._iO.url),g.instanceOptions=g._iO,!g.isHTML5&&g._iO.serverURL&&!g.connected)return g.getAutoPlay()||(pt._wD(n+" Netstream not connected yet - setting autoPlay"),g.setAutoPlay(!0)),g;if(J(g._iO)&&(g._setup_html5(g._iO),l()),1!==g.playState||g.paused||(g._iO.multiShot?pt._wD(n+"Already playing (multi-shot)",1):(pt._wD(n+"Already playing (one-shot)",1),g.isHTML5&&g.setPosition(g._iO.position),v=g)),null!==v)return v;if(t.url&&t.url!==g.url&&(g.readyState||g.isHTML5||8!==h||!m?g.load(g._iO):m=!1),g.loaded?pt._wD(n.substr(0,n.lastIndexOf(":"))):0===g.readyState?(pt._wD(n+"Attempting to load"),g.isHTML5||pt.html5Only?g.isHTML5?g.load(g._iO):(pt._wD(n+"Unsupported type. Exiting."),v=g):(g._iO.autoPlay=!0,g.load(g._iO)),g.instanceOptions=g._iO):2===g.readyState?(pt._wD(n+"Could not load - exiting",2),v=g):pt._wD(n+"Loading - attempting to play..."),null!==v)return v;if(!g.isHTML5&&9===h&&g.position>0&&g.position===g.duration&&(pt._wD(n+"Sound at end, resetting to position: 0"),t.position=0),g.paused&&g.position>=0&&(!g._iO.serverURL||g.position>0))pt._wD(n+"Resuming from paused state",1),g.resume();else{if(g._iO=f(t,g._iO),(!g.isHTML5&&null!==g._iO.position&&g._iO.position>0||null!==g._iO.from&&g._iO.from>0||null!==g._iO.to)&&0===g.instanceCount&&0===g.playState&&!g._iO.serverURL){if(o=function(){g._iO=f(t,g._iO),g.play(g._iO)},g.isHTML5&&!g._html5_canplay?(pt._wD(n+"Beginning load for non-zero offset case"),g.load({_oncanplay:o}),v=!1):g.isHTML5||g.loaded||g.readyState&&2===g.readyState||(pt._wD(n+"Preloading for non-zero offset case"),g.load({onload:o}),v=!1),null!==v)return v;g._iO=u()}(!g.instanceCount||g._iO.multiShotEvents||g.isHTML5&&g._iO.multiShot&&!Xt||!g.isHTML5&&h>8&&!g.getAutoPlay())&&g.instanceCount++,g._iO.onposition&&0===g.playState&&r(g),g.playState=1,g.paused=!1,g.position=g._iO.position===e||isNaN(g._iO.position)?0:g._iO.position,g.isHTML5||(g._iO=V(z(g._iO))),g._iO.onplay&&i&&(g._iO.onplay.apply(g),_=!0),g.setVolume(g._iO.volume,!0),g.setPan(g._iO.pan,!0),g.isHTML5?g.instanceCount<2?(l(),s=g._setup_html5(),g.setPosition(g._iO.position),s.play()):(pt._wD(g.id+": Cloning Audio() for instance #"+g.instanceCount+"..."),a=new Audio(g._iO.url),d=function(){st.remove(a,"ended",d),g._onfinish(g),et(a),a=null},c=function(){st.remove(a,"canplay",c);try{a.currentTime=g._iO.position/1e3}catch(t){W(g.id+": multiShot play() failed to apply position of "+g._iO.position/1e3)}a.play()},st.add(a,"ended",d),g._iO.volume!==e&&(a.volume=Math.max(0,Math.min(1,g._iO.volume/100))),g.muted&&(a.muted=!0),g._iO.position?st.add(a,"canplay",c):a.play()):(p=gt._start(g.id,g._iO.loops||1,9===h?g.position:g.position/1e3,g._iO.multiShot||!1),9!==h||p||(pt._wD(n+"No sound hardware, or 32-sound ceiling hit",2),g._iO.onplayerror&&g._iO.onplayerror.apply(g)))}return g},this.start=this.play,this.stop=function(t){var e,i=g._iO;return 1===g.playState&&(pt._wD(g.id+": stop()"),g._onbufferchange(0),g._resetOnPosition(0),g.paused=!1,g.isHTML5||(g.playState=0),a(),i.to&&g.clearOnPosition(i.to),g.isHTML5?g._a&&(e=g.position,g.setPosition(0),g.position=e,g._a.pause(),g.playState=0,g._onTimer(),o()):(gt._stop(g.id,t),i.serverURL&&g.unload()),g.instanceCount=0,g._iO={},i.onstop&&i.onstop.apply(g)),g},this.setAutoPlay=function(t){pt._wD(g.id+": Autoplay turned "+(t?"on":"off")),g._iO.autoPlay=t,g.isHTML5||(gt._setAutoPlay(g.id,t),t&&(g.instanceCount||1!==g.readyState||(g.instanceCount++,pt._wD(g.id+": Incremented instance count to "+g.instanceCount))))},this.getAutoPlay=function(){return g._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var i,n,s=g.isHTML5?Math.max(t,0):Math.min(g.duration||g._iO.duration,Math.max(t,0));if(g.position=s,n=g.position/1e3,g._resetOnPosition(g.position),g._iO.position=s,g.isHTML5){if(g._a){if(g._html5_canplay){if(g._a.currentTime!==n){pt._wD(g.id+": setPosition("+n+")");try{g._a.currentTime=n,(0===g.playState||g.paused)&&g._a.pause()}catch(t){pt._wD(g.id+": setPosition("+n+") failed: "+t.message,2)}}}else if(n)return pt._wD(g.id+": setPosition("+n+"): Cannot seek yet, sound not ready",2),g;g.paused&&g._onTimer(!0)}}else i=9===h?g.position:n,g.readyState&&2!==g.readyState&&gt._setPosition(g.id,i,g.paused||!g.playState,g._iO.multiShot);return g},this.pause=function(t){return g.paused||0===g.playState&&1!==g.readyState?g:(pt._wD(g.id+": pause()"),g.paused=!0,g.isHTML5?(g._setup_html5().pause(),o()):(t||t===e)&&gt._pause(g.id,g._iO.multiShot),g._iO.onpause&&g._iO.onpause.apply(g),g)},this.resume=function(){var t=g._iO;return g.paused?(pt._wD(g.id+": resume()"),g.paused=!1,g.playState=1,g.isHTML5?(g._setup_html5().play(),l()):(t.isMovieStar&&!t.serverURL&&g.setPosition(g.position),gt._pause(g.id,t.multiShot)),!_&&t.onplay?(t.onplay.apply(g),_=!0):t.onresume&&t.onresume.apply(g),g):g},this.togglePause=function(){return pt._wD(g.id+": togglePause()"),0===g.playState?(g.play({position:9!==h||g.isHTML5?g.position/1e3:g.position}),g):(g.paused?g.resume():g.pause(),g)},this.setPan=function(t,i){return t===e&&(t=0),i===e&&(i=!1),g.isHTML5||gt._setPan(g.id,t),g._iO.pan=t,i||(g.pan=t,g.options.pan=t),g},this.setVolume=function(t,i){return t===e&&(t=100),i===e&&(i=!1),g.isHTML5?g._a&&(pt.muted&&!g.muted&&(g.muted=!0,g._a.muted=!0),g._a.volume=Math.max(0,Math.min(1,t/100))):gt._setVolume(g.id,pt.muted&&!g.muted||g.muted?0:t),g._iO.volume=t,i||(g.volume=t,g.options.volume=t),g},this.mute=function(){return g.muted=!0,g.isHTML5?g._a&&(g._a.muted=!0):gt._setVolume(g.id,0),g},this.unmute=function(){g.muted=!1;var t=g._iO.volume!==e;return g.isHTML5?g._a&&(g._a.muted=!1):gt._setVolume(g.id,t?g._iO.volume:g.options.volume),g},this.toggleMute=function(){return g.muted?g.unmute():g.mute()},this.onPosition=function(t,i,n){return v.push({position:parseInt(t,10),method:i,scope:n!==e?n:g,fired:!1}),g},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var i;if(t=parseInt(t,10),isNaN(t))return!1;for(i=0;i<v.length;i++)t===v[i].position&&(e&&e!==v[i].method||(v[i].fired&&b--,v.splice(i,1)))},this._processOnPosition=function(){var t,e,i=v.length;if(!i||!g.playState||b>=i)return!1;for(t=i-1;t>=0;t--)!(e=v[t]).fired&&g.position>=e.position&&(e.fired=!0,b++,e.method.apply(e.scope,[e.position]),i=v.length);return!0},this._resetOnPosition=function(t){var e,i,n=v.length;if(!n)return!1;for(e=n-1;e>=0;e--)(i=v[e]).fired&&t<=i.position&&(i.fired=!1,b--);return!0},u=function(){var t,e,i=g._iO,n=i.from,s=i.to;return e=function(){pt._wD(g.id+': "To" time of '+s+" reached."),g.clearOnPosition(s,e),g.stop()},t=function(){pt._wD(g.id+': Playing "from" '+n),null===s||isNaN(s)||g.onPosition(s,e)},null===n||isNaN(n)||(i.position=n,i.multiShot=!1,t()),i},r=function(){var t,e=g._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&g.onPosition(parseInt(t,10),e[t])},a=function(){var t,e=g._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&g.clearOnPosition(parseInt(t,10))},l=function(){g.isHTML5&&U(g)},o=function(){g.isHTML5&&$(g)},(i=function(t){t||(v=[],b=0),_=!1,g._hasTimer=null,g._a=null,g._html5_canplay=!1,g.bytesLoaded=null,g.bytesTotal=null,g.duration=g._iO&&g._iO.duration?g._iO.duration:null,g.durationEstimate=null,g.buffered=[],g.eqData=[],g.eqData.left=[],g.eqData.right=[],g.failures=0,g.isBuffering=!1,g.instanceOptions={},g.instanceCount=0,g.loaded=!1,g.metadata={},g.readyState=0,g.muted=!1,g.paused=!1,g.peakData={left:0,right:0},g.waveformData={left:[],right:[]},g.playState=0,g.position=null,g.id3={}})(),this._onTimer=function(t){var e,i,n=!1,s={};if(g._hasTimer||t)return g._a&&(t||(g.playState>0||1===g.readyState)&&!g.paused)&&((e=g._get_html5_duration())!==p.duration&&(p.duration=e,g.duration=e,n=!0),g.durationEstimate=g.duration,(i=1e3*g._a.currentTime||0)!==p.time&&(p.time=i,n=!0),(n||t)&&g._whileplaying(i,s,s,s,s)),n},this._get_html5_duration=function(){var t=g._iO,e=g._a&&g._a.duration?1e3*g._a.duration:t&&t.duration?t.duration:null;return e&&!isNaN(e)&&e!==1/0?e:null},this._apply_loop=function(t,e){!t.loop&&e>1&&pt._wD("Note: Native HTML5 looping is infinite.",1),t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,s=f(g._iO,t),o=Xt?mt:g._a,l=decodeURI(s.url);if(Xt?l===decodeURI(ot)&&(e=!0):l===decodeURI(y)&&(e=!0),o){if(o._s)if(Xt)o._s&&o._s.playState&&!e&&o._s.stop();else if(!Xt&&l===decodeURI(y))return g._apply_loop(o,s.loops),o;e||(y&&i(!1),o.src=s.url,g.url=s.url,y=s.url,ot=s.url,o._called_load=!1)}else s.autoLoad||s.autoPlay?(g._a=new Audio(s.url),g._a.load()):g._a=qt&&opera.version()<10?new Audio(null):new Audio,(o=g._a)._called_load=!1,Xt&&(mt=o);return g.isHTML5=!0,g._a=o,o._s=g,n(),g._apply_loop(o,s.loops),s.autoLoad||s.autoPlay?g.load():(o.autobuffer=!1,o.preload="auto"),o},n=function(){if(g._a._added_events)return!1;var t,e,i,n;for(t in g._a._added_events=!0,ht)ht.hasOwnProperty(t)&&(e=t,i=ht[t],n=void 0,g._a&&g._a.addEventListener(e,i,n||!1));return!0},s=function(){var t,e,i,n;for(t in pt._wD(g.id+": Removing event listeners"),g._a._added_events=!1,ht)ht.hasOwnProperty(t)&&(e=t,i=ht[t],n=void 0,g._a&&g._a.removeEventListener(e,i,n||!1))},this._onload=function(t){var e,i=!!t||!g.isHTML5&&8===h&&g.duration;return e=g.id+": ",pt._wD(e+(i?"onload()":"Failed to load / invalid sound?"+(g.duration?" -":" Zero-length duration reported.")+" ("+g.url+")"),i?1:2),i||g.isHTML5||(!0===pt.sandbox.noRemote&&pt._wD(e+H("noNet"),1),!0===pt.sandbox.noLocal&&pt._wD(e+H("noLocal"),1)),g.loaded=i,g.readyState=i?3:2,g._onbufferchange(0),g._iO.onload&&ut(g,function(){g._iO.onload.apply(g,[i])}),!0},this._onbufferchange=function(t){return 0!==g.playState&&(!(t&&g.isBuffering||!t&&!g.isBuffering)&&(g.isBuffering=1===t,g._iO.onbufferchange&&(pt._wD(g.id+": Buffer state change: "+t),g._iO.onbufferchange.apply(g,[t])),!0))},this._onsuspend=function(){return g._iO.onsuspend&&(pt._wD(g.id+": Playback suspended"),g._iO.onsuspend.apply(g)),!0},this._onfailure=function(t,e,i){g.failures++,pt._wD(g.id+": Failure ("+g.failures+"): "+t),g._iO.onfailure&&1===g.failures?g._iO.onfailure(t,e,i):pt._wD(g.id+": Ignoring failure")},this._onwarning=function(t,e,i){g._iO.onwarning&&g._iO.onwarning(t,e,i)},this._onfinish=function(){var t=g._iO.onfinish;g._onbufferchange(0),g._resetOnPosition(0),g.instanceCount&&(g.instanceCount--,g.instanceCount||(a(),g.playState=0,g.paused=!1,g.instanceCount=0,g.instanceOptions={},g._iO={},o(),g.isHTML5&&(g.position=0)),g.instanceCount&&!g._iO.multiShotEvents||t&&(pt._wD(g.id+": onfinish()"),ut(g,function(){t.apply(g)})))},this._whileloading=function(t,e,i,n){var s=g._iO;g.bytesLoaded=t,g.bytesTotal=e,g.duration=Math.floor(i),g.bufferLength=n,g.isHTML5||s.isMovieStar?g.durationEstimate=g.duration:s.duration?g.durationEstimate=g.duration>s.duration?g.duration:s.duration:g.durationEstimate=parseInt(g.bytesTotal/g.bytesLoaded*g.duration,10),g.isHTML5||(g.buffered=[{start:0,end:g.duration}]),(3!==g.readyState||g.isHTML5)&&s.whileloading&&s.whileloading.apply(g)},this._whileplaying=function(t,i,n,s,o){var l,r=g._iO;return!isNaN(t)&&null!==t&&(g.position=Math.max(0,t),g._processOnPosition(),!g.isHTML5&&h>8&&(r.usePeakData&&i!==e&&i&&(g.peakData={left:i.leftPeak,right:i.rightPeak}),r.useWaveformData&&n!==e&&n&&(g.waveformData={left:n.split(","),right:s.split(",")}),r.useEQData&&o!==e&&o&&o.leftEQ&&(l=o.leftEQ.split(","),g.eqData=l,g.eqData.left=l,o.rightEQ!==e&&o.rightEQ&&(g.eqData.right=o.rightEQ.split(",")))),1===g.playState&&(g.isHTML5||8!==h||g.position||!g.isBuffering||g._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(g)),!0)},this._oncaptiondata=function(t){pt._wD(g.id+": Caption data received."),g.captiondata=t,g._iO.oncaptiondata&&g._iO.oncaptiondata.apply(g,[t])},this._onmetadata=function(t,e){pt._wD(g.id+": Metadata received.");var i,n,s={};for(i=0,n=t.length;i<n;i++)s[t[i]]=e[i];g.metadata=s,g._iO.onmetadata&&g._iO.onmetadata.call(g,g.metadata)},this._onid3=function(t,e){pt._wD(g.id+": ID3 data received.");var i,n,s=[];for(i=0,n=t.length;i<n;i++)s[t[i]]=e[i];g.id3=f(g.id3,s),g._iO.onid3&&g._iO.onid3.apply(g)},this._onconnect=function(t){t=1===t,pt._wD(g.id+": "+(t?"Connected.":"Failed to connect? - "+g.url),t?1:2),g.connected=t,t&&(g.failures=0,G(g.id)&&(g.getAutoPlay()?g.play(e,g.getAutoPlay()):g._iO.autoLoad&&g.load()),g._iO.onconnect&&g._iO.onconnect.apply(g,[t]))},this._ondataerror=function(t){g.playState>0&&(pt._wD(g.id+": Data error: "+t),g._iO.ondataerror&&g._iO.ondataerror.apply(g))},this._debug()},P=function(){return xt.body||xt.getElementsByTagName("div")[0]},o=function(t){return xt.getElementById(t)},f=function(t,i){var n,s,o=t||{};for(s in n=i===e?pt.defaultOptions:i)n.hasOwnProperty(s)&&o[s]===e&&("object"!=typeof n[s]||null===n[s]?o[s]=n[s]:o[s]=f(o[s],n[s]));return o},ut=function(e,i){e.isHTML5||8!==h?i():t.setTimeout(i,0)},m={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},p=function(t,i){var n,s=!0,o=i!==e,l=pt.setupOptions,r=m;if(t===e){for(n in s=[],l)l.hasOwnProperty(n)&&s.push(n);for(n in r)r.hasOwnProperty(n)&&("object"==typeof pt[n]?s.push(n+": {...}"):pt[n]instanceof Function?s.push(n+": function() {...}"):s.push(n));return pt._wD(H("setup",s.join(", "))),!1}for(n in t)if(t.hasOwnProperty(n))if("object"!=typeof t[n]||null===t[n]||t[n]instanceof Array||t[n]instanceof RegExp)o&&r[i]!==e?pt[i][n]=t[n]:l[n]!==e?(pt.setupOptions[n]=t[n],pt[n]=t[n]):r[n]===e?(W(H(pt[n]===e?"setupUndef":"setupError",n),2),s=!1):pt[n]instanceof Function?pt[n].apply(pt,t[n]instanceof Array?t[n]:[t[n]]):pt[n]=t[n];else{if(r[n]!==e)return p(t[n],n);W(H(pt[n]===e?"setupUndef":"setupError",n),2),s=!1}return s},st=function(){var e=t.attachEvent,i={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};function n(t){var i=Ft.call(t),n=i.length;return e?(i[1]="on"+i[1],n>3&&i.pop()):3===n&&i.push(!1),i}function s(t,n){var s=t.shift(),o=[i[n]];e?s[o](t[0],t[1]):s[o].apply(s,t)}return{add:function(){s(n(arguments),"add")},remove:function(){s(n(arguments),"remove")}}}(),ht={abort:ae(function(){pt._wD(this._s.id+": abort")}),canplay:ae(function(){var t,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,pt._wD(i.id+": canplay"),i._onbufferchange(0),t=i._iO.position===e||isNaN(i._iO.position)?null:i._iO.position/1e3,this.currentTime!==t){pt._wD(i.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(e){pt._wD(i.id+": canplay: Setting position of "+t+" failed: "+e.message,2)}}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:ae(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:ae(function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(pt._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:"")),e.durationEstimate=e.duration=t)}),ended:ae(function(){var t=this._s;pt._wD(t.id+": ended"),t._onfinish()}),error:ae(function(){pt._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:ae(function(){var t=this._s;pt._wD(t.id+": loadeddata"),t._loaded||$t||(t.duration=t._get_html5_duration())}),loadedmetadata:ae(function(){pt._wD(this._s.id+": loadedmetadata")}),loadstart:ae(function(){pt._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:ae(function(){this._s._onbufferchange(0)}),playing:ae(function(){pt._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:ae(function(t){var e,i,n,s=this._s,o=0,l="progress"===t.type,r=t.target.buffered,a=t.loaded||0,h=t.total||1;if(s.buffered=[],r&&r.length){for(e=0,i=r.length;e<i;e++)s.buffered.push({start:1e3*r.start(e),end:1e3*r.end(e)});if(o=1e3*(r.end(0)-r.start(0)),a=Math.min(1,o/(1e3*t.target.duration)),l&&r.length>1){for(n=[],i=r.length,e=0;e<i;e++)n.push(1e3*t.target.buffered.start(e)+"-"+1e3*t.target.buffered.end(e));pt._wD(this._s.id+": progress, timeRanges: "+n.join(", "))}l&&!isNaN(a)&&pt._wD(this._s.id+": progress, "+Math.floor(100*a)+"% loaded")}isNaN(a)||(s._whileloading(a,h,s._get_html5_duration()),a&&h&&a===h&&ht.canplaythrough.call(this,t))}),ratechange:ae(function(){pt._wD(this._s.id+": ratechange")}),suspend:ae(function(t){var e=this._s;pt._wD(this._s.id+": suspend"),ht.progress.call(this,t),e._onsuspend()}),stalled:ae(function(){pt._wD(this._s.id+": stalled")}),timeupdate:ae(function(){this._s._onTimer()}),waiting:ae(function(){var t=this._s;pt._wD(this._s.id+": waiting"),t._onbufferchange(1)})},J=function(t){return!(!t||!(t.type||t.url||t.serverURL))&&(!(t.serverURL||t.type&&re(t.type))&&(t.type?Z({type:t.type}):Z({url:t.url})||pt.html5Only||t.url.match(/data\:/i)))},et=function(t){var i;return t&&(i=$t?"about:blank":pt.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",t.src=i,t._called_unload!==e&&(t._called_load=!1)),Xt&&(ot=null),i},Z=function(t){if(!pt.useHTML5Audio||!pt.hasHTML5)return!1;var i,n,s,o,l=t.url||null,r=t.type||null,a=pt.audioFormats;if(r&&pt.html5[r]!==e)return pt.html5[r]&&!re(r);if(!tt){for(o in tt=[],a)a.hasOwnProperty(o)&&(tt.push(o),a[o].related&&(tt=tt.concat(a[o].related)));tt=new RegExp("\\.("+tt.join("|")+")(\\?.*)?$","i")}return(s=l?l.toLowerCase().match(tt):null)&&s.length?s=s[1]:r?s=(-1!==(n=r.indexOf(";"))?r.substr(0,n):r).substr(6):i=!1,s&&pt.html5[s]!==e?i=pt.html5[s]&&!re(s):(r="audio/"+s,i=pt.html5.canPlayType({type:r}),pt.html5[s]=i,i=i&&pt.html5[r]&&!re(r)),i},nt=function(){if(!pt.useHTML5Audio||!pt.hasHTML5)return pt.html5.usingFlash=!0,Rt=!0,!1;var t,i,n,s,o=Audio!==e?qt&&opera.version()<10?new Audio(null):new Audio:null,l={};function r(t){var e,i,n=!1,l=!1;if(!o||"function"!=typeof o.canPlayType)return n;if(t instanceof Array){for(s=0,i=t.length;s<i;s++)(pt.html5[t[s]]||o.canPlayType(t[s]).match(pt.html5Test))&&(l=!0,pt.html5[t[s]]=!0,pt.flash[t[s]]=!!t[s].match(ee));n=l}else n=!(!(e=!(!o||"function"!=typeof o.canPlayType)&&o.canPlayType(t))||!e.match(pt.html5Test));return n}for(t in n=pt.audioFormats)if(n.hasOwnProperty(t)&&(i="audio/"+t,l[t]=r(n[t].type),l[i]=l[t],t.match(ee)?(pt.flash[t]=!0,pt.flash[i]=!0):(pt.flash[t]=!1,pt.flash[i]=!1),n[t]&&n[t].related))for(s=n[t].related.length-1;s>=0;s--)l["audio/"+n[t].related[s]]=l[t],pt.html5[n[t].related[s]]=l[t],pt.flash[n[t].related[s]]=l[t];return l.canPlayType=o?r:null,pt.html5=f(pt.html5,l),pt.html5.usingFlash=Q(),Rt=pt.html5.usingFlash,!0},S={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:_t+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:vt+"Verify that %s is a valid path.",tryDebug:"Try "+_t+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:vt+"Non-HTTP page ("+xt.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:vt+"Special case: Waiting for SWF to load with window focus...",waitForever:vt+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:vt+"Waiting for 100% SWF load...",needFunction:vt+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:vt+"_debug(): Current sound objects",waitOnload:vt+"Waiting for window.onload()",docLoaded:vt+"Document already loaded",onload:vt+"initComplete(): calling soundManager.onload()",onloadOK:_t+".onload() complete",didInit:vt+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:vt+"Failed to remove Flash node.",shutdown:_t+".disable(): Shutting down",queue:vt+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+F.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:vt+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:_t+".load(): current URL already assigned.",badFV:_t+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:vt+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:vt+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:_t+".setup(): allowed parameters: %s",setupError:_t+'.setup(): "%s" cannot be assigned with this method.',setupUndef:_t+'.setup(): Could not find option "%s"',setupLate:_t+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:vt+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:_t+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},H=function(){var t,e,i,n,s;if(n=(t=Ft.call(arguments)).shift(),(s=S&&S[n]?S[n]:"")&&t&&t.length)for(e=0,i=t.length;e<i;e++)s=s.replace("%s",t[e]);return s},z=function(t){return 8===h&&t.loops>1&&t.stream&&(c("as2loop"),t.stream=!1),t},V=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(pt._wD((e||"")+H("policy")),t.usePolicyFile=!0),t},W=function(t){Qt&&console.warn!==e?console.warn(t):pt._wD(t)},l=function(){return!1},j=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=l);e=null},A=function(t){t===e&&(t=!1),(Tt||t)&&pt.disable(t)},L=function(t){var e;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+pt.movieURL,pt.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},x=function(){8!==(h=parseInt(pt.flashVersion,10))&&9!==h&&(pt._wD(H("badFV",h,8)),pt.flashVersion=h=8);var t=pt.debugMode||pt.debugFlash?"_debug.swf":".swf";pt.useHTML5Audio&&!pt.html5Only&&pt.audioFormats.mp4.required&&h<9&&(pt._wD(H("needfl9")),pt.flashVersion=h=9),pt.version=pt.versionNumber+(pt.html5Only?" (HTML5-only mode)":9===h?" (AS3/Flash 9)":" (AS2/Flash 8)"),h>8?(pt.defaultOptions=f(pt.defaultOptions,pt.flash9Options),pt.features.buffering=!0,pt.defaultOptions=f(pt.defaultOptions,pt.movieStarOptions),pt.filePatterns.flash9=new RegExp("\\.(mp3|"+oe.join("|")+")(\\?.*)?$","i"),pt.features.movieStar=!0):pt.features.movieStar=!1,pt.filePattern=pt.filePatterns[8!==h?"flash9":"flash8"],pt.movieURL=(8===h?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),pt.features.peakData=pt.features.waveformData=pt.features.eqData=h>8},M=function(t,e){if(!gt)return!1;gt._setPolling(t,e)},E=function(){if(pt.debugURLParam.test(wt)&&(pt.setupOptions.debugMode=pt.debugMode=!0),o(pt.debugID))return!1;var t,e,i,n,s;if(pt.debugMode&&!o(pt.debugID)&&(!Qt||!pt.useConsole||!pt.consoleOnly)){for(s in(t=xt.createElement("div")).id=pt.debugID+"-toggle",n={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(xt.createTextNode("-")),t.onclick=X,t.title="Toggle SM2 debug console",yt.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand"),n)n.hasOwnProperty(s)&&(t.style[s]=n[s]);if((e=xt.createElement("div")).id=pt.debugID,e.style.display=pt.debugMode?"block":"none",pt.debugMode&&!o(t.id)){try{(i=P()).appendChild(t)}catch(t){throw new Error(H("domError")+" \n"+t.toString())}i.appendChild(e)}}i=null},G=this.getSoundById,c=function(t,e){return t?pt._wD(H(t),e):""},X=function(){var t=o(pt.debugID),e=o(pt.debugID+"-toggle");if(!t)return!1;St?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),St=!St},d=function(i,n,s){if(t.sm2Debugger!==e)try{sm2Debugger.handleEvent(i,n,s)}catch(t){return!1}return!0},R=function(){var t=[];return pt.debugMode&&t.push(F.sm2Debug),pt.debugFlash&&t.push(F.flashDebug),pt.useHighPerformance&&t.push(F.highPerf),t.join(" ")},B=function(){var t=H("fbHandler"),e=pt.getMoviePercent(),i=F,n={type:"FLASHBLOCK"};if(pt.html5Only)return!1;pt.ok()?(pt.didFlashBlock&&pt._wD(t+": Unblocked"),pt.oMC&&(pt.oMC.className=[R(),i.swfDefault,i.swfLoaded+(pt.didFlashBlock?" "+i.swfUnblocked:"")].join(" "))):(Rt&&(pt.oMC.className=R()+" "+i.swfDefault+" "+(null===e?i.swfTimedout:i.swfError),pt._wD(t+": "+H("fbTimeout")+(e?" ("+H("fbLoaded")+")":""))),pt.didFlashBlock=!0,_({type:"ontimeout",ignoreInit:!0,error:n}),O(n))},g=function(t,i,n){Ct[t]===e&&(Ct[t]=[]),Ct[t].push({method:i,scope:n||null,fired:!1})},_=function(t){if(t||(t={type:pt.ok()?"onready":"ontimeout"}),!Nt&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(pt.ok()||Tt&&!t.ignoreInit))return!1;var e,i,n={success:t&&t.ignoreInit?pt.ok():!Tt},s=t&&t.type&&Ct[t.type]||[],o=[],l=[n],r=Rt&&!pt.ok();for(t.error&&(l[0].error=t.error),e=0,i=s.length;e<i;e++)!0!==s[e].fired&&o.push(s[e]);if(o.length)for(e=0,i=o.length;e<i;e++)o[e].scope?o[e].method.apply(o[e].scope,l):o[e].method.apply(this,l),r||(o[e].fired=!0);return!0},v=function(){t.setTimeout(function(){pt.useFlashBlock&&B(),_(),"function"==typeof pt.onload&&(c("onload",1),pt.onload.apply(t),c("onloadOK",1)),pt.waitForWindowLoad&&st.add(t,"load",v)},1)},rt=function(){if(lt!==e)return lt;var i,n,s,o=!1,l=navigator,r=l.plugins,a=t.ActiveXObject;if(r&&r.length)n="application/x-shockwave-flash",(s=l.mimeTypes)&&s[n]&&s[n].enabledPlugin&&s[n].enabledPlugin.description&&(o=!0);else if(a!==e&&!yt.match(/MSAppHost/i)){try{i=new a("ShockwaveFlash.ShockwaveFlash")}catch(t){i=null}o=!!i,i=null}return lt=o,o},Q=function(){var t,e,i=pt.audioFormats;if(Vt&&!!yt.match(/os (1|2|3_0|3_1)\s/i)?(pt.hasHTML5=!1,pt.html5Only=!0,pt.oMC&&(pt.oMC.style.display="none")):pt.useHTML5Audio&&(pt.html5&&pt.html5.canPlayType||(pt._wD("SoundManager: No HTML5 Audio() support detected."),pt.hasHTML5=!1),Kt&&pt._wD(vt+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(lt?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),pt.useHTML5Audio&&pt.hasHTML5)for(e in K=!0,i)i.hasOwnProperty(e)&&i[e].required&&(pt.html5.canPlayType(i[e].type)?pt.preferFlash&&(pt.flash[e]||pt.flash[i[e].type])&&(t=!0):(K=!1,t=!0));return pt.ignoreFlash&&(t=!1,K=!0),pt.html5Only=pt.hasHTML5&&pt.useHTML5Audio&&!t,!pt.html5Only},Y=function(t){var e,i,n,s=0;if(t instanceof Array){for(e=0,i=t.length;e<i;e++)if(t[e]instanceof Object){if(pt.canPlayMIME(t[e].type)){s=e;break}}else if(pt.canPlayURL(t[e])){s=e;break}t[s].url&&(t[s]=t[s].url),n=t[s]}else n=t;return n},U=function(t){t._hasTimer||(t._hasTimer=!0,!Yt&&pt.html5PollingInterval&&(null===Ht&&0===Lt&&(Ht=setInterval(q,pt.html5PollingInterval)),Lt++))},$=function(t){t._hasTimer&&(t._hasTimer=!1,!Yt&&pt.html5PollingInterval&&Lt--)},q=function(){var t;if(null!==Ht&&!Lt)return clearInterval(Ht),Ht=null,!1;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].isHTML5&&pt.sounds[pt.soundIDs[t]]._hasTimer&&pt.sounds[pt.soundIDs[t]]._onTimer()},O=function(i){i=i!==e?i:{},"function"==typeof pt.onerror&&pt.onerror.apply(t,[{type:i.type!==e?i.type:null}]),i.fatal!==e&&i.fatal&&pt.disable()},at=function(){if(!Kt||!rt())return!1;var t,e,i=pt.audioFormats;for(e in i)if(i.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(pt._wD(_t+": Using flash fallback for "+e+" format"),pt.html5[e]=!1,i[e]&&i[e].related))for(t=i[e].related.length-1;t>=0;t--)pt.html5[i[e].related[t]]=!1},this._setSandboxType=function(t){var i=pt.sandbox;i.type=t,i.description=i.types[i.types[t]!==e?t:"unknown"],"localWithFile"===i.type?(i.noRemote=!0,i.noLocal=!1,c("secNote",2)):"localWithNetwork"===i.type?(i.noRemote=!1,i.noLocal=!0):"localTrusted"===i.type&&(i.noRemote=!1,i.noLocal=!1)},this._externalInterfaceOK=function(t){return!pt.swfLoaded&&(d("swf",!0),d("flashtojs",!0),pt.swfLoaded=!0,Zt=!1,Kt&&at(),t&&t.replace(/\+dev/i,"")===pt.versionNumber.replace(/\+dev/i,"")?void setTimeout(a,Gt?100:1):(e=_t+': Fatal: JavaScript file build "'+pt.versionNumber+'" does not match Flash SWF build "'+t+'" at '+pt.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(e)},0),!1));var e},D=function(t,i){if(kt&&It)return!1;function n(){var t,e=[],i=[];t="SoundManager "+pt.version+(!pt.html5Only&&pt.useHTML5Audio?pt.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),pt.html5Only?pt.html5PollingInterval&&e.push("html5PollingInterval ("+pt.html5PollingInterval+"ms)"):(pt.preferFlash&&e.push("preferFlash"),pt.useHighPerformance&&e.push("useHighPerformance"),pt.flashPollingInterval&&e.push("flashPollingInterval ("+pt.flashPollingInterval+"ms)"),pt.html5PollingInterval&&e.push("html5PollingInterval ("+pt.html5PollingInterval+"ms)"),pt.wmode&&e.push("wmode ("+pt.wmode+")"),pt.debugFlash&&e.push("debugFlash"),pt.useFlashBlock&&e.push("flashBlock")),e.length&&(i=i.concat([e.join(" + ")])),pt._wD(t+(i.length?" + "+i.join(", "):""),1),dt()}if(pt.html5Only)return x(),n(),pt.oMC=o(pt.movieID),a(),kt=!0,It=!0,!1;var s,l,r,h,d,c,u,f,p,m=i||pt.url,g=pt.altURL||m,_=P(),v=R(),b=xt.getElementsByTagName("html")[0];function y(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(s=b&&b.dir&&b.dir.match(/rtl/i),t=t===e?pt.id:t,x(),pt.url=L(ie?m:g),i=pt.url,pt.wmode=!pt.wmode&&pt.useHighPerformance?"transparent":pt.wmode,null!==pt.wmode&&(yt.match(/msie 8/i)||!Gt&&!pt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Bt.push(S.spcWmode),pt.wmode=null),l={name:t,id:t,src:i,quality:"high",allowScriptAccess:pt.allowScriptAccess,bgcolor:pt.bgColor,pluginspage:ne+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:pt.wmode,hasPriority:"true"},pt.debugFlash&&(l.FlashVars="debug=1"),pt.wmode||delete l.wmode,Gt)r=xt.createElement("div"),d=['<object id="'+t+'" data="'+i+'" type="'+l.type+'" title="'+l.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',y("movie",i),y("AllowScriptAccess",pt.allowScriptAccess),y("quality",l.quality),pt.wmode?y("wmode",pt.wmode):"",y("bgcolor",pt.bgColor),y("hasPriority","true"),pt.debugFlash?y("FlashVars",l.FlashVars):"","</object>"].join("");else for(h in r=xt.createElement("embed"),l)l.hasOwnProperty(h)&&r.setAttribute(h,l[h]);if(E(),v=R(),_=P())if(pt.oMC=o(pt.movieID)||xt.createElement("div"),pt.oMC.id)p=pt.oMC.className,pt.oMC.className=(p?p+" ":F.swfDefault)+(v?" "+v:""),pt.oMC.appendChild(r),Gt&&((c=pt.oMC.appendChild(xt.createElement("div"))).className=F.swfBox,c.innerHTML=d),It=!0;else{if(pt.oMC.id=pt.movieID,pt.oMC.className=F.swfDefault+" "+v,u=null,c=null,pt.useFlashBlock||(pt.useHighPerformance?u={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(u={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},s&&(u.left=Math.abs(parseInt(u.left,10))+"px"))),Ut&&(pt.oMC.style.zIndex=1e4),!pt.debugFlash)for(f in u)u.hasOwnProperty(f)&&(pt.oMC.style[f]=u[f]);try{Gt||pt.oMC.appendChild(r),_.appendChild(pt.oMC),Gt&&((c=pt.oMC.appendChild(xt.createElement("div"))).className=F.swfBox,c.innerHTML=d),It=!0}catch(t){throw new Error(H("domError")+" \n"+t.toString())}}return kt=!0,n(),!0},k=function(){return pt.html5Only?(D(),!1):!gt&&(pt.url?((gt=pt.getMovie(pt.id))||(Mt?(Gt?pt.oMC.innerHTML=Et:pt.oMC.appendChild(Mt),Mt=null,kt=!0):D(pt.id,pt.url),gt=pt.getMovie(pt.id)),"function"==typeof pt.oninitmovie&&setTimeout(pt.oninitmovie,1),ct(),!0):(c("noURL"),!1))},b=function(){setTimeout(y,1e3)},w=function(){t.setTimeout(function(){W(vt+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),pt.setup({preferFlash:!1}).reboot(),pt.didFlashBlock=!0,pt.beginDelayedInit()},1)},y=function(){var e,i=!1;return!!pt.url&&(!jt&&(jt=!0,st.remove(t,"load",b),lt&&Zt&&!Jt?(c("waitFocus"),!1):(Nt||(e=pt.getMoviePercent())>0&&e<100&&(i=!0),void setTimeout(function(){if(e=pt.getMoviePercent(),i)return jt=!1,pt._wD(H("waitSWF")),t.setTimeout(b,1),!1;Nt||(pt._wD(_t+": No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(pt.debugFlash?" "+H("checkSWF"):""),2),!ie&&e&&(c("localFail",2),pt.debugFlash||c("tryDebug",2)),0===e&&pt._wD(H("swf404",pt.url),1),d("flashtojs",!1,": Timed out"+(ie?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!Nt&&te&&(null===e?pt.useFlashBlock||0===pt.flashLoadTimeout?(pt.useFlashBlock&&B(),c("waitForever")):!pt.useFlashBlock&&K?w():(c("waitForever"),_({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===pt.flashLoadTimeout?c("waitForever"):!pt.useFlashBlock&&K?w():A(!0))},pt.flashLoadTimeout))))},C=function(){function e(){st.remove(t,"focus",C)}return Jt||!Zt?(e(),!0):(te=!0,Jt=!0,c("gotFocus"),jt=!1,b(),e(),!0)},ct=function(){Bt.length&&(pt._wD("SoundManager 2: "+Bt.join(" "),1),Bt=[])},dt=function(){ct();var t,e=[];if(pt.useHTML5Audio&&pt.hasHTML5){for(t in pt.audioFormats)pt.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+pt.html5[t]+(!pt.html5[t]&&Rt&&pt.flash[t]?" (using flash)":pt.preferFlash&&pt.flash[t]&&Rt?" (preferring flash)":pt.html5[t]?"":" ("+(pt.audioFormats[t].required?"required, ":"")+"and no flash support)"));pt._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},u=function(e){if(Nt)return!1;if(pt.html5Only)return c("sm2Loaded",1),Nt=!0,v(),d("onload",!0),!0;var i,n=!0;return pt.useFlashBlock&&pt.flashLoadTimeout&&!pt.getMoviePercent()||(Nt=!0),i={type:!lt&&Rt?"NO_FLASH":"INIT_TIMEOUT"},pt._wD("SoundManager 2 "+(Tt?"failed to load":"loaded")+" ("+(Tt?"Flash security/load error":"OK")+") "+String.fromCharCode(Tt?10006:10003),Tt?2:1),Tt||e?(pt.useFlashBlock&&pt.oMC&&(pt.oMC.className=R()+" "+(null===pt.getMoviePercent()?F.swfTimedout:F.swfError)),_({type:"ontimeout",error:i,ignoreInit:!0}),d("onload",!1),O(i),n=!1):d("onload",!0),Tt||(pt.waitForWindowLoad&&!Pt?(c("waitOnload"),st.add(t,"load",v)):(pt.waitForWindowLoad&&Pt&&c("docLoaded"),v())),n},r=function(){var t,i=pt.setupOptions;for(t in i)i.hasOwnProperty(t)&&(pt[t]===e?pt[t]=i[t]:pt[t]!==i[t]&&(pt.setupOptions[t]=pt[t]))},a=function(){if(Nt)return c("didInit"),!1;function e(){st.remove(t,"load",pt.beginDelayedInit)}if(pt.html5Only)return Nt||(e(),pt.enabled=!0,u()),!0;k();try{gt._externalInterfaceTest(!1),M(!0,pt.flashPollingInterval||(pt.useHighPerformance?10:50)),pt.debugMode||gt._disableDebug(),pt.enabled=!0,d("jstoflash",!0),pt.html5Only||st.add(t,"unload",l)}catch(t){return pt._wD("js/flash exception: "+t.toString()),d("jstoflash",!1),O({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),A(!0),u(),!1}return u(),e(),!0},I=function(){return!T&&(T=!0,r(),E(),!lt&&pt.hasHTML5&&(pt._wD("SoundManager 2: No Flash detected"+(pt.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),pt.setup({useHTML5Audio:!0,preferFlash:!1})),nt(),!lt&&Rt&&(Bt.push(S.needFlash),pt.setup({flashLoadTimeout:1})),xt.removeEventListener&&xt.removeEventListener("DOMContentLoaded",I,!1),k(),!0)},it=function(){return"complete"===xt.readyState&&(I(),xt.detachEvent("onreadystatechange",it)),!0},N=function(){Pt=!0,I(),st.remove(t,"load",N)},rt(),st.add(t,"focus",C),st.add(t,"load",b),st.add(t,"load",N),xt.addEventListener?xt.addEventListener("DOMContentLoaded",I,!1):xt.attachEvent?xt.attachEvent("onreadystatechange",it):(d("onload",!1),O({type:"NO_DOM2_EVENTS",fatal:!0}))}t.SM2_DEFER!==e&&SM2_DEFER||(i=new n),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=n,module.exports.soundManager=i):"function"==typeof define&&define.amd&&define(function(){return{constructor:n,getInstance:function(e){if(!t.soundManager&&e instanceof Function){var i=e(n);i instanceof n&&(t.soundManager=i)}return t.soundManager}}}),t.SoundManager=n,t.soundManager=i}(window),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){var i=[],n=i.slice,s=i.concat,o=i.push,l=i.indexOf,r={},a=r.toString,h=r.hasOwnProperty,d={},c=function(t,e){return new c.fn.init(t,e)},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,f=/^-ms-/,p=/-([\da-z])/gi,m=function(t,e){return e.toUpperCase()};function g(t){var e=t.length,i=c.type(t);return"function"!==i&&!c.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}c.fn=c.prototype={jquery:"1.11.1",constructor:c,selector:"",length:0,toArray:function(){return n.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:n.call(this)},pushStack:function(t){var e=c.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return c.each(this,t,e)},map:function(t){return this.pushStack(c.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:i.sort,splice:i.splice},c.extend=c.fn.extend=function(){var t,e,i,n,s,o,l=arguments[0]||{},r=1,a=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[r]||{},r++),"object"==typeof l||c.isFunction(l)||(l={}),r===a&&(l=this,r--);r<a;r++)if(null!=(s=arguments[r]))for(n in s)t=l[n],l!==(i=s[n])&&(h&&i&&(c.isPlainObject(i)||(e=c.isArray(i)))?(e?(e=!1,o=t&&c.isArray(t)?t:[]):o=t&&c.isPlainObject(t)?t:{},l[n]=c.extend(h,o,i)):void 0!==i&&(l[n]=i));return l},c.extend({expando:"jQuery"+("1.11.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===c.type(t)},isArray:Array.isArray||function(t){return"array"===c.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!c.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==c.type(t)||t.nodeType||c.isWindow(t))return!1;try{if(t.constructor&&!h.call(t,"constructor")&&!h.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(d.ownLast)for(e in t)return h.call(t,e);for(e in t);return void 0===e||h.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?r[a.call(t)]||"object":typeof t},globalEval:function(e){e&&c.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(f,"ms-").replace(p,m)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n=0,s=t.length,o=g(t);if(i){if(o)for(;n<s&&!1!==e.apply(t[n],i);n++);else for(n in t)if(!1===e.apply(t[n],i))break}else if(o)for(;n<s&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(u,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(g(Object(t))?c.merge(i,"string"==typeof t?[t]:t):o.call(i,t)),i},inArray:function(t,e,i){var n;if(e){if(l)return l.call(e,t,i);for(n=e.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;)t[s++]=e[n++];if(i!=i)for(;void 0!==e[n];)t[s++]=e[n++];return t.length=s,t},grep:function(t,e,i){for(var n=[],s=0,o=t.length,l=!i;s<o;s++)!e(t[s],s)!==l&&n.push(t[s]);return n},map:function(t,e,i){var n,o=0,l=t.length,r=[];if(g(t))for(;o<l;o++)null!=(n=e(t[o],o,i))&&r.push(n);else for(o in t)null!=(n=e(t[o],o,i))&&r.push(n);return s.apply([],r)},guid:1,proxy:function(t,e){var i,s,o;if("string"==typeof e&&(o=t[e],e=t,t=o),c.isFunction(t))return i=n.call(arguments,2),(s=function(){return t.apply(e||this,i.concat(n.call(arguments)))}).guid=t.guid=t.guid||c.guid++,s},now:function(){return+new Date},support:d}),c.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){r["[object "+e+"]"]=e.toLowerCase()});var _=function(t){var e,i,n,s,o,l,r,a,h,d,c,u,f,p,m,g,_,v,b,y="sizzle"+-new Date,w=t.document,x=0,C=0,S=ot(),k=ot(),I=ot(),N=function(t,e){return t===e&&(c=!0),0},T="undefined",P=1<<31,D={}.hasOwnProperty,O=[],M=O.pop,E=O.push,j=O.push,A=O.slice,L=O.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=R.replace("w","w#"),X="\\["+B+"*("+R+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",z=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+X+")*)|.*)\\)|)",V=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),W=new RegExp("^"+B+"*,"+B+"*"),G=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),U=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),$=new RegExp(z),q=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R.replace("w","w*")+")"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=/'|\\/g,it=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),nt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{j.apply(O=A.call(w.childNodes),w.childNodes),O[w.childNodes.length].nodeType}catch(t){j={apply:O.length?function(t,e){E.apply(t,A.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function st(t,e,n,s){var o,r,h,d,c,p,_,v,x,C;if((e?e.ownerDocument||e:w)!==f&&u(e),e=e||f,n=n||[],!t||"string"!=typeof t)return n;if(1!==(d=e.nodeType)&&9!==d)return[];if(m&&!s){if(o=Z.exec(t))if(h=o[1]){if(9===d){if(!(r=e.getElementById(h))||!r.parentNode)return n;if(r.id===h)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(h))&&b(e,r)&&r.id===h)return n.push(r),n}else{if(o[2])return j.apply(n,e.getElementsByTagName(t)),n;if((h=o[3])&&i.getElementsByClassName&&e.getElementsByClassName)return j.apply(n,e.getElementsByClassName(h)),n}if(i.qsa&&(!g||!g.test(t))){if(v=_=y,x=e,C=9===d&&t,1===d&&"object"!==e.nodeName.toLowerCase()){for(p=l(t),(_=e.getAttribute("id"))?v=_.replace(et,"\\$&"):e.setAttribute("id",v),v="[id='"+v+"'] ",c=p.length;c--;)p[c]=v+mt(p[c]);x=tt.test(t)&&ft(e.parentNode)||e,C=p.join(",")}if(C)try{return j.apply(n,x.querySelectorAll(C)),n}catch(t){}finally{_||e.removeAttribute("id")}}}return a(t.replace(V,"$1"),e,n,s)}function ot(){var t=[];return function e(i,s){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=s}}function lt(t){return t[y]=!0,t}function rt(t){var e=f.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function at(t,e){for(var i=t.split("|"),s=t.length;s--;)n.attrHandle[i[s]]=e}function ht(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||P)-(~t.sourceIndex||P);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ct(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function ut(t){return lt(function(e){return e=+e,lt(function(i,n){for(var s,o=t([],i.length,e),l=o.length;l--;)i[s=o[l]]&&(i[s]=!(n[s]=i[s]))})})}function ft(t){return t&&typeof t.getElementsByTagName!==T&&t}for(e in i=st.support={},o=st.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},u=st.setDocument=function(t){var e,s=t?t.ownerDocument||t:w,l=s.defaultView;return s!==f&&9===s.nodeType&&s.documentElement?(f=s,p=s.documentElement,m=!o(s),l&&l!==l.top&&(l.addEventListener?l.addEventListener("unload",function(){u()},!1):l.attachEvent&&l.attachEvent("onunload",function(){u()})),i.attributes=rt(function(t){return t.className="i",!t.getAttribute("className")}),i.getElementsByTagName=rt(function(t){return t.appendChild(s.createComment("")),!t.getElementsByTagName("*").length}),i.getElementsByClassName=J.test(s.getElementsByClassName)&&rt(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),i.getById=rt(function(t){return p.appendChild(t).id=y,!s.getElementsByName||!s.getElementsByName(y).length}),i.getById?(n.find.ID=function(t,e){if(typeof e.getElementById!==T&&m){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(t){var e=t.replace(it,nt);return function(t){return t.getAttribute("id")===e}}):(delete n.find.ID,n.filter.ID=function(t){var e=t.replace(it,nt);return function(t){var i=typeof t.getAttributeNode!==T&&t.getAttributeNode("id");return i&&i.value===e}}),n.find.TAG=i.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==T)return e.getElementsByTagName(t)}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==T&&m)return e.getElementsByClassName(t)},_=[],g=[],(i.qsa=J.test(s.querySelectorAll))&&(rt(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&g.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+B+"*(?:value|"+H+")"),t.querySelectorAll(":checked").length||g.push(":checked")}),rt(function(t){var e=s.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+B+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(i.matchesSelector=J.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&rt(function(t){i.disconnectedMatch=v.call(t,"div"),v.call(t,"[s!='']:x"),_.push("!=",z)}),g=g.length&&new RegExp(g.join("|")),_=_.length&&new RegExp(_.join("|")),e=J.test(p.compareDocumentPosition),b=e||J.test(p.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},N=e?function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===s||t.ownerDocument===w&&b(w,t)?-1:e===s||e.ownerDocument===w&&b(w,e)?1:d?L.call(d,t)-L.call(d,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var i,n=0,o=t.parentNode,l=e.parentNode,r=[t],a=[e];if(!o||!l)return t===s?-1:e===s?1:o?-1:l?1:d?L.call(d,t)-L.call(d,e):0;if(o===l)return ht(t,e);for(i=t;i=i.parentNode;)r.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;r[n]===a[n];)n++;return n?ht(r[n],a[n]):r[n]===w?-1:a[n]===w?1:0},s):f},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&u(t),e=e.replace(U,"='$1']"),i.matchesSelector&&m&&(!_||!_.test(e))&&(!g||!g.test(e)))try{var n=v.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return st(e,f,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!==f&&u(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==f&&u(t);var s=n.attrHandle[e.toLowerCase()],o=s&&D.call(n.attrHandle,e.toLowerCase())?s(t,e,!m):void 0;return void 0!==o?o:i.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],s=0,o=0;if(c=!i.detectDuplicates,d=!i.sortStable&&t.slice(0),t.sort(N),c){for(;e=t[o++];)e===t[o]&&(s=n.push(o));for(;s--;)t.splice(n[s],1)}return d=null,t},s=st.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=s(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=s(e);return i},(n=st.selectors={cacheLength:50,createPseudo:lt,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(it,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(it,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&$.test(i)&&(e=l(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(it,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==T&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(n){var s=st.attr(n,t);return null==s?"!="===e:!e||(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.slice(-i.length)===i:"~="===e?(" "+s+" ").indexOf(i)>-1:"|="===e&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),l="last"!==t.slice(-4),r="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,a){var h,d,c,u,f,p,m=o!==l?"nextSibling":"previousSibling",g=e.parentNode,_=r&&e.nodeName.toLowerCase(),v=!a&&!r;if(g){if(o){for(;m;){for(c=e;c=c[m];)if(r?c.nodeName.toLowerCase()===_:1===c.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[l?g.firstChild:g.lastChild],l&&v){for(f=(h=(d=g[y]||(g[y]={}))[t]||[])[0]===x&&h[1],u=h[0]===x&&h[2],c=f&&g.childNodes[f];c=++f&&c&&c[m]||(u=f=0)||p.pop();)if(1===c.nodeType&&++u&&c===e){d[t]=[x,f,u];break}}else if(v&&(h=(e[y]||(e[y]={}))[t])&&h[0]===x)u=h[1];else for(;(c=++f&&c&&c[m]||(u=f=0)||p.pop())&&((r?c.nodeName.toLowerCase()!==_:1!==c.nodeType)||!++u||(v&&((c[y]||(c[y]={}))[t]=[x,u]),c!==e)););return(u-=s)===n||u%n==0&&u/n>=0}}},PSEUDO:function(t,e){var i,s=n.pseudos[t]||n.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return s[y]?s(e):s.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?lt(function(t,i){for(var n,o=s(t,e),l=o.length;l--;)t[n=L.call(t,o[l])]=!(i[n]=o[l])}):function(t){return s(t,0,i)}):s}},pseudos:{not:lt(function(t){var e=[],i=[],n=r(t.replace(V,"$1"));return n[y]?lt(function(t,e,i,s){for(var o,l=n(t,null,s,[]),r=t.length;r--;)(o=l[r])&&(t[r]=!(e[r]=o))}):function(t,s,o){return e[0]=t,n(e,null,o,i),!i.pop()}}),has:lt(function(t){return function(e){return st(t,e).length>0}}),contains:lt(function(t){return function(e){return(e.textContent||e.innerText||s(e)).indexOf(t)>-1}}),lang:lt(function(t){return q.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(it,nt).toLowerCase(),function(e){var i;do{if(i=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ut(function(){return[0]}),last:ut(function(t,e){return[e-1]}),eq:ut(function(t,e,i){return[i<0?i+e:i]}),even:ut(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:ut(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:ut(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:ut(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ct(e);function pt(){}function mt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function gt(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=C++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,l){var r,a,h=[x,o];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if((r=(a=e[y]||(e[y]={}))[n])&&r[0]===x&&r[1]===o)return h[2]=r[2];if(a[n]=h,h[2]=t(e,i,l))return!0}}}function _t(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function vt(t,e,i,n,s){for(var o,l=[],r=0,a=t.length,h=null!=e;r<a;r++)(o=t[r])&&(i&&!i(o,n,s)||(l.push(o),h&&e.push(r)));return l}function bt(t,e,i,n,s,o){return n&&!n[y]&&(n=bt(n)),s&&!s[y]&&(s=bt(s,o)),lt(function(o,l,r,a){var h,d,c,u=[],f=[],p=l.length,m=o||function(t,e,i){for(var n=0,s=e.length;n<s;n++)st(t,e[n],i);return i}(e||"*",r.nodeType?[r]:r,[]),g=!t||!o&&e?m:vt(m,u,t,r,a),_=i?s||(o?t:p||n)?[]:l:g;if(i&&i(g,_,r,a),n)for(h=vt(_,f),n(h,[],r,a),d=h.length;d--;)(c=h[d])&&(_[f[d]]=!(g[f[d]]=c));if(o){if(s||t){if(s){for(h=[],d=_.length;d--;)(c=_[d])&&h.push(g[d]=c);s(null,_=[],h,a)}for(d=_.length;d--;)(c=_[d])&&(h=s?L.call(o,c):u[d])>-1&&(o[h]=!(l[h]=c))}}else _=vt(_===l?_.splice(p,_.length):_),s?s(null,l,_,a):j.apply(l,_)})}function yt(t){for(var e,i,s,o=t.length,l=n.relative[t[0].type],r=l||n.relative[" "],a=l?1:0,d=gt(function(t){return t===e},r,!0),c=gt(function(t){return L.call(e,t)>-1},r,!0),u=[function(t,i,n){return!l&&(n||i!==h)||((e=i).nodeType?d(t,i,n):c(t,i,n))}];a<o;a++)if(i=n.relative[t[a].type])u=[gt(_t(u),i)];else{if((i=n.filter[t[a].type].apply(null,t[a].matches))[y]){for(s=++a;s<o&&!n.relative[t[s].type];s++);return bt(a>1&&_t(u),a>1&&mt(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(V,"$1"),i,a<s&&yt(t.slice(a,s)),s<o&&yt(t=t.slice(s)),s<o&&mt(t))}u.push(i)}return _t(u)}return pt.prototype=n.filters=n.pseudos,n.setFilters=new pt,l=st.tokenize=function(t,e){var i,s,o,l,r,a,h,d=k[t+" "];if(d)return e?0:d.slice(0);for(r=t,a=[],h=n.preFilter;r;){for(l in i&&!(s=W.exec(r))||(s&&(r=r.slice(s[0].length)||r),a.push(o=[])),i=!1,(s=G.exec(r))&&(i=s.shift(),o.push({value:i,type:s[0].replace(V," ")}),r=r.slice(i.length)),n.filter)!(s=Y[l].exec(r))||h[l]&&!(s=h[l](s))||(i=s.shift(),o.push({value:i,type:l,matches:s}),r=r.slice(i.length));if(!i)break}return e?r.length:r?st.error(t):k(t,a).slice(0)},r=st.compile=function(t,e){var i,s=[],o=[],r=I[t+" "];if(!r){for(e||(e=l(t)),i=e.length;i--;)(r=yt(e[i]))[y]?s.push(r):o.push(r);(r=I(t,function(t,e){var i=e.length>0,s=t.length>0,o=function(o,l,r,a,d){var c,u,p,m=0,g="0",_=o&&[],v=[],b=h,y=o||s&&n.find.TAG("*",d),w=x+=null==b?1:Math.random()||.1,C=y.length;for(d&&(h=l!==f&&l);g!==C&&null!=(c=y[g]);g++){if(s&&c){for(u=0;p=t[u++];)if(p(c,l,r)){a.push(c);break}d&&(x=w)}i&&((c=!p&&c)&&m--,o&&_.push(c))}if(m+=g,i&&g!==m){for(u=0;p=e[u++];)p(_,v,l,r);if(o){if(m>0)for(;g--;)_[g]||v[g]||(v[g]=M.call(a));v=vt(v)}j.apply(a,v),d&&!o&&v.length>0&&m+e.length>1&&st.uniqueSort(a)}return d&&(x=w,h=b),_};return i?lt(o):o}(o,s))).selector=t}return r},a=st.select=function(t,e,s,o){var a,h,d,c,u,f="function"==typeof t&&t,p=!o&&l(t=f.selector||t);if(s=s||[],1===p.length){if((h=p[0]=p[0].slice(0)).length>2&&"ID"===(d=h[0]).type&&i.getById&&9===e.nodeType&&m&&n.relative[h[1].type]){if(!(e=(n.find.ID(d.matches[0].replace(it,nt),e)||[])[0]))return s;f&&(e=e.parentNode),t=t.slice(h.shift().value.length)}for(a=Y.needsContext.test(t)?0:h.length;a--&&(d=h[a],!n.relative[c=d.type]);)if((u=n.find[c])&&(o=u(d.matches[0].replace(it,nt),tt.test(h[0].type)&&ft(e.parentNode)||e))){if(h.splice(a,1),!(t=o.length&&mt(h)))return j.apply(s,o),s;break}}return(f||r(t,p))(o,e,!m,s,tt.test(t)&&ft(e.parentNode)||e),s},i.sortStable=y.split("").sort(N).join("")===y,i.detectDuplicates=!!c,u(),i.sortDetached=rt(function(t){return 1&t.compareDocumentPosition(f.createElement("div"))}),rt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||at("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),i.attributes&&rt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||at("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),rt(function(t){return null==t.getAttribute("disabled")})||at(H,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),st}(t);c.find=_,c.expr=_.selectors,c.expr[":"]=c.expr.pseudos,c.unique=_.uniqueSort,c.text=_.getText,c.isXMLDoc=_.isXML,c.contains=_.contains;var v=c.expr.match.needsContext,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function w(t,e,i){if(c.isFunction(e))return c.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return c.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(y.test(e))return c.filter(e,t,i);e=c.filter(e,t)}return c.grep(t,function(t){return c.inArray(t,e)>=0!==i})}c.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?c.find.matchesSelector(n,t)?[n]:[]:c.find.matches(t,c.grep(e,function(t){return 1===t.nodeType}))},c.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(c(t).filter(function(){for(e=0;e<s;e++)if(c.contains(n[e],this))return!0}));for(e=0;e<s;e++)c.find(t,n[e],i);return(i=this.pushStack(s>1?c.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(w(this,t||[],!1))},not:function(t){return this.pushStack(w(this,t||[],!0))},is:function(t){return!!w(this,"string"==typeof t&&v.test(t)?c(t):t||[],!1).length}});var x,C=t.document,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(c.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:S.exec(t))||!i[1]&&e)return!e||e.jquery?(e||x).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof c?e[0]:e,c.merge(this,c.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:C,!0)),b.test(i[1])&&c.isPlainObject(e))for(i in e)c.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((n=C.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return x.find(t);this.length=1,this[0]=n}return this.context=C,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):c.isFunction(t)?void 0!==x.ready?x.ready(t):t(c):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),c.makeArray(t,this))}).prototype=c.fn,x=c(C);var k=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}c.extend({dir:function(t,e,i){for(var n=[],s=t[e];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!c(s).is(i));)1===s.nodeType&&n.push(s),s=s[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),c.fn.extend({has:function(t){var e,i=c(t,this),n=i.length;return this.filter(function(){for(e=0;e<n;e++)if(c.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],l=v.test(t)||"string"!=typeof t?c(t,e||this.context):0;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(l?l.index(i)>-1:1===i.nodeType&&c.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?c.unique(o):o)},index:function(t){return t?"string"==typeof t?c.inArray(this[0],c(t)):c.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(c.unique(c.merge(this.get(),c(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),c.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return c.dir(t,"parentNode")},parentsUntil:function(t,e,i){return c.dir(t,"parentNode",i)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return c.dir(t,"nextSibling")},prevAll:function(t){return c.dir(t,"previousSibling")},nextUntil:function(t,e,i){return c.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return c.dir(t,"previousSibling",i)},siblings:function(t){return c.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return c.sibling(t.firstChild)},contents:function(t){return c.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:c.merge([],t.childNodes)}},function(t,e){c.fn[t]=function(i,n){var s=c.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=c.filter(n,s)),this.length>1&&(I[t]||(s=c.unique(s)),k.test(t)&&(s=s.reverse())),this.pushStack(s)}});var T,P=/\S+/g,D={};function O(){C.addEventListener?(C.removeEventListener("DOMContentLoaded",M,!1),t.removeEventListener("load",M,!1)):(C.detachEvent("onreadystatechange",M),t.detachEvent("onload",M))}function M(){(C.addEventListener||"load"===event.type||"complete"===C.readyState)&&(O(),c.ready())}c.Callbacks=function(t){var e,i,n,s,o,l,r=[],a=!(t="string"==typeof t?D[t]||function(t){var e=D[t]={};return c.each(t.match(P)||[],function(t,i){e[i]=!0}),e}(t):c.extend({},t)).once&&[],h=function(c){for(i=t.memory&&c,n=!0,o=l||0,l=0,s=r.length,e=!0;r&&o<s;o++)if(!1===r[o].apply(c[0],c[1])&&t.stopOnFalse){i=!1;break}e=!1,r&&(a?a.length&&h(a.shift()):i?r=[]:d.disable())},d={add:function(){if(r){var n=r.length;!function e(i){c.each(i,function(i,n){var s=c.type(n);"function"===s?t.unique&&d.has(n)||r.push(n):n&&n.length&&"string"!==s&&e(n)})}(arguments),e?s=r.length:i&&(l=n,h(i))}return this},remove:function(){return r&&c.each(arguments,function(t,i){for(var n;(n=c.inArray(i,r,n))>-1;)r.splice(n,1),e&&(n<=s&&s--,n<=o&&o--)}),this},has:function(t){return t?c.inArray(t,r)>-1:!(!r||!r.length)},empty:function(){return r=[],s=0,this},disable:function(){return r=a=i=void 0,this},disabled:function(){return!r},lock:function(){return a=void 0,i||d.disable(),this},locked:function(){return!a},fireWith:function(t,i){return!r||n&&!a||(i=[t,(i=i||[]).slice?i.slice():i],e?a.push(i):h(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},c.extend({Deferred:function(t){var e=[["resolve","done",c.Callbacks("once memory"),"resolved"],["reject","fail",c.Callbacks("once memory"),"rejected"],["notify","progress",c.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return c.Deferred(function(i){c.each(e,function(e,o){var l=c.isFunction(t[e])&&t[e];s[o[1]](function(){var t=l&&l.apply(this,arguments);t&&c.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,l?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?c.extend(t,n):n}},s={};return n.pipe=n.then,c.each(e,function(t,o){var l=o[2],r=o[3];n[o[1]]=l.add,r&&l.add(function(){i=r},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=l.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,s,o=0,l=n.call(arguments),r=l.length,a=1!==r||t&&c.isFunction(t.promise)?r:0,h=1===a?t:c.Deferred(),d=function(t,i,s){return function(o){i[t]=this,s[t]=arguments.length>1?n.call(arguments):o,s===e?h.notifyWith(i,s):--a||h.resolveWith(i,s)}};if(r>1)for(e=new Array(r),i=new Array(r),s=new Array(r);o<r;o++)l[o]&&c.isFunction(l[o].promise)?l[o].promise().done(d(o,s,l)).fail(h.reject).progress(d(o,i,e)):--a;return a||h.resolveWith(s,l),h.promise()}}),c.fn.ready=function(t){return c.ready.promise().done(t),this},c.extend({isReady:!1,readyWait:1,holdReady:function(t){t?c.readyWait++:c.ready(!0)},ready:function(t){if(!0===t?!--c.readyWait:!c.isReady){if(!C.body)return setTimeout(c.ready);c.isReady=!0,!0!==t&&--c.readyWait>0||(T.resolveWith(C,[c]),c.fn.triggerHandler&&(c(C).triggerHandler("ready"),c(C).off("ready")))}}}),c.ready.promise=function(e){if(!T)if(T=c.Deferred(),"complete"===C.readyState)setTimeout(c.ready);else if(C.addEventListener)C.addEventListener("DOMContentLoaded",M,!1),t.addEventListener("load",M,!1);else{C.attachEvent("onreadystatechange",M),t.attachEvent("onload",M);var i=!1;try{i=null==t.frameElement&&C.documentElement}catch(t){}i&&i.doScroll&&function t(){if(!c.isReady){try{i.doScroll("left")}catch(e){return setTimeout(t,50)}O(),c.ready()}}()}return T.promise(e)};var E,j="undefined";for(E in c(d))break;d.ownLast="0"!==E,d.inlineBlockNeedsLayout=!1,c(function(){var t,e,i,n;(i=C.getElementsByTagName("body")[0])&&i.style&&(e=C.createElement("div"),(n=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==j&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",d.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=C.createElement("div");if(null==d.deleteExpando){d.deleteExpando=!0;try{delete t.test}catch(t){d.deleteExpando=!1}}t=null}(),c.acceptData=function(t){var e=c.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var A=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,L=/([A-Z])/g;function H(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(L,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:A.test(i)?c.parseJSON(i):i)}catch(t){}c.data(t,e,i)}else i=void 0}return i}function B(t){var e;for(e in t)if(("data"!==e||!c.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function R(t,e,n,s){if(c.acceptData(t)){var o,l,r=c.expando,a=t.nodeType,h=a?c.cache:t,d=a?t[r]:t[r]&&r;if(d&&h[d]&&(s||h[d].data)||void 0!==n||"string"!=typeof e)return d||(d=a?t[r]=i.pop()||c.guid++:r),h[d]||(h[d]=a?{}:{toJSON:c.noop}),"object"!=typeof e&&"function"!=typeof e||(s?h[d]=c.extend(h[d],e):h[d].data=c.extend(h[d].data,e)),l=h[d],s||(l.data||(l.data={}),l=l.data),void 0!==n&&(l[c.camelCase(e)]=n),"string"==typeof e?null==(o=l[e])&&(o=l[c.camelCase(e)]):o=l,o}}function F(t,e,i){if(c.acceptData(t)){var n,s,o=t.nodeType,l=o?c.cache:t,r=o?t[c.expando]:c.expando;if(l[r]){if(e&&(n=i?l[r]:l[r].data)){s=(e=c.isArray(e)?e.concat(c.map(e,c.camelCase)):e in n?[e]:(e=c.camelCase(e))in n?[e]:e.split(" ")).length;for(;s--;)delete n[e[s]];if(i?!B(n):!c.isEmptyObject(n))return}(i||(delete l[r].data,B(l[r])))&&(o?c.cleanData([t],!0):d.deleteExpando||l!=l.window?delete l[r]:l[r]=null)}}}c.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?c.cache[t[c.expando]]:t[c.expando])&&!B(t)},data:function(t,e,i){return R(t,e,i)},removeData:function(t,e){return F(t,e)},_data:function(t,e,i){return R(t,e,i,!0)},_removeData:function(t,e){return F(t,e,!0)}}),c.fn.extend({data:function(t,e){var i,n,s,o=this[0],l=o&&o.attributes;if(void 0===t){if(this.length&&(s=c.data(o),1===o.nodeType&&!c._data(o,"parsedAttrs"))){for(i=l.length;i--;)l[i]&&0===(n=l[i].name).indexOf("data-")&&H(o,n=c.camelCase(n.slice(5)),s[n]);c._data(o,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){c.data(this,t)}):arguments.length>1?this.each(function(){c.data(this,t,e)}):o?H(o,t,c.data(o,t)):void 0},removeData:function(t){return this.each(function(){c.removeData(this,t)})}}),c.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=c._data(t,e),i&&(!n||c.isArray(i)?n=c._data(t,e,c.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=c.queue(t,e),n=i.length,s=i.shift(),o=c._queueHooks(t,e);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,function(){c.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return c._data(t,i)||c._data(t,i,{empty:c.Callbacks("once memory").add(function(){c._removeData(t,e+"queue"),c._removeData(t,i)})})}}),c.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?c.queue(this[0],t):void 0===e?this:this.each(function(){var i=c.queue(this,t,e);c._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&c.dequeue(this,t)})},dequeue:function(t){return this.each(function(){c.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=c.Deferred(),o=this,l=this.length,r=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";l--;)(i=c._data(o[l],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),s.promise(e)}});var X=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,z=["Top","Right","Bottom","Left"],V=function(t,e){return t=e||t,"none"===c.css(t,"display")||!c.contains(t.ownerDocument,t)},W=c.access=function(t,e,i,n,s,o,l){var r=0,a=t.length,h=null==i;if("object"===c.type(i))for(r in s=!0,i)c.access(t,e,r,i[r],!0,o,l);else if(void 0!==n&&(s=!0,c.isFunction(n)||(l=!0),h&&(l?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(c(t),i)})),e))for(;r<a;r++)e(t[r],i,l?n:n.call(t[r],r,e(t[r],i)));return s?t:h?e.call(t):a?e(t[0],i):o},G=/^(?:checkbox|radio)$/i;!function(){var t=C.createElement("input"),e=C.createElement("div"),i=C.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d.leadingWhitespace=3===e.firstChild.nodeType,d.tbody=!e.getElementsByTagName("tbody").length,d.htmlSerialize=!!e.getElementsByTagName("link").length,d.html5Clone="<:nav></:nav>"!==C.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),d.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",d.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,d.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){d.noCloneEvent=!1}),e.cloneNode(!0).click()),null==d.deleteExpando){d.deleteExpando=!0;try{delete e.test}catch(t){d.deleteExpando=!1}}}(),function(){var e,i,n=C.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(d[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),d[e+"Bubbles"]=!1===n.attributes[i].expando);n=null}();var U=/^(?:input|select|textarea)$/i,$=/^key/,q=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,K=/^([^.]*)(?:\.(.+)|)$/;function Q(){return!0}function J(){return!1}function Z(){try{return C.activeElement}catch(t){}}function tt(t){var e=et.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}c.event={global:{},add:function(t,e,i,n,s){var o,l,r,a,h,d,u,f,p,m,g,_=c._data(t);if(_){for(i.handler&&(i=(a=i).handler,s=a.selector),i.guid||(i.guid=c.guid++),(l=_.events)||(l=_.events={}),(d=_.handle)||((d=_.handle=function(t){return typeof c===j||t&&c.event.triggered===t.type?void 0:c.event.dispatch.apply(d.elem,arguments)}).elem=t),r=(e=(e||"").match(P)||[""]).length;r--;)p=g=(o=K.exec(e[r])||[])[1],m=(o[2]||"").split(".").sort(),p&&(h=c.event.special[p]||{},p=(s?h.delegateType:h.bindType)||p,h=c.event.special[p]||{},u=c.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&c.expr.match.needsContext.test(s),namespace:m.join(".")},a),(f=l[p])||((f=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,m,d)||(t.addEventListener?t.addEventListener(p,d,!1):t.attachEvent&&t.attachEvent("on"+p,d))),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?f.splice(f.delegateCount++,0,u):f.push(u),c.event.global[p]=!0);t=null}},remove:function(t,e,i,n,s){var o,l,r,a,h,d,u,f,p,m,g,_=c.hasData(t)&&c._data(t);if(_&&(d=_.events)){for(h=(e=(e||"").match(P)||[""]).length;h--;)if(p=g=(r=K.exec(e[h])||[])[1],m=(r[2]||"").split(".").sort(),p){for(u=c.event.special[p]||{},f=d[p=(n?u.delegateType:u.bindType)||p]||[],r=r[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!s&&g!==l.origType||i&&i.guid!==l.guid||r&&!r.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,u.remove&&u.remove.call(t,l));a&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,m,_.handle)||c.removeEvent(t,p,_.handle),delete d[p])}else for(p in d)c.event.remove(t,p+e[h],i,n,!0);c.isEmptyObject(d)&&(delete _.handle,c._removeData(t,"events"))}},trigger:function(e,i,n,s){var o,l,r,a,d,u,f,p=[n||C],m=h.call(e,"type")?e.type:e,g=h.call(e,"namespace")?e.namespace.split("."):[];if(r=u=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Y.test(m+c.event.triggered)&&(m.indexOf(".")>=0&&(m=(g=m.split(".")).shift(),g.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[c.expando]?e:new c.Event(m,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=g.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:c.makeArray(i,[e]),d=c.event.special[m]||{},s||!d.trigger||!1!==d.trigger.apply(n,i))){if(!s&&!d.noBubble&&!c.isWindow(n)){for(a=d.delegateType||m,Y.test(a+m)||(r=r.parentNode);r;r=r.parentNode)p.push(r),u=r;u===(n.ownerDocument||C)&&p.push(u.defaultView||u.parentWindow||t)}for(f=0;(r=p[f++])&&!e.isPropagationStopped();)e.type=f>1?a:d.bindType||m,(o=(c._data(r,"events")||{})[e.type]&&c._data(r,"handle"))&&o.apply(r,i),(o=l&&r[l])&&o.apply&&c.acceptData(r)&&(e.result=o.apply(r,i),!1===e.result&&e.preventDefault());if(e.type=m,!s&&!e.isDefaultPrevented()&&(!d._default||!1===d._default.apply(p.pop(),i))&&c.acceptData(n)&&l&&n[m]&&!c.isWindow(n)){(u=n[l])&&(n[l]=null),c.event.triggered=m;try{n[m]()}catch(t){}c.event.triggered=void 0,u&&(n[l]=u)}return e.result}},dispatch:function(t){t=c.event.fix(t);var e,i,s,o,l,r,a=n.call(arguments),h=(c._data(this,"events")||{})[t.type]||[],d=c.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,t)){for(r=c.event.handlers.call(this,t,h),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,l=0;(s=o.handlers[l++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(s.namespace)||(t.handleObj=s,t.data=s.data,void 0!==(i=((c.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,a))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,l=[],r=e.delegateCount,a=t.target;if(r&&a.nodeType&&(!t.button||"click"!==t.type))for(;a!=this;a=a.parentNode||this)if(1===a.nodeType&&(!0!==a.disabled||"click"!==t.type)){for(s=[],o=0;o<r;o++)void 0===s[i=(n=e[o]).selector+" "]&&(s[i]=n.needsContext?c(i,this).index(a)>=0:c.find(i,this,null,[a]).length),s[i]&&s.push(n);s.length&&l.push({elem:a,handlers:s})}return r<e.length&&l.push({elem:this,handlers:e.slice(r)}),l},fix:function(t){if(t[c.expando])return t;var e,i,n,s=t.type,o=t,l=this.fixHooks[s];for(l||(this.fixHooks[s]=l=q.test(s)?this.mouseHooks:$.test(s)?this.keyHooks:{}),n=l.props?this.props.concat(l.props):this.props,t=new c.Event(o),e=n.length;e--;)t[i=n[e]]=o[i];return t.target||(t.target=o.srcElement||C),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,l.filter?l.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button,l=e.fromElement;return null==t.pageX&&null!=e.clientX&&(s=(n=t.target.ownerDocument||C).documentElement,i=n.body,t.pageX=e.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&l&&(t.relatedTarget=l===t.target?e.toElement:l),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Z()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===Z()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(c.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return c.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=c.extend(new c.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?c.event.trigger(s,null,e):c.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},c.removeEvent=C.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===j&&(t[n]=null),t.detachEvent(n,i))},c.Event=function(t,e){if(!(this instanceof c.Event))return new c.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Q:J):this.type=t,e&&c.extend(this,e),this.timeStamp=t&&t.timeStamp||c.now(),this[c.expando]=!0},c.Event.prototype={isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Q,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Q,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Q,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},c.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){c.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,s=t.handleObj;return n&&(n===this||c.contains(this,n))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),d.submitBubbles||(c.event.special.submit={setup:function(){if(c.nodeName(this,"form"))return!1;c.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=c.nodeName(e,"input")||c.nodeName(e,"button")?e.form:void 0;i&&!c._data(i,"submitBubbles")&&(c.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),c._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&c.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(c.nodeName(this,"form"))return!1;c.event.remove(this,"._submit")}}),d.changeBubbles||(c.event.special.change={setup:function(){if(U.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(c.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),c.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),c.event.simulate("change",this,t,!0)})),!1;c.event.add(this,"beforeactivate._change",function(t){var e=t.target;U.test(e.nodeName)&&!c._data(e,"changeBubbles")&&(c.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||c.event.simulate("change",this.parentNode,t,!0)}),c._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return c.event.remove(this,"._change"),!U.test(this.nodeName)}}),d.focusinBubbles||c.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){c.event.simulate(e,t.target,c.event.fix(t),!0)};c.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=c._data(n,e);s||n.addEventListener(t,i,!0),c._data(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=c._data(n,e)-1;s?c._data(n,e,s):(n.removeEventListener(t,i,!0),c._removeData(n,e))}}}),c.fn.extend({on:function(t,e,i,n,s){var o,l;if("object"==typeof t){for(o in"string"!=typeof e&&(i=i||e,e=void 0),t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=J;else if(!n)return this;return 1===s&&(l=n,(n=function(t){return c().off(t),l.apply(this,arguments)}).guid=l.guid||(l.guid=c.guid++)),this.each(function(){c.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,c(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=J),this.each(function(){c.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){c.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return c.event.trigger(t,e,i,!0)}});var et="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",it=/ jQuery\d+="(?:null|\d+)"/g,nt=new RegExp("<(?:"+et+")[\\s/>]","i"),st=/^\s+/,ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lt=/<([\w:]+)/,rt=/<tbody/i,at=/<|&#?\w+;/,ht=/<(?:script|style|link)/i,dt=/checked\s*(?:[^=]|=\s*.checked.)/i,ct=/^$|\/(?:java|ecma)script/i,ut=/^true\/(.*)/,ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,pt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:d.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},mt=tt(C).appendChild(C.createElement("div"));function gt(t,e){var i,n,s=0,o=typeof t.getElementsByTagName!==j?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==j?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[s]);s++)!e||c.nodeName(n,e)?o.push(n):c.merge(o,gt(n,e));return void 0===e||e&&c.nodeName(t,e)?c.merge([t],o):o}function _t(t){G.test(t.type)&&(t.defaultChecked=t.checked)}function vt(t,e){return c.nodeName(t,"table")&&c.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function bt(t){return t.type=(null!==c.find.attr(t,"type"))+"/"+t.type,t}function yt(t){var e=ut.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function wt(t,e){for(var i,n=0;null!=(i=t[n]);n++)c._data(i,"globalEval",!e||c._data(e[n],"globalEval"))}function xt(t,e){if(1===e.nodeType&&c.hasData(t)){var i,n,s,o=c._data(t),l=c._data(e,o),r=o.events;if(r)for(i in delete l.handle,l.events={},r)for(n=0,s=r[i].length;n<s;n++)c.event.add(e,i,r[i][n]);l.data&&(l.data=c.extend({},l.data))}}function Ct(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!d.noCloneEvent&&e[c.expando]){for(n in(s=c._data(e)).events)c.removeEvent(e,n,s.handle);e.removeAttribute(c.expando)}"script"===i&&e.text!==t.text?(bt(e).text=t.text,yt(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),d.html5Clone&&t.innerHTML&&!c.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&G.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}}pt.optgroup=pt.option,pt.tbody=pt.tfoot=pt.colgroup=pt.caption=pt.thead,pt.th=pt.td,c.extend({clone:function(t,e,i){var n,s,o,l,r,a=c.contains(t.ownerDocument,t);if(d.html5Clone||c.isXMLDoc(t)||!nt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(mt.innerHTML=t.outerHTML,mt.removeChild(o=mt.firstChild)),!(d.noCloneEvent&&d.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||c.isXMLDoc(t)))for(n=gt(o),r=gt(t),l=0;null!=(s=r[l]);++l)n[l]&&Ct(s,n[l]);if(e)if(i)for(r=r||gt(t),n=n||gt(o),l=0;null!=(s=r[l]);l++)xt(s,n[l]);else xt(t,o);return(n=gt(o,"script")).length>0&&wt(n,!a&&gt(t,"script")),n=r=s=null,o},buildFragment:function(t,e,i,n){for(var s,o,l,r,a,h,u,f=t.length,p=tt(e),m=[],g=0;g<f;g++)if((o=t[g])||0===o)if("object"===c.type(o))c.merge(m,o.nodeType?[o]:o);else if(at.test(o)){for(r=r||p.appendChild(e.createElement("div")),a=(lt.exec(o)||["",""])[1].toLowerCase(),u=pt[a]||pt._default,r.innerHTML=u[1]+o.replace(ot,"<$1></$2>")+u[2],s=u[0];s--;)r=r.lastChild;if(!d.leadingWhitespace&&st.test(o)&&m.push(e.createTextNode(st.exec(o)[0])),!d.tbody)for(s=(o="table"!==a||rt.test(o)?"<table>"!==u[1]||rt.test(o)?0:r:r.firstChild)&&o.childNodes.length;s--;)c.nodeName(h=o.childNodes[s],"tbody")&&!h.childNodes.length&&o.removeChild(h);for(c.merge(m,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=p.lastChild}else m.push(e.createTextNode(o));for(r&&p.removeChild(r),d.appendChecked||c.grep(gt(m,"input"),_t),g=0;o=m[g++];)if((!n||-1===c.inArray(o,n))&&(l=c.contains(o.ownerDocument,o),r=gt(p.appendChild(o),"script"),l&&wt(r),i))for(s=0;o=r[s++];)ct.test(o.type||"")&&i.push(o);return r=null,p},cleanData:function(t,e){for(var n,s,o,l,r=0,a=c.expando,h=c.cache,u=d.deleteExpando,f=c.event.special;null!=(n=t[r]);r++)if((e||c.acceptData(n))&&(l=(o=n[a])&&h[o])){if(l.events)for(s in l.events)f[s]?c.event.remove(n,s):c.removeEvent(n,s,l.handle);h[o]&&(delete h[o],u?delete n[a]:typeof n.removeAttribute!==j?n.removeAttribute(a):n[a]=null,i.push(o))}}}),c.fn.extend({text:function(t){return W(this,function(t){return void 0===t?c.text(this):this.empty().append((this[0]&&this[0].ownerDocument||C).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||vt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=vt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?c.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||c.cleanData(gt(i)),i.parentNode&&(e&&c.contains(i.ownerDocument,i)&&wt(gt(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&c.cleanData(gt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&c.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return c.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(it,""):void 0;if("string"==typeof t&&!ht.test(t)&&(d.htmlSerialize||!nt.test(t))&&(d.leadingWhitespace||!st.test(t))&&!pt[(lt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(ot,"<$1></$2>");try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(c.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,c.cleanData(gt(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=s.apply([],t);var i,n,o,l,r,a,h=0,u=this.length,f=this,p=u-1,m=t[0],g=c.isFunction(m);if(g||u>1&&"string"==typeof m&&!d.checkClone&&dt.test(m))return this.each(function(i){var n=f.eq(i);g&&(t[0]=m.call(this,i,n.html())),n.domManip(t,e)});if(u&&(i=(a=c.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===a.childNodes.length&&(a=i),i)){for(o=(l=c.map(gt(a,"script"),bt)).length;h<u;h++)n=a,h!==p&&(n=c.clone(n,!0,!0),o&&c.merge(l,gt(n,"script"))),e.call(this[h],n,h);if(o)for(r=l[l.length-1].ownerDocument,c.map(l,yt),h=0;h<o;h++)n=l[h],ct.test(n.type||"")&&!c._data(n,"globalEval")&&c.contains(r,n)&&(n.src?c._evalUrl&&c._evalUrl(n.src):c.globalEval((n.text||n.textContent||n.innerHTML||"").replace(ft,"")));a=i=null}return this}}),c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){c.fn[t]=function(t){for(var i,n=0,s=[],l=c(t),r=l.length-1;n<=r;n++)i=n===r?this:this.clone(!0),c(l[n])[e](i),o.apply(s,i.get());return this.pushStack(s)}});var St,kt,It={};function Nt(e,i){var n,s=c(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:c.css(s[0],"display");return s.detach(),o}function Tt(t){var e=C,i=It[t];return i||("none"!==(i=Nt(t,e))&&i||((e=((St=(St||c("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||St[0].contentDocument).document).write(),e.close(),i=Nt(t,e),St.detach()),It[t]=i),i}d.shrinkWrapBlocks=function(){return null!=kt?kt:(kt=!1,(e=C.getElementsByTagName("body")[0])&&e.style?(t=C.createElement("div"),(i=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),typeof t.style.zoom!==j&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(C.createElement("div")).style.width="5px",kt=3!==t.offsetWidth),e.removeChild(i),kt):void 0);var t,e,i};var Pt,Dt,Ot=/^margin/,Mt=new RegExp("^("+X+")(?!px)[a-z%]+$","i"),Et=/^(top|right|bottom|left)$/;function jt(t,e){return{get:function(){var i=t();if(null!=i){if(!i)return(this.get=e).apply(this,arguments);delete this.get}}}}t.getComputedStyle?(Pt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},Dt=function(t,e,i){var n,s,o,l,r=t.style;return l=(i=i||Pt(t))?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==l||c.contains(t.ownerDocument,t)||(l=c.style(t,e)),Mt.test(l)&&Ot.test(e)&&(n=r.width,s=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=l,l=i.width,r.width=n,r.minWidth=s,r.maxWidth=o)),void 0===l?l:l+""}):C.documentElement.currentStyle&&(Pt=function(t){return t.currentStyle},Dt=function(t,e,i){var n,s,o,l,r=t.style;return null==(l=(i=i||Pt(t))?i[e]:void 0)&&r&&r[e]&&(l=r[e]),Mt.test(l)&&!Et.test(e)&&(n=r.left,(o=(s=t.runtimeStyle)&&s.left)&&(s.left=t.currentStyle.left),r.left="fontSize"===e?"1em":l,l=r.pixelLeft+"px",r.left=n,o&&(s.left=o)),void 0===l?l:l+""||"auto"}),function(){var e,i,n,s,o,l,r;function a(){var e,i,n,a;(i=C.getElementsByTagName("body")[0])&&i.style&&(e=C.createElement("div"),(n=C.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=o=!1,r=!0,t.getComputedStyle&&(s="1%"!==(t.getComputedStyle(e,null)||{}).top,o="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,(a=e.appendChild(C.createElement("div"))).style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",e.style.width="1px",r=!parseFloat((t.getComputedStyle(a,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(a=e.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(l=0===a[0].offsetHeight)&&(a[0].style.display="",a[1].style.display="none",l=0===a[0].offsetHeight),i.removeChild(n))}(e=C.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(i=(n=e.getElementsByTagName("a")[0])&&n.style)&&(i.cssText="float:left;opacity:.5",d.opacity="0.5"===i.opacity,d.cssFloat=!!i.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===e.style.backgroundClip,d.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,c.extend(d,{reliableHiddenOffsets:function(){return null==l&&a(),l},boxSizingReliable:function(){return null==o&&a(),o},pixelPosition:function(){return null==s&&a(),s},reliableMarginRight:function(){return null==r&&a(),r}}))}(),c.swap=function(t,e,i,n){var s,o,l={};for(o in e)l[o]=t.style[o],t.style[o]=e[o];for(o in s=i.apply(t,n||[]),e)t.style[o]=l[o];return s};var At=/alpha\([^)]*\)/i,Lt=/opacity\s*=\s*([^)]*)/,Ht=/^(none|table(?!-c[ea]).+)/,Bt=new RegExp("^("+X+")(.*)$","i"),Rt=new RegExp("^([+-])=("+X+")","i"),Ft={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},zt=["Webkit","O","Moz","ms"];function Vt(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=zt.length;s--;)if((e=zt[s]+i)in t)return e;return n}function Wt(t,e){for(var i,n,s,o=[],l=0,r=t.length;l<r;l++)(n=t[l]).style&&(o[l]=c._data(n,"olddisplay"),i=n.style.display,e?(o[l]||"none"!==i||(n.style.display=""),""===n.style.display&&V(n)&&(o[l]=c._data(n,"olddisplay",Tt(n.nodeName)))):(s=V(n),(i&&"none"!==i||!s)&&c._data(n,"olddisplay",s?i:c.css(n,"display"))));for(l=0;l<r;l++)(n=t[l]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[l]||"":"none"));return t}function Gt(t,e,i){var n=Bt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function Ut(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,l=0;o<4;o+=2)"margin"===i&&(l+=c.css(t,i+z[o],!0,s)),n?("content"===i&&(l-=c.css(t,"padding"+z[o],!0,s)),"margin"!==i&&(l-=c.css(t,"border"+z[o]+"Width",!0,s))):(l+=c.css(t,"padding"+z[o],!0,s),"padding"!==i&&(l+=c.css(t,"border"+z[o]+"Width",!0,s)));return l}function $t(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=Pt(t),l=d.boxSizing&&"border-box"===c.css(t,"boxSizing",!1,o);if(s<=0||null==s){if(((s=Dt(t,e,o))<0||null==s)&&(s=t.style[e]),Mt.test(s))return s;n=l&&(d.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+Ut(t,e,i||(l?"border":"content"),n,o)+"px"}function qt(t,e,i,n,s){return new qt.prototype.init(t,e,i,n,s)}c.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Dt(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:d.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,l,r=c.camelCase(e),a=t.style;if(e=c.cssProps[r]||(c.cssProps[r]=Vt(a,r)),l=c.cssHooks[e]||c.cssHooks[r],void 0===i)return l&&"get"in l&&void 0!==(s=l.get(t,!1,n))?s:a[e];if("string"===(o=typeof i)&&(s=Rt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(c.css(t,e)),o="number"),null!=i&&i==i&&("number"!==o||c.cssNumber[r]||(i+="px"),d.clearCloneStyle||""!==i||0!==e.indexOf("background")||(a[e]="inherit"),!(l&&"set"in l&&void 0===(i=l.set(t,i,n)))))try{a[e]=i}catch(t){}}},css:function(t,e,i,n){var s,o,l,r=c.camelCase(e);return e=c.cssProps[r]||(c.cssProps[r]=Vt(t.style,r)),(l=c.cssHooks[e]||c.cssHooks[r])&&"get"in l&&(o=l.get(t,!0,i)),void 0===o&&(o=Dt(t,e,n)),"normal"===o&&e in Xt&&(o=Xt[e]),""===i||i?(s=parseFloat(o),!0===i||c.isNumeric(s)?s||0:o):o}}),c.each(["height","width"],function(t,e){c.cssHooks[e]={get:function(t,i,n){if(i)return Ht.test(c.css(t,"display"))&&0===t.offsetWidth?c.swap(t,Ft,function(){return $t(t,e,n)}):$t(t,e,n)},set:function(t,i,n){var s=n&&Pt(t);return Gt(0,i,n?Ut(t,e,n,d.boxSizing&&"border-box"===c.css(t,"boxSizing",!1,s),s):0)}}}),d.opacity||(c.cssHooks.opacity={get:function(t,e){return Lt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=c.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===c.trim(o.replace(At,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=At.test(o)?o.replace(At,s):o+" "+s)}}),c.cssHooks.marginRight=jt(d.reliableMarginRight,function(t,e){if(e)return c.swap(t,{display:"inline-block"},Dt,[t,"marginRight"])}),c.each({margin:"",padding:"",border:"Width"},function(t,e){c.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];n<4;n++)s[t+z[n]+e]=o[n]||o[n-2]||o[0];return s}},Ot.test(t)||(c.cssHooks[t+e].set=Gt)}),c.fn.extend({css:function(t,e){return W(this,function(t,e,i){var n,s,o={},l=0;if(c.isArray(e)){for(n=Pt(t),s=e.length;l<s;l++)o[e[l]]=c.css(t,e[l],!1,n);return o}return void 0!==i?c.style(t,e,i):c.css(t,e)},t,e,arguments.length>1)},show:function(){return Wt(this,!0)},hide:function(){return Wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){V(this)?c(this).show():c(this).hide()})}}),c.Tween=qt,qt.prototype={constructor:qt,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(c.cssNumber[i]?"":"px")},cur:function(){var t=qt.propHooks[this.prop];return t&&t.get?t.get(this):qt.propHooks._default.get(this)},run:function(t){var e,i=qt.propHooks[this.prop];return this.options.duration?this.pos=e=c.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):qt.propHooks._default.set(this),this}},qt.prototype.init.prototype=qt.prototype,qt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=c.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){c.fx.step[t.prop]?c.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[c.cssProps[t.prop]]||c.cssHooks[t.prop])?c.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},qt.propHooks.scrollTop=qt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},c.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},c.fx=qt.prototype.init,c.fx.step={};var Yt,Kt,Qt,Jt,Zt,te,ee,ie=/^(?:toggle|show|hide)$/,ne=new RegExp("^(?:([+-])=|)("+X+")([a-z%]*)$","i"),se=/queueHooks$/,oe=[function(t,e,i){var n,s,o,l,r,a,h,u=this,f={},p=t.style,m=t.nodeType&&V(t),g=c._data(t,"fxshow");i.queue||(null==(r=c._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,u.always(function(){u.always(function(){r.unqueued--,c.queue(t,"fx").length||r.empty.fire()})}));1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],h=c.css(t,"display"),"inline"===("none"===h?c._data(t,"olddisplay")||Tt(t.nodeName):h)&&"none"===c.css(t,"float")&&(d.inlineBlockNeedsLayout&&"inline"!==Tt(t.nodeName)?p.zoom=1:p.display="inline-block"));i.overflow&&(p.overflow="hidden",d.shrinkWrapBlocks()||u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],ie.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;m=!0}f[n]=g&&g[n]||c.style(t,n)}else h=void 0;if(c.isEmptyObject(f))"inline"===("none"===h?Tt(t.nodeName):h)&&(p.display=h);else for(n in g?"hidden"in g&&(m=g.hidden):g=c._data(t,"fxshow",{}),o&&(g.hidden=!m),m?c(t).show():u.done(function(){c(t).hide()}),u.done(function(){var e;for(e in c._removeData(t,"fxshow"),f)c.style(t,e,f[e])}),f)l=he(m?g[n]:0,n,u),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start="width"===n||"height"===n?1:0))}],le={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=ne.exec(e),o=s&&s[3]||(c.cssNumber[t]?"":"px"),l=(c.cssNumber[t]||"px"!==o&&+n)&&ne.exec(c.css(i.elem,t)),r=1,a=20;if(l&&l[3]!==o){o=o||l[3],s=s||[],l=+n||1;do{l/=r=r||".5",c.style(i.elem,t,l+o)}while(r!==(r=i.cur()/n)&&1!==r&&--a)}return s&&(l=i.start=+l||+n||0,i.unit=o,i.end=s[1]?l+(s[1]+1)*s[2]:+s[2]),i}]};function re(){return setTimeout(function(){Yt=void 0}),Yt=c.now()}function ae(t,e){var i,n={height:t},s=0;for(e=e?1:0;s<4;s+=2-e)n["margin"+(i=z[s])]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function he(t,e,i){for(var n,s=(le[e]||[]).concat(le["*"]),o=0,l=s.length;o<l;o++)if(n=s[o].call(i,e,t))return n}function de(t,e,i){var n,s,o=0,l=oe.length,r=c.Deferred().always(function(){delete a.elem}),a=function(){if(s)return!1;for(var e=Yt||re(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),o=0,l=h.tweens.length;o<l;o++)h.tweens[o].run(n);return r.notifyWith(t,[h,n,i]),n<1&&l?i:(r.resolveWith(t,[h]),!1)},h=r.promise({elem:t,props:c.extend({},e),opts:c.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Yt||re(),duration:i.duration,tweens:[],createTween:function(e,i){var n=c.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)h.tweens[i].run(1);return e?r.resolveWith(t,[h,e]):r.rejectWith(t,[h,e]),this}}),d=h.props;for(!function(t,e){var i,n,s,o,l;for(i in t)if(s=e[n=c.camelCase(i)],o=t[i],c.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(l=c.cssHooks[n])&&"expand"in l)for(i in o=l.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=s);else e[n]=s}(d,h.opts.specialEasing);o<l;o++)if(n=oe[o].call(h,t,d,h.opts))return n;return c.map(d,he,h),c.isFunction(h.opts.start)&&h.opts.start.call(t,h),c.fx.timer(c.extend(a,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}c.Animation=c.extend(de,{tweener:function(t,e){c.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;n<s;n++)i=t[n],le[i]=le[i]||[],le[i].unshift(e)},prefilter:function(t,e){e?oe.unshift(t):oe.push(t)}}),c.speed=function(t,e,i){var n=t&&"object"==typeof t?c.extend({},t):{complete:i||!i&&e||c.isFunction(t)&&t,duration:t,easing:i&&e||e&&!c.isFunction(e)&&e};return n.duration=c.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in c.fx.speeds?c.fx.speeds[n.duration]:c.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){c.isFunction(n.old)&&n.old.call(this),n.queue&&c.dequeue(this,n.queue)},n},c.fn.extend({fadeTo:function(t,e,i,n){return this.filter(V).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=c.isEmptyObject(t),o=c.speed(e,i,n),l=function(){var e=de(this,c.extend({},t),o);(s||c._data(this,"finish"))&&e.stop(!0)};return l.finish=l,s||!1===o.queue?this.each(l):this.queue(o.queue,l)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=c.timers,l=c._data(this);if(s)l[s]&&l[s].stop&&n(l[s]);else for(s in l)l[s]&&l[s].stop&&se.test(s)&&n(l[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));!e&&i||c.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=c._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=c.timers,l=n?n.length:0;for(i.finish=!0,c.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<l;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),c.each(["toggle","show","hide"],function(t,e){var i=c.fn[e];c.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ae(e,!0),t,n,s)}}),c.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){c.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),c.timers=[],c.fx.tick=function(){var t,e=c.timers,i=0;for(Yt=c.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||c.fx.stop(),Yt=void 0},c.fx.timer=function(t){c.timers.push(t),t()?c.fx.start():c.timers.pop()},c.fx.interval=13,c.fx.start=function(){Kt||(Kt=setInterval(c.fx.tick,c.fx.interval))},c.fx.stop=function(){clearInterval(Kt),Kt=null},c.fx.speeds={slow:600,fast:200,_default:400},c.fn.delay=function(t,e){return t=c.fx&&c.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},(Jt=C.createElement("div")).setAttribute("className","t"),Jt.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",te=Jt.getElementsByTagName("a")[0],ee=(Zt=C.createElement("select")).appendChild(C.createElement("option")),Qt=Jt.getElementsByTagName("input")[0],te.style.cssText="top:1px",d.getSetAttribute="t"!==Jt.className,d.style=/top/.test(te.getAttribute("style")),d.hrefNormalized="/a"===te.getAttribute("href"),d.checkOn=!!Qt.value,d.optSelected=ee.selected,d.enctype=!!C.createElement("form").enctype,Zt.disabled=!0,d.optDisabled=!ee.disabled,(Qt=C.createElement("input")).setAttribute("value",""),d.input=""===Qt.getAttribute("value"),Qt.value="t",Qt.setAttribute("type","radio"),d.radioValue="t"===Qt.value;var ce=/\r/g;c.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=c.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(null==(s=n?t.call(this,i,c(this).val()):t)?s="":"number"==typeof s?s+="":c.isArray(s)&&(s=c.map(s,function(t){return null==t?"":t+""})),(e=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=c.valHooks[s.type]||c.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(ce,""):null==i?"":i:void 0}}),c.extend({valHooks:{option:{get:function(t){var e=c.find.attr(t,"value");return null!=e?e:c.trim(c.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||s<0,l=o?null:[],r=o?s+1:n.length,a=s<0?r:o?s:0;a<r;a++)if(((i=n[a]).selected||a===s)&&(d.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!c.nodeName(i.parentNode,"optgroup"))){if(e=c(i).val(),o)return e;l.push(e)}return l},set:function(t,e){for(var i,n,s=t.options,o=c.makeArray(e),l=s.length;l--;)if(n=s[l],c.inArray(c.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(t){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),s}}}}),c.each(["radio","checkbox"],function(){c.valHooks[this]={set:function(t,e){if(c.isArray(e))return t.checked=c.inArray(c(t).val(),e)>=0}},d.checkOn||(c.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ue,fe,pe=c.expr.attrHandle,me=/^(?:checked|selected)$/i,ge=d.getSetAttribute,_e=d.input;c.fn.extend({attr:function(t,e){return W(this,c.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){c.removeAttr(this,t)})}}),c.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===j?c.prop(t,e,i):(1===o&&c.isXMLDoc(t)||(e=e.toLowerCase(),n=c.attrHooks[e]||(c.expr.match.bool.test(e)?fe:ue)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:null==(s=c.find.attr(t,e))?void 0:s:null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void c.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(P);if(o&&1===t.nodeType)for(;i=o[s++];)n=c.propFix[i]||i,c.expr.match.bool.test(i)?_e&&ge||!me.test(i)?t[n]=!1:t[c.camelCase("default-"+i)]=t[n]=!1:c.attr(t,i,""),t.removeAttribute(ge?i:n)},attrHooks:{type:{set:function(t,e){if(!d.radioValue&&"radio"===e&&c.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),fe={set:function(t,e,i){return!1===e?c.removeAttr(t,i):_e&&ge||!me.test(i)?t.setAttribute(!ge&&c.propFix[i]||i,i):t[c.camelCase("default-"+i)]=t[i]=!0,i}},c.each(c.expr.match.bool.source.match(/\w+/g),function(t,e){var i=pe[e]||c.find.attr;pe[e]=_e&&ge||!me.test(e)?function(t,e,n){var s,o;return n||(o=pe[e],pe[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,pe[e]=o),s}:function(t,e,i){if(!i)return t[c.camelCase("default-"+e)]?e.toLowerCase():null}}),_e&&ge||(c.attrHooks.value={set:function(t,e,i){if(!c.nodeName(t,"input"))return ue&&ue.set(t,e,i);t.defaultValue=e}}),ge||(ue={set:function(t,e,i){var n=t.getAttributeNode(i);if(n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i))return e}},pe.id=pe.name=pe.coords=function(t,e,i){var n;if(!i)return(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},c.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);if(i&&i.specified)return i.value},set:ue.set},c.attrHooks.contenteditable={set:function(t,e,i){ue.set(t,""!==e&&e,i)}},c.each(["width","height"],function(t,e){c.attrHooks[e]={set:function(t,i){if(""===i)return t.setAttribute(e,"auto"),i}}})),d.style||(c.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var ve=/^(?:input|select|textarea|button|object)$/i,be=/^(?:a|area)$/i;c.fn.extend({prop:function(t,e){return W(this,c.prop,t,e,arguments.length>1)},removeProp:function(t){return t=c.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),c.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!c.isXMLDoc(t))&&(e=c.propFix[e]||e,s=c.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=c.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}}}),d.hrefNormalized||c.each(["href","src"],function(t,e){c.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),d.optSelected||(c.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),c.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){c.propFix[this.toLowerCase()]=this}),d.enctype||(c.propFix.enctype="encoding");var ye=/[\t\r\n\f]/g;c.fn.extend({addClass:function(t){var e,i,n,s,o,l,r=0,a=this.length,h="string"==typeof t&&t;if(c.isFunction(t))return this.each(function(e){c(this).addClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(P)||[];r<a;r++)if(n=1===(i=this[r]).nodeType&&(i.className?(" "+i.className+" ").replace(ye," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");l=c.trim(n),i.className!==l&&(i.className=l)}return this},removeClass:function(t){var e,i,n,s,o,l,r=0,a=this.length,h=0===arguments.length||"string"==typeof t&&t;if(c.isFunction(t))return this.each(function(e){c(this).removeClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(P)||[];r<a;r++)if(n=1===(i=this[r]).nodeType&&(i.className?(" "+i.className+" ").replace(ye," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");l=t?c.trim(n):"",i.className!==l&&(i.className=l)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):c.isFunction(t)?this.each(function(i){c(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,s=c(this),o=t.match(P)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else i!==j&&"boolean"!==i||(this.className&&c._data(this,"__className__",this.className),this.className=this.className||!1===t?"":c._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ye," ").indexOf(e)>=0)return!0;return!1}}),c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){c.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),c.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var we=c.now(),xe=/\?/,Ce=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;c.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,s=c.trim(e+"");return s&&!c.trim(s.replace(Ce,function(t,e,s,o){return i&&e&&(n=0),0===n?t:(i=s||e,n+=!o-!s,"")}))?Function("return "+s)():c.error("Invalid JSON: "+e)},c.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?i=(new DOMParser).parseFromString(e,"text/xml"):((i=new ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(e))}catch(t){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||c.error("Invalid XML: "+e),i};var Se,ke,Ie=/#.*$/,Ne=/([?&])_=[^&]*/,Te=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Pe=/^(?:GET|HEAD)$/,De=/^\/\//,Oe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Me={},Ee={},je="*/".concat("*");try{ke=location.href}catch(t){(ke=C.createElement("a")).href="",ke=ke.href}function Ae(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(P)||[];if(c.isFunction(i))for(;n=o[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Le(t,e,i,n){var s={},o=t===Ee;function l(r){var a;return s[r]=!0,c.each(t[r]||[],function(t,r){var h=r(e,i,n);return"string"!=typeof h||o||s[h]?o?!(a=h):void 0:(e.dataTypes.unshift(h),l(h),!1)}),a}return l(e.dataTypes[0])||!s["*"]&&l("*")}function He(t,e){var i,n,s=c.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&c.extend(!0,t,i),t}Se=Oe.exec(ke.toLowerCase())||[],c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":c.parseJSON,"text xml":c.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?He(He(t,c.ajaxSettings),e):He(c.ajaxSettings,t)},ajaxPrefilter:Ae(Me),ajaxTransport:Ae(Ee),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,n,s,o,l,r,a,h,d=c.ajaxSetup({},e),u=d.context||d,f=d.context&&(u.nodeType||u.jquery)?c(u):c.event,p=c.Deferred(),m=c.Callbacks("once memory"),g=d.statusCode||{},_={},v={},b=0,y="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!h)for(h={};e=Te.exec(o);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=v[i]=v[i]||t,_[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||y;return a&&a.abort(e),x(0,e),this}};if(p.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((t||d.url||ke)+"").replace(Ie,"").replace(De,Se[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=c.trim(d.dataType||"*").toLowerCase().match(P)||[""],null==d.crossDomain&&(i=Oe.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Se[1]&&i[2]===Se[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Se[3]||("http:"===Se[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=c.param(d.data,d.traditional)),Le(Me,d,e,w),2===b)return w;for(n in(r=d.global)&&0==c.active++&&c.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pe.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(xe.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Ne.test(s)?s.replace(Ne,"$1_="+we++):s+(xe.test(s)?"&":"?")+"_="+we++)),d.ifModified&&(c.lastModified[s]&&w.setRequestHeader("If-Modified-Since",c.lastModified[s]),c.etag[s]&&w.setRequestHeader("If-None-Match",c.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+je+"; q=0.01":""):d.accepts["*"]),d.headers)w.setRequestHeader(n,d.headers[n]);if(d.beforeSend&&(!1===d.beforeSend.call(u,w,d)||2===b))return w.abort();for(n in y="abort",{success:1,error:1,complete:1})w[n](d[n]);if(a=Le(Ee,d,e,w)){w.readyState=1,r&&f.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,a.send(_,x)}catch(t){if(!(b<2))throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,i,n){var h,_,v,y,x,C=e;2!==b&&(b=2,l&&clearTimeout(l),a=void 0,o=n||"",w.readyState=t>0?4:0,h=t>=200&&t<300||304===t,i&&(y=function(t,e,i){for(var n,s,o,l,r=t.contents,a=t.dataTypes;"*"===a[0];)a.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(l in r)if(r[l]&&r[l].test(s)){a.unshift(l);break}if(a[0]in i)o=a[0];else{for(l in i){if(!a[0]||t.converters[l+" "+a[0]]){o=l;break}n||(n=l)}o=o||n}if(o)return o!==a[0]&&a.unshift(o),i[o]}(d,w,i)),y=function(t,e,i,n){var s,o,l,r,a,h={},d=t.dataTypes.slice();if(d[1])for(l in t.converters)h[l.toLowerCase()]=t.converters[l];for(o=d.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!a&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),a=o,o=d.shift())if("*"===o)o=a;else if("*"!==a&&a!==o){if(!(l=h[a+" "+o]||h["* "+o]))for(s in h)if((r=s.split(" "))[1]===o&&(l=h[a+" "+r[0]]||h["* "+r[0]])){!0===l?l=h[s]:!0!==h[s]&&(o=r[0],d.unshift(r[1]));break}if(!0!==l)if(l&&t.throws)e=l(e);else try{e=l(e)}catch(t){return{state:"parsererror",error:l?t:"No conversion from "+a+" to "+o}}}return{state:"success",data:e}}(d,y,w,h),h?(d.ifModified&&((x=w.getResponseHeader("Last-Modified"))&&(c.lastModified[s]=x),(x=w.getResponseHeader("etag"))&&(c.etag[s]=x)),204===t||"HEAD"===d.type?C="nocontent":304===t?C="notmodified":(C=y.state,_=y.data,h=!(v=y.error))):(v=C,!t&&C||(C="error",t<0&&(t=0))),w.status=t,w.statusText=(e||C)+"",h?p.resolveWith(u,[_,C,w]):p.rejectWith(u,[w,C,v]),w.statusCode(g),g=void 0,r&&f.trigger(h?"ajaxSuccess":"ajaxError",[w,d,h?_:v]),m.fireWith(u,[w,C]),r&&(f.trigger("ajaxComplete",[w,d]),--c.active||c.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,i){return c.get(t,e,i,"json")},getScript:function(t,e){return c.get(t,void 0,e,"script")}}),c.each(["get","post"],function(t,e){c[e]=function(t,i,n,s){return c.isFunction(i)&&(s=s||n,n=i,i=void 0),c.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),c.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){c.fn[e]=function(t){return this.on(e,t)}}),c._evalUrl=function(t){return c.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},c.fn.extend({wrapAll:function(t){if(c.isFunction(t))return this.each(function(e){c(this).wrapAll(t.call(this,e))});if(this[0]){var e=c(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return c.isFunction(t)?this.each(function(e){c(this).wrapInner(t.call(this,e))}):this.each(function(){var e=c(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=c.isFunction(t);return this.each(function(i){c(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()}}),c.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!d.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||c.css(t,"display"))},c.expr.filters.visible=function(t){return!c.expr.filters.hidden(t)};var Be=/%20/g,Re=/\[\]$/,Fe=/\r?\n/g,Xe=/^(?:submit|button|image|reset|file)$/i,ze=/^(?:input|select|textarea|keygen)/i;function Ve(t,e,i,n){var s;if(c.isArray(e))c.each(e,function(e,s){i||Re.test(t)?n(t,s):Ve(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==c.type(e))n(t,e);else for(s in e)Ve(t+"["+s+"]",e[s],i,n)}c.param=function(t,e){var i,n=[],s=function(t,e){e=c.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=c.ajaxSettings&&c.ajaxSettings.traditional),c.isArray(t)||t.jquery&&!c.isPlainObject(t))c.each(t,function(){s(this.name,this.value)});else for(i in t)Ve(i,t[i],e,s);return n.join("&").replace(Be,"+")},c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=c.prop(this,"elements");return t?c.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!c(this).is(":disabled")&&ze.test(this.nodeName)&&!Xe.test(t)&&(this.checked||!G.test(t))}).map(function(t,e){var i=c(this).val();return null==i?null:c.isArray(i)?c.map(i,function(t){return{name:e.name,value:t.replace(Fe,"\r\n")}}):{name:e.name,value:i.replace(Fe,"\r\n")}}).get()}}),c.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$e()||function(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:$e;var We=0,Ge={},Ue=c.ajaxSettings.xhr();function $e(){try{return new t.XMLHttpRequest}catch(t){}}t.ActiveXObject&&c(t).on("unload",function(){for(var t in Ge)Ge[t](void 0,!0)}),d.cors=!!Ue&&"withCredentials"in Ue,(Ue=d.ajax=!!Ue)&&c.ajaxTransport(function(t){var e;if(!t.crossDomain||d.cors)return{send:function(i,n){var s,o=t.xhr(),l=++We;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)void 0!==i[s]&&o.setRequestHeader(s,i[s]+"");o.send(t.hasContent&&t.data||null),e=function(i,s){var r,a,h;if(e&&(s||4===o.readyState))if(delete Ge[l],e=void 0,o.onreadystatechange=c.noop,s)4!==o.readyState&&o.abort();else{h={},r=o.status,"string"==typeof o.responseText&&(h.text=o.responseText);try{a=o.statusText}catch(t){a=""}r||!t.isLocal||t.crossDomain?1223===r&&(r=204):r=h.text?200:404}h&&n(r,a,h,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Ge[l]=e:e()},abort:function(){e&&e(void 0,!0)}}}),c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return c.globalEval(t),t}}}),c.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),c.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=C.head||c("head")[0]||C.documentElement;return{send:function(n,s){(e=C.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||s(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var qe=[],Ye=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=qe.pop()||c.expando+"_"+we++;return this[t]=!0,t}}),c.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,l,r=!1!==e.jsonp&&(Ye.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(e.data)&&"data");if(r||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=c.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(Ye,"$1"+s):!1!==e.jsonp&&(e.url+=(xe.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return l||c.error(s+" was not called"),l[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){l=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,qe.push(s)),l&&c.isFunction(o)&&o(l[0]),l=o=void 0}),"script"}),c.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||C;var n=b.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=c.buildFragment([t],e,s),s&&s.length&&c(s).remove(),c.merge([],n.childNodes))};var Ke=c.fn.load;c.fn.load=function(t,e,i){if("string"!=typeof t&&Ke)return Ke.apply(this,arguments);var n,s,o,l=this,r=t.indexOf(" ");return r>=0&&(n=c.trim(t.slice(r,t.length)),t=t.slice(0,r)),c.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),l.length>0&&c.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,l.html(n?c("<div>").append(c.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){l.each(i,s||[t.responseText,e,t])}),this},c.expr.filters.animated=function(t){return c.grep(c.timers,function(e){return t===e.elem}).length};var Qe=t.document.documentElement;function Je(t){return c.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}c.offset={setOffset:function(t,e,i){var n,s,o,l,r,a,h=c.css(t,"position"),d=c(t),u={};"static"===h&&(t.style.position="relative"),r=d.offset(),o=c.css(t,"top"),a=c.css(t,"left"),("absolute"===h||"fixed"===h)&&c.inArray("auto",[o,a])>-1?(l=(n=d.position()).top,s=n.left):(l=parseFloat(o)||0,s=parseFloat(a)||0),c.isFunction(e)&&(e=e.call(t,i,r)),null!=e.top&&(u.top=e.top-r.top+l),null!=e.left&&(u.left=e.left-r.left+s),"using"in e?e.using.call(t,u):d.css(u)}},c.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){c.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},s=this[0],o=s&&s.ownerDocument;return o?(e=o.documentElement,c.contains(e,s)?(typeof s.getBoundingClientRect!==j&&(n=s.getBoundingClientRect()),i=Je(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===c.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),c.nodeName(t[0],"html")||(i=t.offset()),i.top+=c.css(t[0],"borderTopWidth",!0),i.left+=c.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-c.css(n,"marginTop",!0),left:e.left-i.left-c.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Qe;t&&!c.nodeName(t,"html")&&"static"===c.css(t,"position");)t=t.offsetParent;return t||Qe})}}),c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);c.fn[t]=function(n){return W(this,function(t,n,s){var o=Je(t);if(void 0===s)return o?e in o?o[e]:o.document.documentElement[n]:t[n];o?o.scrollTo(i?c(o).scrollLeft():s,i?s:c(o).scrollTop()):t[n]=s},t,n,arguments.length,null)}}),c.each(["top","left"],function(t,e){c.cssHooks[e]=jt(d.pixelPosition,function(t,i){if(i)return i=Dt(t,e),Mt.test(i)?c(t).position()[e]+"px":i})}),c.each({Height:"height",Width:"width"},function(t,e){c.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){c.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),l=i||(!0===n||!0===s?"margin":"border");return W(this,function(e,i,n){var s;return c.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?c.css(e,i,l):c.style(e,i,n,l)},e,o?n:void 0,o,null)}})}),c.fn.size=function(){return this.length},c.fn.andSelf=c.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return c});var Ze=t.jQuery,ti=t.$;return c.noConflict=function(e){return t.$===c&&(t.$=ti),e&&t.jQuery===c&&(t.jQuery=Ze),c},typeof e===j&&(t.jQuery=t.$=c),c}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){t.ui=t.ui||{};t.ui.version="1.12.1";var e,i=0,n=Array.prototype.slice;t.cleanData=(e=t.cleanData,function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{(n=t._data(s,"events"))&&n.remove&&t(s).triggerHandler("remove")}catch(t){}e(i)}),t.widget=function(e,i,n){var s,o,l,r={},a=e.split(".")[0],h=a+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[a]=t[a]||{},s=t[a][e],o=t[a][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(l=new i).options=t.widget.extend({},l.options),t.each(n,function(e,n){t.isFunction(n)?r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}():r[e]=n}),o.prototype=t.widget.extend(l,{widgetEventPrefix:s&&l.widgetEventPrefix||e},r,{constructor:o,namespace:a,widgetName:e,widgetFullName:h}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,o=n.call(arguments,1),l=0,r=o.length;l<r;l++)for(i in o[l])s=o[l][i],o[l].hasOwnProperty(i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(o){var l="string"==typeof o,r=n.call(arguments,1),a=this;return l?this.length||"instance"!==o?this.each(function(){var i,n=t.data(this,s);return"instance"===o?(a=n,!1):n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,r))!==n&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):a=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new i(o,this))})),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,l=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(l={},e=(n=e.split(".")).shift(),n.length){for(s=l[e]=t.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];l[e]=i}return this._setOptions(l),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,s;for(i in e)s=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&s&&s.length&&(n=t(s.get()),this._removeClass(s,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function s(s,o){var l,r;for(r=0;r<s.length;r++)l=n.classesElementLookup[s[r]]||t(),l=e.add?t(t.unique(l.get().concat(e.element.get()))):t(l.not(e.element).get()),n.classesElementLookup[s[r]]=l,i.push(s[r]),o&&e.classes[s[r]]&&i.push(e.classes[s[r]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&s(e.keys.match(/\S+/g)||[],!0),e.extra&&s(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(n,s){-1!==t.inArray(e.target,s)&&(i.classesElementLookup[n]=t(s.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof t||null===t,o={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};return o.element.toggleClass(this._classes(o),n),this},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,l){function r(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof l?o[l]:l).apply(o,arguments)}"string"!=typeof l&&(r.guid=l.guid=l.guid||r.guid||t.guid++);var a=n.match(/^([\w:-]*)\s*(.*)$/),h=a[1]+o.eventNamespace,d=a[2];d?s.on(h,d,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var s,o,l=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(l)&&!1===l.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){var l;"string"==typeof s&&(s={effect:s});var r=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),l=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),l&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}});t.widget}),function(t){"use strict";var e=function(t,i){var n=/[^\w\-\.:]/.test(t)?new Function(e.arg+",tmpl","var _e=tmpl.encode"+e.helper+",_s='"+t.replace(e.regexp,e.func)+"';return _s;"):e.cache[t]=e.cache[t]||e(e.load(t));return i?n(i,e):function(t){return n(t,e)}};e.cache={},e.load=function(t){return document.getElementById(t).innerHTML},e.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,e.func=function(t,e,i,n,s,o){return e?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[t]||"\\"+t:i?"="===i?"'+_e("+n+")+'":"'+("+n+"||'')+'":s?"';":o?"_s+='":void 0},e.encReg=/[<>&"'\x00]/g,e.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},e.encode=function(t){return String(t||"").replace(e.encReg,function(t){return e.encMap[t]||""})},e.arg="o",e.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return e}):t.tmpl=e}(this),function(t){"use strict";var e=function(t,i,n){var s,o,l=document.createElement("img");if(l.onerror=i,l.onload=function(){!o||n&&n.noRevoke||e.revokeObjectURL(o),i&&i(e.scale(l,n))},e.isInstanceOf("Blob",t)||e.isInstanceOf("File",t))s=o=e.createObjectURL(t),l._type=t.type;else{if("string"!=typeof t)return!1;s=t,n&&n.crossOrigin&&(l.crossOrigin=n.crossOrigin)}return s?(l.src=s,l):e.readFile(t,function(t){var e=t.target;e&&e.result?l.src=e.result:i&&i(t)})},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},e.transformCoordinates=function(){},e.getTransformedOptions=function(t){return t},e.renderImageToCanvas=function(t,e,i,n,s,o,l,r,a,h){return t.getContext("2d").drawImage(e,i,n,s,o,l,r,a,h),t},e.hasCanvasOption=function(t){return t.canvas||t.crop},e.scale=function(t,i){i=i||{};var n,s,o,l,r,a,h,d,c,u=document.createElement("canvas"),f=t.getContext||e.hasCanvasOption(i)&&u.getContext,p=t.naturalWidth||t.width,m=t.naturalHeight||t.height,g=p,_=m,v=function(){var t=Math.max((o||g)/g,(l||_)/_);t>1&&(g=Math.ceil(g*t),_=Math.ceil(_*t))},b=function(){var t=Math.min((n||g)/g,(s||_)/_);1>t&&(g=Math.ceil(g*t),_=Math.ceil(_*t))};return f&&(h=(i=e.getTransformedOptions(i)).left||0,d=i.top||0,i.sourceWidth?(r=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(h=p-r-i.right)):r=p-h-(i.right||0),i.sourceHeight?(a=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(d=m-a-i.bottom)):a=m-d-(i.bottom||0),g=r,_=a),n=i.maxWidth,s=i.maxHeight,o=i.minWidth,l=i.minHeight,f&&n&&s&&i.crop?(g=n,_=s,0>(c=r/a-n/s)?(a=s*r/n,void 0===i.top&&void 0===i.bottom&&(d=(m-a)/2)):c>0&&(r=n*a/s,void 0===i.left&&void 0===i.right&&(h=(p-r)/2))):((i.contain||i.cover)&&(o=n=n||o,l=s=s||l),i.cover?(b(),v()):(v(),b())),f?(u.width=g,u.height=_,e.transformCoordinates(u,i),e.renderImageToCanvas(u,t,h,d,r,a,0,0,g,_)):(t.width=g,t.height=_,t)},e.createObjectURL=function(t){return!!i&&i.createObjectURL(t)},e.revokeObjectURL=function(t){return!!i&&i.revokeObjectURL(t)},e.readFile=function(t,e,i){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=e,n[i=i||"readAsDataURL"])return n[i](t),n}return!1},"function"==typeof define&&define.amd?define(function(){return e}):t.loadImage=e}(this),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image"],t):t(window.loadImage)}(function(t){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var e=t.renderImageToCanvas;t.detectSubsampling=function(t){var e,i;return t.width*t.height>1048576&&((e=document.createElement("canvas")).width=e.height=1,(i=e.getContext("2d")).drawImage(t,1-t.width,0),0===i.getImageData(0,0,1,1).data[3])},t.detectVerticalSquash=function(t,e){var i,n,s,o,l=t.naturalHeight||t.height,r=document.createElement("canvas"),a=r.getContext("2d");for(e&&(l/=2),r.width=1,r.height=l,a.drawImage(t,0,0),i=a.getImageData(0,0,1,l).data,n=0,s=l,o=l;o>n;)0===i[4*(o-1)+3]?s=o:n=o,o=s+n>>1;return o/l||1},t.renderImageToCanvas=function(i,n,s,o,l,r,a,h,d,c){if("image/jpeg"===n._type){var u,f,p,m,g=i.getContext("2d"),_=document.createElement("canvas"),v=1024,b=_.getContext("2d");if(_.width=v,_.height=v,g.save(),(u=t.detectSubsampling(n))&&(s/=2,o/=2,l/=2,r/=2),f=t.detectVerticalSquash(n,u),u||1!==f){for(o*=f,d=Math.ceil(v*d/l),c=Math.ceil(v*c/r/f),h=0,m=0;r>m;){for(a=0,p=0;l>p;)b.clearRect(0,0,v,v),b.drawImage(n,s,o,l,r,-p,-m,l,r),g.drawImage(_,0,0,v,v,a,h,d,c),p+=v,a+=d;m+=v,h+=c}return g.restore(),i}}return e(i,n,s,o,l,r,a,h,d,c)}}}),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image"],t):t(window.loadImage)}(function(t){"use strict";var e=t.hasCanvasOption;t.hasCanvasOption=function(t){return e(t)||t.orientation},t.transformCoordinates=function(t,e){var i=t.getContext("2d"),n=t.width,s=t.height,o=e.orientation;if(o)switch(o>4&&(t.width=s,t.height=n),o){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,s),i.rotate(Math.PI);break;case 4:i.translate(0,s),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-s);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-s),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n,0)}},t.getTransformedOptions=function(t){if(!t.orientation||1===t.orientation)return t;var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);switch(t.orientation){case 2:i.left=t.right,i.right=t.left;break;case 3:i.left=t.right,i.top=t.bottom,i.right=t.left,i.bottom=t.top;break;case 4:i.top=t.bottom,i.bottom=t.top;break;case 5:i.left=t.top,i.top=t.left,i.right=t.bottom,i.bottom=t.right;break;case 6:i.left=t.top,i.top=t.right,i.right=t.bottom,i.bottom=t.left;break;case 7:i.left=t.bottom,i.top=t.right,i.right=t.top,i.bottom=t.left;break;case 8:i.left=t.bottom,i.top=t.left,i.right=t.top,i.bottom=t.right}return t.orientation>4&&(i.maxWidth=t.maxHeight,i.maxHeight=t.maxWidth,i.minWidth=t.minHeight,i.minHeight=t.minWidth,i.sourceWidth=t.sourceHeight,i.sourceHeight=t.sourceWidth),i}}),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image"],t):t(window.loadImage)}(function(t){"use strict";var e=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=e&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[]}},t.parseMetaData=function(e,i,n){var s=this,o=(n=n||{}).maxMetaDataSize||262144,l={};(!(window.DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice)||!t.readFile(t.blobSlice.call(e,0,o),function(e){var o,r,a,h,d=e.target.result,c=new DataView(d),u=2,f=c.byteLength-4,p=u;if(65496===c.getUint16(0)){for(;f>u&&((o=c.getUint16(u))>=65504&&65519>=o||65534===o);){if(u+(r=c.getUint16(u+2)+2)>c.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(a=t.metaDataParsers.jpeg[o])for(h=0;a.length>h;h+=1)a[h].call(s,c,u,r,l,n);p=u+=r}!n.disableImageHead&&p>6&&(l.imageHead=d.slice?d.slice(0,p):new Uint8Array(d).subarray(0,p))}else console.log("Invalid JPEG file: Missing JPEG marker.");i(l)},"readAsArrayBuffer"))&&i(l)}}),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],t):t(window.loadImage)}(function(t){"use strict";t.ExifMap=function(){return this},t.ExifMap.prototype.map={Orientation:274},t.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},t.getExifThumbnail=function(t,e,i){var n,s,o;if(i&&!(e+i>t.byteLength)){for(n=[],s=0;i>s;s+=1)o=t.getUint8(e+s),n.push((16>o?"0":"")+o.toString(16));return"data:image/jpeg,%"+n.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},t.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}},t.exifTagTypes[7]=t.exifTagTypes[1],t.getExifValue=function(e,i,n,s,o,l){var r,a,h,d,c,u,f=t.exifTagTypes[s];if(f){if(!((a=(r=f.size*o)>4?i+e.getUint32(n+8,l):n+8)+r>e.byteLength)){if(1===o)return f.getValue(e,a,l);for(h=[],d=0;o>d;d+=1)h[d]=f.getValue(e,a+d*f.size,l);if(f.ascii){for(c="",d=0;h.length>d&&"\0"!==(u=h[d]);d+=1)c+=u;return c}return h}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},t.parseExifTag=function(e,i,n,s,o){var l=e.getUint16(n,s);o.exif[l]=t.getExifValue(e,i,n,e.getUint16(n+2,s),e.getUint32(n+4,s),s)},t.parseExifTags=function(t,e,i,n,s){var o,l,r;if(i+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((l=i+2+12*(o=t.getUint16(i,n)))+4>t.byteLength)){for(r=0;o>r;r+=1)this.parseExifTag(t,e,i+2+12*r,n,s);return t.getUint32(l,n)}console.log("Invalid Exif data: Invalid directory size.")}},t.parseExifData=function(e,i,n,s,o){if(!o.disableExif){var l,r,a,h=i+10;if(1165519206===e.getUint32(i+4)){if(h+8>e.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==e.getUint16(i+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(e.getUint16(h)){case 18761:l=!0;break;case 19789:l=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==e.getUint16(h+2,l))return void console.log("Invalid Exif data: Missing TIFF marker.");r=e.getUint32(h+4,l),s.exif=new t.ExifMap,(r=t.parseExifTags(e,h,h+r,l,s))&&!o.disableExifThumbnail&&(a={exif:{}},r=t.parseExifTags(e,h,h+r,l,a),a.exif[513]&&(s.exif.Thumbnail=t.getExifThumbnail(e,h+a.exif[513],a.exif[514]))),s.exif[34665]&&!o.disableExifSub&&t.parseExifTags(e,h,h+s.exif[34665],l,s),s.exif[34853]&&!o.disableExifGps&&t.parseExifTags(e,h,h+s.exif[34853],l,s)}}},t.metaDataParsers.jpeg[65505].push(t.parseExifData)}),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],t):t(window.loadImage)}(function(t){"use strict";var e,i,n;for(n in t.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},t.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return e+""},e=t.ExifMap.prototype.tags,i=t.ExifMap.prototype.map,e)e.hasOwnProperty(n)&&(i[e[n]]=n);t.ExifMap.prototype.getAll=function(){var t,i,n={};for(t in this)this.hasOwnProperty(t)&&((i=e[t])&&(n[i]=this.getText(i)));return n}}),function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,i=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=i&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),s=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=(i||s)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,o,l,r,a,h;for(e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),o=new ArrayBuffer(e.length),l=new Uint8Array(o),r=0;r<e.length;r+=1)l[r]=e.charCodeAt(r);return a=t.split(",")[0].split(":")[1].split(";")[0],i?new Blob([n?l:o],{type:a}):((h=new s).append(o),h.getBlob(a))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,i,n){n&&e.toDataURL&&o?t(o(this.toDataURL(i,n))):t(this.mozGetAsFile("blob",i))}:e.toDataURL&&o&&(e.toBlob=function(t,e,i){t(o(this.toDataURL(e,i)))})),"function"==typeof define&&define.amd?define(function(){return o}):t.dataURLtoBlob=o}(this),function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}()})}(window.jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){function i(){n.trigger("closed").remove()}var n,s=t(this),o=s.attr("data-target");o||(o=(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),n=t(o),e&&e.preventDefault(),n.length||(n=s.hasClass("alert")?s:s.parent()),n.trigger(e=t.Event("close")),e.isDefaultPrevented()||(n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.on(t.support.transition.end,i):i())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),s=n.data("alert");s||n.data("alert",s=new i(this)),"string"==typeof e&&s[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.alert.data-api",e,i.prototype.close)}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,i)};e.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.data(),s=i.is("input")?"val":"html";t+="Text",n.resetText||i.data("resetText",i[s]()),i[s](n[t]||this.options[t]),setTimeout(function(){"loadingText"==t?i.addClass(e).attr(e,e):i.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var n=t(this),s=n.data("button"),o="object"==typeof i&&i;s||n.data("button",s=new e(this,o)),"toggle"==i?s.toggle():i&&s.setState(i)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var i=this.getActiveIndex(),n=this;if(!(e>this.$items.length-1||0>e))return this.sliding?this.$element.one("slid",function(){n.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,i){var n,s=this.$element.find(".item.active"),o=i||s[e](),l=this.interval,r="next"==e?"left":"right",a="next"==e?"first":"last",h=this;if(this.sliding=!0,l&&this.pause(),o=o.length?o:this.$element.find(".item")[a](),n=t.Event("slide",{relatedTarget:o[0],direction:r}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(h.$indicators.children()[h.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,s.addClass(r),o.addClass(r),this.$element.one(t.support.transition.end,function(){o.removeClass([e,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;s.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return l&&this.cycle(),this}}};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each(function(){var n=t(this),s=n.data("carousel"),o=t.extend({},t.fn.carousel.defaults,"object"==typeof i&&i),l="string"==typeof i?i:o.slide;s||n.data("carousel",s=new e(this,o)),"number"==typeof i?s.to(i):l?s[l]():o.interval&&s.pause().cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var i,n,s=t(this),o=t(s.attr("data-target")||(i=s.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),l=t.extend({},o.data(),s.data());o.carousel(l),(n=s.attr("data-slide-to"))&&o.data("carousel").pause().to(n).cycle(),e.preventDefault()})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,i),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var e,i,n,s;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),i=t.camelCase(["scroll",e].join("-")),(n=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&n.length){if((s=n.data("collapse"))&&s.transitioning)return;n.collapse("hide"),s||n.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][i])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,i,n){var s=this,o=function(){"show"==i.type&&s.reset(),s.transitioning=0,s.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each(function(){var n=t(this),s=n.data("collapse"),o=t.extend({},t.fn.collapse.defaults,n.data(),"object"==typeof i&&i);s||n.data("collapse",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var i,n=t(this),s=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=t(s).data("collapse")?"toggle":n.data();n[t(s).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(s).collapse(o)})}(window.jQuery),function(t){"use strict";function e(){t(".dropdown-backdrop").remove(),t(n).each(function(){i(t(this)).removeClass("open")})}function i(e){var i,n=e.attr("data-target");return n||(n=(n=e.attr("href"))&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),(i=n&&t(n))&&i.length||(i=e.parent()),i}var n="[data-toggle=dropdown]",s=function(e){var i=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(){var n,s,o=t(this);if(!o.is(".disabled, :disabled"))return s=(n=i(o)).hasClass("open"),e(),s||("ontouchstart"in document.documentElement&&t('<div class="dropdown-backdrop"/>').insertBefore(t(this)).on("click",e),n.toggleClass("open")),o.focus(),!1},keydown:function(e){var s,o,l,r,a;if(/(38|40|27)/.test(e.keyCode)&&(s=t(this),e.preventDefault(),e.stopPropagation(),!s.is(".disabled, :disabled"))){if(!(r=(l=i(s)).hasClass("open"))||r&&27==e.keyCode)return 27==e.which&&l.find(n).focus(),s.click();(o=t("[role=menu] li:not(.divider):visible a",l)).length&&(a=o.index(o.filter(":focus")),38==e.keyCode&&a>0&&a--,40==e.keyCode&&a<o.length-1&&a++,~a||(a=0),o.eq(a).focus())}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown.data-api",n,s.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",s.prototype.keydown)}(window.jQuery),function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,i=t.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),i&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),i?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var i=t.fn.modal;t.fn.modal=function(i){return this.each(function(){var n=t(this),s=n.data("modal"),o=t.extend({},t.fn.modal.defaults,n.data(),"object"==typeof i&&i);s||n.data("modal",s=new e(this,o)),"string"==typeof i?s[i]():o.show&&s.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),s=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),i.data());e.preventDefault(),s.modal(o).one("hide",function(){i.focus()})})}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,i,n){var s,o,l,r,a;for(this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.enabled=!0,a=(l=this.options.trigger.split(" ")).length;a--;)"click"==(r=l[a])?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=r&&(s="hover"==r?"mouseenter":"focus",o="hover"==r?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return(e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var i,n=t.fn[this.type].defaults,s={};return this._options&&t.each(this._options,function(t,e){n[t]!=e&&(s[t]=e)},this),(i=t(e.currentTarget)[this.type](s).data(this.type)).options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",void(this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show))):i.show()},leave:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var e,i,n,s,o,l,r=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(r),r.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),i=this.getPosition(),n=e[0].offsetWidth,s=e[0].offsetHeight,o){case"bottom":l={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":l={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":l={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":l={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(l,o),this.$element.trigger("shown")}},applyPlacement:function(t,e){var i,n,s,o,l=this.tip(),r=l[0].offsetWidth,a=l[0].offsetHeight;l.offset(t).addClass(e).addClass("in"),i=l[0].offsetWidth,n=l[0].offsetHeight,"top"==e&&n!=a&&(t.top=t.top+a-n,o=!0),"bottom"==e||"top"==e?(s=0,t.left<0&&(s=-2*t.left,t.left=0,l.offset(t),i=l[0].offsetWidth,n=l[0].offsetHeight),this.replaceArrow(s-r+i,i,"left")):this.replaceArrow(n-a,n,"top"),o&&l.offset(t)},replaceArrow:function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){var e=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(e.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?function(){var i=setTimeout(function(){e.off(t.support.transition.end).detach()},500);e.one(t.support.transition.end,function(){clearTimeout(i),e.detach()})}():e.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var i=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),s=n.data("tooltip"),o="object"==typeof i&&i;s||n.data("tooltip",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](i),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t=this.$element,e=this.options;return("function"==typeof e.content?e.content.call(t[0]):e.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),s=n.data("popover"),o="object"==typeof i&&i;s||n.data("popover",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(window.jQuery),function(t){"use strict";function e(e,i){var n,s=t.proxy(this.process,this),o=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,i),this.$scrollElement=o.on("scroll.scroll-spy.data-api",s),this.selector=(this.options.target||(n=t(e).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e=this;this.offsets=t([]),this.targets=t([]),this.$body.find(this.selector).map(function(){var i=t(this),n=i.data("target")||i.attr("href"),s=/^#\w/.test(n)&&t(n);return s&&s.length&&[[s.position().top+(!t.isWindow(e.$scrollElement.get(0))&&e.$scrollElement.scrollTop()),n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),n=this.offsets,s=this.targets,o=this.activeTarget;if(e>=i)return o!=(t=s.last()[0])&&this.activate(t);for(t=n.length;t--;)o!=s[t]&&e>=n[t]&&(!n[t+1]||e<=n[t+1])&&this.activate(s[t])},activate:function(e){var i,n;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',(i=t(n).parent("li").addClass("active")).parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each(function(){var n=t(this),s=n.data("scrollspy"),o="object"==typeof i&&i;s||n.data("scrollspy",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,i,n,s=this.element,o=s.closest("ul:not(.dropdown-menu)"),l=s.attr("data-target");l||(l=(l=s.attr("href"))&&l.replace(/.*(?=#[^\s]*$)/,"")),s.parent("li").hasClass("active")||(e=o.find(".active:last a")[0],n=t.Event("show",{relatedTarget:e}),s.trigger(n),n.isDefaultPrevented()||(i=t(l),this.activate(s.parent("li"),o),this.activate(i,i.parent(),function(){s.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),l?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),l=n&&t.support.transition&&o.hasClass("fade");l?o.one(t.support.transition.end,s):s(),o.removeClass("in")}};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var n=t(this),s=n.data("tab");s||n.data("tab",s=new e(this)),"string"==typeof i&&s[i]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source)?this.process(e):this},process:function(e){var i=this;return e=t.grep(e,function(t){return i.matcher(t)}),(e=this.sorter(e)).length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,i=[],n=[],s=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?n.push(e):s.push(e):i.push(e);return i.concat(n,s)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var i=this;return(e=t(e).map(function(e,n){return(e=t(i.options.item).attr("data-value",n)).find("a").html(i.highlighter(n)),e[0]})).first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active").next();e.length||(e=t(this.$menu.find("li")[0])),e.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active").prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=t.fn.typeahead;t.fn.typeahead=function(i){return this.each(function(){var n=t(this),s=n.data("typeahead"),o="object"==typeof i&&i;s||n.data("typeahead",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.affix.defaults,i),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,i=t(document).height(),n=this.$window.scrollTop(),s=this.$element.offset(),o=this.options.offset,l=o.bottom,r=o.top;"object"!=typeof o&&(l=r=o),"function"==typeof r&&(r=o.top()),"function"==typeof l&&(l=o.bottom()),e=!(null!=this.unpin&&n+this.unpin<=s.top)&&(null!=l&&s.top+this.$element.height()>=i-l?"bottom":null!=r&&r>=n&&"top"),this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?s.top-n:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(e?"-"+e:"")))}};var i=t.fn.affix;t.fn.affix=function(i){return this.each(function(){var n=t(this),s=n.data("affix"),o="object"==typeof i&&i;s||n.data("affix",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)})})}(window.jQuery),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(window.jQuery)}(function(t){"use strict";var e=0,i=["accepts","cache","contents","contentType","crossDomain","data","dataType","headers","ifModified","mimeType","password","processData","timeout","traditional","type","url","username"],n=function(t){return t};t.ajaxSetup({converters:{"postmessage text":n,"postmessage json":n,"postmessage html":n}}),t.ajaxTransport("postmessage",function(n){if(n.postMessage&&window.postMessage){var s,o=t("<a>").prop("href",n.postMessage)[0],l=o.protocol+"//"+o.host,r=n.xhr().upload;return/^(http:\/\/.+:80)|(https:\/\/.+:443)$/.test(l)&&(l=l.replace(/:(80|443)$/,"")),{send:function(o,a){var h={id:"postmessage-transport-"+(e+=1)},d="message."+h.id;s=t('<iframe style="display:none;" src="'+n.postMessage+'" name="'+h.id+'"></iframe>').bind("load",function(){t.each(i,function(t,e){h[e]=n[e]}),h.dataType=h.dataType.replace("postmessage ",""),t(window).bind(d,function(e){var i,n=(e=e.originalEvent).data;e.origin===l&&n.id===h.id&&("progress"===n.type?((i=document.createEvent("Event")).initEvent(n.type,!1,!0),t.extend(i,n),r.dispatchEvent(i)):(a(n.status,n.statusText,{postmessage:n.result},n.headers),s.remove(),t(window).unbind(d)))}),s[0].contentWindow.postMessage(h,l)}).appendTo(document.body)},abort:function(){s&&s.remove()}}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(window.jQuery)}(function(t){"use strict";window.XDomainRequest&&!t.support.cors&&t.ajaxTransport(function(e){var i;if(e.crossDomain&&e.async)return e.timeout&&(e.xdrTimeout=e.timeout,delete e.timeout),{send:function(n,s){var o=/\?/.test(e.url)?"&":"?";function l(e,n,o,l){i.onload=i.onerror=i.ontimeout=t.noop,i=null,s(e,n,o,l)}i=new XDomainRequest,"DELETE"===e.type?(e.url=e.url+o+"_method=DELETE",e.type="POST"):"PUT"===e.type?(e.url=e.url+o+"_method=PUT",e.type="POST"):"PATCH"===e.type&&(e.url=e.url+o+"_method=PATCH",e.type="POST"),i.open(e.type,e.url),i.onload=function(){l(200,"OK",{text:i.responseText},"Content-Type: "+i.contentType)},i.onerror=function(){l(404,"Not Found")},e.xdrTimeout&&(i.ontimeout=function(){l(0,"timeout")},i.timeout=e.xdrTimeout),i.send(e.hasContent&&e.data||null)},abort:function(){i&&(i.onerror=t.noop(),i.abort())}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(window.jQuery)}(function(t){"use strict";var e=0,i=t,n="parseJSON";"JSON"in window&&"parse"in JSON&&(i=JSON,n="parse"),t.ajaxTransport("iframe",function(i){if(i.async){var n,s,o,l=i.initialIframeSrc||"javascript:false;";return{send:function(r,a){(n=t('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),o=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+o+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+o+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+o+"_method=PATCH",i.type="POST"),s=t('<iframe src="'+l+'" name="iframe-transport-'+(e+=1)+'"></iframe>').bind("load",function(){var e,o=t.isArray(i.paramName)?i.paramName:[i.paramName];s.unbind("load").bind("load",function(){var e;try{if(!(e=s.contents()).length||!e[0].firstChild)throw new Error}catch(t){e=void 0}a(200,"success",{iframe:e}),t('<iframe src="'+l+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",s.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&t.each(i.formData,function(e,i){t('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(e=i.fileInput.clone(),i.fileInput.after(function(t){return e[t]}),i.paramName&&i.fileInput.each(function(e){t(this).prop("name",o[e]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),e&&e.length&&i.fileInput.each(function(i,n){var s=t(e[i]);t(n).prop("name",s.prop("name")).attr("form",s.attr("form")),s.replaceWith(n)})}),n.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",l),n&&n.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&i[n](t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe xml":function(e){var i=e&&e[0];return i&&t.isXMLDoc(i)?i:t.parseXML(i.XMLDocument&&i.XMLDocument.xml||t(i.body).html())},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget"],t):"object"==typeof exports?t(require("jquery"),require("./vendor/jquery.ui.widget")):t(window.jQuery)}(function(t){"use strict";function e(e){var i="dragover"===e;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var s=n.dataTransfer;s&&-1!==t.inArray("Files",s.types)&&!1!==this._trigger(e,t.Event(e,{delegatedEvent:n}))&&(n.preventDefault(),i&&(s.dropEffect="copy"))}}t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file"/>').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,i){return e=this.messages[e]||e.toString(),i&&t.each(i,function(t,i){e=e.replace("{"+t+"}",i)}),e},formData:function(t){return t.serializeArray()},add:function(e,i){if(e.isDefaultPrevented())return!1;(i.autoUpload||!1!==i.autoUpload&&t(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,i){var n=t-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(e-this.loaded)*(1e3/n)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var i;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(i=[],t.each(e.formData,function(t,e){i.push({name:t,value:e})}),i):[]},_getTotal:function(e){var i=0;return t.each(e,function(t,e){i+=e.size||1}),i},_initProgressObject:function(e){var i={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,i):e._progress=i},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,i){if(e.lengthComputable){var n,s=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&s-i._time<i.progressInterval&&e.loaded!==e.total)return;i._time=s,n=Math.floor(e.loaded/e.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(s,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(s,n,i.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),i),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var i=this,n=e.xhr?e.xhr():t.ajaxSettings.xhr();n.upload&&(t(n.upload).bind("progress",function(t){var n=t.originalEvent;t.lengthComputable=n.lengthComputable,t.loaded=n.loaded,t.total=n.total,i._onProgress(t,e)}),e.xhr=function(){return n})},_deinitProgressListener:function(e){var i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&t(i.upload).unbind("progress")},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var i,n=this,s=e.files[0],o=e.multipart||!t.support.xhrFileUpload,l="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),o&&!e.blob&&this._isInstanceOf("File",s)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(s.uploadName||s.name)+'"'),o?t.support.xhrFormDataFileUpload&&(e.postMessage?(i=this._getFormData(e),e.blob?i.push({name:l,value:e.blob}):t.each(e.files,function(n,s){i.push({name:"array"===t.type(e.paramName)&&e.paramName[n]||l,value:s})})):(n._isInstanceOf("FormData",e.formData)?i=e.formData:(i=new FormData,t.each(this._getFormData(e),function(t,e){i.append(e.name,e.value)})),e.blob?i.append(l,e.blob,s.uploadName||s.name):t.each(e.files,function(s,o){(n._isInstanceOf("File",o)||n._isInstanceOf("Blob",o))&&i.append("array"===t.type(e.paramName)&&e.paramName[s]||l,o,o.uploadName||o.name)})),e.data=i):(e.contentType=s.type||"application/octet-stream",e.data=e.blob||s),e.blob=null},_initIframeSettings:function(e){var i=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&i&&i!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var i=t(e.fileInput),n=e.paramName;return n?t.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var e=t(this),i=e.prop("name")||"files[]",s=(e.prop("files")||[1]).length;s;)n.push(i),s-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var i=t.extend({},this.options,e);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,i,n){var s=t.Deferred(),o=s.promise();return i=i||this.options.context||o,!0===e?s.resolveWith(i,n):!1===e&&s.rejectWith(i,n),o.abort=s.promise,this._enhancePromise(o)},_addConvenienceMethods:function(e,i){var n=this,s=function(e){return t.Deferred().resolveWith(n,e).promise()};i.process=function(e,o){return(e||o)&&(i._processQueue=this._processQueue=(this._processQueue||s([this])).then(function(){return i.errorThrown?t.Deferred().rejectWith(n,[i]).promise():s(arguments)}).then(e,o)),this._processQueue||s([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==n._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)&&n._onSend(e,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),i=e&&e.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(e,i){e.uploadedBytes=e.uploadedBytes||0;var n,s,o=this,l=e.files[0],r=l.size,a=e.uploadedBytes,h=e.maxChunkSize||r,d=this._blobSlice,c=t.Deferred(),u=c.promise();return!(!(this._isXHRUpload(e)&&d&&(a||("function"===t.type(h)?h(e):h)<r))||e.data)&&(!!i||(a>=r?(l.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",l.error])):(s=function(){var i=t.extend({},e),u=i._progress.loaded;i.blob=d.call(l,a,a+("function"===t.type(h)?h(i):h),l.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+a+"-"+(a+i.chunkSize-1)+"/"+r,o._trigger("chunkbeforesend",null,i),o._initXHRData(i),o._initProgressListener(i),n=(!1!==o._trigger("chunksend",null,i)&&t.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,l,h){a=o._getUploadedBytes(h)||a+i.chunkSize,u+i.chunkSize-i._progress.loaded&&o._onProgress(t.Event("progress",{lengthComputable:!0,loaded:a-i.uploadedBytes,total:a-i.uploadedBytes}),i),e.uploadedBytes=i.uploadedBytes=a,i.result=n,i.textStatus=l,i.jqXHR=h,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),a<r?s():c.resolveWith(i.context,[n,l,h])}).fail(function(t,e,n){i.jqXHR=t,i.textStatus=e,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),c.rejectWith(i.context,[t,e,n])}).always(function(){o._deinitProgressListener(i)})},this._enhancePromise(u),u.abort=function(){return n.abort()},s(),u)))},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,i,n,s){var o=s._progress.total,l=s._response;s._progress.loaded<o&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:o,total:o}),s),l.result=s.result=e,l.textStatus=s.textStatus=i,l.jqXHR=s.jqXHR=n,this._trigger("done",null,s)},_onFail:function(t,e,i,n){var s=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),s.jqXHR=n.jqXHR=t,s.textStatus=n.textStatus=e,s.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(t,e,i,n){this._trigger("always",null,n)},_onSend:function(e,i){i.submit||this._addConvenienceMethods(e,i);var n,s,o,l,r=this,a=r._getAJAXSettings(i),h=function(){return r._sending+=1,a._bitrateTimer=new r._BitrateTimer,n=n||((s||!1===r._trigger("send",t.Event("send",{delegatedEvent:e}),a))&&r._getXHRPromise(!1,a.context,s)||r._chunkedUpload(a)||t.ajax(a)).done(function(t,e,i){r._onDone(t,e,i,a)}).fail(function(t,e,i){r._onFail(t,e,i,a)}).always(function(t,e,i){if(r._deinitProgressListener(a),r._onAlways(t,e,i,a),r._sending-=1,r._active-=1,a.limitConcurrentUploads&&a.limitConcurrentUploads>r._sending)for(var n=r._slots.shift();n;){if("pending"===r._getDeferredState(n)){n.resolve();break}n=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(e,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=t.Deferred(),this._slots.push(o),l=o.then(h)):(this._sequence=this._sequence.then(h,h),l=this._sequence),l.abort=function(){return s=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(a.context,s),h())},this._enhancePromise(l)):h()},_onAdd:function(e,i){var n,s,o,l,r=this,a=!0,h=t.extend({},this.options,i),d=i.files,c=d.length,u=h.limitMultiFileUploads,f=h.limitMultiFileUploadSize,p=h.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(h),_=0;if(!c)return!1;if(f&&void 0===d[0].size&&(f=void 0),(h.singleFileUploads||u||f)&&this._isXHRUpload(h))if(h.singleFileUploads||f||!u)if(!h.singleFileUploads&&f)for(o=[],n=[],l=0;l<c;l+=1)m+=d[l].size+p,(l+1===c||m+d[l+1].size+p>f||u&&l+1-_>=u)&&(o.push(d.slice(_,l+1)),(s=g.slice(_,l+1)).length||(s=g),n.push(s),_=l+1,m=0);else n=g;else for(o=[],n=[],l=0;l<c;l+=u)o.push(d.slice(l,l+u)),(s=g.slice(l,l+u)).length||(s=g),n.push(s);else o=[d],n=[g];return i.originalFiles=d,t.each(o||d,function(s,l){var h=t.extend({},i);return h.files=o?l:[l],h.paramName=n[s],r._initResponseObject(h),r._initProgressObject(h),r._addConvenienceMethods(e,h),a=r._trigger("add",t.Event("add",{delegatedEvent:e}),h)}),a},_replaceFileInput:function(e){var i=e.fileInput,n=i.clone(!0),s=i.is(document.activeElement);e.fileInputClone=n,t("<form></form>").append(n)[0].reset(),i.after(n).detach(),s&&n.focus(),t.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===i[0]?n[0]:e}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,i){var n,s=this,o=t.Deferred(),l=[],r=function(t){t&&!t.entry&&(t.entry=e),o.resolve([t])},a=function(){n.readEntries(function(t){t.length?(l=l.concat(t),a()):function(t){s._handleFileTreeEntries(t,i+e.name+"/").done(function(t){o.resolve(t)}).fail(r)}(l)},r)};return i=i||"",e.isFile?e._file?(e._file.relativePath=i,o.resolve(e._file)):e.file(function(t){t.relativePath=i,o.resolve(t)},r):e.isDirectory?(n=e.createReader(),a()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(e,i){var n=this;return t.when.apply(t,t.map(e,function(t){return n._handleFileTreeEntry(t,i)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){var i=(e=e||{}).items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(t.map(i,function(t){var e;return t.webkitGetAsEntry?((e=t.webkitGetAsEntry())&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){var i,n,s=(e=t(e)).prop("webkitEntries")||e.prop("entries");if(s&&s.length)return this._handleFileTreeEntries(s);if((i=t.makeArray(e.prop("files"))).length)void 0===i[0].name&&i[0].fileName&&t.each(i,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(!(n=e.prop("value")))return t.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return t.Deferred().resolve(i).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var i=this,n={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(n.fileInput).always(function(s){n.files=s,i.options.replaceFileInput&&i._replaceFileInput(n),!1!==i._trigger("change",t.Event("change",{delegatedEvent:e}),n)&&i._onAdd(e,n)})},_onPaste:function(e){var i=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(t.each(i,function(t,e){var i=e.getAsFile&&e.getAsFile();i&&n.files.push(i)}),!1!==this._trigger("paste",t.Event("paste",{delegatedEvent:e}),n)&&this._onAdd(e,n))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var i=this,n=e.dataTransfer,s={};n&&n.files&&n.files.length&&(e.preventDefault(),this._getDroppedFiles(n).always(function(n){s.files=n,!1!==i._trigger("drop",t.Event("drop",{delegatedEvent:e}),s)&&i._onAdd(e,s)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(e,i){var n=-1!==t.inArray(e,this._specialOptions);n&&this._destroyEventHandlers(),this._super(e,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),i=e.pop();return e.shift(),new RegExp(e.join("/"),i)},_isRegExpOption:function(e,i){return"url"!==e&&"string"===t.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var e=this,i=this.options,n=this.element.data();t.each(this.element[0].attributes,function(t,s){var o,l=s.name.toLowerCase();/^data-/.test(l)&&(l=l.slice(5).replace(/-[a-z]/g,function(t){return t.charAt(1).toUpperCase()}),o=n[l],e._isRegExpOption(l,o)&&(o=e._getRegExp(o)),i[l]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var i=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,i._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var i,n,s=this,o=t.Deferred(),l=o.promise();return l.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),l)},this._getFileInputFiles(e.fileInput).always(function(t){n||(t.length?(e.files=t,(i=s._onSend(null,e)).then(function(t,e,i){o.resolve(t,e,i)},function(t,e,i){o.reject(t,e,i)})):o.reject())}),this._enhancePromise(l)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],t):"object"==typeof exports?t(require("jquery"),require("./jquery.fileupload")):t(window.jQuery)}(function(t){"use strict";var e=t.blueimp.fileupload.prototype.options.add;t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{processQueue:[],add:function(i,n){var s=t(this);n.process(function(){return s.fileupload("process",n)}),e.call(this,i,n)}},processActions:{},_processFile:function(e,i){var n=this,s=t.Deferred().resolveWith(n,[e]).promise();return this._trigger("process",null,e),t.each(e.processQueue,function(e,o){var l=function(e){return i.errorThrown?t.Deferred().rejectWith(n,[i]).promise():n.processActions[o.action].call(n,e,o)};s=s.then(l,o.always&&l)}),s.done(function(){n._trigger("processdone",null,e),n._trigger("processalways",null,e)}).fail(function(){n._trigger("processfail",null,e),n._trigger("processalways",null,e)}),s},_transformProcessQueue:function(e){var i=[];t.each(e.processQueue,function(){var n={},s=this.action,o=!0===this.prefix?s:this.prefix;t.each(this,function(i,s){"string"===t.type(s)&&"@"===s.charAt(0)?n[i]=e[s.slice(1)||(o?o+i.charAt(0).toUpperCase()+i.slice(1):i)]:n[i]=s}),i.push(n)}),e.processQueue=i},processing:function(){return this._processing},process:function(e){var i=this,n=t.extend({},this.options,e);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),t.each(e.files,function(s){var o=s?t.extend({},n):n,l=function(){return e.errorThrown?t.Deferred().rejectWith(i,[e]).promise():i._processFile(o,e)};o.index=s,i._processing+=1,i._processingQueue=i._processingQueue.then(l,l).always(function(){i._processing-=1,0===i._processing&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=t.Deferred().resolveWith(this).promise()}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-scale","load-image-exif","canvas-to-blob","./jquery.fileupload-process"],t):"object"==typeof exports?t(require("jquery"),require("blueimp-load-image/js/load-image"),require("blueimp-load-image/js/load-image-meta"),require("blueimp-load-image/js/load-image-scale"),require("blueimp-load-image/js/load-image-exif"),require("blueimp-canvas-to-blob"),require("./jquery.fileupload-process")):t(window.jQuery,window.loadImage)}(function(t,e){"use strict";t.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(i,n){if(n.disabled)return i;var s=this,o=i.files[i.index],l=t.Deferred();return"number"===t.type(n.maxFileSize)&&o.size>n.maxFileSize||n.fileTypes&&!n.fileTypes.test(o.type)||!e(o,function(t){t.src&&(i.img=t),l.resolveWith(s,[i])},n)?i:l.promise()},resizeImage:function(i,n){if(n.disabled||!i.canvas&&!i.img)return i;n=t.extend({canvas:!0},n);var s,o=this,l=t.Deferred(),r=n.canvas&&i.canvas||i.img,a=function(t){t&&(t.width!==r.width||t.height!==r.height||n.forceResize)&&(i[t.getContext?"canvas":"img"]=t),i.preview=t,l.resolveWith(o,[i])};if(i.exif){if(!0===n.orientation&&(n.orientation=i.exif.get("Orientation")),n.thumbnail&&(s=i.exif.get("Thumbnail")))return e(s,a,n),l.promise();i.orientation?delete n.orientation:i.orientation=n.orientation}return r?(a(e.scale(r,n)),l.promise()):i},saveImage:function(e,i){if(!e.canvas||i.disabled)return e;var n=this,s=e.files[e.index],o=t.Deferred();return e.canvas.toBlob?(e.canvas.toBlob(function(t){t.name||(s.type===t.type?t.name=s.name:s.name&&(t.name=s.name.replace(/\.\w+$/,"."+t.type.substr(6)))),s.type!==t.type&&delete e.imageHead,e.files[e.index]=t,o.resolveWith(n,[e])},i.type||s.type,i.quality),o.promise()):e},loadImageMetaData:function(i,n){if(n.disabled)return i;var s=this,o=t.Deferred();return e.parseMetaData(i.files[i.index],function(e){t.extend(i,e),o.resolveWith(s,[i])},n),o.promise()},saveImageMetaData:function(t,e){if(!(t.imageHead&&t.canvas&&t.canvas.toBlob)||e.disabled)return t;var i=t.files[t.index],n=new Blob([t.imageHead,this._blobSlice.call(i,20)],{type:i.type});return n.name=i.name,t.files[t.index]=n,t},setImage:function(t,e){return t.preview&&!e.disabled&&(t.files[t.index][e.name||"preview"]=t.preview),t},deleteImageReferences:function(t,e){return e.disabled||(delete t.img,delete t.canvas,delete t.preview,delete t.imageHead),t}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],t):"object"==typeof exports?t(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):t(window.jQuery,window.loadImage)}(function(t,e){"use strict";t.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(i,n){if(n.disabled)return i;var s,o,l=i.files[i.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(l.type)&&("number"!==t.type(n.maxFileSize)||l.size<=n.maxFileSize)&&(!n.fileTypes||n.fileTypes.test(l.type))&&(s=e.createObjectURL(l))?((o=this._audioElement.cloneNode(!1)).src=s,o.controls=!0,i.audio=o,i):i},setAudio:function(t,e){return t.audio&&!e.disabled&&(t.files[t.index][e.name||"preview"]=t.audio),t}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],t):"object"==typeof exports?t(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):t(window.jQuery,window.loadImage)}(function(t,e){"use strict";t.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(i,n){if(n.disabled)return i;var s,o,l=i.files[i.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(l.type)&&("number"!==t.type(n.maxFileSize)||l.size<=n.maxFileSize)&&(!n.fileTypes||n.fileTypes.test(l.type))&&(s=e.createObjectURL(l))?((o=this._videoElement.cloneNode(!1)).src=s,o.controls=!0,i.video=o,i):i},setVideo:function(t,e){return t.video&&!e.disabled&&(t.files[t.index][e.name||"preview"]=t.video),t}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],t):"object"==typeof exports?t(require("jquery"),require("./jquery.fileupload-process")):t(window.jQuery)}(function(t){"use strict";t.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{getNumberOfFiles:t.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,i){if(i.disabled)return e;var n,s=t.Deferred(),o=this.options,l=e.files[e.index];return(i.minFileSize||i.maxFileSize)&&(n=l.size),"number"===t.type(i.maxNumberOfFiles)&&(o.getNumberOfFiles()||0)+e.files.length>i.maxNumberOfFiles?l.error=o.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(l.type)||i.acceptFileTypes.test(l.name)?n>i.maxFileSize?l.error=o.i18n("maxFileSize"):"number"===t.type(n)&&n<i.minFileSize?l.error=o.i18n("minFileSize"):delete l.error:l.error=o.i18n("acceptFileTypes"),l.error||e.files.error?(e.files.error=!0,s.rejectWith(this,[e])):s.resolveWith(this,[e]),s.promise()}}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","blueimp-tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],t):"object"==typeof exports?t(require("jquery"),require("blueimp-tmpl"),require("./jquery.fileupload-image"),require("./jquery.fileupload-audio"),require("./jquery.fileupload-video"),require("./jquery.fileupload-validate")):t(window.jQuery,window.tmpl)}(function(t,e){"use strict";t.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId"),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(e){return e.result&&t.isArray(e.result.files)?e.result.files:[]},add:function(e,i){if(e.isDefaultPrevented())return!1;var n=t(this),s=n.data("blueimp-fileupload")||n.data("fileupload"),o=s.options;i.context=s._renderUpload(i.files).data("data",i).addClass("processing"),o.filesContainer[o.prependFiles?"prepend":"append"](i.context),s._forceReflow(i.context),s._transition(i.context),i.process(function(){return n.fileupload("process",i)}).always(function(){i.context.each(function(e){t(this).find(".size").text(s._formatFileSize(i.files[e].size))}).removeClass("processing"),s._renderPreviews(i)}).done(function(){i.context.find(".start").prop("disabled",!1),!1!==s._trigger("added",e,i)&&(o.autoUpload||i.autoUpload)&&!1!==i.autoUpload&&i.submit()}).fail(function(){i.files.error&&i.context.each(function(e){var n=i.files[e].error;n&&t(this).find(".error").text(n)})})},send:function(e,i){if(e.isDefaultPrevented())return!1;var n=t(this).data("blueimp-fileupload")||t(this).data("fileupload");return i.context&&i.dataType&&"iframe"===i.dataType.substr(0,6)&&i.context.find(".progress").addClass(!t.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),n._trigger("sent",e,i)},done:function(e,i){if(e.isDefaultPrevented())return!1;var n,s,o=t(this).data("blueimp-fileupload")||t(this).data("fileupload"),l=(i.getFilesFromResponse||o.options.getFilesFromResponse)(i);i.context?i.context.each(function(r){var a=l[r]||{error:"Empty file upload result"};s=o._addFinishedDeferreds(),o._transition(t(this)).done(function(){var l=t(this);n=o._renderDownload([a]).replaceAll(l),o._forceReflow(n),o._transition(n).done(function(){i.context=t(this),o._trigger("completed",e,i),o._trigger("finished",e,i),s.resolve()})})}):(n=o._renderDownload(l)[o.options.prependFiles?"prependTo":"appendTo"](o.options.filesContainer),o._forceReflow(n),s=o._addFinishedDeferreds(),o._transition(n).done(function(){i.context=t(this),o._trigger("completed",e,i),o._trigger("finished",e,i),s.resolve()}))},fail:function(e,i){if(e.isDefaultPrevented())return!1;var n,s,o=t(this).data("blueimp-fileupload")||t(this).data("fileupload");i.context?i.context.each(function(l){if("abort"!==i.errorThrown){var r=i.files[l];r.error=r.error||i.errorThrown||i.i18n("unknownError"),s=o._addFinishedDeferreds(),o._transition(t(this)).done(function(){var l=t(this);n=o._renderDownload([r]).replaceAll(l),o._forceReflow(n),o._transition(n).done(function(){i.context=t(this),o._trigger("failed",e,i),o._trigger("finished",e,i),s.resolve()})})}else s=o._addFinishedDeferreds(),o._transition(t(this)).done(function(){t(this).remove(),o._trigger("failed",e,i),o._trigger("finished",e,i),s.resolve()})}):"abort"!==i.errorThrown?(i.context=o._renderUpload(i.files)[o.options.prependFiles?"prependTo":"appendTo"](o.options.filesContainer).data("data",i),o._forceReflow(i.context),s=o._addFinishedDeferreds(),o._transition(i.context).done(function(){i.context=t(this),o._trigger("failed",e,i),o._trigger("finished",e,i),s.resolve()})):(o._trigger("failed",e,i),o._trigger("finished",e,i),o._addFinishedDeferreds().resolve())},progress:function(e,i){if(e.isDefaultPrevented())return!1;var n=Math.floor(i.loaded/i.total*100);i.context&&i.context.each(function(){t(this).find(".progress").attr("aria-valuenow",n).children().first().css("width",n+"%")})},progressall:function(e,i){if(e.isDefaultPrevented())return!1;var n=t(this),s=Math.floor(i.loaded/i.total*100),o=n.find(".fileupload-progress"),l=o.find(".progress-extended");l.length&&l.html((n.data("blueimp-fileupload")||n.data("fileupload"))._renderExtendedProgress(i)),o.find(".progress").attr("aria-valuenow",s).children().first().css("width",s+"%")},start:function(e){if(e.isDefaultPrevented())return!1;var i=t(this).data("blueimp-fileupload")||t(this).data("fileupload");i._resetFinishedDeferreds(),i._transition(t(this).find(".fileupload-progress")).done(function(){i._trigger("started",e)})},stop:function(e){if(e.isDefaultPrevented())return!1;var i=t(this).data("blueimp-fileupload")||t(this).data("fileupload"),n=i._addFinishedDeferreds();t.when.apply(t,i._getFinishedDeferreds()).done(function(){i._trigger("stopped",e)}),i._transition(t(this).find(".fileupload-progress")).done(function(){t(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%"),t(this).find(".progress-extended").html("&nbsp;"),n.resolve()})},processstart:function(e){if(e.isDefaultPrevented())return!1;t(this).addClass("fileupload-processing")},processstop:function(e){if(e.isDefaultPrevented())return!1;t(this).removeClass("fileupload-processing")},destroy:function(e,i){if(e.isDefaultPrevented())return!1;var n=t(this).data("blueimp-fileupload")||t(this).data("fileupload"),s=function(){n._transition(i.context).done(function(){t(this).remove(),n._trigger("destroyed",e,i)})};i.url?(i.dataType=i.dataType||n.options.dataType,t.ajax(i).done(s).fail(function(){n._trigger("destroyfailed",e,i)})):s()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(e){return e||(e=t.Deferred()),this._finishedUploads.push(e),e},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var e=t(this),i=e.prop("href"),n=e.prop("download"),s="application/octet-stream";e.bind("dragstart",function(t){try{t.originalEvent.dataTransfer.setData("DownloadURL",[s,n,i].join(":"))}catch(t){}})},_formatFileSize:function(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" GB":t>=1e6?(t/1e6).toFixed(2)+" MB":(t/1e3).toFixed(2)+" KB"},_formatBitrate:function(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" Gbit/s":t>=1e6?(t/1e6).toFixed(2)+" Mbit/s":t>=1e3?(t/1e3).toFixed(2)+" kbit/s":t.toFixed(2)+" bit/s"},_formatTime:function(t){var e=new Date(1e3*t),i=Math.floor(t/86400);return(i=i?i+"d ":"")+("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)},_formatPercentage:function(t){return(100*t).toFixed(2)+" %"},_renderExtendedProgress:function(t){return this._formatBitrate(t.bitrate)+" | "+this._formatTime(8*(t.total-t.loaded)/t.bitrate)+" | "+this._formatPercentage(t.loaded/t.total)+" | "+this._formatFileSize(t.loaded)+" / "+this._formatFileSize(t.total)},_renderTemplate:function(e,i){if(!e)return t();var n=e({files:i,formatFileSize:this._formatFileSize,options:this.options});return n instanceof t?n:t(this.options.templatesContainer).html(n).children()},_renderPreviews:function(e){e.context.find(".preview").each(function(i,n){t(n).append(e.files[i].preview)})},_renderUpload:function(t){return this._renderTemplate(this.options.uploadTemplate,t)},_renderDownload:function(t){return this._renderTemplate(this.options.downloadTemplate,t).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(e){e.preventDefault();var i=t(e.currentTarget),n=i.closest(".template-upload").data("data");i.prop("disabled",!0),n&&n.submit&&n.submit()},_cancelHandler:function(e){e.preventDefault();var i=t(e.currentTarget).closest(".template-upload,.template-download"),n=i.data("data")||{};n.context=n.context||i,n.abort?n.abort():(n.errorThrown="abort",this._trigger("fail",e,n))},_deleteHandler:function(e){e.preventDefault();var i=t(e.currentTarget);this._trigger("destroy",e,t.extend({context:i.closest(".template-download"),type:"DELETE"},i.data()))},_forceReflow:function(e){return t.support.transition&&e.length&&e[0].offsetWidth},_transition:function(e){var i=t.Deferred();return t.support.transition&&e.hasClass("fade")&&e.is(":visible")?e.bind(t.support.transition.end,function(n){n.target===e[0]&&(e.unbind(t.support.transition.end),i.resolveWith(e))}).toggleClass("in"):(e.toggleClass("in"),i.resolveWith(e)),i},_initButtonBarEventHandlers:function(){var e=this.element.find(".fileupload-buttonbar"),i=this.options.filesContainer;this._on(e.find(".start"),{click:function(t){t.preventDefault(),i.find(".start").click()}}),this._on(e.find(".cancel"),{click:function(t){t.preventDefault(),i.find(".cancel").click()}}),this._on(e.find(".delete"),{click:function(t){t.preventDefault(),i.find(".toggle:checked").closest(".template-download").find(".delete").click(),e.find(".toggle").prop("checked",!1)}}),this._on(e.find(".toggle"),{change:function(e){i.find(".toggle").prop("checked",t(e.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var t=this.options;t.templatesContainer=this.document[0].createElement(t.filesContainer.prop("nodeName")),e&&(t.uploadTemplateId&&(t.uploadTemplate=e(t.uploadTemplateId)),t.downloadTemplateId&&(t.downloadTemplate=e(t.downloadTemplateId)))},_initFilesContainer:function(){var e=this.options;void 0===e.filesContainer?e.filesContainer=this.element.find(".files"):e.filesContainer instanceof t||(e.filesContainer=t(e.filesContainer))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates()},_create:function(){this._super(),this._resetFinishedDeferreds(),t.support.fileInput||this._disableFileInputButton()},enable:function(){var t=!1;this.options.disabled&&(t=!0),this._super(),t&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})}),function(t){function e(e){if("string"==typeof e.data){var i=e.handler,n=e.data.toLowerCase().split(" ");e.handler=function(e){if(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type){var s="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],o=String.fromCharCode(e.which).toLowerCase(),l="",r={};e.altKey&&"alt"!==s&&(l+="alt+"),e.ctrlKey&&"ctrl"!==s&&(l+="ctrl+"),e.metaKey&&!e.ctrlKey&&"meta"!==s&&(l+="meta+"),e.shiftKey&&"shift"!==s&&(l+="shift+"),s?r[l+s]=!0:(r[l+o]=!0,r[l+t.hotkeys.shiftNums[o]]=!0,"shift+"===l&&(r[t.hotkeys.shiftNums[o]]=!0));for(var a=0,h=n.length;a<h;a++)if(r[n[a]])return i.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})}(jQuery),jQuery.cookie=function(t,e,i){if(void 0===e){var n=null;if(document.cookie&&""!=document.cookie)for(var s=document.cookie.split(";"),o=0;o<s.length;o++){var l=jQuery.trim(s[o]);if(l.substring(0,t.length+1)==t+"="){n=decodeURIComponent(l.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var r,a="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(r=new Date).setTime(r.getTime()+24*i.expires*60*60*1e3):r=i.expires,a="; expires="+r.toUTCString());var h=i.path?"; path="+i.path:"",d=i.domain?"; domain="+i.domain:"",c=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,h,d,c].join("")},function(t,e){var i,n,s=0,o=/^ui-id-\d+$/;function l(e,i){var n,s,o,l=e.nodeName.toLowerCase();return"area"===l?(s=(n=e.parentNode).name,!(!e.href||!s||"map"!==n.nodeName.toLowerCase())&&(!!(o=t("img[usemap=#"+s+"]")[0])&&r(o))):(/input|select|textarea|button|object/.test(l)?!e.disabled:"a"===l&&e.href||i)&&r(e)}function r(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:(i=t.fn.focus,function(e,n){return"number"==typeof e?this.each(function(){var i=this;setTimeout(function(){t(i).focus(),n&&n.call(i)},e)}):i.apply(this,arguments)}),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,s=t(this[0]);s.length&&s[0]!==document;){if(("absolute"===(i=s.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return l(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),n=isNaN(i);return(n||i>=0)&&l(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){var n="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};function l(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}t.fn["inner"+i]=function(e){return void 0===e?o["inner"+i].call(this):this.each(function(){t(this).css(s,l(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(s,l(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=(n=t.fn.removeData,function(e){return arguments.length?n.call(this,t.camelCase(e)):n.call(this)})),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i){var n,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n,s=i&&"left"===i?"scrollLeft":"scrollTop";return e[s]>0||(e[s]=1,n=e[s]>0,e[s]=0,n)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(t){}s(e)},t.widget=function(e,i,n){var s,o,l,r,a={},h=e.split(".")[0];e=e.split(".")[1],s=h+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[h]=t[h]||{},o=t[h][e],l=t[h][e]=function(t,e){if(!this._createWidget)return new l(t,e);arguments.length&&this._createWidget(t,e)},t.extend(l,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(r=new i).options=t.widget.extend({},r.options),t.each(n,function(e,n){var s,o;t.isFunction(n)?a[e]=(s=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)},function(){var t,e=this._super,i=this._superApply;return this._super=s,this._superApply=o,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}):a[e]=n}),l.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix:e},a,{constructor:l,namespace:h,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,l,i._proto)}),delete o._childConstructors):i._childConstructors.push(l),t.widget.bridge(e,l)},t.widget.extend=function(e){for(var i,s,o=n.call(arguments,1),l=0,r=o.length;l<r;l++)for(i in o[l])s=o[l][i],o[l].hasOwnProperty(i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(o){var l="string"==typeof o,r=n.call(arguments,1),a=this;return o=!l&&r.length?t.widget.extend.apply(null,[o].concat(r)):o,l?this.each(function(){var i,n=t.data(this,s);return n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,r))!==n&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(o||{})._init():t.data(this,s,new i(o,this))}),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,l=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(l={},e=(n=e.split(".")).shift(),n.length){for(s=l[e]=t.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),void 0===i)return void 0===s[e]?null:s[e];s[e]=i}else{if(void 0===i)return void 0===this.options[e]?null:this.options[e];l[e]=i}return this._setOptions(l),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,l){function r(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof l?o[l]:l).apply(o,arguments)}"string"!=typeof l&&(r.guid=l.guid=l.guid||r.guid||t.guid++);var a=n.match(/^(\w+)\s*(.*)$/),h=a[1]+o.eventNamespace,d=a[2];d?s.delegate(d,h,r):i.bind(h,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,l=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(l)&&!1===l.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var l,r=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),l=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),l&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(jQuery),function(t,e){var i=!1;t(document).mouseup(function(){i=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,s=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0))}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){t.ui=t.ui||{};var i,n=Math.max,s=Math.abs,o=Math.round,l=/left|center|right/,r=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,d=/%$/,c=t.fn.position;function u(t,e,i){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?i/100:1)]}function f(e,i){return parseInt(t.css(e,i),10)||0}t.position={scrollbarWidth:function(){if(void 0!==i)return i;var e,n,s=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),e===(n=o.offsetWidth)&&(n=s[0].clientWidth),s.remove(),i=e-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);e=t.extend({},e);var i,d,p,m,g,_,v,b,y=t(e.of),w=t.position.getWithinInfo(e.within),x=t.position.getScrollInfo(w),C=(e.collision||"flip").split(" "),S={};return _=9===(b=(v=y)[0]).nodeType?{width:v.width(),height:v.height(),offset:{top:0,left:0}}:t.isWindow(b)?{width:v.width(),height:v.height(),offset:{top:v.scrollTop(),left:v.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:v.outerWidth(),height:v.outerHeight(),offset:v.offset()},y[0].preventDefault&&(e.at="left top"),d=_.width,p=_.height,m=_.offset,g=t.extend({},m),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",t=a.exec(n[0]),i=a.exec(n[1]),S[this]=[t?t[0]:0,i?i[0]:0],e[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]),"right"===e.at[0]?g.left+=d:"center"===e.at[0]&&(g.left+=d/2),"bottom"===e.at[1]?g.top+=p:"center"===e.at[1]&&(g.top+=p/2),i=u(S.at,d,p),g.left+=i[0],g.top+=i[1],this.each(function(){var l,r,a=t(this),h=a.outerWidth(),c=a.outerHeight(),_=f(this,"marginLeft"),v=f(this,"marginTop"),b=h+_+f(this,"marginRight")+x.width,k=c+v+f(this,"marginBottom")+x.height,I=t.extend({},g),N=u(S.my,a.outerWidth(),a.outerHeight());"right"===e.my[0]?I.left-=h:"center"===e.my[0]&&(I.left-=h/2),"bottom"===e.my[1]?I.top-=c:"center"===e.my[1]&&(I.top-=c/2),I.left+=N[0],I.top+=N[1],t.support.offsetFractions||(I.left=o(I.left),I.top=o(I.top)),l={marginLeft:_,marginTop:v},t.each(["left","top"],function(n,s){t.ui.position[C[n]]&&t.ui.position[C[n]][s](I,{targetWidth:d,targetHeight:p,elemWidth:h,elemHeight:c,collisionPosition:l,collisionWidth:b,collisionHeight:k,offset:[i[0]+N[0],i[1]+N[1]],my:e.my,at:e.at,within:w,elem:a})}),e.using&&(r=function(t){var i=m.left-I.left,o=i+d-h,l=m.top-I.top,r=l+p-c,u={target:{element:y,left:m.left,top:m.top,width:d,height:p},element:{element:a,left:I.left,top:I.top,width:h,height:c},horizontal:o<0?"left":i>0?"right":"center",vertical:r<0?"top":l>0?"bottom":"middle"};d<h&&s(i+o)<d&&(u.horizontal="center"),p<c&&s(l+r)<p&&(u.vertical="middle"),n(s(i),s(o))>n(s(l),s(r))?u.important="horizontal":u.important="vertical",e.using.call(this,t,u)}),a.offset(t.extend(I,{using:r}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,o=s.isWindow?s.scrollLeft:s.offset.left,l=s.width,r=t.left-e.collisionPosition.marginLeft,a=o-r,h=r+e.collisionWidth-l-o;e.collisionWidth>l?a>0&&h<=0?(i=t.left+a+e.collisionWidth-l-o,t.left+=a-i):t.left=h>0&&a<=0?o:a>h?o+l-e.collisionWidth:o:a>0?t.left+=a:h>0?t.left-=h:t.left=n(t.left-r,t.left)},top:function(t,e){var i,s=e.within,o=s.isWindow?s.scrollTop:s.offset.top,l=e.within.height,r=t.top-e.collisionPosition.marginTop,a=o-r,h=r+e.collisionHeight-l-o;e.collisionHeight>l?a>0&&h<=0?(i=t.top+a+e.collisionHeight-l-o,t.top+=a-i):t.top=h>0&&a<=0?o:a>h?o+l-e.collisionHeight:o:a>0?t.top+=a:h>0?t.top-=h:t.top=n(t.top-r,t.top)}},flip:{left:function(t,e){var i,n,o=e.within,l=o.offset.left+o.scrollLeft,r=o.width,a=o.isWindow?o.scrollLeft:o.offset.left,h=t.left-e.collisionPosition.marginLeft,d=h-a,c=h+e.collisionWidth-r-a,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];d<0?((i=t.left+u+f+p+e.collisionWidth-r-l)<0||i<s(d))&&(t.left+=u+f+p):c>0&&((n=t.left-e.collisionPosition.marginLeft+u+f+p-a)>0||s(n)<c)&&(t.left+=u+f+p)},top:function(t,e){var i,n,o=e.within,l=o.offset.top+o.scrollTop,r=o.height,a=o.isWindow?o.scrollTop:o.offset.top,h=t.top-e.collisionPosition.marginTop,d=h-a,c=h+e.collisionHeight-r-a,u="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];d<0?(n=t.top+u+f+p+e.collisionHeight-r-l,t.top+u+f+p>d&&(n<0||n<s(d))&&(t.top+=u+f+p)):c>0&&(i=t.top-e.collisionPosition.marginTop+u+f+p-a,t.top+u+f+p>c&&(i>0||s(i)<c)&&(t.top+=u+f+p))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,o,l=document.getElementsByTagName("body")[0],r=document.createElement("div");for(o in e=document.createElement(l?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)e.style[o]=n[o];e.appendChild(r),(i=l||document.documentElement).insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=t(r).offset().left,t.support.offsetFractions=s>10&&s<11,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(t(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!t.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1)},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;s.containment?"window"!==s.containment?"document"!==s.containment?s.containment.constructor!==Array?("parent"===s.containment&&(s.containment=this.helper[0].parentNode),(n=(i=t(s.containment))[0])&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i)):this.containment=s.containment:this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(e){var i,n,s,o,l=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=e.pageX,h=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(a=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(a=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),l.grid&&(s=l.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/l.grid[1])*l.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-l.grid[1]:s+l.grid[1]:s,o=l.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/l.grid[0])*l.grid[0]:this.originalPageX,a=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-l.grid[0]:o+l.grid[0]:o)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("ui-draggable"),s=n.options,o=t.extend({},i,{item:n.element});n.sortables=[],t(s.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var n=t(this).data("ui-draggable"),s=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,s))})},drag:function(e,i){var n=t(this).data("ui-draggable"),s=this;t.each(n.sortables,function(){var o=!1,l=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==l&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(l.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),!1!==s&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){var n,s,o,l,r,a,h,d,c,u,f=t(this).data("ui-draggable"),p=f.options,m=p.snapTolerance,g=i.offset.left,_=g+f.helperProportions.width,v=i.offset.top,b=v+f.helperProportions.height;for(c=f.snapElements.length-1;c>=0;c--)a=(r=f.snapElements[c].left)+f.snapElements[c].width,d=(h=f.snapElements[c].top)+f.snapElements[c].height,_<r-m||g>a+m||b<h-m||v>d+m||!t.contains(f.snapElements[c].item.ownerDocument,f.snapElements[c].item)?(f.snapElements[c].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[c].item})),f.snapElements[c].snapping=!1):("inner"!==p.snapMode&&(n=Math.abs(h-b)<=m,s=Math.abs(d-v)<=m,o=Math.abs(r-_)<=m,l=Math.abs(a-g)<=m,n&&(i.position.top=f._convertPositionTo("relative",{top:h-f.helperProportions.height,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:d,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:r-f.helperProportions.width}).left-f.margins.left),l&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a}).left-f.margins.left)),u=n||s||o||l,"outer"!==p.snapMode&&(n=Math.abs(h-v)<=m,s=Math.abs(d-b)<=m,o=Math.abs(r-g)<=m,l=Math.abs(a-_)<=m,n&&(i.position.top=f._convertPositionTo("relative",{top:h,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:d-f.helperProportions.height,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:r}).left-f.margins.left),l&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[c].snapping&&(n||s||o||l||u)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[c].item})),f.snapElements[c].snapping=n||s||o||l||u)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,n=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});n.length&&(e=parseInt(t(n[0]).css("zIndex"),10)||0,t(n).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+n.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t,e){function i(t,e,i){return t>e&&t<e+i}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];e<i.length;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope===n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance))return s=!0,!1}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,e,n){if(!e.offset)return!1;var s,o=(t.positionAbs||t.position.absolute).left,l=o+t.helperProportions.width,r=(t.positionAbs||t.position.absolute).top,a=r+t.helperProportions.height,h=e.offset.left,d=h+e.proportions.width,c=e.offset.top,u=c+e.proportions.height;switch(n){case"fit":return h<=o&&l<=d&&c<=r&&a<=u;case"intersect":return h<o+t.helperProportions.width/2&&l-t.helperProportions.width/2<d&&c<r+t.helperProportions.height/2&&a-t.helperProportions.height/2<u;case"pointer":return s=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,i((t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,c,e.proportions.height)&&i(s,h,e.proportions.width);case"touch":return(r>=c&&r<=u||a>=c&&a<=u||r<c&&a>u)&&(o>=h&&o<=d||l>=h&&l<=d||o<h&&l>d);default:return!1}},t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,s,o=t.ui.ddmanager.droppables[e.options.scope]||[],l=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||e&&!o[n].accept.call(o[n].element[0],e.currentItem||e.element))){for(s=0;s<r.length;s++)if(r[s]===o[n].element[0]){o[n].proportions.height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===l&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions={width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight})}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,l=t.ui.intersect(e,this,this.options.tolerance),r=!l&&this.isover?"isout":l&&!this.isover?"isover":null;r&&(this.options.greedy&&(s=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===s})).length&&((n=t.data(o[0],"ui-droppable")).greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t,e){function i(t){return parseInt(t,10)||0}function n(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,n,s,o=this,l=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=l.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)n=t.trim(e[i]),(s=t("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:l.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(e){var i,n,s,o;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=s&&s[1]?s[1]:"se")}),l.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){l.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var n,s,o,l=this.options,r=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),n=i(this.helper.css("left")),s=i(this.helper.css("top")),l.containment&&(n+=t(l.containment).scrollLeft()||0,s+=t(l.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof l.aspectRatio?l.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n=this.helper,s={},o=this.originalMousePosition,l=this.axis,r=this.position.top,a=this.position.left,h=this.size.width,d=this.size.height,c=e.pageX-o.left||0,u=e.pageY-o.top||0,f=this._change[l];return!!f&&(i=f.apply(this,[e,c,u]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(s.top=this.position.top+"px"),this.position.left!==a&&(s.left=this.position.left+"px"),this.size.width!==h&&(s.width=this.size.width+"px"),this.size.height!==d&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,l,r,a,h=this.options;return this._helper&&(s=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&t.ui.hasScroll(i[0],"left")?0:this.sizeDiff.height,o=n?0:this.sizeDiff.width,l={width:this.helper.width()-o,height:this.helper.height()-s},r=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,a=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,h.animate||this.element.css(t.extend(l,{top:a,left:r})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,s,o,l,r=this.options;l={minWidth:n(r.minWidth)?r.minWidth:0,maxWidth:n(r.maxWidth)?r.maxWidth:1/0,minHeight:n(r.minHeight)?r.minHeight:0,maxHeight:n(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=l.minHeight*this.aspectRatio,s=l.minWidth/this.aspectRatio,i=l.maxHeight*this.aspectRatio,o=l.maxWidth/this.aspectRatio,e>l.minWidth&&(l.minWidth=e),s>l.minHeight&&(l.minHeight=s),i<l.maxWidth&&(l.maxWidth=i),o<l.maxHeight&&(l.maxHeight=o)),this._vBoundaries=l},_updateCache:function(t){this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=n(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=n(t.height)&&e.maxHeight&&e.maxHeight<t.height,l=n(t.width)&&e.minWidth&&e.minWidth>t.width,r=n(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return l&&(t.width=e.minWidth),r&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),l&&d&&(t.left=a-e.minWidth),s&&d&&(t.left=a-e.maxWidth),r&&c&&(t.top=h-e.minHeight),o&&c&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,s,o=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(s=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),l=o&&t.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,a={width:i.size.width-r,height:i.size.height-l},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(a,d&&h?{top:d,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,s,o,l,r,a,h=t(this).data("ui-resizable"),d=h.options,c=h.element,u=d.containment,f=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;f&&(h.containerElement=t(f),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(f),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){n[t]=i(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},s=h.containerOffset,o=h.containerSize.height,l=h.containerSize.width,r=t.ui.hasScroll(f,"left")?f.scrollWidth:l,a=t.ui.hasScroll(f)?f.scrollHeight:o,h.parentData={element:f,left:s.left,top:s.top,width:r,height:a}))},resize:function(e){var i,n,s,o,l=t(this).data("ui-resizable"),r=l.options,a=l.containerOffset,h=l.position,d=l._aspectRatio||e.shiftKey,c={top:0,left:0},u=l.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(c=a),h.left<(l._helper?a.left:0)&&(l.size.width=l.size.width+(l._helper?l.position.left-a.left:l.position.left-c.left),d&&(l.size.height=l.size.width/l.aspectRatio),l.position.left=r.helper?a.left:0),h.top<(l._helper?a.top:0)&&(l.size.height=l.size.height+(l._helper?l.position.top-a.top:l.position.top),d&&(l.size.width=l.size.height*l.aspectRatio),l.position.top=l._helper?a.top:0),l.offset.left=l.parentData.left+l.position.left,l.offset.top=l.parentData.top+l.position.top,i=Math.abs((l._helper,l.offset.left-c.left+l.sizeDiff.width)),n=Math.abs((l._helper?l.offset.top-c.top:l.offset.top-a.top)+l.sizeDiff.height),s=l.containerElement.get(0)===l.element.parent().get(0),o=/relative|absolute/.test(l.containerElement.css("position")),s&&o&&(i-=l.parentData.left),i+l.size.width>=l.parentData.width&&(l.size.width=l.parentData.width-i,d&&(l.size.height=l.size.width/l.aspectRatio)),n+l.size.height>=l.parentData.height&&(l.size.height=l.parentData.height-n,d&&(l.size.width=l.size.height*l.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,l=t(e.helper),r=l.offset(),a=l.outerWidth()-e.sizeDiff.width,h=l.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:a,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:a,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable").options,i=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?i(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],i(e.alsoResize)):t.each(e.alsoResize,function(t){i(t)})},resize:function(e,i){var n=t(this).data("ui-resizable"),s=n.options,o=n.originalSize,l=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-l.top||0,left:n.position.left-l.left||0},a=function(e,n){t(e).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},l=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(l,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?a(s.alsoResize):t.each(s.alsoResize,function(t,e){a(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size,s=e.originalSize,o=e.originalPosition,l=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,a=r[0]||1,h=r[1]||1,d=Math.round((n.width-s.width)/a)*a,c=Math.round((n.height-s.height)/h)*h,u=s.width+d,f=s.height+c,p=i.maxWidth&&i.maxWidth<u,m=i.maxHeight&&i.maxHeight<f,g=i.minWidth&&i.minWidth>u,_=i.minHeight&&i.minHeight>f;i.grid=r,g&&(u+=a),_&&(f+=h),p&&(u-=a),m&&(f-=h),/^(se|s|e)$/.test(l)?(e.size.width=u,e.size.height=f):/^(ne)$/.test(l)?(e.size.width=u,e.size.height=f,e.position.top=o.top-c):/^(sw)$/.test(l)?(e.size.width=u,e.size.height=f,e.position.left=o.left-d):(e.size.width=u,e.size.height=f,e.position.top=o.top-c,e.position.left=o.left-d)}})}(jQuery),function(t,e){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(e=t(i.options.filter,i.element[0])).addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");if(s)return n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],l=this.opos[1],r=e.pageX,a=e.pageY;return o>r&&(i=r,r=o,o=i),l>a&&(i=a,a=l,l=i),this.helper.css({left:o,top:l,width:r-o,height:a-l}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?h=!(i.left>r||i.right<o||i.top>a||i.bottom<l):"fit"===s.tolerance&&(h=i.left>o&&i.right<r&&i.top>l&&i.bottom<a),h?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t,e){function i(t,e,i){return t>e&&t<e+i}function n(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||n(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=null,s=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,o.widgetName+"-item")===o)return n=t(this),!1}),t.data(e.target,o.widgetName+"-item")===o&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var s,o,l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),l.containment&&this._setContainment(),l.cursor&&"auto"!==l.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",l.cursor),this.storedStylesheet=t("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(o)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!l.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,s,o,l=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<l.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+l.scrollSpeed:e.pageY-this.overflowOffset.top<l.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-l.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<l.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+l.scrollSpeed:e.pageX-this.overflowOffset.left<l.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-l.scrollSpeed)):(e.pageY-t(document).scrollTop()<l.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-l.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<l.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+l.scrollSpeed)),e.pageX-t(document).scrollLeft()<l.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-l.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<l.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+l.scrollSpeed))),!1!==r&&t.ui.ddmanager&&!l.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=(n=this.items[i]).item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===s||t.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],s))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,l={};o&&"x"!==o||(l.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(l.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(l,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=t.left,l=o+t.width,r=t.top,a=r+t.height,h=this.offset.click.top,d=this.offset.click.left,c="x"===this.options.axis||n+h>r&&n+h<a,u="y"===this.options.axis||e+d>o&&e+d<l,f=c&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<l&&r<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var e="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&n,o=this._getDragVerticalDirection(),l=this._getDragHorizontalDirection();return!!s&&(this.floating?l&&"right"===l||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var e=i(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=i(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,s,o,l=[],r=[],a=this._connectWith();if(a&&e)for(i=a.length-1;i>=0;i--)for(n=(s=t(a[i])).length-1;n>=0;n--)(o=t.data(s[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&r.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){l.push(this)});return t(l)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,s,o,l,r,a,h,d=this.items,c=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(n=(s=t(u[i])).length-1;n>=0;n--)(o=t.data(s[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(c.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=c.length-1;i>=0;i--)for(l=c[i][1],n=0,h=(r=c[i][0]).length;n<h;n++)(a=t(r[n])).data(this.widgetName+"-item",l),d.push({item:a,instance:l,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var i,n,s,o;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,n=(e=e||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(s)}):"img"===n&&s.attr("src",e.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(t,s){i&&!n.forcePlaceholderSize||(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var s,o,l,r,a,h,d,c,u,f,p=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!t.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(p&&t.contains(this.containers[s].element[0],p.element[0]))continue;p=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",e,this._uiHash(this)),this.containers[s].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",e,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(l=1e4,r=null,a=(f=p.floating||n(this.currentItem))?"left":"top",h=f?"width":"height",d=this.positionAbs[a]+this.offset.click[a],o=this.items.length-1;o>=0;o--)t.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(f&&!i(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height)||(c=this.items[o].item.offset()[a],u=!1,Math.abs(c-d)>Math.abs(c+this.items[o][h]-d)&&(u=!0,c+=this.items[o][h]),Math.abs(c-d)<l&&(l=Math.abs(c-d),r=this.items[o],this.direction=u?"up":"down")));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[m].element,!0),this._trigger("change",e,this._uiHash()),this.containers[m]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",e,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,o=e.pageX,l=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((l-this.originalPageY)/s.grid[1])*s.grid[1],l=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i=0,n={},s={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)):this._activate(e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,s=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var e,n=this.options,s=n.heightStyle,o=this.element.parent(),l=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),n=i.attr("id"),s=i.next(),o=s.attr("id");n||(n=l+"-header-"+e,i.attr("id",n)),o||(o=l+"-panel-"+e,s.attr("id",o)),i.attr("aria-controls",o),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(e=o.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),o=s[0]===n[0],l=o&&i.collapsible,r=l?t():s.next(),a={oldHeader:n,oldPanel:n.next(),newHeader:l?t():s,newPanel:r};e.preventDefault(),o&&!i.collapsible||!1===this._trigger("beforeActivate",e,a)||(i.active=!l&&this.headers.index(s),this.active=o?t():s,this._toggle(a),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,i){var o,l,r,a=this,h=0,d=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=d&&c.down||c,f=function(){a._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(l=u),l=l||u.easing||c.easing,r=r||u.duration||c.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(n,{duration:r,easing:l,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(s,{duration:r,easing:l,complete:f,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?h+=i.now:"content"!==a.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-h),h=0)}})):e.animate(n,r,l,f):t.animate(s,r,l,f)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t,e){var i=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,l="input"===s;this.isMultiLine=!!o||!l&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||l?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){if(n)return n=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,e=++i;return function(n){e===i&&t.__response(n),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t,e){var i,n,s,o,l="ui-button ui-widget ui-state-default ui-corner-all",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",a=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},h=function(e){var i=e.name,n=e.form,s=t([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?t(n).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),s};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,r=this.options,d="checkbox"===this.type||"radio"===this.type,c=d?"":"ui-state-active";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(l).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===i&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(c)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){e.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){e.buttonElement.removeClass("ui-state-focus")}),d&&(this.element.bind("change"+this.eventNamespace,function(){o||e.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(o=!1,n=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||n===t.pageX&&s===t.pageY||(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||o)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||o)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var i=e.element[0];h(i).not(i).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(r.disabled)return!1;t(this).addClass("ui-state-active"),i=this,e.document.one("mouseup",function(){i=null})}).bind("mouseup"+this.eventNamespace,function(){if(r.disabled)return!1;t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(r.disabled)return!1;e.keyCode!==t.ui.keyCode.SPACE&&e.keyCode!==t.ui.keyCode.ENTER||t(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(l+" ui-state-hover ui-state-active  "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){this._super(t,e),"disabled"!==t?this._resetButton():e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?h(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){t.extend(t.ui,{datepicker:{version:"1.10.3"}});var i,n="datepicker";function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=o(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){t.datepicker._isDisabledDatepicker(i.inline?e.parent()[0]:i.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function l(e,i){for(var n in t.extend(e,i),i)null==i[n]&&(e[n]=i[n]);return e}t.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return l(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,s,o;s="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(o=this._newInst(t(e),s)).settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,o):s&&this._inlineDatepicker(e,o)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?o(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,n,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,s,o,l=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),l&&(i.append=t("<span class='"+this._appendClass+"'>"+l+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||e.focus(this._showDatepicker),"button"!==n&&"both"!==n||(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:s,title:s}):s)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,s,o=new Date(2009,11,20),l=this._get(t,"dateFormat");l.match(/[DM]/)&&(e=function(t){for(i=0,n=0,s=0;s<t.length;s++)t[s].length>i&&(i=t[s].length,n=s);return n},o.setMonth(e(this._get(t,l.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,l.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,n,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,o,r){var a,h,d,c,u,f=this._dialogInst;return f||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),(f=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],n,f)),l(f.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(f,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(h=document.documentElement.clientWidth,d=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+c,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],n,f),this},_destroyDatepicker:function(e){var i,s=t(e),o=t.data(e,n);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,n),"input"===i?(o.append.remove(),o.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,o=t(e),l=t.data(e,n);o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,l.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((s=o.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,o=t(e),l=t.data(e,n);o.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,l.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((s=o.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,n)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var s,o,r,a,h=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null;s=i||{},"string"==typeof i&&((s={})[i]=n),h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(h,"min"),a=this._getMinMaxDate(h,"max"),l(h.settings,s),null!==r&&void 0!==s.dateFormat&&void 0===s.minDate&&(h.settings.minDate=this._formatDate(h,r)),null!==a&&void 0!==s.dateFormat&&void 0===s.maxDate&&(h.settings.maxDate=this._formatDate(h,a)),"disabled"in s&&(s.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,s,o=t.datepicker._getInst(e.target),l=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),l=!1;break;case 13:return(s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv))[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,s[0]),(i=t.datepicker._get(o,"onSelect"))?(n=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),l=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),l=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),l=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),l=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),l=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),l=e.ctrlKey||e.metaKey;break;default:l=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):l=!1;l&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,s=t.datepicker._getInst(e.target);if(t.datepicker._get(s,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){var i,n,s,o,r,a,h;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e)||(i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(s=(n=t.datepicker._get(i,"beforeShow"))?n.apply(e,[e,i]):{})&&(l(i.settings,s),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each(function(){return!(o|="fixed"===t(this).css("position"))}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(a=t.datepicker._get(i,"showAnim"),h=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[a]?i.dpDiv.show(a,t.datepicker._get(i,"showOptions"),h):i.dpDiv[a||"show"](a?h:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,i=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,s=this._getNumberOfMonths(e),o=s[1];e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var s=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),l=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-l:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>a&&a>s?Math.abs(i.left+s-a):0),i.top-=Math.min(i.top,i.top+o>h&&h>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,n=this._getInst(e),s=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,s,o,l,r=this._curInst;!r||e&&r!==t.data(e,n)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),o=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,o):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,o),i||o(),this._datepickerShowing=!1,(l=this._get(r,"onClose"))&&l.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===n)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var s=t(e),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var i,n=t(e),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var s=t(e),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(e,i,n,s){var o,l=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(l[0])||((o=this._getInst(l[0])).selectedDay=o.currentDay=t("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,s=t(e),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),(n=this._get(o,"onSelect"))?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,s,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e)),t(o).each(function(){t(this).val(s)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var s,o,l,r,a=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),c=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,u=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,p=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,_=-1,v=-1,b=!1,y=function(t){var i=s+1<e.length&&e.charAt(s+1)===t;return i&&s++,i},w=function(t){var e=y(t),n=new RegExp("^\\d{1,"+("@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2)+"}"),s=i.substring(a).match(n);if(!s)throw"Missing number at position "+a;return a+=s[0].length,parseInt(s[0],10)},x=function(e,n,s){var o=-1,l=t.map(y(e)?s:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(l,function(t,e){var n=e[1];if(i.substr(a,n.length).toLowerCase()===n.toLowerCase())return o=e[0],a+=n.length,!1}),-1!==o)return o+1;throw"Unknown name at position "+a},C=function(){if(i.charAt(a)!==e.charAt(s))throw"Unexpected literal at position "+a;a++};for(s=0;s<e.length;s++)if(b)"'"!==e.charAt(s)||y("'")?C():b=!1;else switch(e.charAt(s)){case"d":_=w("d");break;case"D":x("D",c,u);break;case"o":v=w("o");break;case"m":g=w("m");break;case"M":g=x("M",f,p);break;case"y":m=w("y");break;case"@":m=(r=new Date(w("@"))).getFullYear(),g=r.getMonth()+1,_=r.getDate();break;case"!":m=(r=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),g=r.getMonth()+1,_=r.getDate();break;case"'":y("'")?C():b=!0;break;default:C()}if(a<i.length&&(l=i.substr(a),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=d?0:-100)),v>-1)for(g=1,_=v;;){if(_<=(o=this._getDaysInMonth(m,g-1)))break;g++,_-=o}if((r=this._daylightSavingAdjust(new Date(m,g-1,_))).getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,a=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},h=function(t,e,i){var n=""+e;if(a(t))for(;n.length<i;)n="0"+n;return n},d=function(t,e,i,n){return a(t)?n[e]:i[e]},c="",u=!1;if(e)for(n=0;n<t.length;n++)if(u)"'"!==t.charAt(n)||a("'")?c+=t.charAt(n):u=!1;else switch(t.charAt(n)){case"d":c+=h("d",e.getDate(),2);break;case"D":c+=d("D",e.getDay(),s,o);break;case"o":c+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=h("m",e.getMonth()+1,2);break;case"M":c+=d("M",e.getMonth(),l,r);break;case"y":c+=a("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":u=!0;break;default:c+=t.charAt(n)}return c},_possibleChars:function(t){var e,i="",n=!1,s=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),o=s,l=this._getFormatConfig(t);try{o=this.parseDate(i,n,l)||s}catch(t){n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var s=null==i||""===i?n:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=n.getFullYear(),o=n.getMonth(),l=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=r.exec(i);a;){switch(a[2]||"d"){case"d":case"D":l+=parseInt(a[1],10);break;case"w":case"W":l+=7*parseInt(a[1],10);break;case"m":case"M":o+=parseInt(a[1],10),l=Math.min(l,t.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(a[1],10),l=Math.min(l,t.datepicker._getDaysInMonth(s,o))}a=r.exec(i)}return new Date(s,o,l)}(i):"number"==typeof i?isNaN(i)?n:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(s=s&&"Invalid Date"===s.toString()?n:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,s=t.selectedMonth,o=t.selectedYear,l=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=l.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=l.getMonth(),t.drawYear=t.selectedYear=t.currentYear=l.getFullYear(),s===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,s,o,l,r,a,h,d,c,u,f,p,m,g,_,v,b,y,w,x,C,S,k,I,N,T,P,D,O,M,E,j,A,L,H,B,R,F=new Date,X=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth(),F.getDate())),z=this._get(t,"isRTL"),V=this._get(t,"showButtonPanel"),W=this._get(t,"hideIfNoPrevNext"),G=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),$=this._get(t,"showCurrentAtPos"),q=this._get(t,"stepMonths"),Y=1!==U[0]||1!==U[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-$,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=Q&&e<Q?Q:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=G?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-q,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=G?this.formatDate(s,this._daylightSavingAdjust(new Date(tt,Z+q,1)),this._getFormatConfig(t)):s,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+s+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+s+"</span></a>",l=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?K:X,l=G?this.formatDate(l,r,this._getFormatConfig(t)):l,a=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=V?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?a:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+l+"</button>":"")+(z?"":a)+"</div>":"",d=parseInt(this._get(t,"firstDay"),10),d=isNaN(d)?0:d,c=this._get(t,"showWeek"),u=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",x=0;x<U[0];x++){for(C="",this.maxRows=4,S=0;S<U[1];S++){if(k=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),I=" ui-corner-all",N="",Y){if(N+="<div class='ui-datepicker-group",U[1]>1)switch(S){case 0:N+=" ui-datepicker-group-first",I=" ui-corner-"+(z?"right":"left");break;case U[1]-1:N+=" ui-datepicker-group-last",I=" ui-corner-"+(z?"left":"right");break;default:N+=" ui-datepicker-group-middle",I=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===x?z?o:n:"")+(/all|right/.test(I)&&0===x?z?n:o:"")+this._generateMonthYearHeader(t,Z,tt,Q,J,x>0||S>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=c?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)P=(w+d)%7,T+="<th"+((w+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[P]+"'>"+f[P]+"</span></th>";for(N+=T+"</tr></thead><tbody>",D=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,D)),O=(this._getFirstDayOfMonth(tt,Z)-d+7)%7,M=Math.ceil((O+D)/7),E=Y&&this.maxRows>M?this.maxRows:M,this.maxRows=E,j=this._daylightSavingAdjust(new Date(tt,Z,1-O)),A=0;A<E;A++){for(N+="<tr>",L=c?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(j)+"</td>":"",w=0;w<7;w++)H=g?g.apply(t.input?t.input[0]:null,[j]):[!0,""],R=(B=j.getMonth()!==Z)&&!v||!H[0]||Q&&j<Q||J&&j>J,L+="<td class='"+((w+d+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(j.getTime()===k.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===j.getTime()&&b.getTime()===k.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!_?"":" "+H[1]+(j.getTime()===K.getTime()?" "+this._currentClass:"")+(j.getTime()===X.getTime()?" ui-datepicker-today":""))+"'"+(B&&!_||!H[2]?"":" title='"+H[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+j.getMonth()+"' data-year='"+j.getFullYear()+"'")+">"+(B&&!_?"&#xa0;":R?"<span class='ui-state-default'>"+j.getDate()+"</span>":"<a class='ui-state-default"+(j.getTime()===X.getTime()?" ui-state-highlight":"")+(j.getTime()===K.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+j.getDate()+"</a>")+"</td>",j.setDate(j.getDate()+1),j=this._daylightSavingAdjust(j);N+=L+"</tr>"}++Z>11&&(Z=0,tt++),C+=N+="</tbody></table>"+(Y?"</div>"+(U[0]>0&&S===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=C}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,n,s,o,l,r){var a,h,d,c,u,f,p,m,g=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!g)y+="<span class='ui-datepicker-month'>"+l[e]+"</span>";else{for(a=n&&n.getFullYear()===i,h=s&&s.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!a||d>=n.getMonth())&&(!h||d<=s.getMonth())&&(y+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+r[d]+"</option>");y+="</select>"}if(v||(b+=y+(!o&&g&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(c=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),p=(f=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(e)?u:e})(c[0]),m=Math.max(p,f(c[1]||"")),p=n?Math.max(p,n.getFullYear()):p,m=s?Math.min(m,s.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=m;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!o&&g&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),s=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,s))+("D"===i?e:0),l=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,s,o)));t.selectedDay=l.getDate(),t.drawMonth=t.selectedMonth=l.getMonth(),t.drawYear=t.selectedYear=l.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),s=i&&e<i?i:e;return n&&s>n?n:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var s=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(e<0?e:s[0]*s[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,n,s=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),l=null,r=null,a=this._get(t,"yearRange");return a&&(i=a.split(":"),n=(new Date).getFullYear(),l=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(l+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||e.getTime()>=s.getTime())&&(!o||e.getTime()<=o.getTime())&&(!l||e.getFullYear()>=l)&&(!r||e.getFullYear()<=r)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t,e){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement;this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(s.focus(1),e.preventDefault()):(n.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,n){var s,o;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(e.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,t("<button></button>",n).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,i=this.options;function n(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,s){t(this).addClass("ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",i,n(s))},drag:function(t,i){e._trigger("drag",t,n(i))},stop:function(s,o){i.position=[o.position.left-e.document.scrollLeft(),o.position.top-e.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",s,n(o))}})},_makeResizable:function(){var e=this,i=this.options,n=i.resizable,s=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function l(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(i,n){t(this).addClass("ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,l(n))},resize:function(t,i){e._trigger("resize",t,l(i))},stop:function(n,s){i.height=t(this).height(),i.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",n,l(s))}}).css("position",s)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var s=this,o=!1,l={};t.each(e,function(t,e){s._setOption(t,e),t in i&&(o=!0),t in n&&(l[t]=e)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",l)},_setOption:function(t,e){var i,n,s=this.uiDialog;"dialogClass"===t&&s.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((i=s.is(":data(ui-draggable)"))&&!e&&s.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((n=s.is(":data(ui-resizable)"))&&!e&&s.resizable("destroy"),n&&"string"==typeof e&&s.resizable("option","handles",e),n||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){e._allowInteraction(n)||(n.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(1===(n=i.split?i.split(" "):[i[0],i[1]]).length&&(n[1]=n[0]),t.each(["left","top"],function(t,e){+n[t]===n[t]&&(s[t]=n[t],n[t]=e)}),i={my:n[0]+(s[0]<0?s[0]:"+"+s[0])+" "+n[1]+(s[1]<0?s[1]:"+"+s[1]),at:n.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t,e){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var i,n,s,o,l,r=!0;function a(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:r=!1,n=this.previousFilter||"",s=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),s===n?o=!0:s=n+s,l=new RegExp("^"+a(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(t(this).children("a").text())}),(i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(s=String.fromCharCode(e.keyCode),l=new RegExp("^"+a(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(t(this).children("a").text())})),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}r&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev("a"),s=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",n.attr("id"))}),(e=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,o,l,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),l=this.activeMenu.height(),r=e.height(),s<0?this.activeMenu.scrollTop(o+s):s+r>l&&this.activeMenu.scrollTop(o+s-l+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-n-s<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,n,s;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-n+s>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t,e){t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;e<i;e++)o.push("<span class='ui-slider-handle ui-state-default ui-corner-all'  tabindex='0'></span>");this.handles=s.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,o,l,r,a,h=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-h.values(e));(s>i||s===i&&(e===h._lastChangedValue||h.values(e)===d.min))&&(s=i,o=t(this),l=e)}),!1!==this._start(e,l)&&(this._mouseSliding=!0,this._handleIndex=l,o.addClass("ui-state-active").focus(),r=o.offset(),a=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:e.pageX-r.left-o.width()/2,top:e.pageY-r.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,l,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i>n||1===e&&i<n)&&(i=n),i!==this.values(e)&&((s=this.values())[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),n=this.values(e?0:1),!1!==o&&this.values(e,i,!0))):i!==this.value()&&!1!==(o=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<s;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,s,o,l=this.options.range,r=this.options,a=this,h=!this._animateOff&&r.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(a.values(n)-a._valueMin())/(a._valueMax()-a._valueMin())*100,d["horizontal"===a.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](d,r.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===n&&a.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===n&&a.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===n&&a.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&a.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](d,r.animate),"min"===l&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===l&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===l&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===l&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(e){var i,n,s,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),!1===this._start(e,o)))return}switch(s=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-s)}this._slide(e,o,n)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,n){var s=i.attr(n);void 0!==s&&s.length&&(e[n]=s)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){var i;function n(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return i=t-(e=null!==n.min?n.min:0),t=e+(i=Math.round(i/n.step)*n.step),t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());e(this._value).call(this,t)},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){var i=0,n=/#.*$/;function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(n,""))===decodeURIComponent(location.href.replace(n,""))}t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each(function(i,s){if(t(s).attr("aria-controls")===n)return e=i,!1}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!i&&0),!i&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:s=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),e.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){var n=this.tabs.length-1;for(;-1!==t.inArray((e>n&&(e=0),e<0&&(e=n),e),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){"active"!==t?"disabled"!==t?(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._setupDisabled(e):this._activate(e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+ ++i},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var o,l,r,a=t(n).uniqueId().attr("id"),h=t(n).closest("li"),d=h.attr("aria-controls");s(n)?(o=n.hash,l=e.element.find(e._sanitizeSelector(o))):(o="#"+(r=e._tabId(h)),(l=e.element.find(o)).length||(l=e._createPanel(r)).insertAfter(e.panels[i-1]||e.tablist),l.attr("aria-live","polite")),l.length&&(e.panels=e.panels.add(l)),d&&h.data("ui-tabs-aria-controls",d),h.attr({"aria-controls":o.substring(1),"aria-labelledby":a}),l.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)!0===e||-1!==t.inArray(n,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget).closest("li"),o=s[0]===n[0],l=o&&i.collapsible,r=l?t():this._getPanelForTab(s),a=n.length?this._getPanelForTab(n):t(),h={oldTab:n,oldPanel:a,newTab:l?t():s,newPanel:r};e.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",e,h)||(i.active=!l&&this.tabs.index(s),this.active=o?t():s,this.xhr&&this.xhr.abort(),a.length||r.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(s),e),this._toggle(e,h))},_toggle:function(e,i){var n=this,s=i.newPanel,o=i.oldPanel;function l(){n.running=!1,n._trigger("activate",e,i)}function r(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&n.options.show?n._show(s,n.options.show,l):(s.show(),l())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),r()),o.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),s.length&&o.length?i.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;!1!==i&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setupDisabled(i))},disable:function(e){var i=this.options.disabled;if(!0!==i){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setupDisabled(i)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),l=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),a={tab:o,panel:r};s(l[0])||(this.xhr=t.ajax(this._ajaxSettings(l,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,a)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,n){var s=this;return{url:e.attr("href"),beforeSend:function(e,o){return s._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){var e=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var n=this;if("disabled"===e)return this[i?"_disable":"_enable"](),void(this.options[e]=i);this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e)})},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,s=this,o=e?e.type:null;if("string"==typeof n)return this._open(e,t,n);(i=n.call(t[0],function(i){t.data("ui-tooltip-open")&&s._delay(function(){e&&(e.type=o),this._open(e,t,i)})}))&&this._open(e,t,i)},_open:function(e,i,n){var s,o,l,r,a,h,d=t.extend({},this.options.position);n&&((s=this._find(i)).length?s.find(".ui-tooltip-content").html(n):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),r=i,a=s.attr("id"),(h=(r.attr("aria-describedby")||"").split(/\s+/)).push(a),r.data("ui-tooltip-id",a).attr("aria-describedby",t.trim(h.join(" "))),s.find(".ui-tooltip-content").html(n),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:c}),c(e)):s.position(t.extend({of:i},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){s.is(":visible")&&(c(d.of),clearInterval(l))},t.fx.interval)),this._trigger("open",e,{tooltip:s}),o={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var n=t.Event(e);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}},e&&"mouseover"!==e.type||(o.mouseleave="close"),e&&"focusin"!==e.type||(o.focusout="close"),this._on(!0,i,o)));function c(t){d.of=t,s.is(":hidden")||s.position(d)}},close:function(e){var i,n,s,o,l=this,r=t(e?e.currentTarget:this.element),a=this._find(r);this.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),n=(i=r).data("ui-tooltip-id"),s=(i.attr("aria-describedby")||"").split(/\s+/),-1!==(o=t.inArray(n,s))&&s.splice(o,1),i.removeData("ui-tooltip-id"),(s=t.trim(s.join(" ")))?i.attr("aria-describedby",s):i.removeAttr("aria-describedby"),a.stop(!0),this._hide(a,this.options.hide,function(){l._removeTooltip(t(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete l.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:a}),this.closing=!1)},_tooltip:function(i){var n="ui-tooltip-"+e++,s=t("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[n]=i,s},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0),t("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),function(t,e){var i;t.effects={effect:{}},function(t,e){var i,n=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],o=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},r={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=o.support={},h=t("<p>")[0],d=t.each;function c(t,e,i){var n=r[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function u(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),d(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),h=i.space||"rgba";if(a)return s=n[h](a),n[l[h].cache]=s[l[h].cache],r=n._rgba=s._rgba,!1}),r.length?("0,0,0,0"===r.join()&&t.extend(r,i.transparent),n):i[e]}function f(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}h.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=h.style.backgroundColor.indexOf("rgba")>-1,d(l,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(e,n,s,r){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(n),n=void 0);var a=this,h=t.type(e),f=this._rgba=[];return void 0!==n&&(e=[e,n,s,r],h="array"),"string"===h?this.parse(u(e)||i._default):"array"===h?(d(l.rgba.props,function(t,i){f[i.idx]=c(e[i.idx],i)}),this):"object"===h?(d(l,e instanceof o?function(t,i){e[i.cache]&&(a[i.cache]=e[i.cache].slice())}:function(i,n){var s=n.cache;d(n.props,function(t,i){if(!a[s]&&n.to){if("alpha"===t||null==e[t])return;a[s]=n.to(a._rgba)}a[s][i.idx]=c(e[t],i,!0)}),a[s]&&t.inArray(null,a[s].slice(0,3))<0&&(a[s][3]=1,n.from&&(a._rgba=n.from(a[s])))}),this):void 0},is:function(t){var e=o(t),i=!0,n=this;return d(l,function(t,s){var o,l=e[s.cache];return l&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],d(s.props,function(t,e){if(null!=l[e.idx])return i=l[e.idx]===o[e.idx]})),i}),i},_space:function(){var t=[],e=this;return d(l,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=o(t),n=i._space(),s=l[n],a=0===this.alpha()?o("transparent"):this,h=a[s.cache]||s.to(a._rgba),u=h.slice();return i=i[s.cache],d(s.props,function(t,n){var s=n.idx,o=h[s],l=i[s],a=r[n.type]||{};null!==l&&(null===o?u[s]=l:(a.mod&&(l-o>a.mod/2?o+=a.mod:o-l>a.mod/2&&(o-=a.mod)),u[s]=c((l-o)*e+o,n)))}),this[n](u)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=o(e)._rgba;return o(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,l.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,o=t[2]/255,l=t[3],r=Math.max(n,s,o),a=Math.min(n,s,o),h=r-a,d=r+a,c=.5*d;return e=a===r?0:n===r?60*(s-o)/h+360:s===r?60*(o-n)/h+120:60*(n-s)/h+240,i=0===h?0:c<=.5?h/d:h/(2-d),[Math.round(e)%360,i,c,null==l?1:l]},l.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],s=t[3],o=n<=.5?n*(1+i):n+i-n*i,l=2*n-o;return[Math.round(255*f(l,o,e+1/3)),Math.round(255*f(l,o,e)),Math.round(255*f(l,o,e-1/3)),s]},d(l,function(e,i){var s=i.props,l=i.cache,r=i.to,a=i.from;o.fn[e]=function(e){if(r&&!this[l]&&(this[l]=r(this._rgba)),void 0===e)return this[l].slice();var i,n=t.type(e),h="array"===n||"object"===n?e:arguments,u=this[l].slice();return d(s,function(t,e){var i=h["object"===n?t:e.idx];null==i&&(i=u[e.idx]),u[e.idx]=c(i,e)}),a?((i=o(a(u)))[l]=u,i):o(u)},d(s,function(i,s){o.fn[i]||(o.fn[i]=function(o){var l,r=t.type(o),a="alpha"===i?this._hsla?"hsla":"rgba":e,h=this[a](),d=h[s.idx];return"undefined"===r?d:("function"===r&&(o=o.call(this,d),r=t.type(o)),null==o&&s.empty?this:("string"===r&&(l=n.exec(o))&&(o=d+parseFloat(l[2])*("+"===l[1]?1:-1)),h[s.idx]=o,this[a](h)))})})}),o.hook=function(e){var i=e.split(" ");d(i,function(e,i){t.cssHooks[i]={set:function(e,n){var s,l,r="";if("transparent"!==n&&("string"!==t.type(n)||(s=u(n)))){if(n=o(s||n),!a.rgba&&1!==n._rgba[3]){for(l="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&l&&l.style;)try{r=t.css(l,"backgroundColor"),l=l.parentNode}catch(t){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=o(e.elem,i),e.end=o(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},o.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return d(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},i=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){var e,i=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function s(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)"string"==typeof s[i=s[n]]&&(o[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,o,l,r){var a=t.speed(o,l,r);return this.queue(function(){var o,l=t(this),r=l.attr("class")||"",h=a.children?l.find("*").addBack():l;h=h.map(function(){return{el:t(this),start:s(this)}}),(o=function(){t.each(i,function(t,i){e[i]&&l[i+"Class"](e[i])})})(),h=h.map(function(){return this.end=s(this.el[0]),this.diff=function(e,i){var s,o,l={};for(s in i)o=i[s],e[s]!==o&&(n[s]||!t.fx.step[s]&&isNaN(parseFloat(o))||(l[s]=o));return l}(this.start,this.end),this}),l.attr("class",r),h=h.map(function(){var e=this,i=t.Deferred(),n=t.extend({},a,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,h.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),a.complete.call(l[0])})})},t.fn.extend({addClass:(e=t.fn.addClass,function(i,n,s,o){return n?t.effects.animateClass.call(this,{add:i},n,s,o):e.apply(this,arguments)}),removeClass:function(e){return function(i,n,s,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,s,o,l){return"boolean"==typeof n||void 0===n?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,l):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,s,o)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,o)}})}(),function(){function e(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}var n;t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data("ui-effects-"+e[i],t[0].style[e[i]])},restore:function(t,e){var i,n;for(n=0;n<e.length;n++)null!==e[n]&&(void 0===(i=t.data("ui-effects-"+e[n]))&&(i=""),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),t.fn.extend({effect:function(){var i=e.apply(this,arguments),n=i.mode,s=i.queue,o=t.effects.effect[i.effect];if(t.fx.off||!o)return n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)});function l(e){var n=t(this),s=i.complete,l=i.mode;function r(){t.isFunction(s)&&s.call(n[0]),t.isFunction(e)&&e()}(n.is(":hidden")?"hide"===l:"show"===l)?(n[l](),r()):o.call(n[0],i,r)}return!1===s?this.each(l):this.queue(s||"fx",l)},show:(n=t.fn.show,function(t){if(i(t))return n.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),i={},t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,e){i[e]=function(e){return Math.pow(e,t+2)}}),t.extend(i,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(i,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})}(jQuery),function(t,e){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;t.effects.effect.blind=function(e,s){var o,l,r,a=t(this),h=["position","top","bottom","left","right","height","width"],d=t.effects.setMode(a,e.mode||"hide"),c=e.direction||"up",u=i.test(c),f=u?"height":"width",p=u?"top":"left",m=n.test(c),g={},_="show"===d;a.parent().is(".ui-effects-wrapper")?t.effects.save(a.parent(),h):t.effects.save(a,h),a.show(),l=(o=t.effects.createWrapper(a).css({overflow:"hidden"}))[f](),r=parseFloat(o.css(p))||0,g[f]=_?l:0,m||(a.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),g[p]=_?r:l+r),_&&(o.css(f,0),m||o.css(p,r+l)),o.animate(g,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===d&&a.hide(),t.effects.restore(a,h),t.effects.removeWrapper(a),s()}})}}(jQuery),function(t,e){t.effects.effect.bounce=function(e,i){var n,s,o,l=t(this),r=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(l,e.mode||"effect"),h="hide"===a,d="show"===a,c=e.direction||"up",u=e.distance,f=e.times||5,p=2*f+(d||h?1:0),m=e.duration/p,g=e.easing,_="up"===c||"down"===c?"top":"left",v="up"===c||"left"===c,b=l.queue(),y=b.length;for((d||h)&&r.push("opacity"),t.effects.save(l,r),l.show(),t.effects.createWrapper(l),u||(u=l["top"===_?"outerHeight":"outerWidth"]()/3),d&&((o={opacity:1})[_]=0,l.css("opacity",0).css(_,v?2*-u:2*u).animate(o,m,g)),h&&(u/=Math.pow(2,f-1)),(o={})[_]=0,n=0;n<f;n++)(s={})[_]=(v?"-=":"+=")+u,l.animate(s,m,g).animate(o,m,g),u=h?2*u:u/2;h&&((s={opacity:0})[_]=(v?"-=":"+=")+u,l.animate(s,m,g)),l.queue(function(){h&&l.hide(),t.effects.restore(l,r),t.effects.removeWrapper(l),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,p+1))),l.dequeue()}}(jQuery),function(t,e){t.effects.effect.clip=function(e,i){var n,s,o,l=t(this),r=["position","top","bottom","left","right","height","width"],a="show"===t.effects.setMode(l,e.mode||"hide"),h="vertical"===(e.direction||"vertical"),d=h?"height":"width",c=h?"top":"left",u={};t.effects.save(l,r),l.show(),n=t.effects.createWrapper(l).css({overflow:"hidden"}),o=(s="IMG"===l[0].tagName?n:l)[d](),a&&(s.css(d,0),s.css(c,o/2)),u[d]=a?o:0,u[c]=a?0:o/2,s.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){a||l.hide(),t.effects.restore(l,r),t.effects.removeWrapper(l),i()}})}}(jQuery),function(t,e){t.effects.effect.drop=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","opacity","height","width"],l=t.effects.setMode(s,e.mode||"hide"),r="show"===l,a=e.direction||"left",h="up"===a||"down"===a?"top":"left",d="up"===a||"left"===a?"pos":"neg",c={opacity:r?1:0};t.effects.save(s,o),s.show(),t.effects.createWrapper(s),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0)/2,r&&s.css("opacity",0).css(h,"pos"===d?-n:n),c[h]=(r?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===l&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t,e){t.effects.effect.explode=function(e,i){var n,s,o,l,r,a,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=h,c=t(this),u="show"===t.effects.setMode(c,e.mode||"hide"),f=c.show().css("visibility","hidden").offset(),p=Math.ceil(c.outerWidth()/d),m=Math.ceil(c.outerHeight()/h),g=[];function _(){g.push(this),g.length===h*d&&function(){c.css({visibility:"visible"}),t(g).remove(),u||c.hide();i()}()}for(n=0;n<h;n++)for(l=f.top+n*m,a=n-(h-1)/2,s=0;s<d;s++)o=f.left+s*p,r=s-(d-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*p,top:-n*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:m,left:o+(u?r*p:0),top:l+(u?a*m:0),opacity:u?0:1}).animate({left:o+(u?0:r*p),top:l+(u?0:a*m),opacity:u?1:0},e.duration||500,e.easing,_)}}(jQuery),function(t,e){t.effects.effect.fade=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t,e){t.effects.effect.fold=function(e,i){var n,s,o=t(this),l=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),a="show"===r,h="hide"===r,d=e.size||15,c=/([0-9]+)%/.exec(d),u=!!e.horizFirst,f=a!==u,p=f?["width","height"]:["height","width"],m=e.duration/2,g={},_={};t.effects.save(o,l),o.show(),n=t.effects.createWrapper(o).css({overflow:"hidden"}),s=f?[n.width(),n.height()]:[n.height(),n.width()],c&&(d=parseInt(c[1],10)/100*s[h?0:1]),a&&n.css(u?{height:0,width:d}:{height:d,width:0}),g[p[0]]=a?s[0]:d,_[p[1]]=a?s[1]:0,n.animate(g,m,e.easing).animate(_,m,e.easing,function(){h&&o.hide(),t.effects.restore(o,l),t.effects.removeWrapper(o),i()})}}(jQuery),function(t,e){t.effects.effect.highlight=function(e,i){var n=t(this),s=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(n,e.mode||"show"),l={backgroundColor:n.css("backgroundColor")};"hide"===o&&(l.opacity=0),t.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,s),i()}})}}(jQuery),function(t,e){t.effects.effect.pulsate=function(e,i){var n,s=t(this),o=t.effects.setMode(s,e.mode||"show"),l="show"===o,r="hide"===o,a=l||"hide"===o,h=2*(e.times||5)+(a?1:0),d=e.duration/h,c=0,u=s.queue(),f=u.length;for(!l&&s.is(":visible")||(s.css("opacity",0).show(),c=1),n=1;n<h;n++)s.animate({opacity:c},d,e.easing),c=1-c;s.animate({opacity:c},d,e.easing),s.queue(function(){r&&s.hide(),i()}),f>1&&u.splice.apply(u,[1,0].concat(u.splice(f,h+1))),s.dequeue()}}(jQuery),function(t,e){t.effects.effect.puff=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"hide"),o="hide"===s,l=parseInt(e.percent,10)||150,r=l/100,a={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?l:100,from:o?a:{height:a.height*r,width:a.width*r,outerHeight:a.outerHeight*r,outerWidth:a.outerWidth*r}}),n.effect(e)},t.effects.effect.scale=function(e,i){var n=t(this),s=t.extend(!0,{},e),o=t.effects.setMode(n,e.mode||"effect"),l=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",a=e.origin,h={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d="horizontal"!==r?l/100:1,c="vertical"!==r?l/100:1;s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=a||["middle","center"],s.restore=!0),s.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:h),s.to={height:h.height*d,width:h.width*c,outerHeight:h.outerHeight*d,outerWidth:h.outerWidth*c},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},t.effects.effect.size=function(e,i){var n,s,o,l=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["width","height","overflow"],h=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=t.effects.setMode(l,e.mode||"effect"),f=e.restore||"effect"!==u,p=e.scale||"both",m=e.origin||["middle","center"],g=l.css("position"),_=f?r:["position","top","bottom","left","right","overflow","opacity"],v={height:0,width:0,outerHeight:0,outerWidth:0};"show"===u&&l.show(),n={height:l.height(),width:l.width(),outerHeight:l.outerHeight(),outerWidth:l.outerWidth()},"toggle"===e.mode&&"show"===u?(l.from=e.to||v,l.to=e.from||n):(l.from=e.from||("show"===u?v:n),l.to=e.to||("hide"===u?v:n)),o={from:{y:l.from.height/n.height,x:l.from.width/n.width},to:{y:l.to.height/n.height,x:l.to.width/n.width}},"box"!==p&&"both"!==p||(o.from.y!==o.to.y&&(_=_.concat(d),l.from=t.effects.setTransition(l,d,o.from.y,l.from),l.to=t.effects.setTransition(l,d,o.to.y,l.to)),o.from.x!==o.to.x&&(_=_.concat(c),l.from=t.effects.setTransition(l,c,o.from.x,l.from),l.to=t.effects.setTransition(l,c,o.to.x,l.to))),"content"!==p&&"both"!==p||o.from.y!==o.to.y&&(_=_.concat(h).concat(a),l.from=t.effects.setTransition(l,h,o.from.y,l.from),l.to=t.effects.setTransition(l,h,o.to.y,l.to)),t.effects.save(l,_),l.show(),t.effects.createWrapper(l),l.css("overflow","hidden").css(l.from),m&&(s=t.effects.getBaseline(m,n),l.from.top=(n.outerHeight-l.outerHeight())*s.y,l.from.left=(n.outerWidth-l.outerWidth())*s.x,l.to.top=(n.outerHeight-l.to.outerHeight)*s.y,l.to.left=(n.outerWidth-l.to.outerWidth)*s.x),l.css(l.from),"content"!==p&&"both"!==p||(d=d.concat(["marginTop","marginBottom"]).concat(h),c=c.concat(["marginLeft","marginRight"]),a=r.concat(d).concat(c),l.find("*[width]").each(function(){var i=t(this),n=i.height(),s=i.width(),l=i.outerHeight(),r=i.outerWidth();f&&t.effects.save(i,a),i.from={height:n*o.from.y,width:s*o.from.x,outerHeight:l*o.from.y,outerWidth:r*o.from.x},i.to={height:n*o.to.y,width:s*o.to.x,outerHeight:n*o.to.y,outerWidth:s*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,d,o.from.y,i.from),i.to=t.effects.setTransition(i,d,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,c,o.from.x,i.from),i.to=t.effects.setTransition(i,c,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,a)})})),l.animate(l.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===l.to.opacity&&l.css("opacity",l.from.opacity),"hide"===u&&l.hide(),t.effects.restore(l,_),f||("static"===g?l.css({position:"relative",top:l.to.top,left:l.to.left}):t.each(["top","left"],function(t,e){l.css(e,function(e,i){var n=parseInt(i,10),s=t?l.to.left:l.to.top;return"auto"===i?s+"px":n+s+"px"})})),t.effects.removeWrapper(l),i()}})}}(jQuery),function(t,e){t.effects.effect.shake=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(s,e.mode||"effect"),r=e.direction||"left",a=e.distance||20,h=e.times||3,d=2*h+1,c=Math.round(e.duration/d),u="up"===r||"down"===r?"top":"left",f="up"===r||"left"===r,p={},m={},g={},_=s.queue(),v=_.length;for(t.effects.save(s,o),s.show(),t.effects.createWrapper(s),p[u]=(f?"-=":"+=")+a,m[u]=(f?"+=":"-=")+2*a,g[u]=(f?"-=":"+=")+2*a,s.animate(p,c,e.easing),n=1;n<h;n++)s.animate(m,c,e.easing).animate(g,c,e.easing);s.animate(m,c,e.easing).animate(p,c/2,e.easing).queue(function(){"hide"===l&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}),v>1&&_.splice.apply(_,[1,0].concat(_.splice(v,d+1))),s.dequeue()}}(jQuery),function(t,e){t.effects.effect.slide=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","width","height"],l=t.effects.setMode(s,e.mode||"show"),r="show"===l,a=e.direction||"left",h="up"===a||"down"===a?"top":"left",d="up"===a||"left"===a,c={};t.effects.save(s,o),s.show(),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(s).css({overflow:"hidden"}),r&&s.css(h,d?isNaN(n)?"-"+n:-n:n),c[h]=(r?d?"+=":"-=":d?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===l&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t,e){t.effects.effect.transfer=function(e,i){var n=t(this),s=t(e.to),o="fixed"===s.css("position"),l=t("body"),r=o?l.scrollTop():0,a=o?l.scrollLeft():0,h=s.offset(),d={top:h.top-r,left:h.left-a,height:s.innerHeight(),width:s.innerWidth()},c=n.offset(),u=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:c.top-r,left:c.left-a,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(d,e.duration,e.easing,function(){u.remove(),i()})}}(jQuery),function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(t){return"string"===$.type(t)},runPluginCallbacks=function(Instance,a_fn){if($.isArray(a_fn))for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&g(fn)(Instance)}catch(t){}}function g(t){return t}},u,m,b,v,ie,cm,$s,bs,bm,lb;$.layout={version:"1.4.4",revision:1.0404,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(t){var e=$(t),i=e.data("layout")||e.data("parentLayout");if(i){var n=i.container;if(n.data("layoutPane"))return n;var s=n.closest("."+$.layout.defaults.panes.paneClass);if(s.data("layoutPane"))return s}return null},getParentPaneInstance:function(t){var e=$.layout.getParentPaneElem(t);return e?e.data("layoutPane"):null},getParentLayoutInstance:function(t){var e=$.layout.getParentPaneElem(t);return e?e.data("parentLayout"):null},getEventObject:function(t){return"object"==typeof t&&t.stopPropagation?t:null},parsePaneName:function(t){var e=$.layout.getEventObject(t),i=t;return e&&(e.stopPropagation(),i=$(this).data("layoutEdge")),i&&!/^(west|east|north|south|center)$/.test(i)&&($.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+i+'"'),i="error"),i},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(t){var e=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; border: 0; overflow: scroll;"></div>').appendTo("body"),i={width:e.outerWidth-e[0].clientWidth,height:100-e[0].clientHeight};return e.remove(),window.scrollbarWidth=i.width,window.scrollbarHeight=i.height,t.match(/^(width|height)$/)?i[t]:i},disableTextSelection:function(){var t=$(document),e="textSelectionDisabled",i="textSelectionInitialized";$.fn.disableSelection&&(t.data(i)||t.on("mouseup",$.layout.enableTextSelection).data(i,!0),t.data(e)||t.disableSelection().data(e,!0))},enableTextSelection:function(){var t=$(document),e="textSelectionDisabled";$.fn.enableSelection&&t.data(e)&&t.enableSelection().data(e,!1)},showInvisibly:function(t,e){if(t&&t.length&&(e||"none"===t.css("display"))){var i=t[0].style,n={display:i.display||"",visibility:i.visibility||""};return t.css({display:"block",visibility:"hidden"}),n}return{}},getElementDimensions:function(t,e){var i,n,s,o={css:{},inset:{}},l=o.css,r={bottom:0},a=$.layout.cssNum,h=Math.round,d=t.offset();return o.offsetLeft=d.left,o.offsetTop=d.top,e||(e={}),$.each("Left,Right,Top,Bottom".split(","),function(a,h){i=l["border"+h]=$.layout.borderWidth(t,h),n=l["padding"+h]=$.layout.cssNum(t,"padding"+h),s=h.toLowerCase(),o.inset[s]=e[s]>=0?e[s]:n,r[s]=o.inset[s]+i}),l.width=h(t.width()),l.height=h(t.height()),l.top=a(t,"top",!0),l.bottom=a(t,"bottom",!0),l.left=a(t,"left",!0),l.right=a(t,"right",!0),o.outerWidth=h(t.outerWidth()),o.outerHeight=h(t.outerHeight()),o.innerWidth=max(0,o.outerWidth-r.left-r.right),o.innerHeight=max(0,o.outerHeight-r.top-r.bottom),o.layoutWidth=h(t.innerWidth()),o.layoutHeight=h(t.innerHeight()),o},getElementStyles:function(t,e){var i,n,s,o,l,r,a={},h=t[0].style,d=e.split(","),c="Top,Bottom,Left,Right".split(","),u="Color,Style,Width".split(",");for(o=0;o<d.length;o++)if((i=d[o]).match(/(border|padding|margin)$/))for(l=0;l<4;l++)if(n=c[l],"border"===i)for(r=0;r<3;r++)a[i+n+(s=u[r])]=h[i+n+s];else a[i+n]=h[i+n];else a[i]=h[i];return a},cssWidth:function(t,e){if(e<=0)return 0;var i=$.layout.browser,n=i.boxModel?i.boxSizing?t.css("boxSizing"):"content-box":"border-box",s=$.layout.borderWidth,o=$.layout.cssNum,l=e;return"border-box"!==n&&(l-=s(t,"Left")+s(t,"Right")),"content-box"===n&&(l-=o(t,"paddingLeft")+o(t,"paddingRight")),max(0,l)},cssHeight:function(t,e){if(e<=0)return 0;var i=$.layout.browser,n=i.boxModel?i.boxSizing?t.css("boxSizing"):"content-box":"border-box",s=$.layout.borderWidth,o=$.layout.cssNum,l=e;return"border-box"!==n&&(l-=s(t,"Top")+s(t,"Bottom")),"content-box"===n&&(l-=o(t,"paddingTop")+o(t,"paddingBottom")),max(0,l)},cssNum:function(t,e,i){t.jquery||(t=$(t));var n=$.layout.showInvisibly(t),s=$.css(t[0],e,!0),o=i&&"auto"==s?s:Math.round(parseFloat(s)||0);return t.css(n),o},borderWidth:function(t,e){t.jquery&&(t=t[0]);var i="border"+e.substr(0,1).toUpperCase()+e.substr(1);return"none"===$.css(t,i+"Style",!0)?0:Math.round(parseFloat($.css(t,i+"Width",!0))||0)},isMouseOverElem:function(t,e){var i=$(e||this),n=i.offset(),s=n.top,o=n.left,l=o+i.outerWidth(),r=s+i.outerHeight(),a=t.pageX,h=t.pageY;return $.layout.browser.msie&&a<0&&h<0||a>=o&&a<=l&&h>=s&&h<=r},msg:function(t,e,i,n){if($.isPlainObject(t)&&window.debugData){"string"==typeof e?(n=i,i=e):"object"==typeof i&&(n=i,i=null);var s=i||"log( <object> )",o=$.extend({sort:!1,returnHTML:!1,display:!1},n);!0===e||o.display?debugData(t,s,o):window.console&&console.log(debugData(t,s,o))}else if(e)alert(t);else if(window.console)console.log(t);else{var l=$("#layoutLogger");l.length||(l=function(){var t=$.support.fixedPosition?"fixed":"absolute",e=$('<div id="layoutLogger" style="position: '+t+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");e.css("left",$(window).width()-e.outerWidth()-5),$.ui.draggable&&e.draggable({handle:":first-child"});return e}()),l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+t.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}},u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie="msie"===b,cm=document.compatMode,$s=$.support,bs=void 0!==$s.boxSizing?$s.boxSizing:$s.boxSizingReliable,bm=!ie||!cm||"CSS1Compat"===cm||$s.boxModel||!1,lb=$.layout.browser={version:v,safari:"webkit"===b,webkit:"chrome"===b,msie:ie,isIE6:ie&&6==v,boxModel:bm,boxSizing:!!("function"==typeof bs?bs():bs)},b&&(lb[b]=!0),bm||cm||$(function(){lb.boxModel=$s.boxModel}),$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(t,e){var i,n,s,o,l,r,a,h=e?{panes:{},center:{}}:{};if("object"!=typeof t)return h;for(n in t)for(i=h,l=t[n],a=(s=n.split("__")).length-1,r=0;r<=a;r++)o=s[r],r===a?$.isPlainObject(l)?i[o]=$.layout.transformData(l):i[o]=l:(i[o]||(i[o]={}),i=i[o]);return h},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(t){var e,i,n,s=$.layout.backwardCompatibility.map;for(var o in s)void 0!==(n=(e=l(o)).branch[e.key])&&((i=l(s[o],!0)).branch[i.key]=n,delete e.branch[e.key]);function l(e,i){for(var n,s=e.split("."),o=s.length-1,l={branch:t,key:s[o]},r=0;r<o;r++)n=s[r],void 0==l.branch[n]?l.branch=i?l.branch[n]={}:{}:l.branch=l.branch[n];return l}},renameAllOptions:function(t){var e=$.layout.backwardCompatibility.renameOptions;return e(t),t.defaults&&("object"!=typeof t.panes&&(t.panes={}),$.extend(!0,t.panes,t.defaults),delete t.defaults),t.panes&&e(t.panes),$.each($.layout.config.allPanes,function(i,n){t[n]&&e(t[n])}),t}},$.fn.layout=function(opts){var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(t,e,i){timer.clear(t),timer.data[t]=setTimeout(e,i)},clear:function(t){var e=timer.data;e[t]&&(clearTimeout(e[t]),delete e[t])}},_log=function(t,e,i){var n=options;return(n.showErrorMessages&&!i||i&&n.showDebugMessages)&&$.layout.msg(n.name+" / "+t,!1!==e),!1},_runCallbacks=function(evtName,pane,skipBoundEvents){var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P=hasPane?$Ps[pane]:0;if(hasPane&&!$P)return retVal;if(hasPane||"boolean"!==$.type(pane)||(skipBoundEvents=pane,pane=""),fn)try{isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(retVal=args.length?g(fn)(args[1]):hasPane?g(fn)(pane,$Ps[pane],s,o,lName):g(fn)(Instance,s,o,lName))}catch(t){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),!1),"string"===$.type(t)&&string.length&&_log("Exception:  "+t,!1)}return skipBoundEvents||!1===retVal||(hasPane?(o=options[pane],s=state[pane],$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]),shrt&&$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])):($N.triggerHandler("layout"+lng,[Instance,s,o,lName]),shrt&&$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]))),hasPane&&"onresize_end"===evtName&&resizeChildren(pane+"",!0),retVal;function g(t){return t}},_fixIframe=function(t){if(!browser.mozilla){var e=$Ps[t];"IFRAME"===state[t].tagName?e.css(_c.hidden).css(_c.visible):e.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(t,e){return("horz"==_c[t].dir?cssH:cssW)($Ps[t],e)},cssMinDims=function(t){var e=$Ps[t],i=_c[t].dir,n={minWidth:1001-cssW(e,1e3),minHeight:1001-cssH(e,1e3)};return"horz"===i&&(n.minSize=n.minHeight),"vert"===i&&(n.minSize=n.minWidth),n},setOuterWidth=function(t,e,i){var n,s=t;isStr(t)?s=$Ps[t]:t.jquery||(s=$(t)),n=cssW(s,e),s.css({width:n}),n>0?i&&s.data("autoHidden")&&s.innerHeight()>0&&(s.show().data("autoHidden",!1),browser.mozilla||s.css(_c.hidden).css(_c.visible)):i&&!s.data("autoHidden")&&s.hide().data("autoHidden",!0)},setOuterHeight=function(t,e,i){var n,s=t;isStr(t)?s=$Ps[t]:t.jquery||(s=$(t)),n=cssH(s,e),s.css({height:n,visibility:"visible"}),n>0&&s.innerWidth()>0?i&&s.data("autoHidden")&&(s.show().data("autoHidden",!1),browser.mozilla||s.css(_c.hidden).css(_c.visible)):i&&!s.data("autoHidden")&&s.hide().data("autoHidden",!0)},_parseSize=function(t,e,i){if(i||(i=_c[t].dir),isStr(e)&&e.match(/%/)&&(e="100%"===e?-1:parseInt(e,10)/100),0===e)return 0;if(e>=1)return parseInt(e,10);var n=options,s=0;if("horz"==i?s=sC.innerHeight-($Ps.north?n.north.spacing_open:0)-($Ps.south?n.south.spacing_open:0):"vert"==i&&(s=sC.innerWidth-($Ps.west?n.west.spacing_open:0)-($Ps.east?n.east.spacing_open:0)),-1===e)return s;if(e>0)return round(s*e);if("center"==t)return 0;var o="horz"===i?"height":"width",l=$Ps[t],r="height"===o&&$Cs[t],a=$.layout.showInvisibly(l),h=l.css(o),d=r?r.css(o):0;return l.css(o,"auto"),r&&r.css(o,"auto"),e="height"===o?l.outerHeight():l.outerWidth(),l.css(o,h).css(a),r&&r.css(o,d),e},getPaneSize=function(t,e){var i=$Ps[t],n=options[t],s=state[t],o=e?n.spacing_open:0,l=e?n.spacing_closed:0;return!i||s.isHidden?0:s.isClosed||s.isSliding&&e?l:"horz"===_c[t].dir?i.outerHeight()+o:i.outerWidth()+o},setSizeLimits=function(t,e){if(isInitialized()){var i=options[t],n=state[t],s=_c[t],o=s.dir,l=(s.sizeType.toLowerCase(),void 0!=e?e:n.isSliding),r=($Ps[t],i.spacing_open),a=_c.oppositeEdge[t],h=state[a],d=$Ps[a],c=!d||!1===h.isVisible||h.isSliding?0:"horz"==o?d.outerHeight():d.outerWidth(),u=(!d||h.isHidden?0:options[a][!1!==h.isClosed?"spacing_closed":"spacing_open"])||0,f="horz"==o?sC.innerHeight:sC.innerWidth,p=cssMinDims("center"),m="horz"==o?max(options.center.minHeight,p.minHeight):max(options.center.minWidth,p.minWidth),g=f-r-(l?0:_parseSize("center",m,o)+c+u),_=n.minSize=max(_parseSize(t,i.minSize),cssMinDims(t).minSize),v=n.maxSize=min(i.maxSize?_parseSize(t,i.maxSize):1e5,g),b=n.resizerPosition={},y=sC.inset.top,w=sC.inset.left,x=sC.innerWidth,C=sC.innerHeight,S=i.spacing_open;switch(t){case"north":b.min=y+_,b.max=y+v;break;case"west":b.min=w+_,b.max=w+v;break;case"south":b.min=y+C-v-S,b.max=y+C-_-S;break;case"east":b.min=w+x-v-S,b.max=w+x-_-S}}},calcNewCenterPaneDims=function(){var t={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return t.width=sC.innerWidth-t.left-t.right,t.height=sC.innerHeight-t.bottom-t.top,t.top+=sC.inset.top,t.bottom+=sC.inset.bottom,t.left+=sC.inset.left,t.right+=sC.inset.right,t},getHoverClasses=function(t,e){var i=$(t),n=i.data("layoutRole"),s=i.data("layoutEdge"),o=options[s][n+"Class"],l="-"+s,r="-hover ",a=i.hasClass(o+"-closed")?"-closed":"-open",h="-closed"===a?"-open":"-closed",d=o+r+(o+l+r)+(o+a+r)+(o+l+a+r);return e&&(d+=o+h+r+(o+l+h+r)),"resizer"==n&&i.hasClass(o+"-sliding")&&(d+=o+"-sliding"+r+(o+l)+"-sliding"+r),$.trim(d)},addHover=function(t,e){var i=$(e||this);t&&"toggler"===i.data("layoutRole")&&t.stopPropagation(),i.addClass(getHoverClasses(i))},removeHover=function(t,e){var i=$(e||this);i.removeClass(getHoverClasses(i,!0))},onResizerEnter=function(t){var e=$(this).data("layoutEdge"),i=state[e];$(document);i.isResizing||state.paneResizing||options.maskPanesEarly&&showMasks(e,{resizing:!0})},onResizerLeave=function(t,e){var i=e||this,n=$(i).data("layoutEdge"),s=n+"ResizerLeave";$(document);timer.clear(n+"_openSlider"),timer.clear(s),e?options.maskPanesEarly&&!state.paneResizing&&hideMasks():timer.set(s,function(){onResizerLeave(t,i)},200)},_create=function(){initOptions();var t=options,e=state;return e.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),t.initPanes&&_initLayoutElements(),delete e.creatingLayout,state.initialized)},isInitialized=function(){return!(!state.initialized&&!state.creatingLayout)||_initLayoutElements()},_initLayoutElements=function(t){var e=options;if(!$N.is(":visible"))return!t&&browser.webkit&&"BODY"===$N[0].tagName&&setTimeout(function(){_initLayoutElements(!0)},50),!1;if(!getPane("center").length)return _log(e.errors.centerPaneMissing);if(state.creatingLayout=!0,$.extend(sC,elDims($N,e.inset)),initPanes(),e.scrollToBookmarkOnLoad){var i=self.location;i.hash&&i.replace(i.hash)}return Instance.hasParentLayout?e.resizeWithWindow=!1:e.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},createChildren=function(t,e){var i=evtPane.call(this,t),n=$Ps[i];if(n){var s=$Cs[i],o=state[i],l=options[i],r=options.stateManagement||{},a=e?l.children=e:l.children;if($.isPlainObject(a))a=[a];else if(!a||!$.isArray(a))return;$.each(a,function(t,e){$.isPlainObject(e)&&(e.containerSelector?n.find(e.containerSelector):s||n).each(function(){var t=$(this),n=t.data("layout");if(!n){if(setInstanceKey({container:t,options:e},o),r.includeChildren&&state.stateData[i]){var s=(state.stateData[i].children||{})[e.instanceKey],l=e.stateManagement||(e.stateManagement={autoLoad:!0});!0===l.autoLoad&&s&&(l.autoSave=!1,l.includeChildren=!0,l.autoLoad=$.extend(!0,{},s))}(n=t.layout(e))&&refreshChildren(i,n)}})})}},setInstanceKey=function(t,e){var i=t.container,n=t.options,s=n.stateManagement,o=n.instanceKey||i.data("layoutInstanceKey");return o||(o=(s&&s.cookie?s.cookie.name:"")||n.name),o=o?o.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++e.childIdx,n.instanceKey=o,i.data("layoutInstanceKey",o),o},refreshChildren=function(t,e){var i,n=$Ps[t],s=children[t],o=state[t];$.isPlainObject(s)&&($.each(s,function(t,e){e.destroyed&&delete s[t]}),$.isEmptyObject(s)&&(s=children[t]=null)),e||s||(e=n.data("layout")),e&&(e.hasParentLayout=!0,i=e.options,setInstanceKey(e,o),s||(s=children[t]={}),s[i.instanceKey]=e.container.data("layout")),Instance[t].children=children[t],e||createChildren(t)},windowResize=function(){var t=options,e=Number(t.resizeWithWindowDelay);e<10&&(e=100),timer.clear("winResize"),timer.set("winResize",function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var e=elDims($N,t.inset);e.innerWidth===sC.innerWidth&&e.innerHeight===sC.innerHeight||resizeAll()},e),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var t=Number(options.resizeWithWindowMaxDelay);t>0&&timer.set("winResizeRepeater",function(){setWindowResizeRepeater(),resizeAll()},t)},unload=function(){_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var t,e,i=$N[0],n=$("html"),s=sC.tagName=i.tagName,o=sC.id=i.id,l=sC.className=i.className,r=options,a=r.name,h="position,margin,padding,border",d="layoutCSS",c={},u="hidden",f=$N.data("parentLayout"),p=$N.data("layoutEdge"),m=f&&p,g=$.layout.cssNum;sC.selector=$N.selector.split(".slice")[0],sC.ref=(r.name?r.name+" layout / ":"")+s+(o?"#"+o:l?".["+l+"]":""),sC.isBody="BODY"===s,m||sC.isBody||(f=(t=$N.closest("."+$.layout.defaults.panes.paneClass)).data("parentLayout"),p=t.data("layoutEdge"),m=f&&p),$N.data({layout:Instance,layoutContainer:sID}).addClass(r.containerClass);var _={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(a in _)$N.bind("layout"+a.toLowerCase()+"."+sID,Instance[_[a]||a]);m&&(Instance.hasParentLayout=!0,f.refreshChildren(p,Instance)),$N.data(d)||(sC.isBody?($N.data(d,$.extend(styles($N,h),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")})),n.data(d,$.extend(styles(n,"padding"),{height:"auto",overflow:n.css("overflow"),overflowX:n.css("overflowX"),overflowY:n.css("overflowY")}))):$N.data(d,styles($N,h+",top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if(c={overflow:u,overflowX:u,overflowY:u},$N.css(c),r.inset&&!$.isPlainObject(r.inset)&&(e=parseInt(r.inset,10)||0,r.inset={top:e,bottom:e,left:e,right:e}),sC.isBody)r.outset?$.isPlainObject(r.outset)||(e=parseInt(r.outset,10)||0,r.outset={top:e,bottom:e,left:e,right:e}):r.outset={top:g(n,"paddingTop"),bottom:g(n,"paddingBottom"),left:g(n,"paddingLeft"),right:g(n,"paddingRight")},n.css(c).css({height:"100%",border:"none",padding:0,margin:0}),browser.isIE6?($N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),r.inset||(r.inset=elDims($N).inset)):($N.css({width:"auto",height:"auto",margin:0,position:"absolute"}),$N.css(r.outset)),$.extend(sC,elDims($N,r.inset));else{var v=$N.css("position");v&&v.match(/(fixed|absolute|relative)/)||$N.css("position","relative"),$N.is(":visible")&&($.extend(sC,elDims($N,r.inset)),sC.innerHeight<1&&_log(r.errors.noContainerHeight.replace(/CONTAINER/,sC.ref)))}g($N,"minWidth")&&$N.parent().css("overflowX","auto"),g($N,"minHeight")&&$N.parent().css("overflowY","auto")}catch(t){}},initHotkeys=function(t){t=t?t.split(","):_c.borderPanes,$.each(t,function(t,e){var i=options[e];if(i.enableCursorHotkey||i.customHotkey)return $(document).bind("keydown."+sID,keyDown),!1})},initOptions=function(){var t,e,i,n,s,o,l;if(opts=$.layout.transformData(opts,!0),opts=$.layout.backwardCompatibility.renameAllOptions(opts),!$.isEmptyObject(opts.panes)){for(t=$.layout.optionsMap.noDefault,s=0,o=t.length;s<o;s++)i=t[s],delete opts.panes[i];for(t=$.layout.optionsMap.layout,s=0,o=t.length;s<o;s++)i=t[s],delete opts.panes[i]}t=$.layout.optionsMap.layout;var r=$.layout.config.optionRootKeys;for(i in opts)n=opts[i],$.inArray(i,r)<0&&$.inArray(i,t)<0&&(opts.panes[i]||(opts.panes[i]=$.isPlainObject(n)?$.extend(!0,{},n):n),delete opts[i]);$.extend(!0,options,opts),$.each(_c.allPanes,function(n,s){if(_c[s]=$.extend(!0,{},_c.panes,_c[s]),e=options.panes,l=options[s],"center"===s)for(t=$.layout.optionsMap.center,n=0,o=t.length;n<o;n++)i=t[n],opts.center[i]||!opts.panes[i]&&l[i]||(l[i]=e[i]);else l=options[s]=$.extend(!0,{},e,l),function(t){var e=options[t],i=options.panes;e.fxSettings||(e.fxSettings={});i.fxSettings||(i.fxSettings={});$.each(["_open","_close","_size"],function(n,s){var o="fxName"+s,l="fxSpeed"+s,r="fxSettings"+s,a=e[o]=e[o]||i[o]||e.fxName||i.fxName||"none",h=$.effects&&($.effects[a]||$.effects.effect&&$.effects.effect[a]);"none"!==a&&options.effects[a]&&h||(a=e[o]="none");var d=options.effects[a]||{},c=d.all||null,u=d[t]||null;e[l]=e[l]||i[l]||e.fxSpeed||i.fxSpeed||null,e[r]=$.extend(!0,{},c,u,i.fxSettings,e.fxSettings,i[r],e[r])}),delete e.fxName,delete e.fxSpeed,delete e.fxSettings}(s),l.resizerClass||(l.resizerClass="ui-layout-resizer"),l.togglerClass||(l.togglerClass="ui-layout-toggler");l.paneClass||(l.paneClass="ui-layout-pane")});var a=opts.zIndex,h=options.zIndexes;a>0&&(h.pane_normal=a,h.content_mask=max(a+1,h.content_mask),h.resizer_normal=max(a+2,h.resizer_normal)),delete options.panes},getPane=function(t){var e=options[t].paneSelector;if("#"===e.substr(0,1))return $N.find(e).eq(0);var i=$N.children(e).eq(0);return i.length?i:$N.children("form:first").children(e).eq(0)},initPanes=function(t){evtPane(t),$.each(_c.allPanes,function(t,e){addPane(e,!0)}),initHandles(),$.each(_c.borderPanes,function(t,e){$Ps[e]&&state[e].isVisible&&(setSizeLimits(e),makePaneFit(e))}),sizeMidPanes("center"),$.each(_c.allPanes,function(t,e){afterInitPane(e)})},addPane=function(t,e){if(e||isInitialized()){var i,n,s,o=options[t],l=state[t],r=_c[t],a=r.dir,h=(l.fx,o.spacing_open,"center"===t),d={},c=$Ps[t];if(c?removePane(t,!1,!0,!1):$Cs[t]=!1,(c=$Ps[t]=getPane(t)).length){if(!c.data("layoutCSS")){c.data("layoutCSS",styles(c,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"))}Instance[t]={name:t,pane:$Ps[t],content:$Cs[t],options:options[t],state:state[t],children:children[t]},c.data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"pane"}).css(r.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?r.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+t).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var u,f={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(u in f)c.bind("layoutpane"+u.toLowerCase()+"."+sID,Instance[f[u]||u]);initContent(t,!1),h||(i=l.size=_parseSize(t,o.size),n=_parseSize(t,o.minSize)||1,s=_parseSize(t,o.maxSize)||1e5,i>0&&(i=max(min(i,s),n)),l.autoResize=o.autoResize,l.isClosed=!1,l.isSliding=!1,l.isResizing=!1,l.isHidden=!1,l.pins||(l.pins=[])),l.tagName=c[0].tagName,l.edge=t,l.noRoom=!1,l.isVisible=!0,setPanePosition(t),"horz"===a?d.height=cssH(c,i):"vert"===a&&(d.width=cssW(c,i)),c.css(d),"horz"!=a&&sizeMidPanes(t,!0),state.initialized&&(initHandles(t),initHotkeys(t)),o.initClosed&&o.closable&&!o.initHidden?close(t,!0,!0):o.initHidden||o.initClosed?hide(t):l.noRoom||c.css("display","block"),c.css("visibility","visible"),o.showOverflowOnHover&&c.hover(allowOverflow,resetOverflow),state.initialized&&afterInitPane(t)}else $Ps[t]=!1}},afterInitPane=function(t){var e=$Ps[t],i=state[t],n=options[t];e&&(e.data("layout")&&refreshChildren(t,e.data("layout")),i.isVisible&&(state.initialized?resizeAll():sizeContent(t),n.triggerEventsOnLoad?_runCallbacks("onresize_end",t):resizeChildren(t,!0)),n.initChildren&&n.children&&createChildren(t))},setPanePosition=function(t){t=t?t.split(","):_c.borderPanes,$.each(t,function(t,e){var i=$Ps[e],n=$Rs[e],s=(options[e],state[e]),o=_c[e].side,l={};if(i){switch(e){case"north":l.top=sC.inset.top,l.left=sC.inset.left,l.right=sC.inset.right;break;case"south":l.bottom=sC.inset.bottom,l.left=sC.inset.left,l.right=sC.inset.right;break;case"west":l.left=sC.inset.left;break;case"east":l.right=sC.inset.right}i.css(l),n&&s.isClosed?n.css(o,sC.inset[o]):n&&!s.isHidden&&n.css(o,sC.inset[o]+getPaneSize(e))}})},initHandles=function(t){t=t?t.split(","):_c.borderPanes,$.each(t,function(t,e){var i=$Ps[e];if($Rs[e]=!1,$Ts[e]=!1,i){var n=options[e],s=state[e],o=(_c[e],"#"===n.paneSelector.substr(0,1)?n.paneSelector.substr(1):""),l=n.resizerClass,r=n.togglerClass,a=(s.isVisible?n.spacing_open:n.spacing_closed,"-"+e),h=(s.isVisible,Instance[e]),d=h.resizer=$Rs[e]=$("<div></div>"),c=h.toggler=!!n.closable&&($Ts[e]=$("<div></div>"));!s.isVisible&&n.slidable&&d.attr("title",n.tips.Slide).css("cursor",n.sliderCursor),d.attr("id",o?o+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(n.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(l+" "+l+a).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).mousedown($.layout.disableTextSelection).mouseup($.layout.enableTextSelection).appendTo($N),$.fn.disableSelection&&d.disableSelection(),n.resizerDblClickToggle&&d.bind("dblclick."+sID,toggle),c&&(c.attr("id",o?o+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(n.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(r+" "+r+a).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(d),n.togglerContent_open&&$("<span>"+n.togglerContent_open+"</span>").data({layoutEdge:e,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",e).addClass("content content-open").css("display","none").appendTo(c),n.togglerContent_closed&&$("<span>"+n.togglerContent_closed+"</span>").data({layoutEdge:e,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(c),enableClosable(e)),initResizable(e),s.isVisible?setAsOpen(e):(setAsClosed(e),bindStartSlidingEvents(e,!0))}}),sizeHandles()},initContent=function(t,e){if(isInitialized()){var i,n=options[t],s=n.contentSelector,o=Instance[t],l=$Ps[t];s&&(i=o.content=$Cs[t]=n.findNestedContent?l.find(s).eq(0):l.children(s).eq(0)),i&&i.length?(i.data("layoutRole","content"),i.data("layoutCSS")||i.data("layoutCSS",styles(i,"height")),i.css(_c.content.cssReq),n.applyDemoStyles&&(i.css(_c.content.cssDemo),l.css(_c.content.cssDemoPane)),l.css("overflowX").match(/(scroll|auto)/)&&l.css("overflow","hidden"),state[t].content={},!1!==e&&sizeContent(t)):o.content=$Cs[t]=!1}},initResizable=function(t){var e=$.layout.plugins.draggable;t=t?t.split(","):_c.borderPanes,$.each(t,function(t,n){var s=options[n];if(!e||!$Ps[n]||!s.resizable)return s.resizable=!1,!0;var o,l,r=state[n],a=options.zIndexes,h=_c[n],d="horz"==h.dir?"top":"left",c=($Ps[n],$Rs[n]),u=s.resizerClass,f=0,p=u+"-drag",m=u+"-"+n+"-drag",g=u+"-dragging",_=u+"-"+n+"-dragging",v=u+"-dragging-limit",b=u+"-"+n+"-dragging-limit",y=!1;r.isClosed||c.attr("title",s.tips.Resize).css("cursor",s.resizerCursor),c.draggable({containment:$N[0],axis:"horz"==h.dir?"y":"x",delay:0,distance:1,grid:s.resizingGrid,helper:"clone",opacity:s.resizerDragOpacity,addClasses:!1,zIndex:a.resizer_drag,start:function(t,e){if(s=options[n],r=state[n],l=s.livePaneResizing,!1===_runCallbacks("ondrag_start",n))return!1;r.isResizing=!0,state.paneResizing=n,timer.clear(n+"_closeSlider"),setSizeLimits(n),o=r.resizerPosition,f=e.position[d],c.addClass(p+" "+m),y=!1,showMasks(n,{resizing:!0})},drag:function(t,e){y||(e.helper.addClass(g+" "+_).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),y=!0,r.isSliding&&$Ps[n].css("zIndex",a.pane_sliding));var h=0;e.position[d]<o.min?(e.position[d]=o.min,h=-1):e.position[d]>o.max&&(e.position[d]=o.max,h=1),h?(e.helper.addClass(v+" "+b),window.defaultStatus=h>0&&n.match(/(north|west)/)||h<0&&n.match(/(south|east)/)?s.tips.maxSizeWarning:s.tips.minSizeWarning):(e.helper.removeClass(v+" "+b),window.defaultStatus=""),l&&Math.abs(e.position[d]-f)>=s.liveResizingTolerance&&(f=e.position[d],i(t,e,n))},stop:function(t,e){$("body").enableSelection(),window.defaultStatus="",c.removeClass(p+" "+m),r.isResizing=!1,state.paneResizing=!1,i(t,e,n,!0)}})});var i=function(t,e,i,n){var s,o=e.position,l=_c[i],r=options[i],a=state[i];switch(i){case"north":s=o.top;break;case"west":s=o.left;break;case"south":s=sC.layoutHeight-o.top-r.spacing_open;break;case"east":s=sC.layoutWidth-o.left-r.spacing_open}var h=s-sC.inset[l.side];if(n)!1!==_runCallbacks("ondrag_end",i)&&manualSizePane(i,h,!1,!0),hideMasks(!0),a.isSliding&&showMasks(i,{resizing:!0});else{if(Math.abs(h-a.size)<r.liveResizingTolerance)return;manualSizePane(i,h,!1,!0),sizeMasks()}}},sizeMask=function(){var t=$(this),e=t.data("layoutMask"),i=state[e];"IFRAME"==i.tagName&&i.isVisible&&t.css({top:i.offsetTop,left:i.offsetLeft,width:i.outerWidth,height:i.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(t,e){var i,n,s=_c[t],o=["center"],l=options.zIndexes,r=$.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:state[t].isSliding},e);r.resizing&&o.push(t),r.sliding&&o.push(_c.oppositeEdge[t]),"horz"===s.dir&&(o.push("west"),o.push("east")),$.each(o,function(t,e){n=state[e],i=options[e],n.isVisible&&(i.maskObjects||!r.objectsOnly&&i.maskContents)&&getMasks(e).each(function(){sizeMask.call(this),this.style.zIndex=n.isSliding?l.pane_sliding+1:l.pane_normal+1,this.style.display="block"})})},hideMasks=function(t){if(t||!state.paneResizing)$Ms.hide();else if(!t&&!$.isEmptyObject(state.panesSliding))for(var e,i,n=$Ms.length-1;n>=0;n--)e=(i=$Ms.eq(n)).data("layoutMask"),options[e].maskObjects||i.hide()},getMasks=function(t){for(var e,i=$([]),n=0,s=$Ms.length;n<s;n++)(e=$Ms.eq(n)).data("layoutMask")===t&&(i=i.add(e));return i.length?i:createMasks(t)},createMasks=function(t){var e,i,n,s,o,l=$Ps[t],r=state[t],a=options[t],h=options.zIndexes;if(!a.maskContents&&!a.maskObjects)return $([]);for(o=0;o<(a.maskObjects?2:1);o++)e=a.maskObjects&&0==o,i=document.createElement(e?"iframe":"div"),n=$(i).data("layoutMask",t),i.className="ui-layout-mask ui-layout-mask-"+t,(s=i.style).background="#FFF",s.position="absolute",s.display="block",e?(i.src="about:blank",i.frameborder=0,s.border=0,s.opacity=0,s.filter="Alpha(Opacity='0')"):(s.opacity=.001,s.filter="Alpha(Opacity='1')"),"IFRAME"==r.tagName?(s.zIndex=h.pane_normal+1,$N.append(i)):(n.addClass("ui-layout-mask-inside-pane"),s.zIndex=a.maskZindex||h.content_mask,s.top=0,s.left=0,s.width="100%",s.height="100%",l.append(i)),$Ms=$Ms.add(i);return $Ms},destroy=function(t,e){$(window).unbind("."+sID),$(document).unbind("."+sID),"object"==typeof t?evtPane(t):e=t,$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,function(t,i){removePane(i,!1,!0,e)});var i="layoutCSS";for(var n in $N.data(i)&&!$N.data("layoutRole")&&$N.css($N.data(i)).removeData(i),"BODY"===sC.tagName&&($N=$("html")).data(i)&&$N.css($N.data(i)).removeData(i),runPluginCallbacks(Instance,$.layout.onDestroy),unload(),Instance)n.match(/^(container|options)$/)||delete Instance[n];return Instance.destroyed=!0,Instance},removePane=function(t,e,i,n){if(isInitialized()){var s=evtPane.call(this,t),o=$Ps[s],l=$Cs[s],r=$Rs[s],a=$Ts[s];o&&$.isEmptyObject(o.data())&&(o=!1),l&&$.isEmptyObject(l.data())&&(l=!1),r&&$.isEmptyObject(r.data())&&(r=!1),a&&$.isEmptyObject(a.data())&&(a=!1),o&&o.stop(!0,!0);var h=options[s],d=(state[s],"layoutCSS"),c=children[s],u=$.isPlainObject(c)&&!$.isEmptyObject(c),f=void 0!==n?n:h.destroyChildren;if(u&&f&&($.each(c,function(t,e){e.destroyed||e.destroy(!0),e.destroyed&&delete c[t]}),$.isEmptyObject(c)&&(c=children[s]=null,u=!1)),o&&e&&!u)o.remove();else if(o&&o[0]){var p=h.paneClass,m=p+"-"+s,g=[p,p+"-open",p+"-closed",p+"-sliding",m,m+"-open",m+"-closed",m+"-sliding"];$.merge(g,getHoverClasses(o,!0)),o.removeClass(g.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),u&&l?(l.width(l.width()),$.each(c,function(t,e){e.resizeAll()})):l&&l.css(l.data(d)).removeData(d).removeData("layoutRole"),o.data("layout")||o.css(o.data(d)).removeData(d)}a&&a.remove(),r&&r.remove(),Instance[s]=$Ps[s]=$Cs[s]=$Rs[s]=$Ts[s]=!1,{removed:!0},i||resizeAll()}},_hidePane=function(t){var e=$Ps[t],i=options[t],n=e[0].style;i.useOffscreenClose?(e.data(_c.offscreenReset)||e.data(_c.offscreenReset,{left:n.left,right:n.right}),e.css(_c.offscreenCSS)):e.hide().removeData(_c.offscreenReset)},_showPane=function(t){var e=$Ps[t],i=options[t],n=_c.offscreenCSS,s=e.data(_c.offscreenReset),o=e[0].style;e.show().removeData(_c.offscreenReset),i.useOffscreenClose&&s&&(o.left==n.left&&(o.left=s.left),o.right==n.right&&(o.right=s.right))},hide=function(t,e){if(isInitialized()){var i=evtPane.call(this,t),n=options[i],s=state[i],o=$Ps[i],l=$Rs[i];"center"!==i&&o&&!s.isHidden&&(state.initialized&&!1===_runCallbacks("onhide_start",i)||(s.isSliding=!1,delete state.panesSliding[i],l&&l.hide(),!state.initialized||s.isClosed?(s.isClosed=!0,s.isHidden=!0,s.isVisible=!1,state.initialized||_hidePane(i),sizeMidPanes("horz"===_c[i].dir?"":"center"),(state.initialized||n.triggerEventsOnLoad)&&_runCallbacks("onhide_end",i)):(s.isHiding=!0,close(i,!1,e))))}},show=function(t,e,i,n){if(isInitialized()){var s=evtPane.call(this,t),o=(options[s],state[s]),l=$Ps[s];$Rs[s];"center"!==s&&l&&o.isHidden&&!1!==_runCallbacks("onshow_start",s)&&(o.isShowing=!0,o.isSliding=!1,delete state.panesSliding[s],!1===e?close(s,!0):open(s,!1,i,n))}},toggle=function(t,e){if(isInitialized()){var i=evtObj(t),n=evtPane.call(this,t),s=state[n];i&&i.stopImmediatePropagation(),s.isHidden?show(n):s.isClosed?open(n,!!e):close(n)}},_closePane=function(t,e){$Ps[t];var i=state[t];_hidePane(t),i.isClosed=!0,i.isVisible=!1,e&&setAsClosed(t)},close=function(t,e,i,n){var s=evtPane.call(this,t);if("center"!==s)if(state.initialized||!$Ps[s]){if(isInitialized()){var o,l,r,a=$Ps[s],h=($Rs[s],$Ts[s],options[s]),d=state[s];_c[s];$N.queue(function(t){if(!a||!h.closable&&!d.isShowing&&!d.isHiding||!e&&d.isClosed&&!d.isShowing)return t();var n=!d.isShowing&&!1===_runCallbacks("onclose_start",s);if(l=d.isShowing,r=d.isHiding,d.isSliding,delete d.isShowing,delete d.isHiding,n)return t();o=!i&&!d.isClosed&&"none"!=h.fxName_close,d.isMoving=!0,d.isClosed=!0,d.isVisible=!1,r?d.isHidden=!0:l&&(d.isHidden=!1),d.isSliding?bindStopSlidingEvents(s,!1):sizeMidPanes("horz"===_c[s].dir?"":"center",!1),setAsClosed(s),o?(lockPaneForFX(s,!0),a.hide(h.fxName_close,h.fxSettings_close,h.fxSpeed_close,function(){lockPaneForFX(s,!1),d.isClosed&&c(),t()})):(_hidePane(s),c(),t())})}}else _closePane(s,!0);function c(){d.isMoving=!1,bindStartSlidingEvents(s,!0);var t=_c.oppositeEdge[s];state[t].noRoom&&(setSizeLimits(t),makePaneFit(t)),n||!state.initialized&&!h.triggerEventsOnLoad||(l||_runCallbacks("onclose_end",s),l&&_runCallbacks("onshow_end",s),r&&_runCallbacks("onhide_end",s))}},setAsClosed=function(t){if($Rs[t]){$Ps[t];var e=$Rs[t],i=$Ts[t],n=options[t],s=state[t],o=_c[t].side,l=n.resizerClass,r=n.togglerClass,a="-"+t;e.css(o,sC.inset[o]).removeClass(l+"-open "+l+a+"-open").removeClass(l+"-sliding "+l+a+"-sliding").addClass(l+"-closed "+l+a+"-closed"),s.isHidden&&e.hide(),n.resizable&&$.layout.plugins.draggable&&e.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),i&&(i.removeClass(r+"-open "+r+a+"-open").addClass(r+"-closed "+r+a+"-closed").attr("title",n.tips.Open),i.children(".content-open").hide(),i.children(".content-closed").css("display","block")),syncPinBtns(t,!1),state.initialized&&sizeHandles()}},open=function(t,e,i,n){if(isInitialized()){var s,o,l=evtPane.call(this,t),r=$Ps[l],a=($Rs[l],$Ts[l],options[l]),h=state[l];_c[l];"center"!==l&&$N.queue(function(t){if(!r||!a.resizable&&!a.closable&&!h.isShowing||h.isVisible&&!h.isSliding)return t();if(h.isHidden&&!h.isShowing)return t(),void show(l,!0);h.autoResize&&h.size!=a.size?sizePane(l,a.size,!0,!0,!0):setSizeLimits(l,e);var c=_runCallbacks("onopen_start",l);return"abort"===c?t():("NC"!==c&&setSizeLimits(l,e),h.minSize>h.maxSize?(syncPinBtns(l,!1),!n&&a.tips.noRoomToOpen&&alert(a.tips.noRoomToOpen),t()):(e?bindStopSlidingEvents(l,!0):h.isSliding?bindStopSlidingEvents(l,!1):a.slidable&&bindStartSlidingEvents(l,!1),h.noRoom=!1,makePaneFit(l),o=h.isShowing,delete h.isShowing,s=!i&&h.isClosed&&"none"!=a.fxName_open,h.isMoving=!0,h.isVisible=!0,h.isClosed=!1,o&&(h.isHidden=!1),void(s?(lockPaneForFX(l,!0),r.show(a.fxName_open,a.fxSettings_open,a.fxSpeed_open,function(){lockPaneForFX(l,!1),h.isVisible&&d(),t()})):(_showPane(l),d(),t()))))})}function d(){h.isMoving=!1,_fixIframe(l),h.isSliding||sizeMidPanes("vert"==_c[l].dir?"center":"",!1),setAsOpen(l)}},setAsOpen=function(t,e){var i=$Ps[t],n=$Rs[t],s=$Ts[t],o=options[t],l=state[t],r=_c[t].side,a=o.resizerClass,h=o.togglerClass,d="-"+t;n.css(r,sC.inset[r]+getPaneSize(t)).removeClass(a+"-closed "+a+d+"-closed").addClass(a+"-open "+a+d+"-open"),l.isSliding?n.addClass(a+"-sliding "+a+d+"-sliding"):n.removeClass(a+"-sliding "+a+d+"-sliding"),removeHover(0,n),o.resizable&&$.layout.plugins.draggable?n.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.tips.Resize):l.isSliding||n.css("cursor","default"),s&&(s.removeClass(h+"-closed "+h+d+"-closed").addClass(h+"-open "+h+d+"-open").attr("title",o.tips.Close),removeHover(0,s),s.children(".content-closed").hide(),s.children(".content-open").css("display","block")),syncPinBtns(t,!l.isSliding),$.extend(l,elDims(i)),state.initialized&&(sizeHandles(),sizeContent(t,!0)),!e&&(state.initialized||o.triggerEventsOnLoad)&&i.is(":visible")&&(_runCallbacks("onopen_end",t),l.isShowing&&_runCallbacks("onshow_end",t),state.initialized&&_runCallbacks("onresize_end",t))},slideOpen=function(t){if(isInitialized()){var e=evtObj(t),i=evtPane.call(this,t),n=state[i],s=options[i].slideDelay_open;"center"!==i&&(e&&e.stopImmediatePropagation(),n.isClosed&&e&&"mouseenter"===e.type&&s>0?timer.set(i+"_openSlider",o,s):o())}function o(){n.isClosed?n.isMoving||open(i,!0):bindStopSlidingEvents(i,!0)}},slideClose=function(t){if(isInitialized()){var e=evtObj(t),i=evtPane.call(this,t),n=options[i],s=state[i],o=s.isMoving?1e3:300;if("center"!==i&&!s.isClosed&&!s.isResizing)if("click"===n.slideTrigger_close)l();else{if(n.preventQuickSlideClose&&s.isMoving)return;if(n.preventPrematureSlideClose&&e&&$.layout.isMouseOverElem(e,$Ps[i]))return;e?timer.set(i+"_closeSlider",l,max(n.slideDelay_close,o)):l()}}function l(){s.isClosed?bindStopSlidingEvents(i,!1):s.isMoving||close(i)}},slideToggle=function(t){var e=evtPane.call(this,t);toggle(e,!0)},lockPaneForFX=function(t,e){var i=$Ps[t],n=state[t],s=options[t],o=options.zIndexes;e?(showMasks(t,{animation:!0,objectsOnly:!0}),i.css({zIndex:o.pane_animate}),"south"==t?i.css({top:sC.inset.top+sC.innerHeight-i.outerHeight()}):"east"==t&&i.css({left:sC.inset.left+sC.innerWidth-i.outerWidth()})):(hideMasks(),i.css({zIndex:n.isSliding?o.pane_sliding:o.pane_normal}),"south"==t?i.css({top:"auto"}):"east"!=t||i.css("left").match(/\-99999/)||i.css({left:"auto"}),browser.msie&&s.fxOpacityFix&&"slide"!=s.fxName_open&&i.css("filter")&&1==i.css("opacity")&&i[0].style.removeAttribute("filter"))},bindStartSlidingEvents=function(t,e){var i=options[t],n=($Ps[t],$Rs[t]),s=i.slideTrigger_open.toLowerCase();!n||e&&!i.slidable||(s.match(/mouseover/)?s=i.slideTrigger_open="mouseenter":s.match(/(click|dblclick|mouseenter)/)||(s=i.slideTrigger_open="click"),i.resizerDblClickToggle&&s.match(/click/)&&n[e?"unbind":"bind"]("dblclick."+sID,toggle),n[e?"bind":"unbind"](s+"."+sID,slideOpen).css("cursor",e?i.sliderCursor:"default").attr("title",e?i.tips.Slide:""))},bindStopSlidingEvents=function(t,e){var i=options[t],n=state[t],s=(_c[t],options.zIndexes),o=i.slideTrigger_close.toLowerCase(),l=e?"bind":"unbind",r=$Ps[t],a=$Rs[t];function h(e){timer.clear(t+"_closeSlider"),e.stopPropagation()}timer.clear(t+"_closeSlider"),e?(n.isSliding=!0,state.panesSliding[t]=!0,bindStartSlidingEvents(t,!1)):(n.isSliding=!1,delete state.panesSliding[t]),r.css("zIndex",e?s.pane_sliding:s.pane_normal),a.css("zIndex",e?s.pane_sliding+2:s.resizer_normal),o.match(/(click|mouseleave)/)||(o=i.slideTrigger_close="mouseleave"),a[l](o,slideClose),"mouseleave"===o&&(r[l]("mouseleave."+sID,slideClose),a[l]("mouseenter."+sID,h),r[l]("mouseenter."+sID,h)),e?"click"!==o||i.resizable||(a.css("cursor",e?i.sliderCursor:"default"),a.attr("title",e?i.tips.Close:"")):timer.clear(t+"_closeSlider")},makePaneFit=function(t,e,i,n){var s=options[t],o=state[t],l=_c[t],r=$Ps[t],a=$Rs[t],h="vert"===l.dir,d=!1;if(("center"===t||h&&o.noVerticalRoom)&&((d=o.maxHeight>=0)&&o.noRoom?(_showPane(t),a&&a.show(),o.isVisible=!0,o.noRoom=!1,h&&(o.noVerticalRoom=!1),_fixIframe(t)):d||o.noRoom||(_hidePane(t),a&&a.hide(),o.isVisible=!1,o.noRoom=!0)),"center"===t);else if(o.minSize<=o.maxSize){if(d=!0,o.size>o.maxSize)sizePane(t,o.maxSize,i,!0,n);else if(o.size<o.minSize)sizePane(t,o.minSize,i,!0,n);else if(a&&o.isVisible&&r.is(":visible")){var c=o.size+sC.inset[l.side];$.layout.cssNum(a,l.side)!=c&&a.css(l.side,c)}o.noRoom&&(o.wasOpen&&s.closable?s.autoReopen?open(t,!1,!0,!0):o.noRoom=!1:show(t,o.wasOpen,!0,!0))}else o.noRoom||(o.noRoom=!0,o.wasOpen=!o.isClosed&&!o.isSliding,o.isClosed||(s.closable?close(t,!0,!0):hide(t,!0)))},manualSizePane=function(t,e,i,n,s){if(isInitialized()){var o=evtPane.call(this,t),l=options[o],r=state[o],a=s||l.livePaneResizing&&!r.isResizing;"center"!==o&&(r.autoResize=!1,sizePane(o,e,i,n,a))}},sizePane=function(t,e,i,n,s){if(isInitialized()){var o,l,r=evtPane.call(this,t),a=options[r],h=state[r],d=$Ps[r],c=$Rs[r],u=_c[r].side,f=_c[r].sizeType.toLowerCase(),p=h.isResizing&&!a.triggerEventsDuringLiveResize,m=!0!==n&&a.animatePaneSizing;"center"!==r&&$N.queue(function(t){if(setSizeLimits(r),o=h.size,e=_parseSize(r,e),e=max(e,_parseSize(r,a.minSize)),(e=min(e,h.maxSize))<h.minSize)return t(),void makePaneFit(r,!1,i);if(!s&&e===o)return t();if(h.newSize=e,!i&&state.initialized&&h.isVisible&&_runCallbacks("onresize_start",r),l=cssSize(r,e),m&&d.is(":visible")){var n=$.layout.effects.size[r]||$.layout.effects.size.all,c=a.fxSettings_size.easing||n.easing,u=options.zIndexes,p={};p[f]=l+"px",h.isMoving=!0,d.css({zIndex:u.pane_animate}).show().animate(p,a.fxSpeed_size,c,function(){d.css({zIndex:h.isSliding?u.pane_sliding:u.pane_normal}),h.isMoving=!1,delete h.newSize,g(),t()})}else d.css(f,l),delete h.newSize,d.is(":visible")?g():h.size=e,t()})}function g(){for(var t="width"===f?d.outerWidth():d.outerHeight(),n=[{pane:r,count:1,target:e,actual:t,correct:e===t,attempt:e,cssSize:l}],a=n[0],m={},g="Inaccurate size after resizing the "+r+"-pane.";!(a.correct||(m={pane:r,count:a.count+1,target:e},a.actual>e?m.attempt=max(0,a.attempt-(a.actual-e)):m.attempt=max(0,a.attempt+(e-a.actual)),m.cssSize=cssSize(r,m.attempt),d.css(f,m.cssSize),m.actual="width"==f?d.outerWidth():d.outerHeight(),m.correct=e===m.actual,1===n.length&&(_log(g,!1,!0),_log(a,!1,!0)),_log(m,!1,!0),n.length>3));)n.push(m),a=n[n.length-1];h.size=e,$.extend(h,elDims(d)),h.isVisible&&d.is(":visible")&&(c&&c.css(u,e+sC.inset[u]),sizeContent(r)),!i&&!p&&state.initialized&&h.isVisible&&_runCallbacks("onresize_end",r),i||(h.isSliding||sizeMidPanes("horz"==_c[r].dir?"":"center",p,s),sizeHandles());var _=_c.oppositeEdge[r];e<o&&state[_].noRoom&&(setSizeLimits(_),makePaneFit(_,!1,i)),n.length>1&&_log(g+"\nSee the Error Console for details.",!0,!0)}},sizeMidPanes=function(t,e,i){t=(t||"east,west,center").split(","),$.each(t,function(t,n){if($Ps[n]){var s=options[n],o=state[n],l=$Ps[n],r=($Rs[n],!0),a={},h=$.layout.showInvisibly(l),d=calcNewCenterPaneDims();if($.extend(o,elDims(l)),"center"===n){if(!i&&o.isVisible&&d.width===o.outerWidth&&d.height===o.outerHeight)return l.css(h),!0;if($.extend(o,cssMinDims(n),{maxWidth:d.width,maxHeight:d.height}),a=d,o.newWidth=a.width,o.newHeight=a.height,a.width=cssW(l,a.width),a.height=cssH(l,a.height),r=a.width>=0&&a.height>=0,!state.initialized&&s.minWidth>d.width){var c=s.minWidth-o.outerWidth,u=options.east.minSize||0,f=options.west.minSize||0,p=state.east.size,m=state.west.size,g=p,_=m;if(c>0&&state.east.isVisible&&p>u&&(c-=p-(g=max(p-u,p-c))),c>0&&state.west.isVisible&&m>f&&(c-=m-(_=max(m-f,m-c))),0===c)return p&&p!=u&&sizePane("east",g,!0,!0,i),m&&m!=f&&sizePane("west",_,!0,!0,i),sizeMidPanes("center",e,i),void l.css(h)}}else{if(o.isVisible&&!o.noVerticalRoom&&$.extend(o,elDims(l),cssMinDims(n)),!i&&!o.noVerticalRoom&&d.height===o.outerHeight)return l.css(h),!0;a.top=d.top,a.bottom=d.bottom,o.newSize=d.height,a.height=cssH(l,d.height),o.maxHeight=a.height,(r=o.maxHeight>=0)||(o.noVerticalRoom=!0)}if(r?(!e&&state.initialized&&_runCallbacks("onresize_start",n),l.css(a),"center"!==n&&sizeHandles(n),!o.noRoom||o.isClosed||o.isHidden||makePaneFit(n),o.isVisible&&($.extend(o,elDims(l)),state.initialized&&sizeContent(n))):!o.noRoom&&o.isVisible&&makePaneFit(n),l.css(h),delete o.newSize,delete o.newWidth,delete o.newHeight,!o.isVisible)return!0;if("center"===n){var v=browser.isIE6||!browser.boxModel;$Ps.north&&(v||"IFRAME"==state.north.tagName)&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(v||"IFRAME"==state.south.tagName)&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!e&&state.initialized&&_runCallbacks("onresize_end",n)}})},resizeAll=function(t){var e=sC.innerWidth,i=sC.innerHeight;if(evtPane(t),$N.is(":visible"))if(state.initialized){if(!0===t&&$.isPlainObject(options.outset)&&$N.css(options.outset),$.extend(sC,elDims($N,options.inset)),sC.outerHeight){if(!0===t&&setPanePosition(),!1===_runCallbacks("onresizeall_start"))return!1;var n,s;sC.innerHeight,sC.innerWidth;$.each(["south","north","east","west"],function(t,e){$Ps[e]&&(n=options[e],(s=state[e]).autoResize&&s.size!=n.size?sizePane(e,n.size,!0,!0,!0):(setSizeLimits(e),makePaneFit(e,!1,!0,!0)))}),sizeMidPanes("",!0,!0),sizeHandles(),$.each(_c.allPanes,function(t,e){$Ps[e]&&state[e].isVisible&&_runCallbacks("onresize_end",e)}),_runCallbacks("onresizeall_end")}}else _initLayoutElements()},resizeChildren=function(t,e){var i=evtPane.call(this,t);if(options[i].resizeChildren){e||refreshChildren(i);var n=children[i];$.isPlainObject(n)&&$.each(n,function(t,e){e.destroyed||e.resizeAll()})}},sizeContent=function(t,e){if(isInitialized()){var i=evtPane.call(this,t);i=i?i.split(","):_c.allPanes,$.each(i,function(t,i){var n=$Ps[i],s=$Cs[i],o=options[i],l=state[i],r=l.content;if(!n||!s||!n.is(":visible"))return!0;if((s.length||(initContent(i,!1),s))&&!1!==_runCallbacks("onsizecontent_start",i)){(!l.isMoving&&!l.isResizing||o.liveContentResizing||e||void 0==r.top)&&(d(),r.hiddenFooters>0&&"hidden"===n.css("overflow")&&(n.css("overflow","visible"),d(),n.css("overflow","hidden")));var a=l.innerHeight-(r.spaceAbove-l.css.paddingTop)-(r.spaceBelow-l.css.paddingBottom);s.is(":visible")&&r.height==a||(setOuterHeight(s,a,!0),r.height=a),state.initialized&&_runCallbacks("onsizecontent_end",i)}function h(t){return max(l.css.paddingBottom,parseInt(t.css("marginBottom"),10)||0)}function d(){var t=options[i].contentIgnoreSelector,e=s.nextAll().not(".ui-layout-mask").not(t||":lt(0)"),n=e.filter(":visible"),o=n.filter(":last");(r={top:s[0].offsetTop,height:s.outerHeight(),numFooters:e.length,hiddenFooters:e.length-n.length,spaceBelow:0}).spaceAbove=r.top,r.bottom=r.top+r.height,o.length?r.spaceBelow=o[0].offsetTop+o.outerHeight()-r.bottom+h(o):r.spaceBelow=h(s)}})}},sizeHandles=function(t){var e=evtPane.call(this,t);e=e?e.split(","):_c.borderPanes,$.each(e,function(t,e){var i,n=options[e],s=state[e],o=$Ps[e],l=$Rs[e],r=$Ts[e];if(o&&l){var a,h,d,c=_c[e].dir,u=s.isClosed?"_closed":"_open",f=n["spacing"+u],p=n["togglerAlign"+u],m=n["togglerLength"+u];if(0!==f){if(s.noRoom||s.isHidden||l.show(),"horz"===c?(a=sC.innerWidth,s.resizerLength=a,h=$.layout.cssNum(o,"left"),l.css({width:cssW(l,a),height:cssH(l,f),left:h>-9999?h:sC.inset.left})):(a=o.outerHeight(),s.resizerLength=a,l.css({height:cssH(l,a),width:cssW(l,f),top:sC.inset.top+getPaneSize("north",!0)})),removeHover(n,l),r){if(0===m||s.isSliding&&n.hideTogglerOnSlide)return void r.hide();if(r.show(),!(m>0)||"100%"===m||m>a)m=a,d=0;else if(isStr(p))switch(p){case"top":case"left":d=0;break;case"bottom":case"right":d=a-m;break;case"middle":case"center":default:d=round((a-m)/2)}else{var g=parseInt(p,10);d=p>=0?g:a-m+g}if("horz"===c){var _=cssW(r,m);r.css({width:_,height:cssH(r,f),left:d,top:0}),r.children(".content").each(function(){(i=$(this)).css("marginLeft",round((_-i.outerWidth())/2))})}else{var v=cssH(r,m);r.css({height:v,width:cssW(r,f),top:d,left:0}),r.children(".content").each(function(){(i=$(this)).css("marginTop",round((v-i.outerHeight())/2))})}removeHover(0,r)}state.initialized||!n.initHidden&&!s.isHidden||(l.hide(),r&&r.hide())}else l.hide()}})},enableClosable=function(t){if(isInitialized()){var e=evtPane.call(this,t),i=$Ts[e],n=options[e];i&&(n.closable=!0,i.bind("click."+sID,function(t){t.stopPropagation(),toggle(e)}).css("visibility","visible").css("cursor","pointer").attr("title",state[e].isClosed?n.tips.Open:n.tips.Close).show())}},disableClosable=function(t,e){if(isInitialized()){var i=evtPane.call(this,t),n=$Ts[i];n&&(options[i].closable=!1,state[i].isClosed&&open(i,!1,!0),n.unbind("."+sID).css("visibility",e?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable=function(t){if(isInitialized()){var e=evtPane.call(this,t),i=$Rs[e];i&&i.data("draggable")&&(options[e].slidable=!0,state[e].isClosed&&bindStartSlidingEvents(e,!0))}},disableSlidable=function(t){if(isInitialized()){var e=evtPane.call(this,t),i=$Rs[e];i&&(options[e].slidable=!1,state[e].isSliding?close(e,!1,!0):(bindStartSlidingEvents(e,!1),i.css("cursor","default").attr("title",""),removeHover(null,i[0])))}},enableResizable=function(t){if(isInitialized()){var e=evtPane.call(this,t),i=$Rs[e],n=options[e];i&&i.data("draggable")&&(n.resizable=!0,i.draggable("enable"),state[e].isClosed||i.css("cursor",n.resizerCursor).attr("title",n.tips.Resize))}},disableResizable=function(t){if(isInitialized()){var e=evtPane.call(this,t),i=$Rs[e];i&&i.data("draggable")&&(options[e].resizable=!1,i.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,i[0]))}},swapPanes=function(t,e){if(isInitialized()){var i=evtPane.call(this,t);if(state[i].edge=e,state[e].edge=i,!1===_runCallbacks("onswap_start",i)||!1===_runCallbacks("onswap_start",e))return state[i].edge=i,void(state[e].edge=e);var n=l(i),s=l(e),o={};return o[i]=n?n.state.size:0,o[e]=s?s.state.size:0,$Ps[i]=!1,$Ps[e]=!1,state[i]={},state[e]={},$Ts[i]&&$Ts[i].remove(),$Ts[e]&&$Ts[e].remove(),$Rs[i]&&$Rs[i].remove(),$Rs[e]&&$Rs[e].remove(),$Rs[i]=$Rs[e]=$Ts[i]=$Ts[e]=!1,r(n,e),r(s,i),n=s=o=null,$Ps[i]&&$Ps[i].css(_c.visible),$Ps[e]&&$Ps[e].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",i),void _runCallbacks("onswap_end",e)}function l(t){var e=$Ps[t],i=$Cs[t];return!!e&&{pane:t,P:!!e&&e[0],C:!!i&&i[0],state:$.extend(!0,{},state[t]),options:$.extend(!0,{},options[t])}}function r(t,e){if(t){var i,n,s=t.P,l=t.C,r=t.pane,a=_c[e],h=$.extend(!0,{},state[e]),d=options[e],c={resizerCursor:d.resizerCursor};$.each("fxName,fxSpeed,fxSettings".split(","),function(t,e){c[e+"_open"]=d[e+"_open"],c[e+"_close"]=d[e+"_close"],c[e+"_size"]=d[e+"_size"]}),$Ps[e]=$(s).data({layoutPane:Instance[e],layoutEdge:e}).css(_c.hidden).css(a.cssReq),$Cs[e]=!!l&&$(l),options[e]=$.extend(!0,{},t.options,c),state[e]=$.extend(!0,{},t.state),i=new RegExp(d.paneClass+"-"+r,"g"),s.className=s.className.replace(i,d.paneClass+"-"+e),initHandles(e),a.dir!=_c[r].dir?(n=o[e]||0,setSizeLimits(e),n=max(n,state[e].minSize),manualSizePane(e,n,!0,!0)):$Rs[e].css(a.side,sC.inset[a.side]+(state[e].isVisible?getPaneSize(e):0)),t.state.isVisible&&!h.isVisible?setAsOpen(e,!0):(setAsClosed(e),bindStartSlidingEvents(e,!0)),t=null}}},syncPinBtns=function(t,e){$.layout.plugins.buttons&&$.each(state[t].pins,function(i,n){$.layout.buttons.setPinState(Instance,$(n),t,e)})};function keyDown(t){if(!t)return!0;var e=t.keyCode;if(e<33)return!0;var i,n,s,o,l={38:"north",40:"south",37:"west",39:"east"},r=(t.altKey,t.shiftKey),a=t.ctrlKey;return a&&e>=37&&e<=40&&options[l[e]].enableCursorHotkey?o=l[e]:(a||r)&&$.each(_c.borderPanes,function(t,l){if(i=options[l],n=i.customHotkey,s=i.customHotkeyModifier,(r&&"SHIFT"==s||a&&"CTRL"==s||a&&r)&&n&&e===(isNaN(n)||n<=9?n.toUpperCase().charCodeAt(0):n))return o=l,!1}),!(o&&$Ps[o]&&options[o].closable&&!state[o].isHidden)||(toggle(o),t.stopPropagation(),t.returnValue=!1,!1)}function allowOverflow(t){var e;if(isInitialized()&&(this&&this.tagName&&(t=this),isStr(t)?e=$Ps[t]:$(t).data("layoutRole")?e=$(t):$(t).parents().each(function(){if($(this).data("layoutRole"))return e=$(this),!1}),e&&e.length)){var i=e.data("layoutEdge"),n=state[i];if(n.cssSaved&&resetOverflow(i),n.isSliding||n.isResizing||n.isClosed)n.cssSaved=!1;else{var s={zIndex:options.zIndexes.resizer_normal+1},o={},l=e.css("overflow"),r=e.css("overflowX"),a=e.css("overflowY");"visible"!=l&&(o.overflow=l,s.overflow="visible"),r&&!r.match(/(visible|auto)/)&&(o.overflowX=r,s.overflowX="visible"),a&&!a.match(/(visible|auto)/)&&(o.overflowY=r,s.overflowY="visible"),n.cssSaved=o,e.css(s),$.each(_c.allPanes,function(t,e){e!=i&&resetOverflow(e)})}}}function resetOverflow(t){var e;if(isInitialized()&&(this&&this.tagName&&(t=this),isStr(t)?e=$Ps[t]:$(t).data("layoutRole")?e=$(t):$(t).parents().each(function(){if($(this).data("layoutRole"))return e=$(this),!1}),e&&e.length)){var i=e.data("layoutEdge"),n=state[i],s=n.cssSaved||{};n.isSliding||n.isResizing||e.css("zIndex",options.zIndexes.pane_normal),e.css(s),n.cssSaved=!1}}var $N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===_create()?null:Instance}}(jQuery),function(t){t.layout&&(t.ui||(t.ui={}),t.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){var i,n,s,o=document.cookie,l=o?o.split(";"):[];for(s=0;i=l[s];s++)if((n=t.trim(i).split("="))[0]==e)return decodeURIComponent(n[1]);return null},write:function(e,i,n){var s="",o="",l=!1,r=n||{},a=r.expires||null,h=t.type(a);"date"===h?o=a:"string"===h&&a>0&&(a=parseInt(a,10),h="number"),"number"===h&&(o=new Date,a>0?o.setDate(o.getDate()+a):(o.setFullYear(1970),l=!0)),o&&(s+=";expires="+o.toUTCString()),r.path&&(s+=";path="+r.path),r.domain&&(s+=";domain="+r.domain),r.secure&&(s+=";secure"),document.cookie=e+"="+(l?"":encodeURIComponent(i))+s},clear:function(e){t.ui.cookie.write(e,"",{expires:-1})}},t.cookie||(t.cookie=function(e,i,n){var s=t.ui.cookie;if(null===i)s.clear(e);else{if(void 0===i)return s.read(e);s.write(e,i,n)}}),t.layout.plugins.stateManagement=!0,t.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},t.layout.optionsMap.layout.push("stateManagement"),t.layout.config.optionRootKeys.push("stateManagement"),t.layout.state={saveCookie:function(e,i,n){var s=e.options,o=s.stateManagement,l=t.extend(!0,{},o.cookie,n||null),r=e.state.stateData=e.readState(i||o.stateKeys);return t.ui.cookie.write(l.name||s.name||"Layout",t.layout.state.encodeJSON(r),l),t.extend(!0,{},r)},deleteCookie:function(e){var i=e.options;t.ui.cookie.clear(i.stateManagement.cookie.name||i.name||"Layout")},readCookie:function(e){var i=e.options,n=t.ui.cookie.read(i.stateManagement.cookie.name||i.name||"Layout");return n?t.layout.state.decodeJSON(n):{}},loadCookie:function(e){var i=t.layout.state.readCookie(e);return i&&!t.isEmptyObject(i)&&(e.state.stateData=t.extend(!0,{},i),e.loadState(i)),i},loadState:function(e,i,n){if(t.isPlainObject(i)&&!t.isEmptyObject(i)){i=e.state.stateData=t.layout.transformData(i);var o=e.options.stateManagement;if(n=t.extend({animateLoad:!1,includeChildren:o.includeChildren},n),e.state.initialized){var l,r,a,h,d,c,u=!n.animateLoad;if(t.each(t.layout.config.borderPanes,function(n,o){f=i[o],t.isPlainObject(f)&&(s=f.size,l=f.initClosed,r=f.initHidden,ar=f.autoResize,a=e.state[o],h=a.isVisible,ar&&(a.autoResize=ar),h||e._sizePane(o,s,!1,!1,!1),!0===r?e.hide(o,u):!0===l?e.close(o,!1,u):!1===l?e.open(o,!1,u):!1===r&&e.show(o,!1,u),h&&e._sizePane(o,s,!1,!1,u))}),n.includeChildren)t.each(e.children,function(e,n){(d=i[e]?i[e].children:0)&&n&&t.each(n,function(t,e){c=d[t],e&&c&&e.loadState(c)})})}else{var f=t.extend(!0,{},i);t.each(t.layout.config.allPanes,function(t,e){f[e]&&delete f[e].children}),t.extend(!0,e.options,f)}}},readState:function(e,i){"string"===t.type(i)&&(i={keys:i}),i||(i={});var n,s,o,l,r,a,h,d=e.options.stateManagement,c=i.includeChildren,u=void 0!==c?c:d.includeChildren,f=i.stateKeys||d.stateKeys,p={isClosed:"initClosed",isHidden:"initHidden"},m=e.state,g=t.layout.config.allPanes,_={};t.isArray(f)&&(f=f.join(","));for(var v=0,b=(f=f.replace(/__/g,".").split(",")).length;v<b;v++)s=(n=f[v].split("."))[0],o=n[1],t.inArray(s,g)<0||void 0!=(l=m[s][o])&&("isClosed"==o&&m[s].isSliding&&(l=!0),(_[s]||(_[s]={}))[p[o]?p[o]:o]=l);return u&&t.each(g,function(i,n){a=e.children[n],r=m.stateData[n],t.isPlainObject(a)&&!t.isEmptyObject(a)&&((h=_[n]||(_[n]={})).children||(h.children={}),t.each(a,function(e,i){i.state.initialized?h.children[e]=t.layout.state.readState(i):r&&r.children&&r.children[e]&&(h.children[e]=t.extend(!0,{},r.children[e]))}))}),_},encodeJSON:function(e){return((window.JSON||{}).stringify||function(e){var i,n,s,o=[],l=0,r=t.isArray(e);for(i in e)n=e[i],"string"==(s=typeof n)?n='"'+n+'"':"object"==s&&(n=parse(n)),o[l++]=(r?"":'"'+i+'":')+n;return(r?"[":"{")+o.join(",")+(r?"]":"}")})(e)},decodeJSON:function(e){try{return t.parseJSON?t.parseJSON(e):window.eval("("+e+")")||{}}catch(t){return{}}},_create:function(e){var i=t.layout.state,n=e.options.stateManagement;if(t.extend(e,{readCookie:function(){return i.readCookie(e)},deleteCookie:function(){i.deleteCookie(e)},saveCookie:function(t,n){return i.saveCookie(e,t,n)},loadCookie:function(){return i.loadCookie(e)},loadState:function(t,n){i.loadState(e,t,n)},readState:function(t){return i.readState(e,t)},encodeJSON:i.encodeJSON,decodeJSON:i.decodeJSON}),e.state.stateData={},n.autoLoad)if(t.isPlainObject(n.autoLoad))t.isEmptyObject(n.autoLoad)||e.loadState(n.autoLoad);else if(n.enabled)if(t.isFunction(n.autoLoad)){var s={};try{s=n.autoLoad(e,e.state,e.options,e.options.name||"")}catch(t){}s&&t.isPlainObject(s)&&!t.isEmptyObject(s)&&e.loadState(s)}else e.loadCookie()},_unload:function(e){var i=e.options.stateManagement;if(i.enabled&&i.autoSave)if(t.isFunction(i.autoSave))try{i.autoSave(e,e.state,e.options,e.options.name||"")}catch(t){}else e.saveCookie()}},t.layout.onCreate.push(t.layout.state._create),t.layout.onUnload.push(t.layout.state._unload))}(jQuery),function(t){t.layout&&(t.layout.plugins.buttons=!0,t.layout.defaults.autoBindCustomButtons=!1,t.layout.optionsMap.layout.push("autoBindCustomButtons"),t.layout.buttons={config:{borderPanes:"north,south,west,east"},init:function(e){var i,n=e.options.name||"";t.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(s,o){t.each(t.layout.buttons.config.borderPanes.split(","),function(s,l){t(".ui-layout-button-"+o+"-"+l).each(function(){void 0!=(i=t(this).data("layoutName")||t(this).attr("layoutName"))&&i!==n||e.bindButton(this,o,l)})})})},get:function(e,i,n,s){var o=t(i),l=e.options;if(o.length&&t.layout.buttons.config.borderPanes.indexOf(n)>=0){var r=l[n].buttonClass+"-"+s;o.addClass(r+" "+r+"-"+n).data("layoutName",l.name)}return o},bind:function(e,i,n,s){var o=t.layout.buttons;switch(n.toLowerCase()){case"toggle":o.addToggle(e,i,s);break;case"open":o.addOpen(e,i,s);break;case"close":o.addClose(e,i,s);break;case"pin":o.addPin(e,i,s);break;case"toggle-slide":o.addToggle(e,i,s,!0);break;case"open-slide":o.addOpen(e,i,s,!0)}return e},addToggle:function(e,i,n,s){return t.layout.buttons.get(e,i,n,"toggle").click(function(t){e.toggle(n,!!s),t.stopPropagation()}),e},addOpen:function(e,i,n,s){return t.layout.buttons.get(e,i,n,"open").attr("title",e.options[n].tips.Open).click(function(t){e.open(n,!!s),t.stopPropagation()}),e},addClose:function(e,i,n){return t.layout.buttons.get(e,i,n,"close").attr("title",e.options[n].tips.Close).click(function(t){e.close(n),t.stopPropagation()}),e},addPin:function(e,i,n){var s=t.layout.buttons.get(e,i,n,"pin");if(s.length){var o=e.state[n];s.click(function(i){t.layout.buttons.setPinState(e,t(this),n,o.isSliding||o.isClosed),o.isSliding||o.isClosed?e.open(n):e.close(n),i.stopPropagation()}),t.layout.buttons.setPinState(e,s,n,!o.isClosed&&!o.isSliding),o.pins.push(i)}return e},setPinState:function(t,e,i,n){var s=e.attr("pin");if(!s||n!==("down"==s)){var o=t.options[i],l=o.tips,r=o.buttonClass+"-pin",a=r+"-"+i,h=r+"-up "+a+"-up",d=r+"-down "+a+"-down";e.attr("pin",n?"down":"up").attr("title",n?l.Unpin:l.Pin).removeClass(n?h:d).addClass(n?d:h)}},syncPinBtns:function(e,i,n){t.each(state[i].pins,function(s,o){t.layout.buttons.setPinState(e,t(o),i,n)})},_load:function(e){t.extend(e,{bindButton:function(i,n,s){return t.layout.buttons.bind(e,i,n,s)},addToggleBtn:function(i,n,s){return t.layout.buttons.addToggle(e,i,n,s)},addOpenBtn:function(i,n,s){return t.layout.buttons.addOpen(e,i,n,s)},addCloseBtn:function(i,n){return t.layout.buttons.addClose(e,i,n)},addPinBtn:function(i,n){return t.layout.buttons.addPin(e,i,n)}});for(var i=0;i<4;i++){var n=t.layout.buttons.config.borderPanes[i];e.state[n].pins=[]}e.options.autoBindCustomButtons&&t.layout.buttons.init(e)},_unload:function(t){}},t.layout.onLoad.push(t.layout.buttons._load))}(jQuery),function(t){t.layout.plugins.browserZoom=!0,t.layout.defaults.browserZoomCheckInterval=1e3,t.layout.optionsMap.layout.push("browserZoomCheckInterval"),t.layout.browserZoom={_init:function(e){!1!==t.layout.browserZoom.ratio()&&t.layout.browserZoom._setTimer(e)},_setTimer:function(e){if(!e.destroyed){var i=e.options,n=e.state,s=e.hasParentLayout?5e3:Math.max(i.browserZoomCheckInterval,100);setTimeout(function(){if(!e.destroyed&&i.resizeWithWindow){var s=t.layout.browserZoom.ratio();s!==n.browserZoom&&(n.browserZoom=s,e.resizeAll()),t.layout.browserZoom._setTimer(e)}},s)}},ratio:function(){var e,i,n,s=window,o=screen,l=document,r=l.documentElement||l.body,a=t.layout.browser,h=a.version;return!(!a.msie||h>8)&&(o.deviceXDPI&&o.systemXDPI?d(o.deviceXDPI,o.systemXDPI):a.webkit&&(e=l.body.getBoundingClientRect)?d(e.left-e.right,l.body.offsetWidth):a.webkit&&(i=s.outerWidth)?d(i,s.innerWidth):!(!(i=o.width)||!(n=r.clientWidth))&&d(i,n));function d(t,e){return(parseInt(t,10)/parseInt(e,10)*100).toFixed()}}},t.layout.onReady.push(t.layout.browserZoom._init)}(jQuery),function(t){t.effects&&(t.layout.defaults.panes.useOffscreenClose=!1,t.layout.plugins&&(t.layout.plugins.effects.slideOffscreen=!0),t.layout.effects.slideOffscreen=t.extend(!0,{},t.layout.effects.slide),t.effects.slideOffscreen=function(e){return this.queue(function(){var i=t.effects,n=e.options,s=t(this),o=s.data("layoutEdge"),l=s.data("parentLayout").state,r=l[o].size,a=this.style,h="show"==i.setMode(s,n.mode||"show"),d=n.direction||"left",c="up"==d||"down"==d?"top":"left",u="up"==d||"left"==d,f=t.layout.config.offscreenCSS||{},p=t.layout.config.offscreenReset,m="offscreenResetTop",g={};g[c]=(h?u?"+=":"-=":u?"-=":"+=")+r,h?(s.data(m,{top:a.top,bottom:a.bottom}),u?s.css(c,isNaN(r)?"-"+r:-r):"right"===d?s.css({left:l.container.layoutWidth,right:"auto"}):s.css({top:l.container.layoutHeight,bottom:"auto"}),"top"===c&&s.css(s.data(p)||{})):(s.data(m,{top:a.top,bottom:a.bottom}),s.data(p,{left:a.left,right:a.right})),s.show().animate(g,{queue:!1,duration:e.duration,easing:n.easing,complete:function(){s.data(m)&&s.css(s.data(m)).removeData(m),h?s.css(s.data(p)||{}).removeData(p):s.css(f),e.callback&&e.callback.apply(this,arguments),s.dequeue()}})})})}(jQuery),function(){var rsplit=function(t,e){for(var i,n=e.exec(t),s=new Array;null!=n;)i=n.index,e.lastIndex,0!=i&&(t.substring(0,i),s.push(t.substring(0,i)),t=t.slice(i)),s.push(n[0]),t=t.slice(n[0].length),n=e.exec(t);return""==!t&&s.push(t),s},chop=function(t){return t.substr(0,t.length-1)},extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};EJS=function(t){if(t="string"==typeof t?{view:t}:t,this.set_options(t),t.precompiled)return this.template={},this.template.process=t.precompiled,void EJS.update(this.name,this);if(t.element){if("string"==typeof t.element){var e=t.element;if(t.element=document.getElementById(t.element),null==t.element)throw e+"does not exist!"}t.element.value?this.text=t.element.value:this.text=t.element.innerHTML,this.name=t.element.id,this.type="["}else if(t.url){t.url=EJS.endExt(t.url,this.extMatch),this.name=this.name?this.name:t.url;var i=t.url;if(n=EJS.get(this.name,this.cache))return n;if(n==EJS.INVALID_PATH)return null;try{this.text=EJS.request(i+(this.cache?"":"?"+Math.random()))}catch(t){}if(null==this.text)throw{type:"EJS",message:"There is no template at "+i}}var n;(n=new EJS.Compiler(this.text,this.type)).compile(t,this.name),EJS.update(this.name,this),this.template=n},EJS.prototype={render:function(t,e){t=t||{},this._extra_helpers=e;var i=new EJS.Helpers(t,e||{});return this.template.process.call(t,t,i)},update:function(element,options){if("string"==typeof element&&(element=document.getElementById(element)),null==options)return _template=this,function(t){EJS.prototype.update.call(_template,element,t)};"string"==typeof options?(params={},params.url=options,_template=this,params.onComplete=function(request){var object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)},EJS.ajax_request(params)):element.innerHTML=this.render(options)},out:function(){return this.template.out},set_options:function(t){this.type=t.type||EJS.type,this.cache=null!=t.cache?t.cache:EJS.cache,this.text=t.text||null,this.name=t.name||null,this.ext=t.ext||EJS.ext,this.extMatch=new RegExp(this.ext.replace(/\./,"."))}},EJS.endExt=function(t,e){return t?(e.lastIndex=0,t+(e.test(t)?"":this.ext)):null},EJS.Scanner=function(t,e,i){extend(this,{left_delimiter:e+"%",right_delimiter:"%"+i,double_left:e+"%%",double_right:"%%"+i,left_equal:e+"%=",left_comment:e+"%#"}),this.SplitRegexp="["==e?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)"),this.source=t,this.stag=null,this.lines=0},EJS.Scanner.to_text=function(t){return null==t||void 0===t?"":t instanceof Date?t.toDateString():t.toString?t.toString():""},EJS.Scanner.prototype={scan:function(t){if(scanline=this.scanline,regex=this.SplitRegexp,""==!this.source)for(var e=rsplit(this.source,/\n/),i=0;i<e.length;i++){var n=e[i];this.scanline(n,regex,t)}},scanline:function(t,e,i){this.lines++;for(var n=rsplit(t,e),s=0;s<n.length;s++){var o=n[s];if(null!=o)try{i(o,this)}catch(t){throw{type:"EJS.Scanner",line:this.lines}}}}},EJS.Buffer=function(t,e){this.line=new Array,this.script="",this.pre_cmd=t,this.post_cmd=e;for(var i=0;i<this.pre_cmd.length;i++)this.push(t[i])},EJS.Buffer.prototype={push:function(t){this.line.push(t)},cr:function(){this.script=this.script+this.line.join("; "),this.line=new Array,this.script=this.script+"\n"},close:function(){if(this.line.length>0){for(var t=0;t<this.post_cmd.length;t++)this.push(pre_cmd[t]);this.script=this.script+this.line.join("; "),line=null}}},EJS.Compiler=function(t,e){this.pre_cmd=["var ___ViewO = [];"],this.post_cmd=new Array,this.source=" ",null!=t&&("string"==typeof t?(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),this.source=t):t.innerHTML&&(this.source=t.innerHTML),"string"!=typeof this.source&&(this.source=""));var i=">";switch(e=e||"<"){case"[":i="]";break;case"<":break;default:throw e+" is not a supported deliminator"}this.scanner=new EJS.Scanner(this.source,e,i),this.out=""},EJS.Compiler.prototype={compile:function(options,name){options=options||{},this.out="";var put_cmd="___ViewO.push(",insert_cmd=put_cmd,buff=new EJS.Buffer(this.pre_cmd,this.post_cmd),content="",clean=function(t){return t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/"/g,'\\"')};this.scanner.scan(function(t,e){if(null==e.stag)switch(t){case"\n":content+="\n",buff.push(put_cmd+'"'+clean(content)+'");'),buff.cr(),content="";break;case e.left_delimiter:case e.left_equal:case e.left_comment:e.stag=t,content.length>0&&buff.push(put_cmd+'"'+clean(content)+'")'),content="";break;case e.double_left:content+=e.left_delimiter;break;default:content+=t}else switch(t){case e.right_delimiter:switch(e.stag){case e.left_delimiter:"\n"==content[content.length-1]?(content=chop(content),buff.push(content),buff.cr()):buff.push(content);break;case e.left_equal:buff.push(insert_cmd+"(EJS.Scanner.to_text("+content+")))")}e.stag=null,content="";break;case e.double_right:content+=e.right_delimiter;break;default:content+=t}}),content.length>0&&buff.push(put_cmd+'"'+clean(content)+'")'),buff.close(),this.out=buff.script+";";var to_be_evaled="/*"+name+"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(to_be_evaled)}catch(e){if("undefined"==typeof JSLINT)throw e;JSLINT(this.out);for(var i=0;i<JSLINT.errors.length;i++){var error=JSLINT.errors[i];if("Unnecessary semicolon."!=error.reason){error.line++;var e=new Error;throw e.lineNumber=error.line,e.message=error.reason,options.view&&(e.fileName=options.view),e}}}}},EJS.config=function(t){EJS.cache=null!=t.cache?t.cache:EJS.cache,EJS.type=null!=t.type?t.type:EJS.type,EJS.ext=null!=t.ext?t.ext:EJS.ext;var e=EJS.templates_directory||{};EJS.templates_directory=e,EJS.get=function(t,i){return 0==i?null:e[t]?e[t]:null},EJS.update=function(t,i){null!=t&&(e[t]=i)},EJS.INVALID_PATH=-1},EJS.config({cache:!0,type:"<",ext:".ejs"}),EJS.Helpers=function(t,e){this._data=t,this._extras=e,extend(this,e)},EJS.Helpers.prototype={view:function(t,e,i){return i||(i=this._extras),e||(e=this._data),new EJS(t).render(e,i)},to_text:function(t,e){return null==t||void 0===t?e||"":t instanceof Date?t.toDateString():t.toString?t.toString().replace(/\n/g,"<br />").replace(/''/g,"'"):""}},EJS.newRequest=function(){for(var t=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=0;e<t.length;e++)try{var i=t[e]();if(null!=i)return i}catch(t){continue}},EJS.request=function(t){var e=new EJS.newRequest;e.open("GET",t,!1);try{e.send(null)}catch(t){return null}return 404==e.status||2==e.status||0==e.status&&""==e.responseText?null:e.responseText},EJS.ajax_request=function(t){t.method=t.method?t.method:"GET";var e=new EJS.newRequest;e.onreadystatechange=function(){4==e.readyState&&(e.status,t.onComplete(e))},e.open(t.method,t.url),e.send(null)}}(),EJS.Helpers.prototype.date_tag=function(t,e,i){e instanceof Date||(e=new Date);for(var n=["January","February","March","April","May","June","July","August","September","October","November","December"],s=[],o=[],l=[],r=e.getFullYear(),a=e.getMonth(),h=e.getDate(),d=r-15;d<r+15;d++)s.push({value:d,text:d});for(var c=0;c<12;c++)o.push({value:c,text:n[c]});for(var u=0;u<31;u++)l.push({value:u+1,text:u+1});return this.select_tag(t+"[year]",r,s,{id:t+"[year]"})+this.select_tag(t+"[month]",a,o,{id:t+"[month]"})+this.select_tag(t+"[day]",h,l,{id:t+"[day]"})},EJS.Helpers.prototype.form_tag=function(t,e){return(e=e||{}).action=t,1==e.multipart&&(e.method="post",e.enctype="multipart/form-data"),this.start_tag_for("form",e)},EJS.Helpers.prototype.form_tag_end=function(){return this.tag_end("form")},EJS.Helpers.prototype.hidden_field_tag=function(t,e,i){return this.input_field_tag(t,e,"hidden",i)},EJS.Helpers.prototype.input_field_tag=function(t,e,i,n){return(n=n||{}).id=n.id||t,n.value=e||"",n.type=i||"text",n.name=t,this.single_tag_for("input",n)},EJS.Helpers.prototype.is_current_page=function(t){return window.location.href==t||window.location.pathname==t},EJS.Helpers.prototype.link_to=function(t,e,i){if(!t)t="null";if(!i)i={};return i.confirm&&(i.onclick=' var ret_confirm = confirm("'+i.confirm+'"); if(!ret_confirm){ return false;} ',i.confirm=null),i.href=e,this.start_tag_for("a",i)+t+this.tag_end("a")},EJS.Helpers.prototype.submit_link_to=function(t,e,i){if(!t)t="null";if(!i)i={};return i.onclick=i.onclick||"",i.confirm&&(i.onclick=' var ret_confirm = confirm("'+i.confirm+'"); if(!ret_confirm){ return false;} ',i.confirm=null),i.value=t,i.type="submit",i.onclick=i.onclick+(e?this.url_for(e):"")+"return false;",this.start_tag_for("input",i)},EJS.Helpers.prototype.link_to_if=function(t,e,i,n,s,o){return this.link_to_unless(0==t,e,i,n,s,o)},EJS.Helpers.prototype.link_to_unless=function(t,e,i,n,s){return n=n||{},t?s&&"function"==typeof s?s(e,i,n,s):e:this.link_to(e,i,n)},EJS.Helpers.prototype.link_to_unless_current=function(t,e,i,n){return i=i||{},this.link_to_unless(this.is_current_page(e),t,e,i,n)},EJS.Helpers.prototype.password_field_tag=function(t,e,i){return this.input_field_tag(t,e,"password",i)},EJS.Helpers.prototype.select_tag=function(t,e,i,n){(n=n||{}).id=n.id||t,n.value=e,n.name=t;var s="";s+=this.start_tag_for("select",n);for(var o=0;o<i.length;o++){var l=i[o],r={value:l.value};l.value==e&&(r.selected="selected"),s+=this.start_tag_for("option",r)+l.text+this.tag_end("option")}return s+=this.tag_end("select")},EJS.Helpers.prototype.single_tag_for=function(t,e){return this.tag(t,e,"/>")},EJS.Helpers.prototype.start_tag_for=function(t,e){return this.tag(t,e)},EJS.Helpers.prototype.submit_tag=function(t,e){return(e=e||{}).type=e.type||"submit",e.value=t||"Submit",this.single_tag_for("input",e)},EJS.Helpers.prototype.tag=function(t,e,i){if(!i)i=">";var n=" ";for(var s in e){if(null!=e[s])var o=e[s].toString();else o="";"Class"==s&&(s="class"),-1!=o.indexOf("'")?n+=s+'="'+o+'" ':n+=s+"='"+o+"' "}return"<"+t+n+i},EJS.Helpers.prototype.tag_end=function(t){return"</"+t+">"},EJS.Helpers.prototype.text_area_tag=function(t,e,i){return(i=i||{}).id=i.id||t,i.name=i.name||t,e=e||"",i.size&&(i.cols=i.size.split("x")[0],i.rows=i.size.split("x")[1],delete i.size),i.cols=i.cols||50,i.rows=i.rows||4,this.start_tag_for("textarea",i)+e+this.tag_end("textarea")},EJS.Helpers.prototype.text_tag=EJS.Helpers.prototype.text_area_tag,EJS.Helpers.prototype.text_field_tag=function(t,e,i){return this.input_field_tag(t,e,"text",i)},EJS.Helpers.prototype.url_for=function(t){return'window.location="'+t+'";'},EJS.Helpers.prototype.img_tag=function(t,e,i){return(i=i||{}).src=t,i.alt=e,this.single_tag_for("img",i)},EJS.Helpers.prototype.date_tag=function(t,e,i){e instanceof Date||(e=new Date);for(var n=["January","February","March","April","May","June","July","August","September","October","November","December"],s=[],o=[],l=[],r=e.getFullYear(),a=e.getMonth(),h=e.getDate(),d=r-15;d<r+15;d++)s.push({value:d,text:d});for(var c=0;c<12;c++)o.push({value:c,text:n[c]});for(var u=0;u<31;u++)l.push({value:u+1,text:u+1});return this.select_tag(t+"[year]",r,s,{id:t+"[year]"})+this.select_tag(t+"[month]",a,o,{id:t+"[month]"})+this.select_tag(t+"[day]",h,l,{id:t+"[day]"})},EJS.Helpers.prototype.form_tag=function(t,e){return(e=e||{}).action=t,1==e.multipart&&(e.method="post",e.enctype="multipart/form-data"),this.start_tag_for("form",e)},EJS.Helpers.prototype.form_tag_end=function(){return this.tag_end("form")},EJS.Helpers.prototype.hidden_field_tag=function(t,e,i){return this.input_field_tag(t,e,"hidden",i)},EJS.Helpers.prototype.input_field_tag=function(t,e,i,n){return(n=n||{}).id=n.id||t,n.value=e||"",n.type=i||"text",n.name=t,this.single_tag_for("input",n)},EJS.Helpers.prototype.is_current_page=function(t){return window.location.href==t||window.location.pathname==t},EJS.Helpers.prototype.link_to=function(t,e,i){if(!t)t="null";if(!i)i={};return i.confirm&&(i.onclick=' var ret_confirm = confirm("'+i.confirm+'"); if(!ret_confirm){ return false;} ',i.confirm=null),i.href=e,this.start_tag_for("a",i)+t+this.tag_end("a")},EJS.Helpers.prototype.submit_link_to=function(t,e,i){if(!t)t="null";if(!i)i={};return i.onclick=i.onclick||"",i.confirm&&(i.onclick=' var ret_confirm = confirm("'+i.confirm+'"); if(!ret_confirm){ return false;} ',i.confirm=null),i.value=t,i.type="submit",i.onclick=i.onclick+(e?this.url_for(e):"")+"return false;",this.start_tag_for("input",i)},EJS.Helpers.prototype.link_to_if=function(t,e,i,n,s,o){return this.link_to_unless(0==t,e,i,n,s,o)},EJS.Helpers.prototype.link_to_unless=function(t,e,i,n,s){return n=n||{},t?s&&"function"==typeof s?s(e,i,n,s):e:this.link_to(e,i,n)},EJS.Helpers.prototype.link_to_unless_current=function(t,e,i,n){return i=i||{},this.link_to_unless(this.is_current_page(e),t,e,i,n)},EJS.Helpers.prototype.password_field_tag=function(t,e,i){return this.input_field_tag(t,e,"password",i)},EJS.Helpers.prototype.select_tag=function(t,e,i,n){(n=n||{}).id=n.id||t,n.value=e,n.name=t;var s="";s+=this.start_tag_for("select",n);for(var o=0;o<i.length;o++){var l=i[o],r={value:l.value};l.value==e&&(r.selected="selected"),s+=this.start_tag_for("option",r)+l.text+this.tag_end("option")}return s+=this.tag_end("select")},EJS.Helpers.prototype.single_tag_for=function(t,e){return this.tag(t,e,"/>")},EJS.Helpers.prototype.start_tag_for=function(t,e){return this.tag(t,e)},EJS.Helpers.prototype.submit_tag=function(t,e){return(e=e||{}).type=e.type||"submit",e.value=t||"Submit",this.single_tag_for("input",e)},EJS.Helpers.prototype.tag=function(t,e,i){if(!i)i=">";var n=" ";for(var s in e){if(null!=e[s])var o=e[s].toString();else o="";"Class"==s&&(s="class"),-1!=o.indexOf("'")?n+=s+'="'+o+'" ':n+=s+"='"+o+"' "}return"<"+t+n+i},EJS.Helpers.prototype.tag_end=function(t){return"</"+t+">"},EJS.Helpers.prototype.text_area_tag=function(t,e,i){return(i=i||{}).id=i.id||t,i.name=i.name||t,e=e||"",i.size&&(i.cols=i.size.split("x")[0],i.rows=i.size.split("x")[1],delete i.size),i.cols=i.cols||50,i.rows=i.rows||4,this.start_tag_for("textarea",i)+e+this.tag_end("textarea")},EJS.Helpers.prototype.text_tag=EJS.Helpers.prototype.text_area_tag,EJS.Helpers.prototype.text_field_tag=function(t,e,i){return this.input_field_tag(t,e,"text",i)},EJS.Helpers.prototype.url_for=function(t){return'window.location="'+t+'";'},EJS.Helpers.prototype.img_tag=function(t,e,i){return(i=i||{}).src=t,i.alt=e,this.single_tag_for("img",i)},void 0===window.dhx4&&(window.dhx4={version:"4.5",skin:null,skinDetect:function(t){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(t+"_skin_detect")]||null},readFromCss:function(t,e){var i=document.createElement("DIV");i.className=t,null!=document.body.firstChild?document.body.insertBefore(i,document.body.firstChild):document.body.appendChild(i);var n=i[e||"offsetWidth"];return i.parentNode.removeChild(i),i=null,n},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return"string"==typeof t&&(t=t.toLowerCase()),1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t||"on"==t},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(t){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).top},_aOfs:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}},getOffset:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfs(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&void 0===t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var i in t)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i]}else for(e=[],i=0;i<t.length;i++)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,i){var n=(t="string"==typeof t?document.getElementById(t):t).value.length;if(e=Math.max(Math.min(e,n),0),i=Math.min(i,n),t.setSelectionRange)try{t.setSelectionRange(e,i)}catch(t){}else if(t.createTextRange){var s=t.createTextRange();s.moveStart("character",e),s.moveEnd("character",i-n);try{s.select()}catch(t){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData},_xmlNodeValue:function(t){for(var e="",i=0;i<t.childNodes.length;i++)e+=null!=t.childNodes[i].nodeValue?t.childNodes[i].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(t){return window.dhx4.isIE10&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==t.pointerType||window.dhx4.isEdge&&"mouse"==t.pointerType},_touchOn:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="",t=null},_touchOff:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="none",t=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:void 0!==window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),void 0===window.dhx4.template&&(window.dhx4.trim=function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(t,e,i){return t.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var t=arguments[1],n=window.dhx4.trim(arguments[3]),s=null,o=[e[t]];if(n.length>0){n=n.split(":");for(var l=[],r=0;r<n.length;r++)r>0&&null!=l[l.length-1].match(/\\$/)?l[l.length-1]=l[l.length-1].replace(/\\$/,"")+":"+n[r]:l.push(n[r]);s=l[0];for(r=1;r<l.length;r++)o.push(l[r])}return"string"==typeof s&&"function"==typeof window.dhx4.template[s]?window.dhx4.template[s].apply(window.dhx4.template,o):t.length>0&&void 0!==e[t]?1==i?window.dhx4.trim(e[t]):String(e[t]):""})},window.dhx4.template.date=function(t,e){return null!=t?t instanceof Date?window.dhx4.date2str(t,e):null!=(t=t.toString()).match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(t)),e):t:""},window.dhx4.template.maxlength=function(t,e){return String(t).substr(0,e)},window.dhx4.template.number_format=function(t,e,i,n){var s=window.dhx4.template._parseFmt(e,i,n);return 0==s?t:window.dhx4.template._getFmtValue(t,s)},window.dhx4.template.lowercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toLowerCase()},window.dhx4.template.uppercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toUpperCase()},window.dhx4.template._parseFmt=function(t,e,i){var n=t.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==n||4!=n.length)return!1;var s={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof i?i:".",s_bef:"string"==typeof n[1]?n[1]:"",s_aft:"string"==typeof n[3]?n[3]:""},o=n[2].split(".");null!=o[1]&&(s.d_len=o[1].length);var l=o[0].split(",");return l.length>1&&(s.i_len=l[l.length-1].length),s},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,!1!==fmt.i_len){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&q>0&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(!1!==fmt.d_len){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft,v0}return value}),void 0===window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(t,e,i){if(null!=e&&"undefnied"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&"undefnied"!=typeof i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]),t instanceof Date)var n=function(t){return 1==String(t).length?"0"+String(t):t},s=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return n(t.getDate());case"%j":return t.getDate();case"%D":return i.dayShortName[t.getDay()];case"%l":return i.dayFullName[t.getDay()];case"%m":return n(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return i.monthShortName[t.getMonth()];case"%F":return i.monthFullName[t.getMonth()];case"%y":return n(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return n((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return n(t.getHours());case"%i":return n(t.getMinutes());case"%s":return n(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return t.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var s=t.getTimezoneOffset(),o=Math.abs(Math.floor(s/60)),l=Math.abs(s)-60*o;return(s>0?"-":"+")+n(o)+":"+n(l);default:return e}});return s||String(t)},window.dhx4.str2date=function(t,e,i){null!=e&&"undefnied"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&"undefnied"!=typeof i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]);var n=[],s=[];e=(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&")).replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return s.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return s.push(t),"([a-z-]{1,})";case"%j":case"%n":case"%g":case"%G":return s.push(t),"(\\d{1,2})";case"%Y":return s.push(t),"(\\d{4})";case"%a":return s.push(t),"([a|p]m)";case"%A":return s.push(t),"([A|P]M)";case"%u":return s.push(t),"(\\d{1,6})";case"%P":return s.push(t),"([+-]\\d{1,2}:\\d{1,2})"}return t});var o=new RegExp(e,"i"),l=t.match(o);if(null==l||l.length-1!=s.length)return"Invalid Date";for(var r=1;r<l.length;r++)n.push(l[r]);var a={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},h={},d={};for(r=0;r<s.length;r++)if(void 0!==a[s[r]]){var c=a[s[r]];h[c]||(h[c]=[],d[c]=[]),h[c].push(n[r]),d[c].push(s[r])}n=[],s=[];for(r=1;r<=7;r++)if(null!=h[r])for(var u=0;u<h[r].length;u++)n.push(h[r][u]),s.push(d[r][u]);var f=new Date;f.setDate(1),f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);var p=function(t,e){for(var i=0;i<e.length;i++)if(e[i].toLowerCase()==t)return i;return-1};for(r=0;r<n.length;r++)switch(s[r]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(n[r])||f[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[s[r]]](Number(n[r])+("%m"==s[r]||"%n"==s[r]?-1:0));break;case"%M":case"%F":var m=p(n[r].toLowerCase(),i[{"%M":"monthShortName","%F":"monthFullName"}[s[r]]]);m>=0&&f.setMonth(m);break;case"%y":if(!isNaN(n[r])){var g=Number(n[r]);f.setFullYear(g+(g>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(n[r]))(g=Number(n[r]))<=12&&g>=0&&f.setHours(g+(p("pm",n)>=0?12==g?0:12:12==g?-12:0));break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=n[r])}return f}),void 0===window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(t){if("string"!=typeof t)return t;if(t=t.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var e=(new window.DOMParser).parseFromString(t,"text/xml");else if(window.ActiveXObject!==window.undefined){(e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)}return e},xmltop:function(t,e,i){if((void 0===e.status||e.status<400)&&(xml=e.responseXML?e.responseXML||e:dhx4.ajax.parse(e.responseText||e),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(t)[0]}catch(t){}return-1!==i&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),!dhx4.isIE){for(var i,n=[],s=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=s.iterateNext();)n.push(i);return n}try{return e.selectNodes(t)||[]}catch(t){return[]}},query:function(t){dhx4.ajax._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){return this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){return this._call("PUT",t,e,!0,i)},del:function(t,e,i){return this._call("DELETE",t,e,!0,i)},post:function(t,e,i){return 1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window[e],0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,s,o,l){var r=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==n&&(r.onreadystatechange=function(){if(4==r.readyState||1==a&&3==r.readyState){if((200!=r.status||""==r.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}]))return;window.setTimeout(function(){"function"==typeof s&&s.apply(window,[{xmlDoc:r,filePath:e,async:n}]),null!=o&&(void 0!==o.postData?dhx4.ajax.postLong(o.url,o.postData,s):dhx4.ajax.getLong(o.url,s)),s=null,r=null},1)}}),"GET"==t&&1!=this.cache&&(e+=(e.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),r.open(t,e,n),null!=l)for(var h in l)r.setRequestHeader(h,l[h]);else"POST"==t||"PUT"==t||"DELETE"==t?r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);return r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(i),{xmlDoc:r,filePath:e,async:n}}}),void 0===window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(t,e,i,n,s){if("clear"==s){for(var o in t._dhxdataload)t._dhxdataload[o]=null,delete t._dhxdataload[o];return t._loadData=null,t._dhxdataload=null,t.load=null,t.loadStruct=null,void(t=null)}if(t._dhxdataload={initObj:e,xmlToJson:i,xmlRootTag:n,onBeforeXLS:null},t._loadData=function(t,e,i){2==arguments.length&&(i=e,e=null);var n=null;if(3==arguments.length&&(i=arguments[2]),"string"==typeof t){var s=t.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");if(new RegExp("^<"+this._dhxdataload.xmlRootTag).test(s.replace(/^<\?xml[^\?]*\?>\s*/,""))&&null!=(n=dhx4.ajax.parse(t))&&(n=this[this._dhxdataload.xmlToJson].apply(this,[n])),null!=n||null==s.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==s.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(n=dhx4.s2j(s)),null==n){this.callEvent("onXLS",[]);var o=[];if("function"==typeof this._dhxdataload.onBeforeXLS)if(null!=(s=this._dhxdataload.onBeforeXLS.apply(this,[t]))&&"object"==typeof s&&(null!=s.url&&(t=s.url),null!=s.params))for(var l in s.params)o.push(l+"="+encodeURIComponent(s.params[l]));var r=this,a=function(e){var n=null;null!=(n=(e.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=e.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?r[r._dhxdataload.xmlToJson].apply(r,[e.xmlDoc.responseXML]):dhx4.s2j(e.xmlDoc.responseText))&&r[r._dhxdataload.initObj].apply(r,[n,t]),r.callEvent("onXLE",[]),null!=i&&("function"==typeof i?i.apply(r,[]):"function"==typeof window[i]&&window[i].apply(r,[])),a=i=null,n=e=r=null};return o=o.join("&")+("string"==typeof e?"&"+e:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(t,o,a):"get"==dhx4.ajax.method&&dhx4.ajax.get(t+(o.length>0?(t.indexOf("?")>0?"&":"?")+o:""),a))}}else n="object"==typeof t.documentElement||void 0!==t.tagName&&void 0!==t.getElementsByTagName&&t.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[t]):window.dhx4._copyObj(t);null!=n&&this[this._dhxdataload.initObj].apply(this,[n]),null!=i&&("function"==typeof i?i.apply(this,[]):"function"==typeof window[i]&&window[i].apply(this,[]),i=null)},null!=s){var l={struct:"loadStruct",data:"load"};for(var o in s)1==s[o]&&(t[l[o]]=function(){return this._loadData.apply(this,arguments)})}t=null}),void 0===window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){if("clear"==e)return t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null);t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var i=window.dhx4.newId();return this.dhxevs.data[t][i]=e,i},t.detachEvent=function(t){for(var e in this.dhxevs.data){var i=0;for(var n in this.dhxevs.data[e])n==t?(this.dhxevs.data[e][n]=null,delete this.dhxevs.data[e][n]):i++;0==i&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var i=!0;for(var n in this.dhxevs.data[t])i=this.dhxevs.data[t][n].apply(this,e)&&i;return i},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},t=null},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return!!t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)},isValidSSN:function(t){return!!t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)},isValidSIN:function(t){return!!t.toString().match(/^\d{9}$/)}},dhtmlxValidation=new dhtmlxValidation),void 0===window.dhtmlx&&(window.dhtmlx={extend:function(t,e){for(var i in e)t[i]||(t[i]=e[i]);return t},extend_api:function(t,e,i){var n=window[t];n&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var i=n.apply(this,e._init?e._init(t):arguments);for(var s in dhtmlx)e[s]&&this[e[s]](dhtmlx[s]);for(var s in t)e[s]?this[e[s]](t[s]):0===s.indexOf("on")&&this.attachEvent(s,t[s])}else i=n.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=n.prototype,i&&dhtmlx.extend(window[t].prototype,i))},url:function(t){return-1!=t.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){if(!t&&!window.event||2!=(t||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault)&&(t.preventDefault(),!1))},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var i=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var n=document.createElement("Div");n.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=n.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),i.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)s=t.srcElement;else var s=t.target;dragger.checkLanding(s,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var s=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*s.split("_")[0],n+=1*s.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var i=dragger.lastLanding;dragger.lastLanding=null,i&&i.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,i,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),void 0===window.dhtmlxEvent)function dhtmlxEvent(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function dtmlXMLLoaderObject(t,e,i,n){return this.xmlDoc="",this.async=void 0===i||i,this.onloadAction=t||null,this.mainObject=e||null,this.waitCall=null,this.rSeed=n||!1,this}function convertStringToBoolean(t){switch("string"==typeof t&&(t=t.toLowerCase()),t){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getAbsoluteLeft(t){return getOffset(t).left}function getAbsoluteTop(t){return getOffset(t).top}function getOffsetSum(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}}function getOffsetRect(t){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}}function getOffset(t){return t.getBoundingClientRect?getOffsetRect(t):getOffsetSum(t)}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}if(null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),void 0===dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){var t,e,i,n;function s(){if(e){var i=document.createEvent("HTMLEvents");i.initEvent("dblclick",!0,!0),e.dispatchEvent(i),t=e=null}}dhtmlxEvent(document.body,"touchstart",function(o){e=o.touches[0].target,i=o.touches[0].clientX,n=o.touches[0].clientY,t=window.setTimeout(s,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(s){t&&(Math.abs(s.touches[0].clientX-i)>50||Math.abs(s.touches[0].clientY-n)>50)&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent(document.body,"touchend",function(i){t&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent.initTouch=function(){}}),dtmlXMLLoaderObject.prototype.waitLoadFunction=function(t){var e=!0;return this.check=function(){!t||null==t.onloadAction||t.xmlDoc.readyState&&4!=t.xmlDoc.readyState||!e||(e=!1,"function"==typeof t.onloadAction&&t.onloadAction(t.mainObject,null,null,null,t),t.waitCall&&(t.waitCall.call(this,t),t.waitCall=null))}},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(t,e){if(this.xmlDoc.responseXML){var i=this.xmlDoc.responseXML.getElementsByTagName(t);0==i.length&&-1!=t.indexOf(":")&&(i=this.xmlDoc.responseXML.getElementsByTagName(t.split(":")[1]));var n=i[0]}else n=this.xmlDoc.documentElement;if(n)return this._retry=!1,n;if(_isIE&&!this._retry){var s=this.xmlDoc.responseText;e=this.xmlDoc;return this._retry=!0,this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=!1,this.xmlDoc.loadXML(s),this.getXMLTopNode(t,e)}return dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),document.createElement("DIV")},dtmlXMLLoaderObject.prototype.loadXMLString=function(t){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(t);else{var e=new DOMParser;this.xmlDoc=e.parseFromString(t,"text/xml")}this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null)},dtmlXMLLoaderObject.prototype.loadXML=function(t,e,i,n){this.rSeed&&(t+=(-1!=t.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=t,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open(e?"POST":"GET",t,this.async),n?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):e&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(i),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;for(e._tagvalue=t.firstChild?t.firstChild.nodeValue:"",i=0;i<t.childNodes.length;i++){var n=t.childNodes[i].tagName;n&&(e[n]||(e[n]=[]),e[n].push(this.xmlNodeToJSON(t.childNodes[i])))}return e},dhtmlxEventable=function(a){a.attachEvent=function(t,e,i){return this[t="ev_"+t.toLowerCase()]||(this[t]=new this.eventCatcher(i||this)),t+":"+this[t].addEvent(e)},a.callEvent=function(t,e){return!this[t="ev_"+t.toLowerCase()]||this[t].apply(this,e)},a.checkEvent=function(t){return!!this["ev_"+t.toLowerCase()]},a.eventCatcher=function(a){var c=[],d=function(){for(var t=!0,e=0;e<c.length;e++)if(null!=c[e]){var i=c[e].apply(a,arguments);t=t&&i}return t};return d.addEvent=function(a){return"function"!=typeof a&&(a=eval(a)),!!a&&c.push(a)-1},d.removeEvent=function(t){c[t]=null},d},a.detachEvent=function(t){if(0!=t){var e=t.split(":");this[e[0]].removeEvent(e[1])}},a.detachAllEvents=function(){for(var t in this)0==t.indexOf("ev_")&&delete this[t]}},void 0===window.dhx4&&(window.dhx4={version:"4.5",skin:null,skinDetect:function(t){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(t+"_skin_detect")]||null},readFromCss:function(t,e){var i=document.createElement("DIV");i.className=t,null!=document.body.firstChild?document.body.insertBefore(i,document.body.firstChild):document.body.appendChild(i);var n=i[e||"offsetWidth"];return i.parentNode.removeChild(i),i=null,n},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return"string"==typeof t&&(t=t.toLowerCase()),1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t||"on"==t},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(t){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).top},_aOfs:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}},getOffset:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfs(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&void 0===t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var i in t)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i]}else for(e=[],i=0;i<t.length;i++)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,i){var n=(t="string"==typeof t?document.getElementById(t):t).value.length;if(e=Math.max(Math.min(e,n),0),i=Math.min(i,n),t.setSelectionRange)try{t.setSelectionRange(e,i)}catch(t){}else if(t.createTextRange){var s=t.createTextRange();s.moveStart("character",e),s.moveEnd("character",i-n);try{s.select()}catch(t){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData},_xmlNodeValue:function(t){for(var e="",i=0;i<t.childNodes.length;i++)e+=null!=t.childNodes[i].nodeValue?t.childNodes[i].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(t){return window.dhx4.isIE10&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==t.pointerType||window.dhx4.isEdge&&"mouse"==t.pointerType},_touchOn:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="",t=null},_touchOff:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="none",t=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:void 0!==window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),void 0===window.dhx4.template&&(window.dhx4.trim=function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(t,e,i){return t.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var t=arguments[1],n=window.dhx4.trim(arguments[3]),s=null,o=[e[t]];if(n.length>0){n=n.split(":");for(var l=[],r=0;r<n.length;r++)r>0&&null!=l[l.length-1].match(/\\$/)?l[l.length-1]=l[l.length-1].replace(/\\$/,"")+":"+n[r]:l.push(n[r]);s=l[0];for(r=1;r<l.length;r++)o.push(l[r])}return"string"==typeof s&&"function"==typeof window.dhx4.template[s]?window.dhx4.template[s].apply(window.dhx4.template,o):t.length>0&&void 0!==e[t]?1==i?window.dhx4.trim(e[t]):String(e[t]):""})},window.dhx4.template.date=function(t,e){return null!=t?t instanceof Date?window.dhx4.date2str(t,e):null!=(t=t.toString()).match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(t)),e):t:""},window.dhx4.template.maxlength=function(t,e){return String(t).substr(0,e)},window.dhx4.template.number_format=function(t,e,i,n){var s=window.dhx4.template._parseFmt(e,i,n);return 0==s?t:window.dhx4.template._getFmtValue(t,s)},window.dhx4.template.lowercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toLowerCase()},window.dhx4.template.uppercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toUpperCase()},window.dhx4.template._parseFmt=function(t,e,i){var n=t.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==n||4!=n.length)return!1;var s={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof i?i:".",s_bef:"string"==typeof n[1]?n[1]:"",s_aft:"string"==typeof n[3]?n[3]:""},o=n[2].split(".");null!=o[1]&&(s.d_len=o[1].length);var l=o[0].split(",");return l.length>1&&(s.i_len=l[l.length-1].length),s},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,!1!==fmt.i_len){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&q>0&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(!1!==fmt.d_len){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft,v0}return value}),void 0===window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(t,e,i){if(null!=e&&"undefnied"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&"undefnied"!=typeof i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]),t instanceof Date)var n=function(t){return 1==String(t).length?"0"+String(t):t},s=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return n(t.getDate());case"%j":return t.getDate();case"%D":return i.dayShortName[t.getDay()];case"%l":return i.dayFullName[t.getDay()];case"%m":return n(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return i.monthShortName[t.getMonth()];case"%F":return i.monthFullName[t.getMonth()];case"%y":return n(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return n((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return n(t.getHours());case"%i":return n(t.getMinutes());case"%s":return n(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return t.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var s=t.getTimezoneOffset(),o=Math.abs(Math.floor(s/60)),l=Math.abs(s)-60*o;return(s>0?"-":"+")+n(o)+":"+n(l);default:return e}});return s||String(t)},window.dhx4.str2date=function(t,e,i){null!=e&&"undefnied"!=typeof e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&"undefnied"!=typeof i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]);var n=[],s=[];e=(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&")).replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return s.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return s.push(t),"([a-z-]{1,})";case"%j":case"%n":case"%g":case"%G":return s.push(t),"(\\d{1,2})";case"%Y":return s.push(t),"(\\d{4})";case"%a":return s.push(t),"([a|p]m)";case"%A":return s.push(t),"([A|P]M)";case"%u":return s.push(t),"(\\d{1,6})";case"%P":return s.push(t),"([+-]\\d{1,2}:\\d{1,2})"}return t});var o=new RegExp(e,"i"),l=t.match(o);if(null==l||l.length-1!=s.length)return"Invalid Date";for(var r=1;r<l.length;r++)n.push(l[r]);var a={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},h={},d={};for(r=0;r<s.length;r++)if(void 0!==a[s[r]]){var c=a[s[r]];h[c]||(h[c]=[],d[c]=[]),h[c].push(n[r]),d[c].push(s[r])}n=[],s=[];for(r=1;r<=7;r++)if(null!=h[r])for(var u=0;u<h[r].length;u++)n.push(h[r][u]),s.push(d[r][u]);var f=new Date;f.setDate(1),f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);var p=function(t,e){for(var i=0;i<e.length;i++)if(e[i].toLowerCase()==t)return i;return-1};for(r=0;r<n.length;r++)switch(s[r]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(n[r])||f[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[s[r]]](Number(n[r])+("%m"==s[r]||"%n"==s[r]?-1:0));break;case"%M":case"%F":var m=p(n[r].toLowerCase(),i[{"%M":"monthShortName","%F":"monthFullName"}[s[r]]]);m>=0&&f.setMonth(m);break;case"%y":if(!isNaN(n[r])){var g=Number(n[r]);f.setFullYear(g+(g>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(n[r]))(g=Number(n[r]))<=12&&g>=0&&f.setHours(g+(p("pm",n)>=0?12==g?0:12:12==g?-12:0));break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=n[r])}return f}),void 0===window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(t){if("string"!=typeof t)return t;if(t=t.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var e=(new window.DOMParser).parseFromString(t,"text/xml");else window.ActiveXObject!==window.undefined&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t));return e},xmltop:function(t,e,i){if((void 0===e.status||e.status<400)&&(xml=e.responseXML?e.responseXML||e:dhx4.ajax.parse(e.responseText||e),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(t)[0]}catch(t){}return-1!==i&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),!dhx4.isIE){for(var i,n=[],s=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=s.iterateNext();)n.push(i);return n}try{return e.selectNodes(t)||[]}catch(t){return[]}},query:function(t){dhx4.ajax._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){return this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){return this._call("PUT",t,e,!0,i)},del:function(t,e,i){return this._call("DELETE",t,e,!0,i)},post:function(t,e,i){return 1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window[e],0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,s,o,l){var r=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==n&&(r.onreadystatechange=function(){if(4==r.readyState||1==a&&3==r.readyState){if((200!=r.status||""==r.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}]))return;window.setTimeout(function(){"function"==typeof s&&s.apply(window,[{xmlDoc:r,filePath:e,async:n}]),null!=o&&(void 0!==o.postData?dhx4.ajax.postLong(o.url,o.postData,s):dhx4.ajax.getLong(o.url,s)),s=null,r=null},1)}}),"GET"==t&&1!=this.cache&&(e+=(e.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),r.open(t,e,n),null!=l)for(var h in l)r.setRequestHeader(h,l[h]);else"POST"==t||"PUT"==t||"DELETE"==t?r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);return r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(i),{xmlDoc:r,filePath:e,async:n}}}),void 0===window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(t,e,i,n,s){if("clear"==s){for(var o in t._dhxdataload)t._dhxdataload[o]=null,delete t._dhxdataload[o];return t._loadData=null,t._dhxdataload=null,t.load=null,t.loadStruct=null,void(t=null)}if(t._dhxdataload={initObj:e,xmlToJson:i,xmlRootTag:n,onBeforeXLS:null},t._loadData=function(t,e,i){2==arguments.length&&(i=e,e=null);var n=null;if(3==arguments.length&&(i=arguments[2]),"string"==typeof t){var s=t.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");if(new RegExp("^<"+this._dhxdataload.xmlRootTag).test(s.replace(/^<\?xml[^\?]*\?>\s*/,""))&&null!=(n=dhx4.ajax.parse(t))&&(n=this[this._dhxdataload.xmlToJson].apply(this,[n])),null!=n||null==s.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==s.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(n=dhx4.s2j(s)),null==n){this.callEvent("onXLS",[]);var o=[];if("function"==typeof this._dhxdataload.onBeforeXLS)if(null!=(s=this._dhxdataload.onBeforeXLS.apply(this,[t]))&&"object"==typeof s&&(null!=s.url&&(t=s.url),null!=s.params))for(var l in s.params)o.push(l+"="+encodeURIComponent(s.params[l]));var r=this,a=function(e){var n=null;null!=(n=(e.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=e.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?r[r._dhxdataload.xmlToJson].apply(r,[e.xmlDoc.responseXML]):dhx4.s2j(e.xmlDoc.responseText))&&r[r._dhxdataload.initObj].apply(r,[n,t]),r.callEvent("onXLE",[]),null!=i&&("function"==typeof i?i.apply(r,[]):"function"==typeof window[i]&&window[i].apply(r,[])),a=i=null,n=e=r=null};return o=o.join("&")+("string"==typeof e?"&"+e:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(t,o,a):"get"==dhx4.ajax.method&&dhx4.ajax.get(t+(o.length>0?(t.indexOf("?")>0?"&":"?")+o:""),a))}}else n="object"==typeof t.documentElement||void 0!==t.tagName&&void 0!==t.getElementsByTagName&&t.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[t]):window.dhx4._copyObj(t);null!=n&&this[this._dhxdataload.initObj].apply(this,[n]),null!=i&&("function"==typeof i?i.apply(this,[]):"function"==typeof window[i]&&window[i].apply(this,[]),i=null)},null!=s){var l={struct:"loadStruct",data:"load"};for(var o in s)1==s[o]&&(t[l[o]]=function(){return this._loadData.apply(this,arguments)})}t=null}),void 0===window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){if("clear"==e)return t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null);t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var i=window.dhx4.newId();return this.dhxevs.data[t][i]=e,i},t.detachEvent=function(t){for(var e in this.dhxevs.data){var i=0;for(var n in this.dhxevs.data[e])n==t?(this.dhxevs.data[e][n]=null,delete this.dhxevs.data[e][n]):i++;0==i&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var i=!0;for(var n in this.dhxevs.data[t])i=this.dhxevs.data[t][n].apply(this,e)&&i;return i},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},t=null},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return!!t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)},isValidSSN:function(t){return!!t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)},isValidSIN:function(t){return!!t.toString().match(/^\d{9}$/)}},dhtmlxValidation=new dhtmlxValidation),void 0===window.dhtmlx&&(window.dhtmlx={extend:function(t,e){for(var i in e)t[i]||(t[i]=e[i]);return t},extend_api:function(t,e,i){var n=window[t];n&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var i=n.apply(this,e._init?e._init(t):arguments);for(var s in dhtmlx)e[s]&&this[e[s]](dhtmlx[s]);for(var s in t)e[s]?this[e[s]](t[s]):0===s.indexOf("on")&&this.attachEvent(s,t[s])}else i=n.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=n.prototype,i&&dhtmlx.extend(window[t].prototype,i))},url:function(t){return-1!=t.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){if(!t&&!window.event||2!=(t||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault)&&(t.preventDefault(),!1))},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var i=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var n=document.createElement("Div");n.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=n.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),i.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)s=t.srcElement;else var s=t.target;dragger.checkLanding(s,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var s=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*s.split("_")[0],n+=1*s.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var i=dragger.lastLanding;dragger.lastLanding=null,i&&i.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,i,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),void 0===window.dhtmlxEvent)function dhtmlxEvent(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function dataProcessor(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhx4._eventable(this),this.connector_init&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"),this}function dhtmlXCalendarObject(t,e){this.i={};var i=null;if("string"==typeof t)var n=document.getElementById(t);else n=t;n&&"object"==typeof n&&n.tagName&&"input"!=String(n.tagName).toLowerCase()&&(i=n),n=null,"object"==typeof t&&t.length||(t=[t]);for(var s=0;s<t.length;s++)"string"==typeof t[s]&&(t[s]=document.getElementById(t[s])||null),null!=t[s]&&t[s].tagName&&"input"==String(t[s].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:t[s]}:t[s]instanceof Array||!(t[s]instanceof Object)||null==t[s].input&&null==t[s].button||(null!=t[s].input&&"string"==typeof t[s].input&&(t[s].input=document.getElementById(t[s].input)),null!=t[s].button&&"string"==typeof t[s].button&&(t[s].button=document.getElementById(t[s].button)),this.i[window.dhx4.newId()]=t[s]),t[s]=null;this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"dhx_skyblue",zi:window.dhx4.newId(),touch:!window.dhx4.isIE,ws_first:!0},this.setSkin=function(t,e){(this.conf.skin!=t||e)&&(this.conf.skin=t,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),null!=i?(this._hasParent=!0,i.appendChild(this.base),i=null):document.body.appendChild(this.base),this.setParent=function(t){this._hasParent&&("object"==typeof t?t.appendChild(this.base):"string"==typeof t&&document.getElementById(t).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.base.onclick=function(t){(t=t||event).preventDefault&&t.preventDefault(),t.cancelBubble=!0},this.base.onmousedown=function(){return!1},this.conf.touch&&(this.base.ontouchstart=this.base.onclick),this.loadUserLanguage=function(t){if(this.langData[t]&&(this.lang=t,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont))for(var e=0,i=0;i<this.msCont.childNodes.length;i++)for(var n=0;n<this.msCont.childNodes[i].childNodes.length;n++)this.msCont.childNodes[i].childNodes[n].innerHTML=this.langData[this.lang].monthesSNames[e++]},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(t){return(t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth),(l=document.createElement("UL")).className="dhtmlxcalendar_line",this.contMonth.appendChild(l),(a=document.createElement("LI")).className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",a.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>",l.appendChild(a);var o=this;a.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(e.className&&0===e.className.indexOf("dhtmlxcalendar_month_arrow")){o._hideSelector();var i=e.parentNode.firstChild==e?-1:1,n=new Date(o._activeMonth);return o._drawMonth(new Date(o._activeMonth.getFullYear(),o._activeMonth.getMonth()+i,1,0,0,0,0)),void o._evOnArrowClick([n,new Date(o._activeMonth)])}return e.className&&"dhtmlxcalendar_month_label_month"==e.className?(t.cancelBubble=!0,void o._showSelector("month",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_month",!0)):e.className&&"dhtmlxcalendar_month_label_year"==e.className?(t.cancelBubble=!0,void o._showSelector("year",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_year",!0)):void o._hideSelector()},1==this.conf.touch&&(a.ontouchstart=a.onclick),this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(t){0==t&&(t=7),this._wStart=Math.min(Math.max(isNaN(t)?1:t,1),7),this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length)(t=document.createElement("UL")).className="dhtmlxcalendar_line",this.contDays.appendChild(t);else var t=this.contDays.firstChild;var e=this._wStart,i=this.langData[this.lang].daysSNames;i.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var n=0;n<8;n++){if(null==t.childNodes[n]){var s=document.createElement("LI");t.appendChild(s)}else s=t.childNodes[n];0==n?(s.className="dhtmlxcalendar_cell_wn",s.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(s.className="dhtmlxcalendar_cell"+(e>=6?" dhtmlxcalendar_day_weekday_cell":"")+(1==n?"_first":""),s.innerHTML=i[e],++e>7&&(e=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date&&!e._css_dis){var i=o._activeDate.getHours(),n=o._activeDate.getMinutes(),s=e._date;if(o.checkEvent("onBeforeChange")&&!o.callEvent("onBeforeChange",[new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),i,n)]))return;null!=o._activeDateCell&&(o._activeDateCell._css_date=!1,o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w));var l=o._activeDate.getFullYear()+"_"+o._activeDate.getMonth()!=s.getFullYear()+"_"+s.getMonth();o._nullDate=!1,o._activeDate=new Date(s.getFullYear(),s.getMonth(),s.getDate(),i,n),o._activeDateCell=e,o._activeDateCell._css_date=!0,o._activeDateCell._css_hover=!1,o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w),l&&o._drawMonth(o._activeDate),o._activeInp&&o.i[o._activeInp]&&null!=o.i[o._activeInp].input&&(o.i[o._activeInp].input.value=o._dateToStr(new Date(o._activeDate.getTime()))),o._hasParent||("touchstart"==t.type?window.setTimeout(function(){o._hide()},400):o._hide()),o._evOnClick([new Date(o._activeDate.getTime())])}},1==this.conf.touch&&(this.contDates.ontouchstart=this.contDates.onclick),this.contDates.onmouseover=function(t){var e=(t=t||event).target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date){if(o._lastHover==e||e._css_hover)return;e._css_hover=!0,o._updateCellStyle(e._q,e._w),o._lastHover=e,o._evOnMouseOver([new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),0,0,0,0),t]),e=null}},this.contDates.onmouseout=function(t){o._clearDayHover(t||event)},this._lastHover=null,this._clearDayHover=function(t){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),null!=t&&o._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),t]),this._lastHover=null)};for(s=0;s<6;s++){var l;(l=document.createElement("UL")).className="dhtmlxcalendar_line",this.contDates.appendChild(l);for(var r=0;r<=7;r++){(a=document.createElement("LI")).className=0==r?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",l.appendChild(a)}}this.contTime=document.createElement("DIV"),this.contTime.className="dhtmlxcalendar_time_cont",this.base.firstChild.appendChild(this.contTime),this.showTime=function(){this.contTime.style.display="",this._ifrSize()},this.hideTime=function(){this.contTime.style.display="none",this._ifrSize()},(l=document.createElement("UL")).className="dhtmlxcalendar_line",this.contTime.appendChild(l);var a=document.createElement("LI");for(var h in a.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr",a.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'> : </span><span class='dhtmlxcalendar_label_minutes'></span>",l.appendChild(a),a.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(null!=e.tagName&&"span"==e.tagName.toLowerCase()&&1==e._par&&null!=e.parentNode&&(e=e.parentNode),e.className&&"dhtmlxcalendar_label_hours"==e.className){t.cancelBubble=!0;var i=o.contMonth.offsetHeight+o.contDays.offsetHeight+o.contDates.offsetHeight+e.offsetTop;o._showSelector("hours",Math.round(e.offsetLeft+e.offsetWidth/2),i-2,"selector_hours",!0)}else if(e.className&&"dhtmlxcalendar_label_minutes"==e.className){if(t.cancelBubble=!0,1==o._minutesInterval){var n=o.getFormatedDate("%i");e.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+n.charAt(0)+"</span>"+n.charAt(1),e.firstChild._par=!0,o._selectorMode=1}i=o.contMonth.offsetHeight+o.contDays.offsetHeight+o.contDates.offsetHeight+e.offsetTop;o._showSelector("minutes",Math.round(e.offsetLeft+e.offsetWidth/2),i-2,"selector_minutes",!0)}else o._hideSelector()},1==this.conf.touch&&(a.ontouchstart=a.onclick),this._activeMonth=null,this._activeDate=new Date,this._activeDateCell=null,this.setDate=function(t){window.dhx4.temp_calendar={tz:null},this._nullDate=void 0===t||""===t||!t,t instanceof Date||("Invalid Date"==(t=this._strToDate(String(t||"")))?t=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null),null==this.conf.tz&&(this.conf.tz=window.dhx4.date2str(t,"%P"));var e=t.getTime();this._isOutOfRange(e)||(this._activeDate=new Date(e),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())},this.getDate=function(t){if(this._nullDate)return null;var e=new Date(this._activeDate.getTime());if(t){window.dhx4.temp_calendar={tz:this.conf.tz};var i=this._dateToStr(e);return window.dhx4.temp_calendar=null,i}return e},this._drawMonth=function(t){if(t instanceof Date){isNaN(t.getFullYear())&&(t=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeMonth=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),this._activeDateCell=null;var e=new Date(this._activeMonth.getTime()),i=e.getDay()-this._wStart;i<0&&(i+=7),e.setDate(e.getDate()-i);for(var n=t.getMonth(),s=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),o=0,l=0;l<6;l++)for(var r=this._wStart,a=0;a<=7;a++)if(0==a){var h=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o,0,0,0,0));if(h>=52&&1==this.conf.ws_first&&0==this._activeMonth.getMonth()){var d=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o+7,0,0,0,0));d<h&&d>1&&(h=1)}this.contDates.childNodes[l].childNodes[a].innerHTML="<div class='dhtmlxcalendar_label'>"+h+"</div>"}else{var c=new Date(e.getFullYear(),e.getMonth(),e.getDate()+o,0,0,0,0);if(0!=c.getHours()){var u=c.getHours()>12?24-c.getHours():c.getHours();c.setTime(c.getTime()+36e5*u)}c.getDay();var f=c.getTime(),p="dhtmlxcalendar_label";null!=this._tipData[f]?(this._tipData[f].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[l].childNodes[a].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[l].childNodes[a].setAttribute("title",this._tipData[f].text),this._tipData[f].showIcon&&(p+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[l].childNodes[a].removeAttribute("title"),this.contDates.childNodes[l].childNodes[a].innerHTML="<div class='"+p+"'>"+c.getDate()+"</div>",this.contDates.childNodes[l].childNodes[a]._date=new Date(f),this.contDates.childNodes[l].childNodes[a]._q=l,this.contDates.childNodes[l].childNodes[a]._w=a,this.contDates.childNodes[l].childNodes[a]._css_month=c.getMonth()==n,this.contDates.childNodes[l].childNodes[a]._css_date=!this._nullDate&&f==s,this.contDates.childNodes[l].childNodes[a]._css_weekend=r>=6,this.contDates.childNodes[l].childNodes[a]._css_dis=this._isOutOfRange(f),this.contDates.childNodes[l].childNodes[a]._css_holiday=1==this._holidays[f],this._updateCellStyle(l,a),f==s&&(this._activeDateCell=this.contDates.childNodes[l].childNodes[a]),++r>7&&(r=1),o++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(t)}},this._updateCellStyle=function(t,e){var i=this.contDates.childNodes[t].childNodes[e],n="dhtmlxcalendar_cell dhtmlxcalendar_cell";n+=i._css_month?"_month":"",n+=i._css_date?"_date":"",n+=i._css_weekend?"_weekend":"",n+=i._css_holiday?"_holiday":"",n+=i._css_dis?"_dis":"",n+=i._css_hover&&!i._css_dis?"_hover":"",i.className=n,i=null},this._minutesInterval=5,this._initSelector=function(t,e){if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(t){var e=(t=t||event).target||t.srcElement;!0===e._cell&&(o._selHover!=e&&o._clearSelHover(),null!=String(e.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(e.className+=" dhtmlxcalendar_selector_cell_hover",o._selHover=e))},this._sel.onmouseout=function(){o._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,o._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,o._scrollYears(1)},1==this.conf.touch&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),1!=this._sel._ta[t]){if("month"==t){this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var i=0,n=0;n<4;n++){(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.msCont.appendChild(h);for(var s=0;s<3;s++){(d=document.createElement("LI")).innerHTML=this.langData[this.lang].monthesSNames[i],d.className="dhtmlxcalendar_selector_cell",h.appendChild(d),d._month=i,d._cell=!0,this._msCells[i++]=d}}this.msCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._month&&(o._hideSelector(),o._updateActiveMonth(),o._drawMonth(new Date(o._activeMonth.getFullYear(),e._month,1,0,0,0,0)),o._doOnSelectorChange())},1==this.conf.touch&&(this.msCont.ontouchstart=this.msCont.onclick)}if("year"==t){this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(n=0;n<4;n++){(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(h);for(s=0;s<3;s++){(d=document.createElement("LI")).className="dhtmlxcalendar_selector_cell",d._cell=!0,h.appendChild(d)}}this.ysCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._year&&(o._hideSelector(),o._drawMonth(new Date(e._year,o._activeMonth.getMonth(),1,0,0,0,0)),o._doOnSelectorChange())},1==this.conf.touch&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if("hours"==t){this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(i=0,n=0;n<4;n++){(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(h);for(s=0;s<6;s++){(d=document.createElement("LI")).innerHTML=this._fixLength(i,2),d.className="dhtmlxcalendar_selector_cell",h.appendChild(d),d._hours=i,d._cell=!0,this._hsCells[i++]=d}}this.hsCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._hours&&(o._hideSelector(),o._activeDate.setHours(e._hours),o._updateActiveHours(),o._updateVisibleHours(),o._doOnSelectorChange(),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]))},1==this.conf.touch&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if("minutes"==t){var l=4,r=3,a=2;1==this._minutesInterval&&(1==this._selectorMode?(l=2,r=3,a=1):(l=2,r=5,a=1,e+="5")),10==this._minutesInterval&&(l=2),15==this._minutesInterval&&(l=1,r=4,e+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(i=0,n=0;n<l;n++){var h;(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(h);for(s=0;s<r;s++){var d;(d=document.createElement("LI")).innerHTML=a>1?this._fixLength(i,a):i,d.className="dhtmlxcalendar_selector_cell",h.appendChild(d),d._minutes=i,d._cell=!0,this._rsCells[i]=d,i+=this._minutesInterval}}this.rsCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;if(null!=e._minutes){if(1==o._minutesInterval){var i=o.getFormatedDate("%i");if(i=1==o._selectorMode?e._minutes.toString()+i.charAt(1):i.charAt(0)+e._minutes.toString(),o._activeDate.setMinutes(Number(i)),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]),o._hideSelector(),1==o._selectorMode)return o._updateVisibleMinutes(!0),o._selectorMode=2,o._showSelector("minutes",o._sel._x,o._sel._y,"selector_minutes",!0),void o._updateActiveMinutes();o._selectorMode=1}else o._hideSelector(),o._activeDate.setMinutes(e._minutes),o._updateActiveMinutes(),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]);o._updateVisibleMinutes(),o._doOnSelectorChange()}},1==this.conf.touch&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[t]=!0}},this._showSelector=function(t,e,i,n,s){if(!0===s&&null!=this._sel&&this._isSelectorVisible()&&t==this._sel._t)this._hideSelector();else{"dhx_terrace"==this.conf.skin&&(e+=12),this._sel&&this._sel._ta[t]||this._initSelector(t,n),t!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=e,this._sel._y=i,this._sel.style.visibility="hidden",this._sel.style.display="",this._selCover.style.width=this.base.offsetWidth-2+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px",this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px",this._selCover.style.display="",this._sel._t=t,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+n,this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==t?"":"none";var o=Math.max(0,e-Math.round(this._sel.offsetWidth/2));o+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(o=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=o+"px",this._sel.style.top="hours"==t||"minutes"==t?i-this._sel.offsetHeight+"px":i+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(t)}},this._doOnSelectorShow=function(t){"month"==t&&this._updateActiveMonth(),"year"==t&&this._updateYearsList(this._activeMonth),"hours"==t&&this._updateActiveHours(),"minutes"==t&&this._updateActiveMinutes()},this._hideSelector=function(t){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none","minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))},this._isSelectorVisible=function(){return!!this._sel&&"none"!=this._sel.style.display},this._doOnSelectorChange=function(t){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),!0===t])},this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)},this._unloadSelector=function(t){if(this._sel&&this._sel._ta[t]){if("month"==t){for(var e in this.msCont.onclick=this.msCont.ontouchstart=null,this._msActive=null,this._msCells)this._msCells[e]._cell=null,this._msCells[e]._month=null,this._msCells[e].parentNode.removeChild(this._msCells[e]),this._msCells[e]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont),this.msCont=null}if("year"==t){for(var e in this.ysCont.onclick=this.ysCont.ontouchstart=null,this._ysCells)this._ysCells[e]._cell=null,this._ysCells[e]._year=null,this._ysCells[e].parentNode.removeChild(this._ysCells[e]),this._ysCells[e]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont),this.ysCont=null}if("hours"==t){for(var e in this.hsCont.onclick=this.hsCont.ontouchstart=null,this._hsActive=null,this._hsCells)this._hsCells[e]._cell=null,this._hsCells[e]._hours=null,this._hsCells[e].parentNode.removeChild(this._hsCells[e]),this._hsCells[e]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont),this.hsCont=null}if("minutes"==t){for(var e in this.rsCont.onclick=this.rsCont.ontouchstart=null,this._rsActive=null,this._rsCells)this._rsCells[e]._cell=null,this._rsCells[e]._minutes=null,this._rsCells[e].parentNode.removeChild(this._rsCells[e]),this._rsCells[e]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont),this.rsCont=null}this._sel._ta[t]=null}},this.setMinutesInterval=function(t){1!=t&&5!=t&&10!=t&&15!=t||(this._minutesInterval=t,this._unloadSelector("minutes"))},this._updateActiveMonth=function(){void 0!==this._msActive&&void 0!==this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"),this._msActive=this._activeMonth.getMonth(),this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateActiveYear=function(){var t=this._activeMonth.getFullYear();this._ysCells[t]&&(this._ysCells[t].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateYearsList=function(t){for(var e in this._ysCells)this._ysCells[e]=null,delete this._ysCells[e];for(var i=12*Math.floor(t.getFullYear()/12),n=0;n<4;n++)for(var s=0;s<3;s++)this.ysCont.childNodes[n].childNodes[s].innerHTML=i,this.ysCont.childNodes[n].childNodes[s]._year=i,this.ysCont.childNodes[n].childNodes[s].className="dhtmlxcalendar_selector_cell",this._ysCells[i++]=this.ysCont.childNodes[n].childNodes[s];this._updateActiveYear()},this._scrollYears=function(t){var e=(t<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+t,i=new Date(e,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(i)},this._updateActiveHours=function(){void 0!==this._hsActive&&void 0!==this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"),this._hsActive=this._activeDate.getHours(),this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)},this._updateActiveMinutes=function(){null!=this._rsActive&&void 0!==this._rsActive&&void 0!==this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"),1==this._minutesInterval?this._rsActive=this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._rsActive=this._activeDate.getMinutes(),void 0!==this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateVisibleMinutes=function(t){var e=this._fixLength(this._activeDate.getMinutes(),2).toString();1==t&&(e=e.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+e.charAt(1)+"</span>"),this.contTime.firstChild.firstChild.childNodes[3].innerHTML=e,1==t&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)},this._fixLength=function(t,e){for(;String(t).length<e;)t="0"+String(t);return t},this._dateFormat="",this._dateFormatRE=null,this.setDateFormat=function(t){var e={};if(null!=this._strToDate)for(var i in this.i)if(null!=this.i[i].input&&this.i[i].input.value.length>0){var n=this._strToDate(this.i[i].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");n instanceof Date&&(e[i]=n)}this._dateFormat=t;var s=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(t){switch(t.replace(/%/,"")){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+o.langData[o.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+o.langData[o.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return t});for(var i in this._dateFormatRE=new RegExp(s,"i"),e)this.i[i].input.value=this._dateToStr(e[i]);e=null},this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this._updateDateStr=function(t){if(this._dateFormatRE&&t.match(this._dateFormatRE)&&t!=this.getFormatedDate()){var e=this._strToDate(t);e instanceof Date&&(!this.checkEvent("onBeforeChange")||this.callEvent("onBeforeChange",[new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())])?(this._nullDate=!1,this._activeDate=e,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)):null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()))}},this.showMonth=function(t){"string"==typeof t&&(t=this._strToDate(t)),t instanceof Date&&this._drawMonth(t)},this.setFormatedDate=function(t,e,i,n){var s=this._strToDate(e,t);if(n)return s;this.setDate(s)},this.getFormatedDate=function(t,e){if(!(e&&e instanceof Date)){if(this._nullDate)return"";e=new Date(this._activeDate)}return this._dateToStr(e,t)},this.getWeekNumber=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return"Invalid Date";void 0===this._ftDay&&(this._ftDay=4);var e=this._wStart,i=4,n=new Date(t.getFullYear(),0,1,0,0,0,0).getDay();0==n&&(n=7),i<e&&(i+=7,n+=7);var s=0;n>=e&&n<=i||(s=1);var o=n-e,l=new Date(t.getFullYear(),0,1-o+7*s,0,0,0,0),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0,0),a=Math.ceil((r.getTime()-l.getTime())/6048e5);if(0==a){var h=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),d=h.getDay()-this._wStart;d<0&&(d+=7),h.setDate(h.getDate()-d),a=this.getWeekNumber(h)}return a},this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"},this.hideWeekNumbers=function(){this.base.firstChild.className=""},this.show=function(t){if(t||!this._hasParent)if("object"!=typeof t||void 0===t._dhtmlxcalendar_uid||this.i[t._dhtmlxcalendar_uid]!=t){if(void 0===t)for(var e in this.i)t||(t=e);t&&this._show(t)}else this._show(t._dhtmlxcalendar_uid);else this._show()},this.hide=function(){this._isVisible()&&this._hide()},this.isVisible=function(){return this._isVisible()},this._activeInp=null,this.pos="bottom",this.setPosition=function(t,e){this._px=null,this._py=null,"right"==t||"bottom"==t?this.pos=t:(this.pos="int",void 0===t||isNaN(t)||(this.base.style.left=t+"px",this._px=t),void 0===e||isNaN(e)||(this.base.style.top=e+"px",this._py=e),this._ifrSize())},this._show=function(t,e){if(!0===e&&this._activeInp==t&&this._isVisible())this._hide();else{if(this.base.style.visibility="hidden",this.base.style.display="",t){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=" dhtmlxcalendar_in_input");var i=this.i[t].input||this.i[t].button,n=window.dhx4.screenDim(),s={top:window.dhx4.absTop(i),left:window.dhx4.absLeft(i)};if("right"==this.pos)this.base.style.left=s.left+i.offsetWidth+"px",this.base.style.top=Math.min(s.top,n.bottom-this.base.offsetHeight)+"px";else if("bottom"==this.pos){var o=s.top+i.offsetHeight+1;if(o+this.base.offsetHeight>n.bottom){var l=s.top-this.base.offsetHeight;l>=-20&&(o=l)}var r=s.left;r+this.base.offsetWidth>n.right&&(r=Math.max(0,s.left+i.offsetWidth-this.base.offsetWidth)),this.base.style.left=r+"px",this.base.style.top=o+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=t,i=null}else this._px&&this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector(),this.base.style.visibility="visible",this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this._ifrSize(),this._ifr&&(this._ifr.style.display=""),this.callEvent("onShow",[])}},this._hide=function(){null!=this._lastHover&&this._clearDayHover(),this._hideSelector(),this.base.style.display="none",window.dhx4.zim.clear(this.conf.zi),this.base.className.indexOf("dhtmlxcalendar_in_input")>=0&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")),this._activeInp=null,this._ifr&&(this._ifr.style.display="none"),this.callEvent("onHide",[])},this._isVisible=function(){return"none"!=this.base.style.display},this._rangeActive=!1,this._rangeFrom=null,this._rangeTo=null,this._rangeSet={},this.setInsensitiveDays=function(t){for(var e=this._extractDates(t),i=0;i<e.length;i++)this._rangeSet[new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this.clearInsensitiveDays=function(){this._clearRangeSet(),this._drawMonth(this._activeMonth)},this._holidays={},this.setHolidays=function(t){if(null==t)this._clearHolidays();else if(null!=t)for(var e=this._extractDates(t),i=0;i<e.length;i++)this._holidays[new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this._extractDates=function(t){("string"==typeof t||t instanceof Date)&&(t=[t]);for(var e=[],i=0;i<t.length;i++)if("string"==typeof t[i])for(var n=t[i].split(","),s=0;s<n.length;s++)e.push(this._strToDate(n[s]));else t[i]instanceof Date&&e.push(t[i]);return e},this._clearRange=function(){this._rangeActive=!1,this._rangeType=null,this._rangeFrom=null,this._rangeTo=null},this._clearRangeSet=function(){for(var t in this._rangeSet)this._rangeSet[t]=null,delete this._rangeSet[t]},this._clearHolidays=function(){for(var t in this._holidays)this._holidays[t]=null,delete this._holidays[t]},this._isOutOfRange=function(t){if(1==this._rangeSet[t])return!0;if(this._rangeActive){if("in"==this._rangeType&&(t<this._rangeFrom||t>this._rangeTo))return!0;if("out"==this._rangeType&&t>=this._rangeFrom&&t<=this._rangeTo)return!0;if("from"==this._rangeType&&t<this._rangeFrom)return!0;if("to"==this._rangeType&&t>this._rangeTo)return!0}var e=new Date(t);return!(!this._rangeWeek||!0!==this._rangeWeekData[e.getDay()])||(!(!this._rangeMonth||!0!==this._rangeMonthData[e.getDate()])||!(!this._rangeYear||!0!==this._rangeYearData[e.getMonth()+"_"+e.getDate()]))},this.clearSensitiveRange=function(){this._clearRange(),this._drawMonth(this._activeMonth)},this.setSensitiveRange=function(t,e,i){var n=!1;if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="in",n=!0}n||null==t||null!=e||(t instanceof Date||(t=this._strToDate(t)),this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=null,!0===i&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",n=!0),n||null!=t||null==e||(e instanceof Date||(e=this._strToDate(e)),this._rangeFrom=null,this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),!0===i&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",n=!0),n&&this._drawMonth(this._activeMonth)},this.setInsensitiveRange=function(t,e){if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;return this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="out",void this._drawMonth(this._activeMonth)}null==t||null!=e?null!=t||null==e||this.setSensitiveRange(e,null,!0):this.setSensitiveRange(null,t,!0)},this.disableDays=function(t,e){if("week"==t){for(var i in"object"!=typeof e&&void 0===e.length&&(e=[e]),this._rangeWeekData||(this._rangeWeekData={}),this._rangeWeekData)this._rangeWeekData[i]=!1,delete this._rangeWeekData[i];for(var n=0;n<e.length;n++)this._rangeWeekData[e[n]]=!0,7==e[n]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==t){for(var i in"object"!=typeof e&&void 0===e.length&&(e=[e]),this._rangeMonthData||(this._rangeMonthData={}),this._rangeMonthData)this._rangeMonthData[i]=!1,delete this._rangeMonthData[i];for(n=0;n<e.length;n++)this._rangeMonthData[e[n]]=!0;this._rangeMonth=!0}if("year"==t){var s=this._extractDates(e);for(var i in this._rangeYearData||(this._rangeYearData={}),this._rangeYearData)this._rangeYearData[i]=!1,delete this._rangeYearData[i];for(n=0;n<s.length;n++)this._rangeYearData[s[n].getMonth()+"_"+s[n].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)},this.enableDays=function(t){"week"==t&&(this._rangeWeek=!1),"month"==t&&(this._rangeMonth=!1),"year"==t&&(this._rangeYear=!1),this._drawMonth(this._activeMonth)},this._tipData={},this._tipTM=null,this._tipTMTime=400,this._tipEvs=!1,this._tipPopup=null,this._tipCellDate=null,this._tipCellDim=null,this.setTooltip=function(t,e,i,n){for(var s=this._extractDates(t),o=0;o<s.length;o++){var l=new Date(s[o].getFullYear(),s[o].getMonth(),s[o].getDate(),0,0,0,0).getTime();this._tipData[l]={text:e,showIcon:i,usePopup:n}}this._drawMonth(this._activeMonth)},this.clearTooltip=function(t){for(var e=this._extractDates(t),i=0;i<e.length;i++){var n=new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime();this._tipData[n]=null,delete this._tipData[n]}this._drawMonth(this._activeMonth)},this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();null!=this._tipData[e]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=t,this._tipCellDim=this.getCellDimension(t),this._tipText=this._tipData[e].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)},this._showTooltipPopup=function(t,e,i,n,s){o._tipPopup||(o._tipPopup=new dhtmlXPopup({mode:"top"})),o._tipPopup.attachHTML(o._tipText),o._tipPopup.show(o._tipCellDim.x,o._tipCellDim.y,o._tipCellDim.w,o._tipCellDim.h),o.callEvent("onPopupShow",[o._tipCellDate])},this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM),null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))},this.getPopup=function(){return this._tipPopup},this.getCellDimension=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return null;for(var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),i=null,n=0;n<this.contDates.childNodes.length;n++)for(var s=0;s<this.contDates.childNodes[n].childNodes.length;s++){var o=this.contDates.childNodes[n].childNodes[s];null!=o._date&&o._date.getTime()==e&&(i={x:window.dhx4.absLeft(o),y:window.dhx4.absTop(o),w:o.offsetWidth,h:o.offsetHeight}),o=null}return i},this._updateFromInput=function(t){if(this._nullInInput&&0==t.value.replace(/\s/g,"").length){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null]))return void(null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()));this.setDate(null)}else this._updateDateStr(t.value);t=null},this._doOnClick=function(t){var e=(t=t||event).target||t.srcElement;e._dhtmlxcalendar_uid&&e._dhtmlxcalendar_uid!=o._activeInp&&o._isVisible()&&o._activeInp?o._hide():e._dhtmlxcalendar_uid&&o.i[e._dhtmlxcalendar_uid]||(o._isSelectorVisible()?o._hideSelector():!o._hasParent&&o._isVisible()&&o._hide())},this._doOnKeyDown=function(t){27!=(t=t||event).keyCode&&13!=t.keyCode||(o._isSelectorVisible()?o._hideSelector():o._isVisible()&&!o._hasParent&&o._hide())},this._doOnInpClick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(e),o._show(e._dhtmlxcalendar_uid,!0))},this._doOnInpKeyUp=function(t){var e=(t=t||event).target||t.srcElement;13!=t.keyCode&&e._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(e))},this._doOnBtnClick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(null!=o.i[e._dhtmlxcalendar_uid].input&&o._updateFromInput(o.i[e._dhtmlxcalendar_uid].input),o._show(e._dhtmlxcalendar_uid,!0))},this._doOnUnload=function(){o&&o.unload&&o.unload()},"function"==typeof window.addEventListener?(document.body.addEventListener("click",o._doOnClick,!1),window.addEventListener("keydown",o._doOnKeyDown,!1),window.addEventListener("unload",o._doOnUnload,!1),1==this.conf.touch&&document.body.addEventListener("touchstart",o._doOnClick,!1)):(document.body.attachEvent("onclick",o._doOnClick),document.body.attachEvent("onkeydown",o._doOnKeyDown),window.attachEvent("onunload",o._doOnUnload)),this.attachObj=function(t){var e=window.dhx4.newId();return"string"==typeof t?this.i[e]={input:document.getElementById(t)}:void 0!==t.tagName?this.i[e]={input:t}:"object"!=typeof t||null==t.input&&null==t.button||(this.i[e]={},null!=t.input&&(this.i[e].input="string"==typeof t.input?document.getElementById(t.input):t.input),null!=t.button&&(this.i[e].button="string"==typeof t.button?document.getElementById(t.button):t.button)),this._attachEventsToObject(e),e},this.detachObj=function(t){var e=null;if(null!=this.i[t]?e=t:"string"==typeof t?e=(t=document.getElementById(t))._dhtmlxcalendar_uid:void 0!==t.tagName?e=t._dhtmlxcalendar_uid:"object"!=typeof t||null==t.input&&null==t.button||(null==e&&null!=t.input&&(e=("string"==typeof t.input?document.getElementById(t.input):t.input)._dhtmlxcalendar_uid),null==e&&null!=t.button&&(e=("string"==typeof t.button?document.getElementById(t.button):t.button)._dhtmlxcalendar_uid)),null!=e&&null!=this.i[e]){for(var i in this._detachEventsFromObject(e),this.i[i])this.i[e][i]._dhtmlxcalendar_uid=null,this.i[e][i]=null,delete this.i[e][i];return this.i[e]=null,delete this.i[e],!0}return!1},this._attachEventsToObject=function(t){null!=this.i[t].button?(this.i[t].button._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?(this.i[t].button.addEventListener("click",o._doOnBtnClick,!1),1==this.conf.touch&&this.i[t].button.addEventListener("touchstart",o._doOnBtnClick,!1)):this.i[t].button.attachEvent("onclick",o._doOnBtnClick)):null!=this.i[t].input&&(this.i[t].input._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?(this.i[t].input.addEventListener("click",o._doOnInpClick,!1),this.i[t].input.addEventListener("keyup",o._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[t].input.addEventListener("touchstart",o._doOnInpClick,!1)):(this.i[t].input.attachEvent("onclick",o._doOnInpClick),this.i[t].input.attachEvent("onkeyup",o._doOnInpKeyUp)))},this._detachEventsFromObject=function(t){null!=this.i[t].button?"function"==typeof window.addEventListener?(this.i[t].button.removeEventListener("click",o._doOnBtnClick,!1),1==this.conf.touch&&this.i[t].button.removeEventListener("touchstart",o._doOnBtnClick,!1)):this.i[t].button.detachEvent("onclick",o._doOnBtnClick):null!=this.i[t].input&&("function"==typeof window.addEventListener?(this.i[t].input.removeEventListener("click",o._doOnInpClick,!1),this.i[t].input.removeEventListener("keyup",o._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[t].input.removeEventListener("touchstart",o._doOnInpClick,!1)):(this.i[t].input.detachEvent("onclick",o._doOnInpClick),this.i[t].input.detachEvent("onkeyup",o._doOnInpKeyUp)))},this.enableListener=function(t){t&&("function"==typeof window.addEventListener?(t.addEventListener("focus",o._listenerEvFocus,!1),t.addEventListener("blur",o._listenerEvBlur,!1)):(t.attachEvent("onfocus",o._listenerEvFocus),t.attachEvent("onblur",o._listenerEvBlur)),t=null)},this.disableListener=function(t){t&&(t._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),"function"==typeof window.addEventListener?(t.removeEventListener("focus",o._listenerEvFocus,!1),t.removeEventListener("blur",o._listenerEvBlur,!1)):(t.detachEvent("onfocus",o._listenerEvFocus),t.detachEvent("onblur",o._listenerEvBlur)),t=null)},this._startListener=function(t){this._tmListener&&window.clearTimeout(this._tmListener),void 0===t._v1&&(t._v1=t.value),t._v1!=t.value&&(this._updateFromInput(t),t._v1=t.value),t._f0&&(this._tmListener=window.setTimeout(function(){o._startListener(t)},100))},this._listenerEvFocus=function(t){var e=(t=t||event).target||t.srcElement;e._f0=!0,o._startListener(e),e=null},this._listenerEvBlur=function(t){var e=(t=t||event).target||t.srcElement;e._f0=!1,e=null},this.i)this._attachEventsToObject(h);return window.dhx4._eventable(this),this._evOnArrowClick=function(t){return this.callEvent("onArrowClick",t)},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnMouseOut=function(t){return this.callEvent("onMouseOut",t)},this._evOnMouseOver=function(t){return this.callEvent("onMouseOver",t)},this.unload=function(){for(var t in this._activeDate=null,this._activeDateCell=null,this._activeInp=null,this._activeMonth=null,this._dateFormat=null,this._dateFormatRE=null,this._lastHover=null,this._tmListener&&window.clearTimeout(this._tmListener),this._tmListener=null,"function"==typeof window.addEventListener?(document.body.removeEventListener("click",o._doOnClick,!1),window.removeEventListener("keydown",o._doOnKeyDown,!1),window.removeEventListener("unload",o._doOnUnload,!1),1==this.conf.touch&&document.body.removeEventListener("touchstart",o._doOnClick,!1)):(document.body.detachEvent("onclick",o._doOnClick),document.body.detachEvent("onkeydown",o._doOnKeyDown),window.detachEvent("onunload",o._doOnKeyDown)),this._doOnClick=null,this._doOnKeyDown=null,this._doOnUnload=null,this.i)this.i[t]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(t),this.disableListener(this.i[t].input),this.i[t]=null,delete this.i[t];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){for(;this.contDates.lastChild.childNodes.length>0;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(var t in this._sel._ta)this._sel._ta[t]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel),this._sel=null}for(var t in this.base.onclick=null,this.base.onmousedown=null,this.base.ontouchstart=null,this.base.onmouseout=null,this.base.parentNode.removeChild(this.base),this.base=null,this._clearDayHover=null,this._clearSelHover=null,this._doOnSelectorChange=null,this._doOnSelectorShow=null,this._drawMonth=null,this._fixLength=null,this._ifrSize=null,this._hide=null,this._hideSelector=null,this._initSelector=null,this._isSelectorVisible=null,this._isVisible=null,this._scrollYears=null,this._show=null,this._showSelector=null,this._strToDate=null,this._updateActiveHours=null,this._updateActiveMinutes=null,this._updateActiveMonth=null,this._updateActiveYear=null,this._updateCellStyle=null,this._updateDateStr=null,this._updateVisibleHours=null,this._updateVisibleMinutes=null,this._updateYearsList=null,this.enableIframe=null,this.hide=null,this.hideTime=null,this.setDate=null,this.setDateFormat=null,this.setYearsRange=null,this.show=null,this.showTime=null,this.unload=null,null!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null),this)delete this[t];t=o=null},this.setDate(this._activeDate),this}function dhtmlXCombo(t,e,i,n,s){var o=this,l=null,r=null;"object"!=typeof t||t.tagName||(t=(l=t).parent,i=l.width,e=l.name,n=l.mode,r=l.skin),this.cont="string"==typeof t?document.getElementById(t):t,this.conf={skin:null,form_name:e||"dhxcombo",combo_width:(parseInt(i)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof n&&void 0!==this.modes[n]?n:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,enabled:!0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&void 0===window.addEventListener?1:0,ro_mode:!1,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:!0,template:{input:"#text#",option:"#text#"},f_func:null,f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:!1,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1}},col_w:null},this.conf.combo_image=1==this.modes[this.conf.opts_type].image,this.t={},this.base=document.createElement("DIV"),this.base.style.width=this.conf.combo_width+"px",this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px;"+(this.conf.combo_image?"margin-left:23px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":""),this.cont.appendChild(this.base),this.list=document.createElement("DIV"),this.list._listId=window.dhx4.newId(),this.list.style.display="none",document.body.insertBefore(this.list,document.body.firstChild),this._doOnListScroll=function(){null!=o.conf.s_tm&&window.clearTimeout(o.conf.s_tm),o.conf.s_tm=window.setTimeout(o._doOnListScrollAction,o.conf.s_time)},this._doOnListScrollAction=function(){o.conf.s_tm=null,"scroll"==o.conf.s_mode&&o.list.scrollHeight-o.list.scrollTop-10<o.list.clientHeight&&o._subloadRequest()},"function"==typeof window.addEventListener?this.list.addEventListener("scroll",this._doOnListScroll,!1):this.list.attachEvent("onscroll",this._doOnListScroll),this.setSkin(r||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"dhx_skyblue"),this._updateTopImage=function(t){this.conf.combo_image&&(this.base.lastChild.innerHTML=null!=t?this.t[t].obj.getTopImage(this.t[t].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))},this._filterOpts=function(t){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var e=String(this.base.firstChild.value).replace(new RegExp(this.conf.f_ac_text+"$","i"),"");if(this.conf.f_server_last!=e.toLowerCase()){if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))return this.conf.f_server_last=e.toLowerCase(),void this.callEvent("onDynXLS",[e]);if(null!=this.conf.f_url){if(0==e.length)return this.conf.f_server_last=e.toLowerCase(),void this.clearAll();if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[e]){this.clearAll(),this.conf.f_server_last=e.toLowerCase();for(var i=0;i<this.conf.f_cache_data[e].data.length;i++)this.load(this.conf.f_cache_data[e].data[i]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[e].dyn_end,this.conf.f_mask=this.conf.f_cache_data[e].mask),!0!==t&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){o.conf.f_server_last=e.toLowerCase(),o.conf.f_mask=e;var i="mask="+encodeURIComponent(e);o.conf.f_dyn&&(i+="&pos=0",o.conf.f_dyn_end=!1);var n=function(i){if(o.conf.f_cache&&(o.conf.f_cache_data[e]||(o.conf.f_cache_data[e]={data:[],dyn_end:!1,mask:e}),o.conf.f_cache_data[e].data.push(i.xmlDoc.responseXML)),o.clearAll(),o.load(i.xmlDoc.responseXML),1==(o.base.offsetWidth>0&&o.base.offsetHeight>0)&&1==o.conf.enabled&&1==o.conf.combo_focus&&!0!==t){if(o.conf.f_ac&&"start"==o.conf.f_mode&&0==o.conf.clear_bsp&&null!=o.list.firstChild){var s=o.list.firstChild._optId,l=String(o.t[s].obj.getText(o.list.firstChild,!0));e==o.base.firstChild.value&&0===String(l).toLowerCase().indexOf(String(e).toLowerCase())&&(o.base.firstChild.value=l,o.conf.f_ac_text=l.substr(e.length),o._selectRange(e.length,l.length))}o._showList(!0),o._checkForMatch()}n=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(o.conf.f_url,i,n):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(o.conf.f_url+(String(o.conf.f_url).indexOf("?")>=0?"&":"?")+i,n)},200)}else{this.conf.f_server_last=e.toLowerCase();var n=0==e.length||new RegExp(("start"==this.conf.f_mode?"^":"")+String(e).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&"),"i"),s=null;for(var l in this.t){var r=!1;if(!0!==n)if(null!=this.conf.f_func){var a=this._getOption(this.t[l].item._optId,i);r=1==this.conf.f_func.apply(window,[e,a])}else{var h=this.t[l].obj.getText(this.t[l].item,!0);r=1==n.test(h)}!0===n||1==r?(this.t[l].item.style.display="",null==s&&e.length>0&&(s=String(this.t[l].obj.getText(this.t[l].item,!0)))):this.t[l].item.style.display="none"}this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=s&&(this.conf.f_ac_text=s.replace(new RegExp("^"+e,"i"),""),this.base.firstChild.value=s,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)),"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0),!0!==t&&(this._showList(!0),this._checkForMatch())}}else this._checkForMatch()},this._searchRO=function(t){this.conf.ro_tm&&window.clearTimeout(this.conf.ro_tm),this.conf.ro_text+=t,this._showList();for(var e=0;e<this.list.childNodes.length;e++){var i=this.list.childNodes[e]._optId;if(0===String(this.t[i].obj.getText(this.list.childNodes[e],!0)).toLowerCase().indexOf(this.conf.ro_text)){this._setSelected(i,!0,!0),this._confirmSelect("script",!1);break}}this.conf.ro_tm=window.setTimeout(function(){o.conf.ro_text=""},this.conf.ro_tm_time)},this._initObj=function(t){void 0!==t.template&&this.setTemplate(t.template),1!=t.add&&1!=this.conf.f_loading&&this.clearAll(!1),this.addOption(t.options)},this._xmlToObj=function(t,e,i){var n={add:!1,options:[]},s=1==e?t:t.getElementsByTagName("complete");if(s.length>0){1==window.dhx4.s2b(s[0].getAttribute("add"))&&(n.add=!0);for(var o=s[0].childNodes,l=0;l<o.length;l++)if(void 0!==o[l].tagName){if("template"==String(o[l].tagName).toLowerCase()){for(var r={},a=0;a<o[l].childNodes.length;a++){if(null!=(_=o[l].childNodes[a]).tagName){var h=_.tagName;if(void 0!==this.conf.template[h]&&(r[h]=window.dhx4._xmlNodeValue(_)),"columns"==h)for(var d=0;d<_.childNodes.length;d++){var c=_.childNodes[d];if(null!=c.tagName&&"column"==c.tagName){var u={};for(var f in{width:1,css:1,header:1,option:1})null!=c.getAttribute(f)&&(u[f]=c.getAttribute(f));for(var f in{header:1,option:1}){var p=c.getElementsByTagName(f);null!=p[0]&&null!=p[0].firstChild&&(u[f]=window.dhx4._xmlNodeValue(p[0]))}null==r.columns&&(r.columns=[]),r.columns.push(u)}c=null}}_=null}this.setTemplate(r)}if("option"==String(o[l].tagName).toLowerCase()){var m=!1;m=1==e?n.options.length==i:window.dhx4.s2b(o[l].getAttribute("selected"));var g={value:o[l].getAttribute("value"),text:window.dhx4._xmlNodeValue(o[l]),selected:m,checked:window.dhx4.s2b(o[l].getAttribute("checked"))};for(var f in{img:1,img_dis:1,img_src:1,img_src_dis:1,css:1})null!=o[l].getAttribute(f)&&(g[f]=o[l].getAttribute(f));for(a=0;a<o[l].childNodes.length;a++)if(null!=o[l].childNodes[a].tagName&&"text"==String(o[l].childNodes[a].tagName).toLowerCase()){g.text={};var _=o[l].childNodes[a];for(d=0;d<_.childNodes.length;d++)null!=_.childNodes[d].tagName&&(g.text[_.childNodes[d].tagName]=window.dhx4._xmlNodeValue(_.childNodes[d]))}n.options.push(g)}}s=o=null}return n},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0}),window.dhx4._eventable(this),this._getNearItem=function(t,e){for(var i=null;null!=t;)t=t[e<0?"previousSibling":"nextSibling"],null==i&&null!=t&&""==t.style.display&&null!=t._optId&&(i=t,t=null);return i},this.setName(this.conf.form_name),this._doOnListMouseMove=function(t){for(var e=(t=t||event).target||t.srcElement;null!=e&&e!=this;)void 0!==e._optId&&(o.conf.tm_hover&&window.clearTimeout(o.conf.tm_hover),o._setSelected(e._optId)),e=e.parentNode;e=null},this._doOnListMouseDown=function(t){(t=t||event).cancelBubble=!0,o.conf.clear_click=!0,window.setTimeout(function(){o.base.firstChild.focus()},1)},this._doOnListMouseUp=function(t){if((t=t||event).button==o.conf.btn_left){for(var e=t.target||t.srcElement;null!=e&&e!=this;){if(void 0!==e._optId){var i=!0;"function"==typeof o.t[e._optId].obj.optionClick&&!0!==o.t[e._optId].obj.optionClick(e,t,o)&&(i=!1),i&&(o._setSelected(e._optId,null,!0),o._confirmSelect("click"))}e=e.parentNode}e=null}},this._doOnListMouseOut=function(t){o.conf.tm_hover&&window.clearTimeout(o.conf.tm_hover),o.conf.tm_hover=window.setTimeout(function(){var t=o.conf.last_match||o.conf.last_selected;null==o.conf.last_match&&null!=o.t[t]&&o.base.firstChild.value!=o.t[t].obj.getText(o.t[t].item,!0)&&(t=null),o._setSelected(t,null,!0)},1)},this._doOnBaseMouseDown=function(t){if(o.conf.enabled&&(o.conf.clear_click=!0,(t=t||event).button==o.conf.btn_left)){var e=t.target||t.srcElement;if(e!=this.firstChild){window.setTimeout(function(){o.base.firstChild.focus()},1);for(var i=e;i!=this&&null!=i;)if(i==this.lastChild){if("function"==typeof o.modes[o.conf.opts_type].topImageClick){var n=o.conf.last_hover||o.conf.last_selected,s=null!=n?o.t[n].item:null;if(!0!==o.modes[o.conf.opts_type].topImageClick(s,o))return void(n=s=null)}i=null}else i=i.parentNode}o._isListVisible()?o._hideList():(e!=this.firstChild&&(o.conf.clear_blur=!0),o._showList(),o._setSelected(o.conf.last_selected,!0,!0)),e=null}},this._doOnBodyMouseDown=function(){o.conf.clear_click?o.conf.clear_click=!1:o._confirmSelect("blur")},this._doOnInputFocus=function(){o.conf.clear_blur=!1,o.conf.tm_confirm_blur&&window.clearTimeout(o.conf.tm_confirm_blur),0==o.conf.combo_focus&&(o.conf.combo_focus=!0,o.callEvent("onFocus",[]))},this._doOnInputBlur=function(){1!=o.conf.clear_blur?(o.conf.tm_confirm_blur&&window.clearTimeout(o.conf.tm_confirm_blur),o.conf.tm_confirm_blur=window.setTimeout(function(){0==o.conf.clear_click&&(o._confirmSelect("blur"),o.conf.combo_focus=!1,o.callEvent("onBlur",[]))},20)):o.conf.clear_blur=!1},this._doOnInputKeyUp=function(t){if(t=t||event,0!=o.conf.f_mode)return o.conf.clear_bsp=8==t.keyCode||46==t.keyCode,void o._filterOpts();o._checkForMatch()},this._doOnInputKeyDown=function(t){38!=(t=t||event).keyCode&&40!=t.keyCode||t.ctrlKey||t.shiftKey||t.altKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,o._keyOnUpDown(38==t.keyCode?-1:1)),113==t.keyCode&&(o._isListVisible()||(o._showList(),o.base.firstChild.value==o.conf.last_text?(o._setSelected(o.conf.last_selected,!0,!0),o.base.firstChild.value=o.conf.last_text,o.conf.f_server_last=o.base.firstChild.value.toLowerCase()):(o.conf.f_server_last=o.base.firstChild.value.toLowerCase(),0==o.conf.f_mode&&o._checkForMatch()))),27==t.keyCode&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,o._cancelSelect()),13==t.keyCode&&(t.preventDefault&&t.preventDefault(),o._confirmSelect("kbd")),1==o.conf.ro_mode&&(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90)&&(o._searchRO(String.fromCharCode(t.keyCode).toLowerCase()),t.cancelBubble=!0),o.conf.clear_key=!0,o.callEvent("onKeyPressed",[t.keyCode||t.charCode])},this._doOnInputKeyPress=function(t){o.conf.clear_key?o.conf.clear_key=!1:(t=t||event,o.callEvent("onKeyPressed",[t.keyCode||t.charCode]))},this._keyOnUpDown=function(t){var e=null;if(this.conf.last_hover?e=this.t[this.conf.last_hover].item:this.conf.last_selected&&(e=this.t[this.conf.last_selected].item),(e||0!=this._getListVisibleCount())&&(null!=e&&""!=e.style.display&&(e=null),this._showList(),null!=e?this.t[e._optId].obj.isSelected(e)&&(e=this._getNearItem(e,t)):""!=(e=this.list.firstChild).style.display&&(e=this._getNearItem(e,1)),null!=e)){if(this._setSelected(e._optId,!0,!0),0==this.conf.f_mode)this.base.firstChild.value=this.t[e._optId].obj.getText(e,!0);else{var i=String(this.t[e._optId].obj.getText(e,!0));"start"==this.conf.f_mode&&1==this.conf.f_ac?0===i.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=i.substring(this.conf.f_server_last.length,i.length),this.base.firstChild.value=i,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())}e=null}},this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var a=0;a<this.conf.evs_nodes.length;a++)for(var h in this.conf.evs_nodes[a].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[a].node.addEventListener(h,this[this.conf.evs_nodes[a].evs[h]],!1):this.conf.evs_nodes[a].node.attachEvent("on"+h,this[this.conf.evs_nodes[a].evs[h]]);return this.unload=function(){this.clearAll(),this.t=null;for(var t=0;t<this.conf.evs_nodes.length;t++){for(var e in this.conf.evs_nodes[t].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[t].node.removeEventListener(e,this[this.conf.evs_nodes[t].evs[e]],!1):this.conf.evs_nodes[t].node.detachEvent("on"+e,this[this.conf.evs_nodes[t].evs[e]]),this.conf.evs_nodes[t].evs[e]=null,delete this.conf.evs_nodes[t].evs[e];this.conf.evs_nodes[t].node=null,this.conf.evs_nodes[t].evs=null,delete this.conf.evs_nodes[t].node,delete this.conf.evs_nodes[t].evs,this.conf.evs_nodes[t]=null}for(var e in window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this._mcDetachHeader(),this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null,this.conf)this.conf[e]=null,delete this.conf[e];for(var e in this.conf=null,"function"==typeof window.addEventListener?this.list.removeEventListener("scroll",this._doOnListScroll,!1):this.list.detachEvent("onscroll",this._doOnListScroll),this.base.parentNode.removeChild(this.base),this.list.parentNode.removeChild(this.list),this.base=this.list=this.cont=null,this.modes=null,this)"function"==typeof this[e]&&(this[e]=null);o=null},this.DOMelem_input=this.base.firstChild,this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)],this.DOMlist=this.list,this.DOMelem=this.base,this.DOMParent=t,t=null,null!=l&&(null!=l.filter&&("string"==typeof l.filter?this.enableFilteringMode(!0,l.filter,window.dhx4.s2b(l.filter_cache),window.dhx4.s2b(l.filter_sub_load)):this.enableFilteringMode(!0)),null!=l.image_path&&this.setImagePath(l.image_path),null==l.default_image&&null==l.default_image_dis||this.setDefaultImage(l.default_image,l.default_image_dis),(l.items||l.options)&&this.addOption(l.items||l.options),(l.xml||l.json)&&this.load(l.xml||l.json),void 0!==l.readonly&&this.readonly(l.readonly),l=null),this}function dhtmlXComboFromSelect(t){"string"==typeof t&&(t=document.getElementById(t));var e=t.offsetWidth,i=t.getAttribute("name")||null,n=document.createElement("SPAN");t.parentNode.insertBefore(n,t);var s=new dhtmlXCombo(n,i,e,t.getAttribute("mode")||t.getAttribute("opt_type")||"option");n=null;var o=t.getAttribute("imagePath");o&&s.setImagePath(o);var l=t.getAttribute("defaultImage"),r=t.getAttribute("defaultImageDis");1==window.dhx4.s2b(r)&&(r=!0),null==l&&null==r||s.setDefaultImage(l,r);var a=s._xmlToObj([t],!0,t.selectedIndex);return a.options.length>0&&s.addOption(a.options),a=null,t.parentNode.removeChild(t),t=null,s}function dhtmlXComboExtend(t,e){for(var i in dhtmlXCombo.prototype.modes[e])void 0===dhtmlXCombo.prototype.modes[t][i]&&(dhtmlXCombo.prototype.modes[t][i]=dhtmlXCombo.prototype.modes[e][i])}function dhtmlXMenuObject(t,e){var i=this;if(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"dhx_skyblue",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",arrow_ff_fix:navigator.userAgent.indexOf("MSIE")>=0&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24},tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]},"object"==typeof t&&null!=t&&void 0===t.tagName){for(var n in null==t.icons_path&&null==t.icon_path||(this.conf.icons_path=t.icons_path||t.icon_path),null!=t.skin&&(this.conf.skin=t.skin),t.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:t.visible_area.x1,x2:t.visible_area.x2,y1:t.visible_area.y1,y2:t.visible_area.y2}),{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1})null!=t[n]&&(this.conf.autoload[n]=t[n]);t=t.parent}if(null==t)this.base=document.body;else{var s="string"==typeof t?document.getElementById(t):t;null!=s?(this.base=s,this.base.id||(this.base.id="menuBaseId_"+(new Date).getTime()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1}):this.base=document.body}for(var n in this.idPrefix="",this.topId="dhxWebMenuTopId",this.idPull={},this.itemPull={},this.userData={},this.radio={},this.setSkin=function(t){var e=this.conf.skin;switch(this.conf.skin=t,this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2,this.conf.tl_rmarg=1,this.conf.tl_ofsleft=1;break;case"dhx_terrace":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}for(var i in this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+e+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle"),this.idPull)this.idPull[i].className=String(this.idPull[i].className).replace(e,this.conf.skin)},this.setSkin(this.conf.skin),this._addSubItemToSelected=function(t,e){for(var i=!0,n=0;n<this.conf.selected_sub.length;n++)this.conf.selected_sub[n][0]==t&&this.conf.selected_sub[n][1]==e&&(i=!1);return 1==i&&this.conf.selected_sub.push(new Array(t,e)),i},this._removeSubItemFromSelected=function(t,e){for(var i=new Array,n=!1,s=0;s<this.conf.selected_sub.length;s++)this.conf.selected_sub[s][0]==t&&this.conf.selected_sub[s][1]==e?n=!0:i[i.length]=this.conf.selected_sub[s];return 1==n&&(this.conf.selected_sub=i),n},this._getSubItemToDeselectByPolygon=function(t){for(var e=new Array,i=0;i<this.conf.selected_sub.length;i++)if(this.conf.selected_sub[i][1]==t){e[e.length]=this.conf.selected_sub[i][0],e=e.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[i][0]));for(var n=!0,s=0;s<this.conf.opened_poly.length;s++)this.conf.opened_poly[s]==this.conf.selected_sub[i][0]&&(n=!1);1==n&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[i][0]),this.conf.selected_sub[i][0]=-1,this.conf.selected_sub[i][1]=-1}return e},this._hidePolygon=function(t){if(null!=this.idPull["polygon_"+t]){if(null!=this.idPull["polygon_"+t]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+t]._zId),void 0!==this._menuEffect&&!1!==this._menuEffect)this._hidePolygonEffect("polygon_"+t);else{if("none"==this.idPull["polygon_"+t].style.display)return;this.idPull["polygon_"+t].style.display="none",null!=this.idPull["arrowup_"+t]&&(this.idPull["arrowup_"+t].style.display="none"),null!=this.idPull["arrowdown_"+t]&&(this.idPull["arrowdown_"+t].style.display="none"),this._updateItemComplexState(t,!0,!1),window.dhx4.isIE6&&null!=this.idPull["polygon_"+t+"_ie6cover"]&&(this.idPull["polygon_"+t+"_ie6cover"].style.display="none")}(t=String(t).replace(this.idPrefix,""))==this.topId&&(t=null),this.callEvent("onHide",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!0)}},this._showPolygon=function(t,e){var i=this._countVisiblePolygonItems(t);if(0!=i){var n="polygon_"+t;if(null!=this.idPull[n]&&null!=this.idPull[t]){if(this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&!this.idPull[t]._mouseOver&&e==this.conf.dir_toplv)return;this.conf.fixed_pos||this._autoDetectVisibleArea();var s=null,o=null;if(null==this.idPull[n]._zId&&(this.idPull[n]._zId=window.dhx4.newId()),this.idPull[n]._zInd=window.dhx4.zim.reserve(this.idPull[n]._zId),this.idPull[n].style.visibility="hidden",this.idPull[n].style.left="0px",this.idPull[n].style.top="0px",this.idPull[n].style.display="",this.idPull[n].style.zIndex=this.idPull[n]._zInd,this.conf.auto_overflow)if(this.idPull[n].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-this.conf.v.y1){var l=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-2*this.conf.of_ah[this.conf.skin])/this.conf.of_ih[this.conf.skin]),1);this.conf.overflow_limit=l}else this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+t]&&this._removeUpArrow(String(t).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+t]&&this._removeDownArrow(String(t).replace(this.idPrefix,""));if(this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(null==this.idPull["arrowup_"+t]&&this._addUpArrow(String(t).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+t]&&this._addDownArrow(String(t).replace(this.idPrefix,"")),(s=this.idPull["arrowup_"+t]).style.display="none",(o=this.idPull["arrowdown_"+t]).style.display="none"),this.conf.overflow_limit>0&&this.conf.overflow_limit<i?(this.idPull[n].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px",s.style.width=o.style.width=this.idPull[n].childNodes[1].style.width=this.idPull[n].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[n].childNodes[1].scrollTop=0,s.style.display="",s.offsetHeight,o.style.display="",o.offsetHeight):(this.idPull[n].childNodes[1].style.height="",this.idPull[n].childNodes[1].style.width=""),null!=this.itemPull[t])this.itemPull[t].parent;else if(this.conf.context)this.idPull[this.idPrefix+this.topId];var r=null!=this.idPull[t].tagName?window.dhx4.absLeft(this.idPull[t]):this.idPull[t][0],a=null!=this.idPull[t].tagName?window.dhx4.absTop(this.idPull[t]):this.idPull[t][1],h=null!=this.idPull[t].tagName?this.idPull[t].offsetWidth:0,d=null!=this.idPull[t].tagName?this.idPull[t].offsetHeight:0,c=0,u=0,f=this.idPull[n].offsetWidth,p=this.idPull[n].offsetHeight;if("bottom"==e&&(c=this.conf.rtl?r+(null!=h?h:0)-f:"right"==this.conf.align?r+h-f:r-1+(e==this.conf.dir_toplv?this.conf.tl_rmarg:0),u=a-1+d+this.conf.tl_botmarg),"right"==e&&(c=r+h-1,u=a+2),"left"==e&&(c=r-this.idPull[n].offsetWidth+2,u=a+2),"top"==e&&(c=r-1,u=a-p+2),this.conf.fixed_pos)var m=65536,g=65536;else{m=null!=this.conf.v.x2?this.conf.v.x2:0,g=null!=this.conf.v.y2?this.conf.v.y2:0;0==m&&(window.innerWidth?(m=window.innerWidth,g=window.innerHeight):(m=document.body.offsetWidth,g=document.body.scrollHeight))}if(c+f>m&&!this.conf.rtl&&(c=r-f+2),c<this.conf.v.x1&&this.conf.rtl&&(c=r+h-2),c<0&&(c=0),u+p>g&&null!=this.conf.v.y2&&(u=Math.max(a+d-p+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==t&&null!=o&&(u-=2),null==this.itemPull[t]||this.conf.context||this.itemPull[t].parent==this.idPrefix+this.topId&&(u-=this.base.offsetHeight)),this.idPull[n].style.left=c+"px",this.idPull[n].style.top=u+"px",void 0!==this._menuEffect&&!1!==this._menuEffect)this._showPolygonEffect(n);else if(this.idPull[n].style.visibility="",this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(this.idPull[n].childNodes[1].scrollTop=0,this._checkArrowsState(t)),window.dhx4.isIE6){var _=n+"_ie6cover";if(null==this.idPull[_]){var v=document.createElement("IFRAME");v.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,v.frameBorder=0,v.setAttribute("src","javascript:false;"),document.body.insertBefore(v,document.body.firstChild),this.idPull[_]=v}this.idPull[_].style.left=c+"px",this.idPull[_].style.top=u+"px",this.idPull[_].style.width=this.idPull[n].offsetWidth+"px",this.idPull[_].style.height=this.idPull[n].offsetHeight+"px",this.idPull[_].style.zIndex=this.idPull[n].style.zIndex-1,this.idPull[_].style.display=""}(t=String(t).replace(this.idPrefix,""))==this.topId&&(t=null),this.callEvent("onShow",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!1)}}},this._redistribSubLevelSelection=function(t,e){for(;this.conf.opened_poly.length>0;)this.conf.opened_poly.pop();var i=this._getSubItemToDeselectByPolygon(e);this._removeSubItemFromSelected(-1,-1);for(var n=0;n<i.length;n++)null!=this.idPull[i[n]]&&i[n]!=t&&"enabled"==this.itemPull[i[n]].state&&(this.idPull[i[n]].className="sub_item");for(n=0;n<this.conf.opened_poly.length;n++)this.conf.opened_poly[n]!=e&&this._hidePolygon(this.conf.opened_poly[n]);if("enabled"==this.itemPull[t].state){if(this.idPull[t].className="sub_item_selected",this.itemPull[t].complex&&this.conf.dload&&"no"==this.itemPull[t].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(t,!0),this.itemPull[t].loaded="get";var s=t.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in t.params[this.conf.dload_pid]=s,this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)}(this.itemPull[t].complex||this.conf.dload&&"yes"==this.itemPull[t].loaded)&&this.itemPull[t].complex&&null!=this.idPull["polygon_"+t]&&(this._updateItemComplexState(t,!0,!0),this._showPolygon(t,this.conf.dir_sublv)),this._addSubItemToSelected(t,e),this.conf.selected=t}},this._doOnClick=function(t,e,i){if(this.conf.last_click=t,null!=this.itemPull[this.idPrefix+t].href_link&&"enabled"==this.itemPull[this.idPrefix+t].state){var n=document.createElement("FORM"),s=String(this.itemPull[this.idPrefix+t].href_link).split("?");if(n.action=s[0],null!=s[1])for(var o=String(s[1]).split("&"),l=0;l<o.length;l++){var r=String(o[l]).split("="),a=document.createElement("INPUT");a.type="hidden",a.name=r[0]||"",a.value=r[1]||"",n.appendChild(a)}return null!=this.itemPull[this.idPrefix+t].href_target&&(n.target=this.itemPull[this.idPrefix+t].href_target),n.style.display="none",document.body.appendChild(n),n.submit(),void(null!=n&&(document.body.removeChild(n),n=null))}if("c"!=e.charAt(0)&&"d"!=e.charAt(1)&&"s"!=e.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[t,this.conf.ctx_zoneid,i]);else if("d"==e.charAt(1)||"win"==this.conf.mode&&"t"==e.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}},this._doOnTouchMenu=function(t){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[t]))},this._searchMenuNode=function(t,e){for(var i=new Array,n=0;n<e.length;n++)if("object"==typeof e[n]){5==e[n].length&&"object"!=typeof e[n][0]&&e[n][0].replace(this.idPrefix,"")==t&&0==n&&(i=e);var s=this._searchMenuNode(t,e[n]);s.length>0&&(i=s)}return i},this._getMenuNodes=function(t){var e=new Array;for(var i in this.itemPull)this.itemPull[i].parent==t&&(e[e.length]=i);return e},this._genStr=function(t){for(var e="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<t;n++)e+=i.charAt(Math.round(Math.random()*(i.length-1)));return e},this.getItemType=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:this.itemPull[t].type},this.forEachItem=function(t){for(var e in this.itemPull)t(String(e).replace(this.idPrefix,""))},this._clearAndHide=function(){for(i.conf.selected=-1,i.conf.last_click=-1;i.conf.opened_poly.length>0;)i.conf.opened_poly.pop();for(var t=0;t<i.conf.selected_sub.length;t++){var e=i.conf.selected_sub[t][0];null!=i.idPull[e]&&"enabled"==i.itemPull[e].state&&("sub_item_selected"==i.idPull[e].className&&(i.idPull[e].className="sub_item"),i.idPull[e].className=="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected"&&(null!=i.itemPull[e].cssNormal?i.idPull[e].className=i.itemPull[e].cssNormal:i.idPull[e].className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal")),i._hidePolygon(e)}i.conf.is_touched=!1,i.conf.context&&i.conf.ctx_hideall&&i._hidePolygon(i.idPrefix+i.topId)},this._showSubLevelItem=function(t,e){null!=document.getElementById("arrow_"+this.idPrefix+t)&&(document.getElementById("arrow_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById("image_"+this.idPrefix+t)&&(document.getElementById("image_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById(this.idPrefix+t)&&(document.getElementById(this.idPrefix+t).style.display=e?"":"none")},this._hideSubLevelItem=function(t){this._showSubLevelItem(t,!0)},this.idPrefix=this._genStr(12)+"_",this._bodyClick=function(t){2==(t=t||event).button||window.dhx4.isOpera&&1==t.ctrlKey||(i.conf.context?i.conf.ctx_autohide&&(!window.dhx4.isOpera||i._isContextMenuVisible()&&window.dhx4.isOpera)&&i._hideContextMenu():i._clearAndHide&&i._clearAndHide())},this._bodyContext=function(t){t=t||event;var e=String((t.srcElement||t.target).className);if(-1==e.search("dhtmlxMenu")||-1==e.search("SubLevelArea")){for(var n=!0,s=t.target||t.srcElement;null!=s;)null!=s.id&&i.isContextZone(s.id)&&(n=!1),s==document.body&&(n=!1),s=s.parentNode;n&&i.hideContextMenu()}},void 0!==window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)),this.unload=function(){window.dhx4._eventable(this,"clear"),dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(t){}if(this.conf.live_id=null,"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.conf.context)for(var t in this.conf.ctx_zones)this.removeContextZone(t);for(var t in null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null),null!=this.base&&(this.conf.context||(this.base.className=""),this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null),this)this[t]=null;i=null},dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this,window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0}),window.dhx4._eventable(this),1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu(),null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload),{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[n]&&("function"==typeof this.conf.autoload[n]?this.attachEvent(n,this.conf.autoload[n]):"function"==typeof window[this.conf.autoload[n]]&&this.attachEvent(n,window[this.conf.autoload[n]]));for(var n in null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text),null!=this.conf.autoload.align&&this.setAlign(this.conf.autoload.align),null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode),null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow),this.conf.autoload)this.conf.autoload[n]=null,delete this.conf.autoload[n];return this.conf.autoload=null,this}function dhtmlXToolbarObject(t,e){var i=this;for(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue",align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null},"object"==typeof t&&null!=t&&void 0===t.tagName&&(null==t.icons_path&&null==t.icon_path||(this.conf.icons_path=t.icons_path||t.icon_path),null!=t.icons_size&&(this.conf.icons_size_autoload=t.icons_size),null!=t.json&&(this.conf.json_autoload=t.json),null!=t.xml&&(this.conf.xml_autoload=t.xml),null!=t.onload&&(this.conf.onload_autoload=t.onload),null==t.onclick&&null==t.onClick||(this.conf.auto_onclick=t.onclick||t.onClick),null!=t.items&&(this.conf.items_autoload=t.items),null!=t.skin&&(this.conf.skin=t.skin),null!=t.align&&(this.conf.align_autostart=t.align),t=t.parent),this.cont="object"!=typeof t?document.getElementById(t):t;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);return t=null,this.cont.dir="ltr",this.base=document.createElement("DIV"),this.base.className="dhxtoolbar_float_left",this.cont.appendChild(this.base),window.dhx4.isIPad&&(this.cont.ontouchstart=function(t){return t=t||event,"input"==String(t.target.tagName||"").toLowerCase()||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1)}),this.setSkin(this.conf.skin),this.objPull={},this.anyUsed="none",this._genStr=function(t){for(var e="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<t;n++)e+=i.charAt(Math.round(Math.random()*(i.length-1)));return e},this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput"),this.idPrefix=this._genStr(12),window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0}),window.dhx4._eventable(this),this._getObj=function(t,e){for(var i=null,n=0;n<t.childNodes.length;n++)null!=t.childNodes[n].tagName&&String(t.childNodes[n].tagName).toLowerCase()==String(e).toLowerCase()&&(i=t.childNodes[n]);return i},this._addImgObj=function(t){var e=document.createElement("IMG");return t.childNodes.length>0?t.insertBefore(e,t.childNodes[0]):t.appendChild(e),e},this._setItemImage=function(t,e,i){if(1==i?t.imgEn=e:t.imgDis=e,!(!t.state&&1==i||t.state&&0==i)){var n=this._getObj(t.obj,"img");null==n&&(n=this._addImgObj(t.obj)),n.src=this.conf.icons_path+e}},this._clearItemImage=function(t,e){if(1==e?t.imgEn="":t.imgDis="",!(!t.state&&1==e||t.state&&0==e)){var i=this._getObj(t.obj,"img");null!=i&&i.parentNode.removeChild(i)}},this._setItemText=function(t,e){var i=this._getObj(t.obj,"div");null!=e&&0!=e.length?(null==i&&((i=document.createElement("DIV")).className="dhxtoolbar_text",t.obj.appendChild(i)),i.innerHTML=e):null!=i&&i.parentNode.removeChild(i)},this._getItemText=function(t){var e=this._getObj(t.obj,"div");return null!=e?e.innerHTML:""},this._enableItem=function(t){if(!t.state){t.state=!0,"buttonTwoState"==this.objPull[t.id].type&&1==this.objPull[t.id].obj.pressed?(t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",t.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",t.obj.renderAs=t.obj.className),t.arw&&(t.arw.className=String(t.obj.className).replace("btn","arw"));var e=this._getObj(t.obj,"img");""!=t.imgEn?(null==e&&(e=this._addImgObj(t.obj)),e.src=this.conf.icons_path+t.imgEn):null!=e&&e.parentNode.removeChild(e)}},this._disableItem=function(t){if(t.state){t.state=!1,t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+("buttonTwoState"==this.objPull[t.id].type&&t.obj.pressed?"pres_":"")+"dis",t.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",t.arw&&(t.arw.className=String(t.obj.className).replace("btn","arw"));var e=this._getObj(t.obj,"img");""!=t.imgDis?(null==e&&(e=this._addImgObj(t.obj)),e.src=this.conf.icons_path+t.imgDis):null!=e&&e.parentNode.removeChild(e),null!=t.polygon&&"none"!=t.polygon.style.display&&(window.dhx4.zim.clear(t.polygon._idd),t.polygon.style.display="none",t.polygon._ie6cover&&(t.polygon._ie6cover.style.display="none"),"dhx_terrace"==this.conf.skin&&this._improveTerraceButtonSelect(t.id,!0),this.callEvent("onButtonSelectHide",[t.obj.idd])),this.anyUsed="none"}},this.clearAll=function(){for(var t in this.objPull)this._removeItem(String(t).replace(this.idPrefix,""))},this._doOnClick=function(t){i&&i.forEachItem&&i.forEachItem(function(t){if("buttonSelect"==i.objPull[i.idPrefix+t].type){var e=i.objPull[i.idPrefix+t];!0===e.arw._skip?e.arw._skip=!1:"none"!=e.polygon.style.display&&(e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",e.obj.className=e.obj.renderAs,e.arw.className=String(e.obj.renderAs).replace("btn","arw"),i.anyUsed="none",window.dhx4.zim.clear(e.polygon._idd),e.polygon.style.display="none",e.polygon._ie6cover&&(e.polygon._ie6cover.style.display="none"),"dhx_terrace"==i.conf.skin&&i._improveTerraceButtonSelect(e.id,!0),i.callEvent("onButtonSelectHide",[e.obj.idd]))}})},window.dhx4.isIPad?document.addEventListener("touchstart",this._doOnClick,!1):void 0!==window.addEventListener?window.addEventListener("mousedown",this._doOnClick,!1):document.body.attachEvent("onmousedown",this._doOnClick),null!=this.conf.icons_size_autoload&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null),null!=this.conf.items_autoload?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):null!=this.conf.json_autoload?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):null!=this.conf.xml_autoload&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=null),this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null),"function"==typeof this.conf.auto_onclick?this.attachEvent("onClick",this.conf.auto_onclick):"string"==typeof this.conf.auto_onclick&&"function"==typeof window[this.conf.auto_onclick]&&this.attachEvent("onClick",window[this.conf.auto_onclick]),this}function dhtmlxArray(t){return dhtmlx.extend(t||new Array,dhtmlxArray._master)}function dhtmlXGridObject(id){if(dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch(),_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}id?"object"==typeof id?(this.entBox=id,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(id):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()),this.entBox.innerHTML="",dhx4._eventable(this);var self=this;this._wcorr=0,this.fontWidth=7,this.cell=null,this.row=null,this.iconURL="",this.editor=null,this._f2kE=!0,this._dclE=!0,this.combos=new Array(0),this.defVal=new Array(0),this.rowsAr={},this.rowsBuffer=dhtmlxArray(),this.rowsCol=dhtmlxArray(),this._data_cache={},this._ecache={},this._ud_enabled=!0,this.xmlLoader=this.doLoadDetails,this._maskArr=[],this.selectedRows=dhtmlxArray(),this.UserData={},this._sizeFix=this._borderFix=0,this.entBox.className+=" gridbox",this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%",this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%",this.entBox.style.cursor="default",this.entBox.onselectstart=function(){return!1};var t_creator=function(t){var e=document.createElement("TABLE");return e.cellSpacing=e.cellPadding=0,e.style.cssText="width:100%;table-layout:fixed;",e.className=t.substr(2),e};return this.obj=t_creator("c_obj"),this.hdr=t_creator("c_hdr"),this.hdr.style.marginRight="20px",this.hdr.style.paddingRight="20px",this.objBox=document.createElement("DIV"),this.objBox.style.width="100%",this.objBox.style.overflow="auto",this.objBox.appendChild(this.obj),this.objBox.className="objbox",dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),this.hdrBox=document.createElement("DIV"),this.hdrBox.style.width="100%",this.hdrBox.style.height="25px",this.hdrBox.style.overflow="hidden",this.hdrBox.className="xhdr",this.preloadImagesAr=new Array(0),this.sortImg=document.createElement("DIV"),this.sortImg.style.display="none",this.hdrBox.appendChild(this.sortImg),this.hdrBox.appendChild(this.hdr),this.hdrBox.style.position="relative",this.entBox.appendChild(this.hdrBox),this.entBox.appendChild(this.objBox),this.entBox.grid=this,this.objBox.grid=this,this.hdrBox.grid=this,this.obj.grid=this,this.hdr.grid=this,this.cellWidthPX=[],this.cellWidthPC=[],this.cellWidthType=this.entBox.cellwidthtype||"px",this.delim=this.entBox.delimiter||",",this._csvDelim=",",this.hdrLabels=[],this.columnIds=[],this.columnColor=[],this._hrrar=[],this.cellType=dhtmlxArray(),this.cellAlign=[],this.initCellWidth=[],this.fldSort=[],this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20,this.imgURL=window.dhx_globalImgPath||"",this.isActive=!1,this.isEditable=!0,this.useImagesInHeader=!1,this.pagingOn=!1,this.rowsBufferOutSize=0,dhtmlxEvent(window,"unload",function(){try{self.destructor&&self.destructor()}catch(t){}}),this.setSkin=function(t){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+t)+4,this.skin_name=t,this._imgURL&&this.setImagePath(this._imgURL);var e=this.entBox.className.split(" gridbox")[0];switch(this.entBox.className=e+" gridbox gridbox_"+t+(_isIE?" isIE":" isModern"),this.skin_h_correction=0,this.enableAlterCss("ev_"+t,"odd_"+t,this.isTreeGrid()),this._fixAlterCss(),t){case"dhx_terrace":this._srdh=33,this.forceDivInHeader=!0;break;case"dhx_web":this.forceDivInHeader=!0,this._srdh=31;break;case"dhx_skyblue":this.forceDivInHeader=!0}if(_isIE&&this.hdr){var i=this.hdr.parentNode;i.removeChild(this.hdr),i.appendChild(this.hdr)}this.setSizes()},_isIE&&this.preventIECaching(!0),window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject),this._doOnScroll=function(t,e){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]),this.doOnScroll(t,e)},this.doOnScroll=function(t,e){this.hdrBox.scrollLeft=this.objBox.scrollLeft,this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft),e||this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){self._update_srnd_view&&self._update_srnd_view()},100))},this.attachToObject=function(t){t.appendChild(this.globalBox?this.globalBox:this.entBox),this.setSizes()},this.init=function(t){if(this.isTreeGrid()&&!this._h2&&(this._h2=this._createHierarchy(),this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null}),this._hstyles){if(this.skin_name||this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"dhx_skyblue"),this.editStop(),this.lastClicked=null,this.resized=null,this.fldSorted=this.r_fldSorted=null,this.cellWidthPX=[],this.cellWidthPC=[],this.hdr.rows.length>0){var e=this.xmlFileUrl;this.clearAll(!0),this.xmlFileUrl=e}for(var i=this.hdr.insertRow(0),n=0;n<this.hdrLabels.length;n++)i.appendChild(document.createElement("TH")),i.childNodes[n]._cellIndex=n,i.childNodes[n].style.height="0px";_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?i.style.position="absolute":i.style.height="auto",(i=this.hdr.insertRow(_isKHTML?2:1))._childIndexes=new Array;var s=0;for(n=0;n<this.hdrLabels.length;n++)i._childIndexes[n]=n-s,this.hdrLabels[n]!=this.splitSign||0==n?(i.insertCell(n-s),i.childNodes[n-s]._cellIndex=n,i.childNodes[n-s]._cellIndexS=n,this.setColumnLabel(n,this.hdrLabels[n])):(_isKHTML&&i.insertCell(n-s),i.cells[n-s-1].colSpan=(i.cells[n-s-1].colSpan||1)+1,i.childNodes[n-s-1]._cellIndex++,s++,i._childIndexes[n]=n-s);0==s&&(i._childIndexes=null),this._cCount=this.hdrLabels.length,_isIE&&window.setTimeout(function(){self.setSizes&&self.setSizes()},1),this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));var o=this.obj.firstChild;if(!o.firstChild){o.appendChild(document.createElement("TR")),o=o.firstChild,_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?o.style.position="absolute":o.style.height="auto";for(n=0;n<this.hdrLabels.length;n++)o.appendChild(document.createElement("TH")),o.childNodes[n].style.height="0px"}this._c_order=null,1!=this.multiLine&&(this.obj.className+=" row20px"),this.sortImg.style.position="absolute",this.sortImg.style.display="none",this.sortImg.className="dhxgrid_sort_desc",this.sortImg.defLeft=0,this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1,this._ivizcol&&this.setColHidden(),this.attachHeader(),this.attachHeader(0,0,"_aFoot"),this.setSizes(),t&&this.parseXML(),this.obj.scrollTop=0,this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this),this._initDrF&&this._initD(),dhx4.callEvent("onGridCreated",[this])}},this.setColumnSizes=function(t){for(var e=0,i=[],n=0,s=0;s<this._cCount;s++)if("*"!=this.initCellWidth[s]||this._hrrar[s]){if("%"==this.cellWidthType){void 0===this.cellWidthPC[s]&&(this.cellWidthPC[s]=this.initCellWidth[s]);var o=t*this.cellWidthPC[s]/100||0;n>.5&&(o++,n--);n=n+o-(this.cellWidthPX[s]=Math.floor(o))}else void 0===this.cellWidthPX[s]&&(this.cellWidthPX[s]=this.initCellWidth[s]);this._hrrar[s]||(e+=1*this.cellWidthPX[s])}else this._awdth=!1,i.push(s);if(i.length){var l=Math.floor((t-e)/i.length);l<0&&(l=1);for(s=0;s<i.length;s++){var r=Math.max(this._drsclmW&&this._drsclmW[i[s]]||0,l);this.cellWidthPX[i[s]]=r,e+=r}if(t>e){var a=i[i.length-1];this.cellWidthPX[a]=this.cellWidthPX[a]+(t-e),e=t}this._setAutoResize()}return this.obj.style.width=e+"px",this.hdr.style.width=e+"px",this.ftr&&(this.ftr.style.width=e+"px"),this.chngCellWidth(),e},this.setSizes=function(){if(this.hdr.rows[0]){var t=this.quirks=_isIE&&"BackCompat"==document.compatMode,e=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){if(!this.globalBox.clientWidth)return;var i=this.globalBox.clientWidth,n=(this.globalBox.offsetWidth-i)/2;if(this._delta_x&&!this._realfake){this.globalBox.style.width=this._delta_x;var s=this.globalBox.clientWidth;this.entBox.style.width=Math.max(0,s+(t?2*n:0)-this._fake.entBox.clientWidth)+"px",s!=this._lastTimeSplitWidth&&(this._fake._correctSplit(this._fake.entBox.clientWidth),this._lastTimeSplitWidth=s)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(t?2*n:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*e+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);if(window.clearTimeout(this._sizeTime),this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth){var o=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||t?0:2,l=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||t?0:2;this._sizeFix&&(o-=this._sizeFix,l-=this._sizeFix);var r=!this.parentGrid&&this.objBox.scrollHeight>this.objBox.offsetHeight,a=dhtmlx.$customScroll?0:18,h=this.entBox.clientWidth-(this.skin_h_correction||0)*(t?0:1)-o,d=this.entBox.clientWidth-(this.skin_h_correction||0)-o,c=this.entBox.clientHeight-l,u=this.setColumnSizes(d-(r?a:0)-(this._correction_x||0)),f=!this.parentGrid&&(this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX),p=this.hdr.clientHeight,m=this.ftr?this.ftr.clientHeight:0,g=h,_=c-p-m;if(this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(f=0),this._ahgr&&(_=this._ahgrMA?this.entBox.parentNode.clientHeight-p-m:this.obj.offsetHeight+(f?a:0)+(this._correction_y||0),this._ahgrM&&(_=this._ahgrF?Math.min(this._ahgrM,_+p+m)-p-m:Math.min(this._ahgrM,_)),r&&_>=this.obj.scrollHeight+(f?a:0)&&(r=!1,this.setColumnSizes(d-(this._correction_x||0)))),this._awdth&&this._awdth[0]){"%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(u+=this._fake.entBox.clientWidth);g=Math.min(Math.max(u+(r?a:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=!r&&this.objBox.scrollWidth<=g?"hidden":"auto",this._fake&&(g-=this._fake.entBox.clientWidth)}_=Math.max(0,_),this._ff_size_delta=.1==this._ff_size_delta?.2:.1,_isFF||(this._ff_size_delta=0),this.dontSetSizes||(this.entBox.style.width=Math.max(0,g+(t?2:0)*e+this._ff_size_delta)+"px",this.entBox.style.height=_+(t?2:0)*e+p+m+"px"),this.objBox.style.height=_+(t&&!r?2:0)*e+"px",this.hdrBox.style.height=p+"px",_!=c&&this.doOnScroll(0,!this._srnd);var v=this["setSizes_"+this.skin_name];v&&v.call(this),this.setSortImgPos(),p!=this.hdr.clientHeight&&this._ahgr&&this.setSizes(),this.callEvent("onSetSizes",[])}else this._sizeTime=window.setTimeout(function(){self.setSizes&&self.setSizes()},250)}},this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var t=this._cCount,e=0;e<t;e++)this.hdr.rows[0].cells[e].style.width=this.cellWidthPX[e]+"px",this.obj.rows[0].childNodes[e].style.width=this.cellWidthPX[e]+"px",this.ftr&&(this.ftr.rows[0].cells[e].style.width=this.cellWidthPX[e]+"px")},this.setDelimiter=function(t){this.delim=t},this.setInitWidthsP=function(t){this.cellWidthType="%",this.initCellWidth=t.split(this.delim.replace(/px/gi,"")),arguments[1]||this._setAutoResize()},this._setAutoResize=function(){if(!this._realfake){window;var t=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(t._resize_timer),t._setAutoResize&&(t._resize_timer=window.setTimeout(function(){t.setSizes&&t.setSizes(),t._fake&&t._fake._correctSplit()},100))})}},this.setInitWidths=function(t){if(this.cellWidthType="px",this.initCellWidth=t.split(this.delim),_isFF)for(var e=0;e<this.initCellWidth.length;e++)"*"!=this.initCellWidth[e]&&(this.initCellWidth[e]=parseInt(this.initCellWidth[e]))},this.enableMultiline=function(t){this.multiLine=dhx4.s2b(t)},this.enableMultiselect=function(t){this.selMultiRows=dhx4.s2b(t)},this.setImagePath=function(t){t=t.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/"),this._imgURL=t,this.imgURL=t+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/",this.iconTree=this.imgURL+"tree/"},this.setImagesPath=this.setImagePath,this.setIconPath=function(t){this.iconURL=t},this.setIconsPath=this.setIconPath,this.changeCursorState=function(t){var e=t.target||t.srcElement;if("TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD")),e){if("TD"==e.tagName&&this._drsclmn&&!this._drsclmn[e._cellIndex])return e.style.cursor="default";var i=(t.layerX||0)+(_isIE||"DIV"!=t.target.tagName?0:e.offsetLeft);e.offsetWidth-(t.offsetX||-1*(parseInt(this.getPosition(e,this.hdrBox))-i))<(_isOpera?20:10)?e.style.cursor="E-resize":e.style.cursor="default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this.startColResize=function(t){this.resized&&this.stopColResize(),this.resized=null;var e=t.target||t.srcElement;"TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD"));var i=t.clientX,n=this.hdr.offsetWidth,s=parseInt(e.offsetWidth);if("TD"==e.tagName&&"default"!=e.style.cursor){if(this._drsclmn&&!this._drsclmn[e._cellIndex])return;self._old_d_mm=document.body.onmousemove,self._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(t){self&&self.doColResize(t||window.event,e,s,i,n)},document.body.onmouseup=function(){self&&self.stopColResize()}}},this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"",document.body.onmouseup=self._old_d_mu||"",this.setSizes(),this.doOnScroll(0,1),this.callEvent("onResizeEnd",[this])},this.doColResize=function(t,e,i,n,s){e.style.cursor="E-resize",this.resized=e;var o=i+(t.clientX-n);t.clientX;if(this.callEvent("onResize",[e._cellIndex,o,this])){_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft);var l=!1;if(e.colSpan>1){for(var r=new Array,a=0;a<e.colSpan;a++)r[a]=Math.round(o*this.hdr.rows[0].childNodes[e._cellIndexS+a].offsetWidth/e.offsetWidth);for(a=0;a<e.colSpan;a++)l=this._setColumnSizeR(e._cellIndexS+1*a,r[a])}else l=this._setColumnSizeR(e._cellIndex,o);return this.doOnScroll(0,1),this.setSizes(),this._fake&&this._awdth&&this._fake._correctSplit(),l}},this._setColumnSizeR=function(t,e){if(!(e>(this._drsclmW&&!this._notresize&&this._drsclmW[t]||10)))return!1;if(this.obj.rows[0].childNodes[t].style.width=e+"px",this.hdr.rows[0].childNodes[t].style.width=e+"px",this.ftr&&(this.ftr.rows[0].childNodes[t].style.width=e+"px"),"px"==this.cellWidthType)this.cellWidthPX[t]=e;else{var i=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(i-=17);var n=Math.round(e/i*100);this.cellWidthPC[t]=n}"none"!=this.sortImg.style.display&&this.setSortImgPos()},this.setSortImgState=function(t,e,i,n){if(i=(i||"asc").toLowerCase(),!dhx4.s2b(t))return this.sortImg.style.display="none",void(this.fldSorted=this.r_fldSorted=null);this.sortImg.className="asc"==i?"dhxgrid_sort_asc":"dhxgrid_sort_desc",this.sortImg.style.display="",this.fldSorted=this.hdr.rows[0].childNodes[e];var s=this.hdr.rows[n||1];if(s){for(var o=0;o<s.childNodes.length;o++)if(s.childNodes[o]._cellIndexS==e)return this.r_fldSorted=s.childNodes[o],this.setSortImgPos();return this.setSortImgState(t,e,i,(n||1)+1)}},this.setSortImgPos=function(t,e,i,n){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:t]){if(!n)if(t)n=this.hdr.rows[i||0].cells[t];else var n=this.r_fldSorted;if(null!=n){var s=this.getPosition(n,this.hdrBox),o=n.offsetWidth;this.sortImg.style.left=Number(s[0]+o-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(s[1]+5)+"px",this.useImagesInHeader||e||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"}}},this.setActive=function(t){if(0==arguments.length)t=!0;1==t?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))},this._doClick=function(t){var e=0,i=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(i&&i.parentNode&&i.parentNode.idd){if(this.markedCells){var n=0;return(t.shiftKey||t.metaKey)&&(n=1),t.ctrlKey&&(n=2),this.doMark(i,n),!0}return 0!=this.selMultiRows&&(t.shiftKey&&null!=this.row&&this.selectedRows.length&&(e=1),(t.ctrlKey||t.metaKey)&&(e=2)),this.doClick(i,!0,e,!1)}},this._doContClick=function(t){var e=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(!e||void 0===e.parentNode.idd)return this.callEvent("onEmptyClick",[t]),!0;if(2==t.button||_isMacOS&&t.ctrlKey){if(!this.callEvent("onRightClick",[e.parentNode.idd,e._cellIndex,t])){var i=function(t){return(t||event).cancelBubble=!0,!1};return(t.srcElement||t.target).oncontextmenu=i,i(t)}if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[e.parentNode.idd,e._cellIndex,this]))return!0;if(_isIE&&(t.srcElement.oncontextmenu=function(){return event.cancelBubble=!0,!1}),this._ctmndx.showContextMenu){var n=window.document.documentElement,s=window.document.body,o=new Array(n.scrollLeft||s.scrollLeft,n.scrollTop||s.scrollTop);if(_isIE)var l=t.clientX+o[0],r=t.clientY+o[1];else l=t.pageX,r=t.pageY;this._ctmndx.showContextMenu(l-1,r-1),this.contextID=this._ctmndx.contextMenuZoneId=e.parentNode.idd+"_"+e._cellIndex,this._ctmndx._skip_hide=!0}else e.contextMenuId=e.parentNode.idd+"_"+e._cellIndex,e.contextMenu=this._ctmndx,e.a=this._ctmndx._contextStart,e.a(e,t),e.a=null;return t.cancelBubble=!0,!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0},this.doClick=function(t,e,i,n){this.selMultiRows||(i=0);var s=this.row?this.row.idd:0;if(this.setActive(!0),i||(i=0),null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")),"TD"==t.tagName){if(this.checkEvent("onSelectStateChanged"))var o=this.getSelectedId();var l=this.row;if(1==i){var r=this.rowsCol._dhx_find(t.parentNode),a=this.rowsCol._dhx_find(this.lastClicked);if(r>a)var h=a,d=r;else h=r,d=a;for(var c=0;c<this.rowsCol.length;c++)if(c>=h&&c<=d){if(!this.rowsCol[c]||this.rowsCol[c]._sRow)return this.clearSelection(),this.doClick(t,e,0,n);if(!this.rowsCol[c].idd)continue;-1==this.rowsCol[c].className.indexOf("rowselected")&&this.callEvent("onBeforeSelect",[this.rowsCol[c].idd,s,t._cellIndex])&&(this.rowsCol[c].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[c])}}else if(2==i&&-1!=t.parentNode.className.indexOf("rowselected")){t.parentNode.className=t.parentNode.className.replace(/rowselected/g,""),this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(t.parentNode));var u=!0;n=!1}if(this.editStop(),void 0===t.parentNode.idd)return!0;if(u||t.parentNode._sRow||(this.callEvent("onBeforeSelect",[t.parentNode.idd,s,t._cellIndex])?this.getSelectedRowId()!=t.parentNode.idd?(0==i&&this.clearSelection(),this.cell=t,l==t.parentNode&&this._chRRS&&(e=!1),this.row=t.parentNode,this.row.className+=" rowselected",-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=t,this.row=t.parentNode):e=!1),this.cell&&-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"),1!=i&&!this.row)return;this.lastClicked=t.parentNode;var f=this.row.idd,p=this.cell;if(e&&void 0!==f&&p&&!u?self.onRowSelectTime=setTimeout(function(){self.callEvent&&self.callEvent("onRowSelect",[f,p._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[f]),this.checkEvent("onSelectStateChanged")){var m=this.getSelectedId();o!=m&&this.callEvent("onSelectStateChanged",[m,o])}if(u)return!1}this.isActive=!0,!1!==n&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)},this.selectAll=function(){this.clearSelection();var t=this.rowsBuffer;this.pagingOn&&(t=this.rowsCol);for(var e=0;e<t.length;e++)this.render_row(e).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(t)),this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]),this._fake&&!this._realfake&&this._fake.selectAll()},this.selectCell=function(t,e,i,n,s,o){if(i||(i=!1),"object"!=typeof t&&(t=this.render_row(t)),!t||-1==t)return null;if(t._childIndexes)var l=t.childNodes[t._childIndexes[e]];else l=t.childNodes[e];l||(l=t.childNodes[0]),this.markedCells?this.doMark(l,n?2:0):n?this.doClick(l,i,3,o):this.doClick(l,i,0,o),s&&this.editCell()},this.moveToVisible=function(t,e){if(this.pagingOn){var i=Math.floor(this.getRowIndex(t.parentNode.idd)/this.rowsBufferOutSize)+1;i!=this.currentPage&&this.changePage(i)}try{if(t.offsetHeight){var n=t.offsetLeft+t.offsetWidth+20,s=0;n>this.objBox.offsetWidth+this.objBox.scrollLeft?t.offsetLeft>this.objBox.scrollLeft&&(s=t.offsetLeft-(this.objBox.offsetWidth-t.offsetWidth)+5):t.offsetLeft<this.objBox.scrollLeft&&(n-=2*t.offsetWidth/3)<this.objBox.scrollLeft&&(s=t.offsetLeft-5),s&&!e&&(this.objBox.scrollLeft=s)}if(t.offsetHeight)n=t.offsetTop;else{var o=this._realfake?this._fake.rowsAr[t.parentNode.idd]:t.parentNode;n=this.rowsBuffer._dhx_find(o)*this._srdh}if(n+t.offsetHeight+38>this.objBox.offsetHeight+this.objBox.scrollTop)var l=n;else if(n<this.objBox.scrollTop)l=n-5;l&&(this.objBox.scrollTop=l)}catch(t){}},this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){if(this.editStop(),1!=this.isEditable||!this.cell)return!1;var t=this.cell;if(t.parentNode._locked)return!1;if(this.editor=this.cells4(t),null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),this.editor.edit(),t.className+=" editable",this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}},this.editStop=function(t){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),t){var e=this.editor.val;return this.editor.detach(),this.editor.setValue(e),this.editor=null,void this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,e])}this.editor.detach()&&(this.cell.wasChanged=!0);var i=this.editor;if(null==i)return;this.editor=null;var n=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,i.getValue(),i.val]);"string"==typeof n||"number"==typeof n?i[i.setImage?"setLabel":"setValue"](n):n||i[i.setImage?"setLabel":"setValue"](i.val),this._ahgr&&this.multiLine&&this.setSizes()}},this._nextRowCell=function(t,e,i){return(t=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(t),e))?t.childNodes[t._childIndexes?t._childIndexes[i]:i]:null},this._getNextCell=function(t,e,i){var n=(t=t||this.cell).parentNode;this._tabOrder?void 0!==(i=this._tabOrder[t._cellIndex])&&(t=i<0?this._nextRowCell(n,e,Math.abs(i)-1):n.childNodes[i]):(i=t._cellIndex+e)>=0&&i<this._cCount?(n._childIndexes&&(i=n._childIndexes[t._cellIndex]+e),t=n.childNodes[i]):t=this._nextRowCell(n,e,1==e?0:this._cCount-1);return t?"none"==t.style.display||this.smartTabOrder&&this.cells(t.parentNode.idd,t._cellIndex).isDisabled()?this._getNextCell(t,e):t:(1==e&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==e&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null)},this._nextRow=function(t,e){var i=this.render_row(t+e);return i&&-1!=i?i&&"none"==i.style.display?this._nextRow(t+e,e):i:null},this.scrollPage=function(t){if(this.rowsBuffer.length){var e=this._realfake?this._fake:this,i=Math.floor((e._r_select||this.getRowIndex(this.row.idd)||0)+t*this.objBox.offsetHeight/(this._srdh||20));i<0&&(i=0),i>=this.rowsBuffer.length&&(i=this.rowsBuffer.length-1),this._srnd&&!this.rowsBuffer[i]?(this.objBox.scrollTop+=Math.floor(t*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),e._r_select=i):(this.selectCell(i,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(i)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)),e._r_select=null)}},this.doKey=function(t){if(!t)return!0;if((t.target||t.srcElement).value!==window.undefined){var e=t.target||t.srcElement;if("dhxcombo_input"!=e.className&&(!e.parentNode||-1==e.parentNode.className.indexOf("editable")))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(t);if(0==this.isActive)return!0;if(this._htkebl)return!0;if(!this.callEvent("onKeyPress",[t.keyCode,t.ctrlKey,t.shiftKey,t]))return!1;var i="k"+t.keyCode+"_"+(t.ctrlKey?1:0)+"_"+(t.shiftKey?1:0);if(this.cell){if(this._key_events[i])return!1===this._key_events[i].call(this)||(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1);this._key_events.k_other&&this._key_events.k_other.call(this,t)}return!0},this.selectRow=function(t,e,i,n){"object"!=typeof t&&(t=this.render_row(t)),this.selectCell(t,0,e,i,!1,n)},this.wasDblClicked=function(t){var e=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(e){var i=e.parentNode.idd;return this.callEvent("onRowDblClicked",[i,e._cellIndex,t])}},this._onHeaderClick=function(t,e){var i=this.grid;if(e=e||i.getFirstParentOfType(_isIE?event.srcElement:t.target,"TD"),null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[e._cellIndexS,t||window.event]))return!1;i.sortField(e._cellIndexS,!1,e)}this.grid.resized=null},this.deleteSelectedRows=function(){var t=this.selectedRows.length;if(0!=t){var e=this.selectedRows;this.selectedRows=dhtmlxArray();for(var i=t-1;i>=0;i--){var n=e[i];if(this.deleteRow(n.idd,n)){if(n==this.row)var s=i}else this.selectedRows[this.selectedRows.length]=n}if(s)try{s+1>this.rowsCol.length&&s--,this.selectCell(s,0,!0)}catch(t){this.row=null,this.cell=null}}},this.getSelectedRowId=function(){for(var t=new Array(0),e={},i=0;i<this.selectedRows.length;i++){var n=this.selectedRows[i].idd;e[n]||(t[t.length]=n,e[n]=!0)}return 0==t.length?null:t.join(this.delim)},this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1},this.getColWidth=function(t){return parseInt(this.cellWidthPX[t])},this.setColWidth=function(t,e){if("*"==e)this.initCellWidth[t]="*";else{if(this._hrrar[t])return;"px"==this.cellWidthType?this.cellWidthPX[t]=parseInt(e):this.cellWidthPC[t]=parseInt(e)}this.setSizes()},this.getRowIndex=function(t){for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==t)return e;return-1},this.getRowId=function(t){return this.rowsBuffer[t]?this.rowsBuffer[t].idd:this.undefined},this.setRowId=function(t,e){this.changeRowId(this.getRowId(t),e)},this.changeRowId=function(t,e){if(t!=e){var i=this.rowsAr[t];i.idd=e,this.UserData[t]&&(this.UserData[e]=this.UserData[t],this.UserData[t]=null),this._h2&&this._h2.get[t]&&(this._h2.get[e]=this._h2.get[t],this._h2.get[e].id=e,delete this._h2.get[t]),this.rowsAr[t]=null,this.rowsAr[e]=i;for(var n=0;n<i.childNodes.length;n++)i.childNodes[n]._code&&(i.childNodes[n]._code=this._compileSCL(i.childNodes[n]._val,i.childNodes[n]));if(this._mat_links&&this._mat_links[t]){var s=this._mat_links[t];for(var o in delete this._mat_links[t],s)for(n=0;n<s[o].length;n++)this._compileSCL(s[o][n].original,s[o][n])}this.callEvent("onRowIdChange",[t,e])}},this.setColumnIds=function(t){this.columnIds=t.split(this.delim)},this.setColumnId=function(t,e){this.columnIds[t]=e},this.getColIndexById=function(t){for(var e=0;e<this.columnIds.length;e++)if(this.columnIds[e]==t)return e},this.getColumnId=function(t){return this.columnIds[t]},this.getColumnLabel=function(t,e,i){for(var n=(i||this.hdr).rows[(e||0)+1],s=0;s<n.cells.length;s++)if(n.cells[s]._cellIndexS==t)return _isIE?n.cells[s].innerText:n.cells[s].textContent;return""},this.getColLabel=this.getColumnLabel,this.getFooterLabel=function(t,e){return this.getColumnLabel(t,e,this.ftr)},this.setRowTextBold=function(t){var e=this.getRowById(t);e&&(e.style.fontWeight="bold")},this.setRowTextStyle=function(t,e){var i=this.getRowById(t);if(i)for(var n=0;n<i.childNodes.length;n++){var s=i.childNodes[n]._attrs.style||"";this._hrrar&&this._hrrar[n]&&(s="display:none;"),_isIE,i.childNodes[n].style.cssText=s+"width:"+i.childNodes[n].style.width+";"+e}},this.setRowColor=function(t,e){for(var i=this.getRowById(t),n=0;n<i.childNodes.length;n++)i.childNodes[n].bgColor=e},this.setCellTextStyle=function(t,e,i){var n=this.getRowById(t);if(n){var s=n.childNodes[n._childIndexes?n._childIndexes[e]:e];if(s){var o="";this._hrrar&&this._hrrar[e]&&(o="display:none;"),_isIE,s.style.cssText=o+"width:"+s.style.width+";"+i}}},this.setRowTextNormal=function(t){var e=this.getRowById(t);e&&(e.style.fontWeight="normal")},this.doesRowExist=function(t){return null!=this.getRowById(t)},this.getColumnsNum=function(){return this._cCount},this.moveRowUp=function(t){var e=this.getRowById(t);if(this.isTreeGrid())return this.moveRowUDTG(t,-1);var i=this.rowsCol._dhx_find(e);if(e.previousSibling&&0!=i){e.parentNode.insertBefore(e,e.previousSibling),this.rowsCol._dhx_swapItems(i,i-1),this.setSizes();var n=this.rowsBuffer._dhx_find(e);this.rowsBuffer._dhx_swapItems(n,n-1),this._cssEven&&this._fixAlterCss(i-1)}},this.moveRowDown=function(t){var e=this.getRowById(t);if(this.isTreeGrid())return this.moveRowUDTG(t,1);var i=this.rowsCol._dhx_find(e);if(e.nextSibling){this.rowsCol._dhx_swapItems(i,i+1),e.nextSibling.nextSibling?e.parentNode.insertBefore(e,e.nextSibling.nextSibling):e.parentNode.appendChild(e),this.setSizes();var n=this.rowsBuffer._dhx_find(e);this.rowsBuffer._dhx_swapItems(n,n+1),this._cssEven&&this._fixAlterCss(i)}},this.getCombo=function(t){return this.combos[t]||(this.combos[t]=new dhtmlXGridComboObject),this.combos[t]},this.setUserData=function(t,e,i){t||(t="gridglobaluserdata"),this.UserData[t]||(this.UserData[t]=new Hashtable),this.UserData[t].put(e,i)},this.getUserData=function(t,e){t||(t="gridglobaluserdata"),this.getRowById(t);var i=this.UserData[t];return i?i.get(e):""},this.setEditable=function(t){this.isEditable=dhx4.s2b(t)},this.selectRowById=function(t,e,i,n){n||(n=!1),this.selectCell(this.getRowById(t),0,n,e,!1,i)},this.clearSelection=function(){this.editStop();for(var t=0;t<this.selectedRows.length;t++){var e=this.rowsAr[this.selectedRows[t].idd];e&&(e.className=e.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray(),this.row=null,null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null),this.callEvent("onSelectionCleared",[])},this.copyRowContent=function(t,e){var i=this.getRowById(t);if(this.isTreeGrid())this._copyTreeGridRowContent(i,t,e);else for(var n=0;n<i.cells.length;n++)this.cells(e,n).setValue(this.cells(t,n).getValue());_isIE||(this.getRowById(t).cells[0].height=i.cells[0].offsetHeight)},this.setFooterLabel=function(t,e,i){return this.setColumnLabel(t,e,i,this.ftr)},this.setColumnLabel=function(t,e,i,n){var s=(n||this.hdr).rows[i||1],o=s._childIndexes?s._childIndexes[t]:t;if(s.cells[o]){if(this.useImagesInHeader){s.cells[o].style.textAlign="left",s.cells[o].innerHTML="<img src='"+e+"'>";var l=new Image;l.src=""+e.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=l;var r=new Image;r.src=""+e.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=r}else{var a="<div class='hdrcell'>";if(-1!=e.indexOf("img:[")){var h=e.replace(/.*\[([^>]+)\].*/,"$1");e=e.substr(e.indexOf("]")+1,e.length),a+="<img width='18px' height='18px' align='absmiddle' src='"+h+"' hspace='2'>"}a+=e,a+="</div>",s.cells[o].innerHTML=a,this._hstyles[o]&&(s.cells[o].style.cssText=this._hstyles[t])}if(-1!=(e||"").indexOf("#")){var d=e.match(/(^|{)#([^}]+)(}|$)/);if(d){var c="_in_header_"+d[2];this[c]&&this[c](this.forceDivInHeader?s.cells[o].firstChild:s.cells[o],o,e.split(d[0]))}}}},this.setColLabel=function(t,e,i,n){return this.setColumnLabel(t,e,(i||0)+1,n)},this.clearAll=function(t){if(this.obj.rows[0]){this._h2&&(this._h2=this._createHierarchy(),this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2)),this.limit=this._limitC=0,this.editStop(!0),this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);this.rowsCol.length;for(var e=this.obj.rows.length-1;e>0;e--){(i=this.obj.rows[e]).parentNode.removeChild(i)}if(t){this._master_row=null,this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(e=this.hdr.rows.length-1;e>=0;e--){var i;(i=this.hdr.rows[e]).parentNode.removeChild(i)}this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null),this._aHead=this.ftr=this.cellWidth=this._aFoot=null,this.cellType=dhtmlxArray(),this._hrrar=[],this.columnIds=[],this.combos=[],this._strangeParams=[],this.defVal=[],this._ivizcol=null}this.row=null,this.cell=null,this.rowsCol=dhtmlxArray(),this.rowsAr={},this._RaSeCol=[],this.rowsBuffer=dhtmlxArray(),this.UserData=[],this.selectedRows=dhtmlxArray(),(this.pagingOn||this._srnd)&&(this.xmlFileUrl=""),this.pagingOn&&this.changePage(1),this._contextCallTimer&&window.clearTimeout(this._contextCallTimer),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,this.setSortImgState(!1),this.setSizes(),this.callEvent("onClearAll",[])}},this.sortField=function(t,e,i){if(0==this.getRowsNum())return!1;var n=this.hdr.rows[0].cells[t];if(n&&"TH"==n.tagName&&this.fldSort.length-1>=n._cellIndex&&"na"!=this.fldSort[n._cellIndex]){var s=this.getSortingState(),o=s[0]==t&&"asc"==s[1]?"des":"asc";if(!this.callEvent("onBeforeSorting",[t,this.fldSort[t],o]))return;if(this.sortImg.className="dhxgrid_sort_"+("asc"==o?"asc":"desc"),this.useImagesInHeader){var l=this.hdr.rows[1].cells[n._cellIndex].firstChild;if(null!=this.fldSorted){var r=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;r.src=r.src.replace(/(\.asc\.)|(\.des\.)/,".")}l.src=l.src.replace(/(\.[a-z]+)$/,"."+o+"$1")}this.sortRows(n._cellIndex,this.fldSort[n._cellIndex],o),this.fldSorted=n,this.r_fldSorted=i;var a=this.hdr.rows[1];(a=i.parentNode)._childIndexes?a._childIndexes[n._cellIndex]:n._cellIndex;this.setSortImgPos(!1,!1,!1,i)}},this.setCustomSorting=function(func,col){this._customSorts||(this._customSorts=new Array),this._customSorts[col]="string"==typeof func?eval(func):func,this.fldSort[col]="cus"},this.enableHeaderImages=function(t){this.useImagesInHeader=t},this.setHeader=function(t,e,i){if("object"!=typeof t)var n=this._eSplit(t);else n=[].concat(t);for(var s=new Array(0),o=new dhtmlxArray(0),l=new Array(0),r=new Array(0),a=new Array(0),h=0;h<n.length;h++)s[s.length]=Math.round(100/n.length),o[o.length]="ed",l[l.length]="left",r[r.length]="middle",a[a.length]="na";this.splitSign=e||"#cspan",this.hdrLabels=n,this.cellWidth=s,this.initCellWidth.length||this.setInitWidthsP(s.join(this.delim),!0),this.cellType=o,this.cellAlign=l,this.cellVAlign=r,this.fldSort=a,this._hstyles=i||[]},this._eSplit=function(t){if(![].push)return t.split(this.delim);var e="r"+(new Date).valueOf(),i=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(t||"").replace(RegExp(i,"g"),e).replace(RegExp("\\\\"+e,"g"),this.delim).split(e)},this.getColType=function(t){return this.cellType[t]},this.getColTypeById=function(t){return this.cellType[this.getColIndexById(t)]},this.setColTypes=function(t){this.cellType=dhtmlxArray(t.split(this.delim)),this._strangeParams=new Array;for(var e=0;e<this.cellType.length;e++){if(-1!=this.cellType[e].indexOf("[")){var i=this.cellType[e].split(/[\[\]]+/g);this.cellType[e]=i[0],this.defVal[e]=i[1],0==i[1].indexOf("=")&&(this.cellType[e]="math",this._strangeParams[e]=i[0])}window["eXcell_"+this.cellType[e]]||dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[e],this,this.cellType[e]])}},this.setColSorting=function(t){this.fldSort=t.split(this.delim);for(var e={str:1,int:1,date:1},i=0;i<this.fldSort.length;i++)e[this.fldSort[i]]||"function"!=typeof window[this.fldSort[i]]||(this._customSorts||(this._customSorts=new Array),this._customSorts[i]=window[this.fldSort[i]],this.fldSort[i]="cus")},this.setColAlign=function(t){this.cellAlign=t.split(this.delim);for(var e=0;e<this.cellAlign.length;e++)this.cellAlign[e]=this.cellAlign[e]._dhx_trim()},this.setColVAlign=function(t){this.cellVAlign=t.split(this.delim)},this.setNoHeader=function(t){this.noHeader=dhx4.s2b(t)},this.showRow=function(t){this.getRowById(t),this._h2&&this.openItem(this._h2.get[t].parent.id);for(var e=this.getRowById(t).childNodes[0];e&&"none"==e.style.display;)e=e.nextSibling;e&&this.moveToVisible(e,!0)},this.setStyle=function(t,e,i,n){this.ssModifier=[t,e,i,i,n];for(var s=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],o=0;!_isIE;){try{document.styleSheets[o].cssRules.length}catch(t){o++;continue}break}for(var l=0;l<s.length;l++)this.ssModifier[l]&&(_isIE?document.styleSheets[0].addRule(s[l],this.ssModifier[l]):document.styleSheets[o].insertRule(s[l]+" { "+this.ssModifier[l]+" }",document.styleSheets[o].cssRules.length))},this.setColumnColor=function(t){this.columnColor=t.split(this.delim)},this.enableAlterCss=function(t,e,i,n){(t||e)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss(),this._fake&&this._fake._fixAlterCss()}),this._cssSP=i,this._cssSU=n,this._cssEven=t,this._cssUnEven=e},this._fixAlterCss=function(t){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(t);if(this._cssEven||this._cssUnEven)for(var e=t=t||0,i=t;i<this.rowsCol.length;i++)if(this.rowsCol[i]&&"none"!=this.rowsCol[i].style.display){if(this.rowsCol[i]._cntr){e=1;continue}-1!=this.rowsCol[i].className.indexOf("rowselected")?this.rowsCol[i].className=e%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[i]._css||""):this._cssEven+" rowselected "+(this.rowsCol[i]._css||""):this.rowsCol[i].className=e%2==1?this._cssUnEven+" "+(this.rowsCol[i]._css||""):this._cssEven+" "+(this.rowsCol[i]._css||""),e++}},this.clearChangedState=function(){for(var t=0;t<this.rowsCol.length;t++){var e=this.rowsCol[t];if(e&&e.childNodes)for(var i=e.childNodes.length,n=0;n<i;n++)e.childNodes[n].wasChanged=!1}},this.getChangedRows=function(t){var e=new Array;return this.forEachRow(function(i){var n=this.rowsAr[i];if("TR"==n.tagName){var s=n.childNodes.length;if(t&&n._added)e[e.length]=n.idd;else for(var o=0;o<s;o++)if(n.childNodes[o].wasChanged){e[e.length]=n.idd;break}}}),e.join(this.delim)},this._sUDa=!1,this._sAll=!1,this.setSerializationLevel=function(t,e,i,n,s,o){this._sUDa=t,this._sAll=e,this._sConfig=i,this._chAttr=n,this._onlChAttr=s,this._asCDATA=o},this.setSerializableColumns=function(t){if(t){this._srClmn=(t||"").split(",");for(var e=0;e<this._srClmn.length;e++)this._srClmn[e]=dhx4.s2b(this._srClmn[e])}else this._srClmn=null},this._serialise=function(t,e,i){this.editStop();var n=[],s="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(t){var e=this._serializeRow(this.render_row_tree(-1,t.id));return n.push(e),!!e},this,function(){n.push(s)});else for(var o=0;o<this.rowsBuffer.length;o++)if(this.rowsBuffer[o]){if(this._chAttr&&this.rowsBuffer[o]._locator)continue;var l=this._serializeRow(this.render_row(o));n.push(l),l&&n.push(s)}return[n.join("")]},this._serializeRow=function(t,e){var i=[],n=this.xml.row_attrs,s=this.xml.cell_attrs;if(i.push("<"+this.xml.s_row),i.push(" id='"+t.idd+"'"),this._sAll&&-1!=this.selectedRows._dhx_find(t)&&i.push(" selected='1'"),this._h2&&"minus"==this._h2.get[t.idd].state&&i.push(" open='1'"),n.length)for(e=0;e<n.length;e++)i.push(" "+n[e]+"='"+t._attrs[n[e]]+"'");if(i.push(">"),this._sUDa&&this.UserData[t.idd]){keysAr=this.UserData[t.idd].getKeys();for(var o=0;o<keysAr.length;o++)i.push("<userdata name='"+keysAr[o]+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[t.idd].get(keysAr[o])+(this._asCDATA?"]]>":"")+"</userdata>")}for(var l=!1,r=0;r<this._cCount;r++)if(!this._srClmn||this._srClmn[r]){var a=this.cells3(t,r);if(i.push("<cell"),s.length)for(e=0;e<s.length;e++)i.push(" "+s[e]+"='"+a.cell._attrs[s[e]]+"'");if(zxVal=a[this._agetm](),this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]>"),this._ecspn&&a.cell.colSpan&&a.cell.colSpan>1&&i.push(' colspan="'+a.cell.colSpan+'" '),this._chAttr?a.wasChanged()&&(i.push(' changed="1"'),l=!0):this._onlChAttr&&a.wasChanged()&&(l=!0),this._sAll&&"tree"==this.cellType[r]?i.push((this._h2?" image='"+this._h2.get[t.idd].image+"'":"")+">"+zxVal+"</cell>"):i.push(">"+zxVal+"</cell>"),this._ecspn&&a.cell.colSpan)for(var h=0;h<a.cell.colSpan-1;h++)i.push("<cell/>"),r++}return!this._onlChAttr||l||t._added?i.join(""):""},this._serialiseConfig=function(){for(var t="<head>",e=0;e<this.hdr.rows[0].cells.length;e++)if(!this._srClmn||this._srClmn[e]){var i=this.fldSort[e];"cus"==i&&(i=(i=this._customSorts[e].toString()).replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),t+="<column width='"+this.getColWidth(e)+"' align='"+this.cellAlign[e]+"' type='"+this.cellType[e]+"' sort='"+(i||"na")+"' color='"+(this.columnColor[e]||"")+"'"+(this.columnIds[e]?" id='"+this.columnIds[e]+"'":"")+">",this._asCDATA?t+="<![CDATA["+this.getColumnLabel(e)+"]]>":t+=this.getColumnLabel(e);var n=this.getCombo(e);if(n)for(var s=0;s<n.keys.length;s++)t+="<option value='"+n.keys[s]+"'>"+n.values[s]+"</option>";t+="</column>"}return t+"</head>"},this.serialize=function(){var t='<?xml version="1.0"?><rows>';if(this._mathSerialization?this._agetm="getMathValue":this._agetm="getValue",this._sUDa&&this.UserData.gridglobaluserdata)for(var e=this.UserData.gridglobaluserdata.getKeys(),i=0;i<e.length;i++)t+="<userdata name='"+e[i]+"'>"+this.UserData.gridglobaluserdata.get(e[i])+"</userdata>";return this._sConfig&&(t+=this._serialiseConfig()),t+=this._serialise(),t+="</rows>"},this.getPosition=function(t,e){if(!e){var i=dhx4.getOffset(t);return[i.left,i.top]}e=e||document.body;for(var n=t,s=0,o=0;n&&n!=e;)s+=n.offsetLeft-n.scrollLeft,o+=n.offsetTop-n.scrollTop,n=n.offsetParent;return e==document.body&&(_isIE?(o+=document.body.offsetTop||document.documentElement.offsetTop,s+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(s+=document.body.offsetLeft,o+=document.body.offsetTop)),[s,o]},this.getFirstParentOfType=function(t,e){for(;t&&t.tagName!=e&&"BODY"!=t.tagName;)t=t.parentNode;return t},this.objBox.onscroll=function(){this.grid._doOnScroll()},this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)},(!_isOpera||_OperaRv>8.5)&&(this.hdr.onmousemove=function(t){this.grid.changeCursorState(t||window.event)},this.hdr.onmousedown=function(t){return this.grid.startColResize(t||window.event)}),this.obj.onmousemove=this._drawTooltip,this.objBox.onclick=function(t){(t=t||event).cancelBubble=!0,this.firstChild.grid.setActive(!0),window.dhx4.callEvent("_onGridClick",[t,this.firstChild.grid])},this.obj.onclick=function(t){!1!==this.grid._doClick(t||window.event)&&(this.grid._sclE?this.grid.editCell(t||window.event):this.grid.editStop()),(t=t||event).cancelBubble=!0,window.dhx4.callEvent("_onGridClick",[t,this.grid])},_isMacOS?this.entBox.oncontextmenu=function(t){t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1;var e=this.grid;return e._realfake&&(e=e._fake),e._doContClick(t||window.event)}:(this.entBox.onmousedown=function(t){return this.grid._doContClick(t||window.event)},this.entBox.oncontextmenu=function(t){return this.grid._ctmndx&&((t||event).cancelBubble=!0),!this.grid._ctmndx}),this.obj.ondblclick=function(t){if(!this.grid.wasDblClicked(t||window.event))return!1;this.grid._dclE&&(this.grid.getFirstParentOfType(_isIE?event.srcElement:t.target,"TR")==this.grid.row&&this.grid.editCell(t||window.event));return(t||event).cancelBubble=!0,!_isOpera&&void 0},this.hdr.onclick=this._onHeaderClick,this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])},this.hdr.ondblclick=this._onHeaderDblClick,document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,"keydown",function(t){if(globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(t||window.event)}),document.body._dhtmlxgrid_onkeydown=!0),dhtmlxEvent(document.body,"click",function(){self.editStop&&self.editStop(),self.isActive&&self.setActive(!1)}),-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height),-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width),(this._delta_x||this._delta_y)&&this._setAutoResize(),this.setColHidden=this.setColumnsVisibility,this.enableCollSpan=this.enableColSpan,this.setMultiselect=this.enableMultiselect,this.setMultiLine=this.enableMultiline,this.deleteSelectedItem=this.deleteSelectedRows,this.getSelectedId=this.getSelectedRowId,this.getHeaderCol=this.getColumnLabel,this.isItemExists=this.doesRowExist,this.getColumnCount=this.getColumnsNum,this.setSelectedRow=this.selectRowById,this.setHeaderCol=this.setColumnLabel,this.preventIECashing=this.preventIECaching,this.enableAutoHeigth=this.enableAutoHeight,this.getUID=this.uid,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function dhtmlXGridCellObject(t){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null,null},this.cell=t,this.getValue=function(){return this.cell.textContent&&"TEXTAREA"==this.cell.textContent.tagName?this.cell.textContent.value:this.cell.innerHTML._dhx_trim()},this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()},this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),"bold"!=this.cell.style.fontWeight&&"bold"!=this.cell.parentNode.style.fontWeight||(arOut[1]="bold"),"italic"!=this.cell.style.fontStyle&&"italic"!=this.cell.parentNode.style.fontWeight||(arOut[1]+="italic"),this.cell.style.fontSize?arOut[2]=this.cell.style.fontSize:arOut[2]="",arOut.join("-")},this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"},this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"},this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"},this.getWidth=function(){return this.cell.scrollWidth},this.setFont=function(t){fntAr=t.split("-"),this.cell.style.fontFamily=fntAr[0],this.cell.style.fontSize=fntAr[fntAr.length-1],3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))},this.setTextColor=function(t){this.cell.style.color=t},this.setBgColor=function(t){""==t&&(t=null),this.cell.style.background=t},this.setHorAlign=function(t){1==t.length?this.cell.style.textAlign="c"==t?"center":"l"==t?"left":"right":this.cell.style.textAlign=t},this.wasChanged=function(){return!!this.cell.wasChanged},this.isCheckbox=function(){var t=this.cell.firstChild;return!(!t||"INPUT"!=t.tagName)&&(type=t.type,"radio"==type||"checkbox"==type)},this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked},this.isDisabled=function(){return this.cell._disabled},this.setChecked=function(t){this.isCheckbox()&&("true"!=t&&1!=t&&(t=!1),this.cell.firstChild.checked=t)},this.setDisabled=function(t){"true"!=t&&1!=t&&(t=!1),this.isCheckbox()&&(this.cell.firstChild.disabled=t,this.disabledF&&this.disabledF(t)),this.cell._disabled=t}}function eXcell(){this.obj=null,this.val=null,this.changeState=function(){return!1},this.edit=function(){this.val=this.getValue()},this.detach=function(){return!1},this.getPosition=function(t){for(var e=t,i=0,n=0;"BODY"!=e.tagName;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return new Array(i,n)}}function eXcell_ed(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.cell.atag=this.grid.multiLine?"TEXTAREA":"INPUT",this.val=this.getValue(),this.obj=document.createElement(this.cell.atag),this.obj.setAttribute("autocomplete","off"),this.obj.style.height=this.cell.offsetHeight-(_isIE,4)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.obj),this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},_isIE&&(this.obj.focus(),this.obj.blur()),this.obj.focus()},this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)}}function eXcell_edn(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){var t=this.obj.value;return this.setValue(t),this.val!=this.getValue()}}function eXcell_ch(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(t){!0!==t||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0)),!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()},this.setChecked=function(t){this.setValue(t.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function eXcell_ra(t){this.base=eXcell_ch,this.base(t),this.grid=t.parentNode.grid,this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")},this.changeState=function(t){!1===t&&1==this.getValue()||!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.edit=null}function eXcell_txt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_textarea",this.obj.onclick=function(t){(t||event).cancelBubble=!0};var t=this.grid.getPosition(this.cell);if(this.obj.value=this.val,this.obj.style.display="",this.obj.style.textAlign=this.cell.style.textAlign,document.body.appendChild(this.obj),_isOpera&&(this.obj.onkeypress=function(t){if(9==t.keyCode||27==t.keyCode)return!1}),this.obj.onkeydown=function(t){var e=t||event;if(9==e.keyCode||27==e.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:e.keyCode,shiftKey:e.shiftKey,srcElement:"0"}),!1},this.obj.style.left=t[0]+"px",this.obj.style.top=t[1]+this.cell.offsetHeight+"px",this.cell.offsetWidth<200)var e=200;else e=this.cell.offsetWidth;this.obj.style.width=e+16+"px",_isIE&&(this.obj.select(),this.obj.value=this.obj.value),this.obj.focus()},this.detach=function(){var t;return t=this.obj.value,this.cell._clearCell=""==t,this.setValue(t),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()},this.getValue=function(){return this.obj?this.obj.value:this.cell._clearCell?"":void 0!==this.cell._brval?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){this.cell._brval=t,t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)}}function eXcell_co(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0),this.shiftNext=function(){var t=this.list.options[this.list.selectedIndex+1];return t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0},this.shiftPrev=function(){if(0!=this.list.selectedIndex){var t=this.list.options[this.list.selectedIndex-1];t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text}return!0},this.edit=function(){this.val=this.getValue(),this.text=this.getText()._dhx_trim();var t=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_combo_edit",this.obj.style.height=this.cell.offsetHeight-(_isIE,4)+"px",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.text,this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0};var e=this;this.obj.onkeyup=function(t){var i=(t||event).keyCode;if(38!=i&&40!=i&&9!=i)for(var n=this.readonly?String.fromCharCode(i):this.value,s=e.list.options,o=0;o<s.length;o++)if(0==s[o].text.indexOf(n))return s[o].selected=!0},this.list=document.createElement("SELECT"),this.list.className="dhx_combo_select",this.list.style.width=this.cell.offsetWidth+"px",this.list.style.left=t[0]+"px",this.list.style.top=t[1]+this.cell.offsetHeight+"px",this.list.onclick=function(t){var i=t||window.event,n=i.target||i.srcElement;"OPTION"==n.tagName&&(n=n.parentNode),e.editable=!1,e.grid.editStop(),i.cancelBubble=!0};for(var i=this.combo.getKeys(),n=!1,s=0,o=0;o<i.length;o++){var l=this.combo.get(i[o]);this.list.options[this.list.options.length]=new Option(l,i[o]),i[o]==this.val&&(s=this.list.options.length-1,n=!0)}0==n&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),s=this.list.options.length-1),document.body.appendChild(this.list),this.list.size="6",this.cstate=1,this.editable?this.cell.innerHTML="":(this.obj.style.width="1px",this.obj.style.height="1px"),this.cell.appendChild(this.obj),this.list.options[s].selected=!0,this.editable&&(this.obj.focus(),this.obj.focus()),this.editable||(this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(t){if(t=t||window.event,e.grid.setActive(!0),t.keyCode<30)return e.grid.doKey({target:e.cell,keyCode:t.keyCode,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey})})},this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value},this.detach=function(){if(this.val!=this.getValue()&&(this.cell.wasChanged=!0),null!=this.list.parentNode)if(this.editable){var t=this.list.options[this.list.selectedIndex];if(t&&t.text==this.obj.value)this.setValue(this.list.value);else{var e=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),i=e.values._dhx_find(this.obj.value);-1!=i?this.setValue(e.keys[i]):this.setValue(this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);return this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cotxt(t){this.base=eXcell_co,this.base(t)}function eXcell_corotxt(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cp(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("SPAN"),this.obj.style.border="1px solid black",this.obj.style.position="absolute";var t=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj),document.body.appendChild(this.obj),this.obj.style.left=t[0]+"px",this.obj.style.zIndex=1e3,this.obj.style.top=t[1]+this.cell.offsetHeight+"px"},this.toolDNum=function(t){return 1==t.length&&(t="0"+t),t},this.colorPanel=function(t,e){var i=document.createElement("TABLE");e.appendChild(i),i.cellSpacing=0,i.editor_obj=this,i.style.cursor="default",i.onclick=function(t){var e=t||window.event,i=e.target||e.srcElement,n=i.parentNode.parentNode.parentNode.editor_obj;n&&(n.setValue(i._bg),n.grid.editStop())};for(var n=256/t,s=0;s<=256/n;s++)for(var o=i.insertRow(s),l=0;l<=256/n;l++)for(var r=0;r<=256/n;r++){R=new Number(n*s)-(0==s?0:1),G=new Number(n*l)-(0==l?0:1),B=new Number(n*r)-(0==r?0:1);var a=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+this.toolDNum(B.toString(16)),h=o.insertCell(l);h.width="10px",h.innerHTML="&nbsp;",h.title=a.toUpperCase(),h.style.backgroundColor="#"+a,h._bg="#"+a,null!=this.val&&"#"+a.toUpperCase()==this.val.toUpperCase()&&(h.style.border="2px solid white")}},this.getValue=function(){return this.cell.firstChild._bg||""},this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))},this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))},this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))},this.detach=function(){return null!=this.obj.offsetParent&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var t=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");return t+="^"+this.cell.lnk,this.cell.trg&&(t+="^"+this.cell.trg),t}},this.isDisabled=function(){return!0}}function eXcell_price(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}function eXcell_ro(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}function eXcell_rotxt(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(t){t?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)},this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(t,e){for(var i=0;i<this.keys.length;i++)if(this.keys[i]==t)return this.values[i]=e,!0;this.values[this.values.length]=e,this.keys[this.keys.length]=t},this.get=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.values[e];return null},this.clear=function(){this.keys=new dhtmlxArray,this.values=new dhtmlxArray},this.remove=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.keys._dhx_removeAt(e),this.values._dhx_removeAt(e),!0},this.size=function(){for(var t=0,e=0;e<this.keys.length;e++)null!=this.keys[e]&&t++;return t},this.getKeys=function(){for(var t=new Array(0),e=0;e<this.keys.length;e++)null!=this.keys[e]&&(t[t.length]=this.keys[e]);return t},this.save=function(){this._save=new Array;for(var t=0;t<this.keys.length;t++)this._save[t]=[this.keys[t],this.values[t]]},this.restore=function(){if(this._save){this.keys[t]=new Array,this.values[t]=new Array;for(var t=0;t<this._save.length;t++)this.keys[t]=this._save[t][0],this.values[t]=this._save[t][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dragContext(t,e,i,n,s,o,l,r,a,h){return this.source=t||"grid",this.target=e||"grid",this.mode=i||"move",this.dropmode=n||"child",this.sid=s||0,this.tid=o,this.sobj=l||null,this.tobj=r||null,this.sExtra=a||null,this.tExtra=h||null,this}function eXcell_stree(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_trees)return;if(this._sub=this.grid._sub_trees[t._cellIndex],!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val},this.setValue=function(t){this.cell._val=t,t=this._sub.getItemText(this.cell._val),this.setCValue(t||"&nbsp;",t)},this.edit=function(){this._sub.parentObject.style.display="block";var t=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=t[1]+"px",this._sub.parentObject.style.left=t[0]+"px",this._sub.parentObject.style.position="absolute";var e=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=e},this.detach=function(){if(this._sub.parentObject.style.display="none",null!=this.grid._sub_id){var t=this.cell._val;return this.setValue(this._sub.getSelectedItemId()),this.grid._sub_id=null,this.cell._val!=t}}}function eXcell_link(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.isDisabled=function(){return!0},this.edit=function(){},this.getValue=function(){if(this.cell.firstChild.getAttribute){var t=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(t?"^"+t:"")}return""},this.setValue=function(t){if("number"!=typeof t&&(!t||""==t.toString()._dhx_trim()))return this.setCValue("&nbsp;",e),this.cell._clearCell=!0;var e=t.split("^");1==e.length?e[1]="":e.length>1&&(e[1]="href='"+e[1]+"'",3==e.length?e[1]+=" target='"+e[2]+"'":e[1]+=" target='_blank'"),this.setCValue("<a "+e[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+e[0]+"</a>",e)}}function eXcell_grid(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_grids)return;if(this._sub=this.grid._sub_grids[t._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return this.cell.val},this.setValue=function(t){this.cell.val=t,this._sub.getRowById(t)&&(t=(t=this._sub.cells(t,this._sindex))?t.getValue():""),this.setCValue(t||"&nbsp;",t)},this.edit=function(){this.val=this.cell.val,this._sub.entBox.style.display="block";var t=this.grid.getPosition(this.cell);this._sub.entBox.style.top=t[1]+"px",this._sub.entBox.style.left=t[0]+"px",this._sub.entBox.style.position="absolute",this._sub.setSizes();var e=this.grid.editStop;this.grid.editStop=function(){},this._sub.getRowById(this.cell.val)&&this._sub.setSelectedRow(this.cell.val),this._sub.setActive(!0),this.grid.editStop=e},this.detach=function(){var t=this.cell.val;return this._sub.entBox.style.display="none",null!==this._sub.getSelectedId()&&(this.setValue(this._sub.getSelectedId()),this.grid.setActive(!0),this.cell.val!=t)}}function eXcell_dhxCalendar(t){if(t&&(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var i=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0});dhtmlxEvent(e.base,"click",function(t){(t||event).cancelBubble=!0}),e=null}}function eXcell_dhxCalendarA(t){if(t&&(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var i=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0});dhtmlxEvent(e.base,"click",function(t){(t||event).cancelBubble=!0})}}function eXcell_cntr(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEn",function(e){this.resetCounter(t._cellIndex)});var e=function(){var e=this;return window.setTimeout(function(){e.resetCounter&&(e._fake&&!e._realfake&&t._cellIndex<e._fake._cCount?e._fake.resetCounter(t._cellIndex):e.resetCounter(t._cellIndex))},1),!0};this.grid.attachEvent("onBeforeSorting",e),this.grid.attachEvent("onFilterEnd",e)}this.edit=function(){},this.getValue=function(){return this.cell.innerHTML},this.setValue=function(t){this.cell.style.paddingRight="2px";var e=this.cell;window.setTimeout(function(){if(e.parentNode){var t=e.parentNode.rowIndex;(e.parentNode.grid.currentPage||t<0||e.parentNode.grid._srnd)&&(t=e.parentNode.grid.rowsBuffer._dhx_find(e.parentNode)+1),t<=0||(e.innerHTML=t,e.parentNode.grid._fake&&e._cellIndex<e.parentNode.grid._fake._cCount&&e.parentNode.grid._fake.rowsAr[e.parentNode.idd]&&e.parentNode.grid._fake.cells(e.parentNode.idd,e._cellIndex).setCValue(t),e=null)}},100)}}function eXcell_acheck(t){try{this.cell=t,this.grid=this.cell.parentNode.grid,this.cell.obj=this}catch(t){}this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("<checkbox state='false'>"):this.setValue("<checkbox state='true'>"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){try{return this.cell.chstate.toString()}catch(t){return null}},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()},this.setChecked=function(t){this.setValue(t.toString())},this.detach=function(){return this.val!=this.getValue()},this.drawCurrentState=function(){return 1==this.cell.chstate?"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>":"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}function eXcell_context(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_context)return;if(this._sub=this.grid._sub_context[t._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){this.cell._val=t;var e=this._sub.itemPull[this._sub.idPrefix+this.cell._val];t=e?e.title:t,this.setCValue(t||"&nbsp;",t)},this.edit=function(){var t=this.grid.getPosition(this.cell);this._sub.showContextMenu(t[0]+this.cell.offsetWidth,t[1]);var e=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=e},this.detach=function(){if(null!=this.grid._sub_id){var t=this.cell._val;return this.setValue(this.grid._sub_id),this.grid._sub_id=null,this.cell._val!=t}this._sub.hideContextMenu()}}function dhtmlXGridFromTable(obj,init){"object"!=typeof obj&&(obj=document.getElementById(obj));var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?obj.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).width:obj.currentStyle?obj.currentStyle.width:0)),w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?obj.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).height:obj.currentStyle?obj.currentStyle.height:0)),w.className=obj.className,obj.className="",obj.id&&(w.id=obj.id);var mr=obj,drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||"name_"+(new Date).valueOf(),windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit"),acs2=mr.getAttribute("oninit");acs&&eval(acs),windowf.setImagePath(windowf.imgURL||mr.getAttribute("imgpath")||mr.getAttribute("image_path")||"");var skin=mr.getAttribute("skin");skin&&windowf.setSkin(skin),init&&init(windowf);for(var hrow=mr.rows[0],za="",zb="",zc="",zd="",ze="",i=0;i<hrow.cells.length;i++){za+=(za?",":"")+hrow.cells[i].innerHTML;var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null).width:hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0);zb+=(zb?",":"")+("*"==width?width:parseInt(width)),zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left"),zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed"),ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");f_a&&(-1!=hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")?windowf._dtmask=f_a:windowf.setNumberFormat(f_a,i))}windowf.setHeader(za),windowf.setInitWidths(zb),windowf.setColAlign(zc),windowf.setColTypes(zd),windowf.setColSorting(ze),"auto"==obj.getAttribute("gridHeight")&&windowf.enableAutoHeigth(!0),obj.getAttribute("multiline")&&windowf.enableMultiline(!0);var lmn=mr.getAttribute("lightnavigation");lmn&&windowf.enableLightMouseNavigation(lmn);var evr=mr.getAttribute("evenrow"),uevr=mr.getAttribute("unevenrow");return(evr||uevr)&&windowf.enableAlterCss(evr,uevr),drag&&windowf.enableDragAndDrop(!0),windowf.init(),obj.getAttribute("split")&&windowf.splitAt(obj.getAttribute("split")),windowf._process_inner_html(mr,1),acs2&&eval(acs2),obj.parentNode&&obj.parentNode.removeChild&&obj.parentNode.removeChild(obj),windowf}function eXcell_math(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.grid.editor=new eXcell_ed(this.cell),this.grid.editor.fix_self=!0,this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue,this.grid.editor.setValue=this.setValue,this.grid.editor.edit()},this.isDisabled=function(){return!this.grid._mathEdit},this.setValue=function(t){t=this.grid._compileSCL(t,this.cell,this.fix_self),this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(t):(this.setCValue(t),this.cell._clearCell=!1)},this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}function eXcell_time(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.innerHTML.toString()},this.setValue=function(t){var e=new RegExp(" ","i");if(""==(t=t.replace(e,":")))t="00:00";else{e=new RegExp("[a-zA-Z]","i");if(t.match(e))t="00:00";else{e=new RegExp("[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+","i");if(-1!=t.search(e)){e=new RegExp("[\\./\\;\\-\\,\\_\\]\\[ \\?]","i");t=t.replace(e,":")}else{e=new RegExp("[^0-9]","i");if(res1=t.search(e),t.match(e))t="00:00";else if(1==t.length)t="00:0"+t;else if(parseInt(t)<60)t="00:"+t;else if(t.length<5){var i=parseInt(t);i-=60*(n=Math.floor(i/60));var n=n.toString();for(i=i.toString();n.length<2;)n="0"+n;for(;i.length<2;)i="0"+i;t=n+":"+i}}}}this.cell.innerHTML=t}}function eXcell_sub_row(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")},this._setState=function(t,e){(e||this.cell).innerHTML="<img src='"+this.grid.imgURL+t+"' width='18' height='18' />",(e||this.cell).firstChild.onclick=this.grid._expandMonolite},this.open=function(){this.cell.firstChild.onclick(null,!0)},this.close=function(){this.cell.firstChild.onclick(null,!1,!0)},this.isOpen=function(){return!!this.cell.parentNode._expanded},this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this._setState(t?"plus.gif":"blank.gif")},this.setContent=function(t){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=t,this.resize()):(this.cell._previous_content=null,this.setValue(t),this.cell._sub_row_type=null)},this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)},this.isDisabled=function(){return!0},this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}function eXcell_sub_row_ajax(t){this.base=eXcell_sub_row,this.base(t),this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this.cell._sub_row_type="ajax",this.cell._previous_content=null,this._setState(t?"plus.gif":"blank.gif")}}function eXcell_sub_row_grid(t){this.base=eXcell_sub_row,this.base(t),this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this.cell._sub_row_type="grid",this._setState(t?"plus.gif":"blank.gif")},this.getSubGrid=function(){return t._sub_grid?t._sub_grid:null}}function eXcell_ra_str(t){t&&(this.base=eXcell_ra,this.base(t),this.grid=t.parentNode.grid)}function eXcell_combo(t){t&&(this.cell=t,this.grid=t.parentNode.grid,this._combo_pre="",this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL),this.val=this.getValue();var t=this.getText();this.cell._clearCell&&(t=""),this.cell.innerHTML="",this.cell._brval?this.combo=this.cell._brval:this.combo=(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex],this.cell.appendChild(this.combo.DOMParent),this.combo.DOMParent.style.margin="0",this.combo.DOMelem_input.focus(),this.combo.setSize(this.cell.offsetWidth-2),this.combo._xml?this.combo.setComboText(t):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(t)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(t).value)):this.combo.setComboText(t),this.combo.openSelect()},this.selectComboOption=function(t,e){e.selectOption(e.getIndexByValue(e.getOptionByLabel(t).value))},this.getValue=function(t){return this.cell.combo_value||""},this.getText=function(t){var e=this.cell;return""==this._combo_pre&&e.childNodes[1]?e=e.childNodes[1]:e.childNodes[0].childNodes[1],_isIE?e.innerText:e.textContent},this.setValue=function(t){if("object"==typeof t){this.cell._brval=this.initCombo();var e=this.cell._cellIndex,i=this.cell.parentNode.idd;t.firstChild?this.cell.combo_value=t.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0),this.setComboOptions(this.cell._brval,t,this.grid,e,i)}else{this.cell.combo_value=t;var n=null;(n=this.cell._brval)&&"object"==typeof this.cell._brval?t=(n.getOption(t)||{}).text||t:(n=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(n=this.grid._fake._col_combos[this.cell._cellIndex]))&&(t=(n.getOption(t)||{}).text||t),""==(t||"").toString()._dhx_trim()&&(t=null),null!==t?this.setComboCValue(t):(this.setComboCValue("&nbsp;",""),this.cell._clearCell=!0)}},this.detach=function(){var t=this.combo.getParent();if(t.parentNode!=this.cell)return!1;this.cell.removeChild(t);var e=this.cell.combo_value;return this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("&nbsp;"),this.cell._clearCell=!0),this.combo._confirmSelect(),this.cell.combo_value=this.combo.getActualValue(),this.combo.closeAll(),this.grid._still_active=!0,this.grid.setActive(1),e!=this.cell.combo_value})}function eXcell_clist(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue();var t=this.cell._combo||this.grid.clists[this.cell._cellIndex];if(t){this.obj=document.createElement("DIV");for(var e=this.val.split(","),i="",n=0;n<t.length;n++){for(var s=!1,o=0;o<e.length;o++)t[n]==e[o]&&(s=!0);i+=s?"<div><input type='checkbox' id='dhx_clist_"+n+"' checked='true' /><label for='dhx_clist_"+n+"'>"+t[n]+"</label></div>":"<div><input type='checkbox' id='dhx_clist_"+n+"'/><label for='dhx_clist_"+n+"'>"+t[n]+"</label></div>"}i+="<div><input type='button' value='"+(this.grid.applyButtonText||"Apply")+"' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>",this.obj.editor=this,this.obj.innerHTML=i,document.body.appendChild(this.obj),this.obj.style.position="absolute",this.obj.className="dhx_clist",this.obj.onclick=function(t){return(t||event).cancelBubble=!0,!0};var l=this.grid.getPosition(this.cell);this.obj.style.left=l[0]+"px",this.obj.style.top=l[1]+this.cell.offsetHeight+"px",this.obj.getValue=function(){for(var t="",e=0;e<this.childNodes.length-1;e++)this.childNodes[e].childNodes[0].checked&&(t&&(t+=", "),t+=this.childNodes[e].childNodes[1].innerHTML);return t.replace(/&amp;/g,"&")}}},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g,"&").replace(/, /g,",")},this.detach=function(t){return this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null),this.val!=this.getValue()}}function eXcell_calck(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue();var t=this.grid.getPosition(this.cell);this.obj=new calcX(t[0],t[1]+this.cell.offsetHeight,this,this.val)},this.getValue=function(){return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){return this.obj&&(this.setValue(this.obj.inputZone.value),this.obj.removeSelf()),this.obj=null,this.val!=this.getValue()}}function calcX(left,top,onReturnSub,val){if(this.top=top||0,this.left=left||0,this.onReturnSub=onReturnSub||null,this.operandA=0,this.operandB=0,this.operatorA="",this.state=0,this.dotState=0,this.calckGo=function(){return eval(this.operandA+"*1"+this.operatorA+this.operandB+"*1")},this.isNumeric=function(t){return-1==t.search(/[^1234567890]/gi)},this.isOperation=function(t){return-1==t.search(/[^\+\*\-\/]/gi)},this.onCalcKey=function(t){that=this.calk;var e=this.innerHTML,i=that.inputZone;0!=that.state&&2!=that.state||!that.isNumeric(e)||("0"!=i.value?i.value+=e:i.value=e),0!=that.state&&2!=that.state||"."!=e||0!=that.dotState||(that.dotState=1,i.value+=e),"C"==e&&(i.value=0,that.dotState=0,that.state=0),0==that.state&&that.isOperation(e)&&(that.operatorA=e,that.operandA=i.value,that.state=1),2==that.state&&that.isOperation(e)&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=e,that.operandA=i.value,that.state=1),2==that.state&&"="==e&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=e,that.operandA=i.value,that.state=3),1==that.state&&that.isNumeric(e)&&(i.value=e,that.state=2,that.dotState=0),3==that.state&&that.isNumeric(e)&&(i.value=e,that.state=0),3==that.state&&that.isOperation(e)&&(that.operatorA=e,that.operandA=i.value,that.state=1),"e"==e&&(i.value=Math.E,1==that.state&&(that.state=2),that.dotState=0),"p"==e&&(i.value=Math.PI,1==that.state&&(that.state=2),that.dotState=0),"Off"==e&&that.topNod.parentNode.removeChild(that.topNod),(t||event)&&((t||event).cancelBubble=!0)},this.sendResult=function(){if(that=this.calk,2==that.state){var t=that.inputZone;that.operandB=t.value,t.value=that.calckGo(),that.operatorA=e,that.operandA=t.value,that.state=3}var e=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod),that.onReturnSub.grid.editStop(!1)},this.removeSelf=function(){this.topNod.parentNode&&this.topNod.parentNode.removeChild(this.topNod)},this.keyDown=function(){this.className="calcPressed"},this.keyUp=function(){this.className="calcButton"},this.init_table=function(){var t=this.topNod.childNodes[0];if(t&&"TABLE"==t.tagName){for(i=1;i<t.childNodes[0].childNodes.length;i++)for(j=0;j<t.childNodes[0].childNodes[i].childNodes.length;j++)t.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey,t.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown,t.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp,t.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp,t.childNodes[0].childNodes[i].childNodes[j].calk=this;this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0],this.onReturnSub?(this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult,this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this):this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=""}},this.drawSelf=function(){var t=document.createElement("div");t.className="calcTable",t.style.position="absolute",t.style.top=this.top+"px",t.style.left=this.left+"px",t.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden;'><input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'></td><td class='calkSubmit'>=</td></tr></table></td></tr><tr><td class='calcButton' width='25%'>Off</td><td class='calcButton' width='25%'>p</td><td class='calcButton' width='25%'>e</td><td class='calcButton' width='25%'>/</td></tr><tr><td class='calcButton'>7</td><td class='calcButton'>8</td><td class='calcButton'>9</td><td class='calcButton'>*</td></tr><tr><td class='calcButton'>4</td><td class='calcButton'>5</td><td class='calcButton'>6</td><td class='calcButton'>+</td></tr><tr><td class='calcButton'>1</td><td class='calcButton'>2</td><td class='calcButton'>3</td><td class='calcButton'>-</td></tr><tr><td class='calcButton'>0</td><td class='calcButton'>.</td><td class='calcButton'>C</td><td class='calcButton'>=</td></tr></table>",t.onclick=function(t){(t||event).cancelBubble=!0},document.body.appendChild(t),this.topNod=t},this.drawSelf(),this.init_table(),val){var rZone=this.inputZone;rZone.value=1*val,this.operandA=1*val,this.state=3}return this}function dragContext(t,e,i,n,s,o,l,r,a,h){return this.source=t||"grid",this.target=e||"grid",this.mode=i||"move",this.dropmode=n||"child",this.sid=s||0,this.tid=o,this.sobj=l||null,this.tobj=r||null,this.sExtra=a||null,this.tExtra=h||null,this}function dhtmlXGridCellObject(t){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null,null},this.cell=t,this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell.innerHTML._dhx_trim()},this.getMathValue=function(){return this.cell._val?this.cell._val:this.getValue()},this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),"bold"!=this.cell.style.fontWeight&&"bold"!=this.cell.parentNode.style.fontWeight||(arOut[1]="bold"),"italic"!=this.cell.style.fontStyle&&"italic"!=this.cell.parentNode.style.fontWeight||(arOut[1]+="italic"),this.cell.style.fontSize?arOut[2]=this.cell.style.fontSize:arOut[2]="",arOut.join("-")},this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"},this.getBgColor=function(){return this.cell.bgColor?this.cell.bgColor:"#FFFFFF"},this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"},this.getWidth=function(){return this.cell.scrollWidth},this.setFont=function(t){fntAr=t.split("-"),this.cell.style.fontFamily=fntAr[0],this.cell.style.fontSize=fntAr[fntAr.length-1],3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))},this.setTextColor=function(t){this.cell.style.color=t},this.setBgColor=function(t){""==t&&(t=null),this.cell.bgColor=t},this.setHorAlign=function(t){1==t.length?this.cell.style.textAlign="c"==t?"center":"l"==t?"left":"right":this.cell.style.textAlign=t},this.wasChanged=function(){return!!this.cell.wasChanged},this.isCheckbox=function(){var t=this.cell.firstChild;return!(!t||"INPUT"!=t.tagName)&&(type=t.type,"radio"==type||"checkbox"==type)},this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked},this.isDisabled=function(){return this.cell._disabled},this.setChecked=function(t){this.isCheckbox()&&("true"!=t&&1!=t&&(t=!1),this.cell.firstChild.checked=t)},this.setDisabled=function(t){"true"!=t&&1!=t&&(t=!1),this.isCheckbox()&&(this.cell.firstChild.disabled=t,this.disabledF&&this.disabledF(t)),this.cell._disabled=t}}function eXcell(){this.obj=null,this.val=null,this.changeState=function(){return!1},this.edit=function(){this.val=this.getValue()},this.detach=function(){return!1},this.getPosition=function(t){for(var e=t,i=0,n=0;"BODY"!=e.tagName;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return new Array(i,n)}}function eXcell_ed(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.val=this.getValue(),this.obj=document.createElement(this.cell.atag),this.obj.setAttribute("autocomplete","off"),this.obj.style.height=this.cell.offsetHeight-(_isIE,4)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.obj),_isFF&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll")),this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},_isIE&&this.obj.focus(),this.obj.focus()},this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)}}function eXcell_edn(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){var t=this.obj.value;return this.setValue(t),this.val!=this.getValue()}}function eXcell_ch(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid,this.cell.obj=this),this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()},this.setChecked=function(t){this.setValue(t.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function eXcell_ra(t){this.base=eXcell_ch,this.base(t),this.grid=t.parentNode.grid,this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")},this.changeState=function(t){!1===t&&1==this.getValue()||this.grid.isEditable&&!this.cell.parentNode._locked&&(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.edit=null}function eXcell_txt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_textarea",this.obj.onclick=function(t){(t||event).cancelBubble=!0};var t=this.grid.getPosition(this.cell);if(this.cell._clearCell||(this.obj.value=this.val),this.obj.style.display="",this.obj.style.textAlign=this.cell.style.textAlign,_isFF){var e=document.createElement("DIV");e.appendChild(this.obj),e.style.overflow="auto",e.className="dhx_textarea",this.obj.style.margin="0px 0px 0px 0px",this.obj.style.border="0px",this.obj=e}if(document.body.appendChild(this.obj),_isOpera&&(this.obj.onkeypress=function(t){if(9==t.keyCode)return!1}),this.obj.onkeydown=function(t){var e=t||event;if(9==e.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:e.keyCode,shiftKey:e.shiftKey,srcElement:"0"}),!1},this.obj.style.left=t[0]+"px",this.obj.style.top=t[1]+this.cell.offsetHeight+"px",this.cell.offsetWidth<200)var i=200;else i=this.cell.offsetWidth;this.obj.style.width=i+(_isFF?18:16)+"px",_isFF&&(this.obj.firstChild.style.width=parseInt(this.obj.style.width)+"px",this.obj.firstChild.style.height=this.obj.offsetHeight-3+"px"),_isIE&&(this.obj.select(),this.obj.value=this.obj.value),_isFF?this.obj.firstChild.focus():this.obj.focus()},this.detach=function(){var t="";return t=_isFF?this.obj.firstChild.value:this.obj.value,this.cell._clearCell=""==t,this.setValue(t),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()},this.getValue=function(){return this.obj?_isFF?this.obj.firstChild.value:this.obj.value:this.cell._clearCell?"":this.grid.multiLine?this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){this.cell._brval=t,t&&""!=t.toString()._dhx_trim()||(t=" "),this.setCTxtValue(t)}}function eXcell_co(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0),this.shiftNext=function(){var t=this.list.options[this.list.selectedIndex+1];return t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0},this.shiftPrev=function(){if(0!=this.list.selectedIndex){var t=this.list.options[this.list.selectedIndex-1];t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text}return!0},this.edit=function(){this.val=this.getValue(),this.text=this.getText()._dhx_trim();var t=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_combo_edit",this.obj.style.height=this.cell.offsetHeight-4+"px",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.value=this.text,this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0};var e=this;this.obj.onkeyup=function(t){var i=(t||event).keyCode;if(38!=i&&40!=i&&9!=i)for(var n=this.readonly?String.fromCharCode(i):this.value,s=e.list.options,o=0;o<s.length;o++)if(0==s[o].text.indexOf(n))return s[o].selected=!0},this.list=document.createElement("SELECT"),this.list.className="dhx_combo_select",this.list.style.width=this.cell.offsetWidth+"px",this.list.style.left=t[0]+"px",this.list.style.top=t[1]+this.cell.offsetHeight+"px",this.list.onclick=function(t){var i=t||window.event,n=i.target||i.srcElement;"OPTION"==n.tagName&&(n=n.parentNode),e.setValue(n.value),e.editable=!1,e.grid.editStop()};for(var i=this.combo.getKeys(),n=!1,s=0,o=0;o<i.length;o++){var l=this.combo.get(i[o]);this.list.options[this.list.options.length]=new Option(l,i[o]),i[o]==this.val&&(s=this.list.options.length-1,n=!0)}0==n&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),s=this.list.options.length-1),document.body.appendChild(this.list),this.list.size="6",this.cstate=1,this.editable?this.cell.innerHTML="":(this.obj.style.width="1px",this.obj.style.height="1px"),this.cell.appendChild(this.obj),this.list.options[s].selected=!0,_isFF&&!this.editable||(this.obj.focus(),this.obj.focus()),this.editable||(this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(t){if(t=t||window.event,e.grid.setActive(!0),t.keyCode<30)return e.grid.doKey({target:e.cell,keyCode:t.keyCode,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey})})},this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value},this.detach=function(){if(this.val!=this.getValue()&&(this.cell.wasChanged=!0),null!=this.list.parentNode)if(this.editable){var t=this.list.options[this.list.selectedIndex];if(t&&t.text==this.obj.value)this.setValue(this.list.value);else{var e=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),i=e.values._dhx_find(this.obj.value);-1!=i?this.setValue(e.keys[i]):this.setCValue(this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);return this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cotxt(t){this.base=eXcell_co,this.base(t)}function eXcell_corotxt(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cp(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("SPAN"),this.obj.style.border="1px solid black",this.obj.style.position="absolute";var t=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj),document.body.appendChild(this.obj),this.obj.style.left=t[0]+"px",this.obj.style.top=t[1]+this.cell.offsetHeight+"px"},this.toolDNum=function(t){return 1==t.length&&(t="0"+t),t},this.colorPanel=function(t,e){var i=document.createElement("TABLE");e.appendChild(i),i.cellSpacing=0,i.editor_obj=this,i.style.cursor="default",i.onclick=function(t){var e=t||window.event,i=e.target||e.srcElement,n=i.parentNode.parentNode.parentNode.editor_obj;n.setValue(i._bg),n.grid.editStop()};for(var n=256/t,s=0;s<=256/n;s++)for(var o=i.insertRow(s),l=0;l<=256/n;l++)for(var r=0;r<=256/n;r++){R=new Number(n*s)-(0==s?0:1),G=new Number(n*l)-(0==l?0:1),B=new Number(n*r)-(0==r?0:1);var a=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+this.toolDNum(B.toString(16)),h=o.insertCell(l);h.width="10px",h.innerHTML="&nbsp;",h.title=a.toUpperCase(),h.style.backgroundColor="#"+a,h._bg="#"+a,null!=this.val&&"#"+a.toUpperCase()==this.val.toUpperCase()&&(h.style.border="2px solid white")}},this.getValue=function(){return this.cell.firstChild._bg||""},this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))},this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))},this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))},this.detach=function(){return null!=this.obj.offsetParent&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell.tit:"");if("A"==this.cell.firstChild.tagName){var t=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell.tit:"");return t+="^"+this.cell.lnk,this.cell.trg&&(t+="^"+this.cell.trg),t}},this.isDisabled=function(){return!0}}function eXcell_price(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}function eXcell_ro(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)}}function eXcell_rotxt(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(t){t&&""!=t.toString()._dhx_trim()||(t=" "),this.setCTxtValue(t)},this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(t,e){for(var i=0;i<this.keys.length;i++)if(this.keys[i]==t)return this.values[i]=e,!0;this.values[this.values.length]=e,this.keys[this.keys.length]=t},this.get=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.values[e];return null},this.clear=function(){this.keys=new dhtmlxArray,this.values=new dhtmlxArray},this.remove=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.keys._dhx_removeAt(e),this.values._dhx_removeAt(e),!0},this.size=function(){for(var t=0,e=0;e<this.keys.length;e++)null!=this.keys[e]&&t++;return t},this.getKeys=function(){for(var t=new Array(0),e=0;e<this.keys.length;e++)null!=this.keys[e]&&(t[t.length]=this.keys[e]);return t},this.save=function(){this._save=new Array;for(var t=0;t<this.keys.length;t++)this._save[t]=[this.keys[t],this.values[t]]},this.restore=function(){if(this._save){this.keys[t]=new Array,this.values[t]=new Array;for(var t=0;t<this._save.length;t++)this.keys[t]=this._save[t][0],this.values[t]=this._save[t][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dhtmlXAccordionItem(){}function dhtmlXAccordion(t,e){if(dhtmlXContainer){var i=this;if(this.skin=null!=e?e:"dhx_skyblue",t==document.body){this._isAccFS=!0,document.body.className+=" dhxacc_fullscreened";var n=document.createElement("DIV");n.className="dhxcont_global_layout_area",t.appendChild(n),this.cont=new dhtmlXContainer(t),this.cont.setContent(n),t.adjustContent(t,0),this.base=document.createElement("DIV"),this.base.className="dhx_acc_base_"+this.skin,this.base.style.overflow="hidden",this.base.style.position="absolute",this._adjustToFullScreen=function(){this.base.style.left="2px",this.base.style.top="2px",this.base.style.width=parseInt(n.childNodes[0].style.width)-4+"px",this.base.style.height=parseInt(n.childNodes[0].style.height)-4+"px"},this._adjustToFullScreen(),n.childNodes[0].appendChild(this.base),this._resizeTM=null,this._resizeTMTime=400,this._doOnResize=function(){window.clearTimeout(i._resizeTM),i._resizeTM=window.setTimeout(function(){i._adjustAccordion()},i._resizeTMTime)},this._adjustAccordion=function(){document.body.adjustContent(document.body,0),this._adjustToFullScreen(),this.setSizes()},dhtmlxEvent(window,"resize",this._doOnResize)}else this.base="string"==typeof t?document.getElementById(t):t,this.base.className="dhx_acc_base_"+this.skin;return this.w=this.base.offsetWidth,this.h=this.base.offsetHeight,this.skinParams={standard:{cell_height:26,cell_space:1,content_offset:1},dhx_blue:{cell_height:24,cell_space:1,content_offset:1},dhx_skyblue:{cell_height:27,cell_space:-1,content_offset:-1},dhx_black:{cell_height:24,cell_space:1,content_offset:1},aqua_dark:{cell_height:22,cell_space:1,content_offset:1},aqua_orange:{cell_height:22,cell_space:1,content_offset:1},aqua_sky:{cell_height:22,cell_space:1,content_offset:1},clear_blue:{cell_height:24,cell_space:1,content_offset:1},clear_green:{cell_height:24,cell_space:1,content_offset:1},clear_silver:{cell_height:24,cell_space:1,content_offset:1},modern_black:{cell_height:29,cell_space:1,content_offset:1},modern_blue:{cell_height:29,cell_space:1,content_offset:1},modern_red:{cell_height:29,cell_space:1,content_offset:1}},this.sk=this.skinParams[this.skin],this.setSkinParameters=function(t,e){isNaN(t)||(this.sk.cell_space=t),isNaN(e)||(this.sk.content_offset=e),this._reopenItem()},this.setSkin=function(t){if(this.skinParams[t]){for(var e in this.skin=t,this.sk=this.skinParams[this.skin],this.base.className="dhx_acc_base_"+this.skin+(this._r?" dhx_acc_rtl":""),this.idPull)this.idPull[e].skin=this.skin;this._reopenItem()}},this.idPull={},this.opened=null,this.cells=function(t){return null==this.idPull[t]?null:this.idPull[t]},this.itemH=90,this.multiMode=!1,this.enableMultiMode=function(){var t=0;for(var e in this.idPull)t++;0==t&&(this.userOffset||(this.skinParams.dhx_skyblue.cell_space=3),this.multiMode=!0)},this.userOffset=!1,this.setOffset=function(t,e){this.userOffset=!0,isNaN(t)||(this.skinParams[this.skin].cell_space=t),isNaN(e)||(this.skinParams[this.skin].content_offset=e),this.setSizes()},this.imagePath="",this.setIconsPath=function(t){this.imagePath=t},this.addItem=function(t,e){var n=document.createElement("DIV");n.className="dhx_acc_item",n.dir="ltr",n._isAcc=!0,n.skin=this.skin,this.base.appendChild(n),this.multiMode&&(n.h=this.itemH);var s=document.createElement("DIV");s._idd=t,s.className="dhx_acc_item_label",s.innerHTML="<span>"+e+"</span><div class='dhx_acc_item_label_btmbrd'>&nbsp;</div><div class='dhx_acc_item_arrow'></div><div class='dhx_acc_hdr_line_l'></div><div class='dhx_acc_hdr_line_r'></div>",s.onselectstart=function(t){(t=t||event).returnValue=!1},s.onclick=function(){!i.multiMode&&i.idPull[this._idd]._isActive||(i.multiMode&&i.idPull[this._idd]._isActive?i.checkEvent("onBeforeActive")?i.callEvent("onBeforeActive",[this._idd,"close"])&&i.closeItem(this._idd,"dhx_accord_outer_event"):i.closeItem(this._idd,"dhx_accord_outer_event"):i.checkEvent("onBeforeActive")?i.callEvent("onBeforeActive",[this._idd,"open"])&&i.openItem(this._idd,"dhx_accord_outer_event"):i.openItem(this._idd,"dhx_accord_outer_event"))},s.onmouseover=function(){this.className="dhx_acc_item_label dhx_acc_item_lavel_hover"},s.onmouseout=function(){this.className="dhx_acc_item_label"},n.appendChild(s);var o=document.createElement("DIV");return o.className="dhxcont_global_content_area",n.appendChild(o),new dhtmlXContainer(n).setContent(o),n.adjustContent(n,this.sk.cell_height+this.sk.content_offset),n._id=t,this.idPull[t]=n,n.getId=function(){return this._id},n.setText=function(t){i.setText(this._id,t)},n.getText=function(){return i.getText(this._id)},n.open=function(){i.openItem(this._id)},n.isOpened=function(){return i.isActive(this._id)},n.close=function(){i.closeItem(this._id)},n.setIcon=function(t){i.setIcon(this._id,t)},n.clearIcon=function(){i.clearIcon(this._id)},n.dock=function(){i.dockItem(this._id)},n.undock=function(){i.undockItem(this._id)},n.show=function(){i.showItem(this._id)},n.hide=function(){i.hideItem(this._id)},n.setHeight=function(t){i.setItemHeight(this._id,t)},n.moveOnTop=function(){i.moveOnTop(this._id)},n._doOnAttachMenu=function(){i._reopenItem()},n._doOnAttachToolbar=function(){i._reopenItem()},n._doOnAttachStatusBar=function(){i._reopenItem()},this.openItem(t),n},this.openItem=function(t,e,i){if(!this._openBuzy)if(!this._enableOpenEffect||i){if(this.multiMode)for(var n in this.idPull)(this.idPull[n]._isActive||n==t)&&(this.idPull[n].style.height=this.idPull[n].h+"px",this.idPull[n].childNodes[1].style.display="",this.idPull[n].adjustContent(this.idPull[n],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[n]==this._lastVisible()?0:this.sk.cell_space),this.idPull[n].updateNestedObjects(),this.idPull[n]._isActive=!0,this._updateArrows(),"dhx_accord_outer_event"==e&&n==t&&this.callEvent("onActive",[t,!0]));else if(!t||!this.idPull[t]._isActive||i){var s=0;for(var n in this.idPull)this.idPull[n].style.height=this.sk.cell_height+(this.idPull[n]!=this._lastVisible()&&n!=t?this.sk.cell_space:0)+"px",n!=t&&(this.idPull[n].childNodes[1].style.display="none",this.idPull[n]._isActive=!1,s+=this.idPull[n].offsetHeight);s=this.base.offsetHeight-s,t&&(this.idPull[t].style.height=s+"px",this.idPull[t].childNodes[1].style.display="",this.idPull[t].adjustContent(this.idPull[t],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[t]==this._lastVisible()?0:this.sk.cell_space),this.idPull[t].updateNestedObjects(),this.idPull[t]._isActive=!0,"dhx_accord_outer_event"==e&&this.callEvent("onActive",[t,!0])),this._updateArrows()}}else{if(this.multiMode&&this.idPull[t]._isActive)return;this._openWithEffect(t,null,null,null,null,e)}},this._lastVisible=function(){for(var t=null,e=this.base.childNodes.length-1;e>=0;e--)this.base.childNodes[e]._isHidden||t||(t=this.base.childNodes[e]);return t},this.closeItem=function(t,e){null!=this.idPull[t]&&this.idPull[t]._isActive&&(this._openBuzy||(this._enableOpenEffect?this._openWithEffect(this.multiMode?t:null,null,null,null,null,e):(this.idPull[t].style.height=this.sk.cell_height+(this.idPull[t]!=this._lastVisible()?this.sk.cell_space:0)+"px",this.idPull[t].childNodes[1].style.display="none",this.idPull[t]._isActive=!1,"dhx_accord_outer_event"==e&&this.callEvent("onActive",[t,!1]),this._updateArrows())))},this._updateArrows=function(){for(var t in this.idPull){for(var e=this.idPull[t].childNodes[0],i=null,n=0;n<e.childNodes.length;n++)-1!=String(e.childNodes[n].className).search("dhx_acc_item_arrow")&&(i=e.childNodes[n]);null!=i&&(i.className="dhx_acc_item_arrow "+(this.idPull[t]._isActive?"item_opened":"item_closed"),i=null)}},this.setText=function(t,e,n){if(null!=i.idPull[t]){for(var s=i.idPull[t].childNodes[0],o=null,l=0;l<s.childNodes.length;l++)null!=s.childNodes[l].tagName&&"span"==String(s.childNodes[l].tagName).toLowerCase()&&(o=s.childNodes[l]);isNaN(n)?o.innerHTML=e:(o.style.paddingLeft=n+"px",o.style.paddingRight=n+"px")}},this.getText=function(t){if(null!=i.idPull[t]){for(var e=i.idPull[t].childNodes[0],n=null,s=0;s<e.childNodes.length;s++)null!=e.childNodes[s].tagName&&"span"==String(e.childNodes[s].tagName).toLowerCase()&&(n=e.childNodes[s]);return n.innerHTML}},this._initWindows=function(t){if(window.dhtmlXWindows&&(this.dhxWins||(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.skin),this.dhxWins.setImagePath(this.imagePath),this.dhxWinsIdPrefix="",t))){var e=this.dhxWinsIdPrefix+t;if(this.dhxWins.window(e))this.dhxWins.window(e).show();else{var i=this,n=this.dhxWins.createWindow(e,20,20,320,200);n.setText(this.getText(t)),n.button("close").hide(),n.attachEvent("onClose",function(t){t.hide()}),n.addUserButton("dock",99,"Dock","dock"),n.button("dock").attachEvent("onClick",function(e){i.cells(t).dock()})}}},this.dockWindow=function(t){this.idPull[t]._isUnDocked&&this.dhxWins&&this.dhxWins.window(this.dhxWinsIdPrefix+t)&&(this.dhxWins.window(this.dhxWinsIdPrefix+t).moveContentTo(this.idPull[t]),this.dhxWins.window(this.dhxWinsIdPrefix+t).close(),this.idPull[t]._isUnDocked=!1,this.showItem(t),this.callEvent("onDock",[t]))},this.undockWindow=function(t){this.idPull[t]._isUnDocked||(this._initWindows(t),this.idPull[t].moveContentTo(this.dhxWins.window(this.dhxWinsIdPrefix+t)),this.idPull[t]._isUnDocked=!0,this.hideItem(t),this.callEvent("onUnDock",[t]))},this.setSizes=function(){this._reopenItem()},this.showItem=function(t){null!=this.idPull[t]&&this.idPull[t]._isHidden&&(this.idPull[t]._isUnDocked?this.dockItem(t):(this.idPull[t].className="dhx_acc_item",this.idPull[t]._isHidden=!1,this._reopenItem()))},this.hideItem=function(t){null!=this.idPull[t]&&(this.idPull[t]._isHidden||(this.closeItem(t),this.idPull[t].className="dhx_acc_item_hidden",this.idPull[t]._isHidden=!0,this._reopenItem()))},this._reopenItem=function(){var t=null;for(var e in this.idPull)this.idPull[e]._isActive&&!this.idPull[e]._isHidden&&(t=e);this.openItem(t,null,!0)},this.forEachItem=function(t){for(var e in this.idPull)t(this.idPull[e])},this._enableOpenEffect=!1,this._openStep=10,this._openStepIncrement=5,this._openStepTimeout=10,this._openBuzy=!1,this.setEffect=function(t){this._enableOpenEffect=1==t},this._openWithEffect=function(t,e,i,n,s,o){if(this.multiMode){s||(this._openBuzy=!0,s=this._openStep,this.idPull[t]._isActive?(e=t,t=null,i=this.sk.cell_height+(this.idPull[e]!=this._lastVisible()?this.sk.cell_space:0),this.idPull[e].childNodes[1].style.display=""):(n=this.idPull[t].h,this.idPull[t].childNodes[1].style.display=""));var l,r=!1;if(t&&((l=parseInt(this.idPull[t].style.height)+s)>n&&(l=n,r=!0),this.idPull[t].style.height=l+"px"),e&&((l=parseInt(this.idPull[e].style.height)-s)<i&&(l=i,r=!0),this.idPull[e].style.height=l+"px"),s+=this._openStepIncrement,r)t&&(this.idPull[t].adjustContent(this.idPull[t],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[t]==this._lastVisible()?0:this.sk.cell_space),this.idPull[t].updateNestedObjects(),this.idPull[t]._isActive=!0),e&&(this.idPull[e].childNodes[1].style.display="none",this.idPull[e]._isActive=!1),this._updateArrows(),this._openBuzy=!1,t&&"dhx_accord_outer_event"==o&&this.callEvent("onActive",[t,!0]),e&&"dhx_accord_outer_event"==o&&this.callEvent("onActive",[e,!1]);else{var a=this;window.setTimeout(function(){a._openWithEffect(t,e,i,n,s,o)},this._openStepTimeout)}}else{if(s||(this._openBuzy=!0,s=this._openStep,t&&(this.idPull[t].childNodes[1].style.display="")),!e||!i||!n){for(var h in i=0,n=0,this.idPull){var d=this.sk.cell_height+(this.idPull[h]!=this._lastVisible()&&h!=t?this.sk.cell_space:0);this.idPull[h]._isActive&&t!=h&&(e=h,i=d),h!=t&&(n+=d)}n=this.base.offsetHeight-n}r=!1;if(t){var c=parseInt(this.idPull[t].style.height)+s;c>n&&(r=!0)}if(e){var u=parseInt(this.idPull[e].style.height)-s;u<i&&(r=!0)}if(s+=this._openStepIncrement,r&&(c=n,u=i),e&&(this.idPull[e].style.height=u+"px"),t&&(this.idPull[t].style.height=c+"px"),r)e&&(this.idPull[e].childNodes[1].style.display="none",this.idPull[e]._isActive=!1),t&&(this.idPull[t].adjustContent(this.idPull[t],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[t]==this._lastVisible()?0:this.sk.cell_space),this.idPull[t].updateNestedObjects(),this.idPull[t]._isActive=!0),this._updateArrows(),this._openBuzy=!1,"dhx_accord_outer_event"==o&&t&&this.callEvent("onActive",[t,!0]);else{a=this;window.setTimeout(function(){a._openWithEffect(t,e,i,n,s,o)},this._openStepTimeout)}}},this.setActive=function(t){this.openItem(t)},this.isActive=function(t){return!0===this.idPull[t]._isActive},this.dockItem=function(t){this.dockWindow(t)},this.undockItem=function(t){this.undockWindow(t)},this.setItemHeight=function(t,e){this.multiMode&&(isNaN(e)||(this.idPull[t].h=e,this._reopenItem()))},this.setIcon=function(t,e){if(null!=this.idPull[t]){for(var i=this.idPull[t].childNodes[0],n=null,s=0;s<i.childNodes.length;s++)"dhx_acc_item_icon"==i.childNodes[s].className&&(n=i.childNodes[s]);null==n&&((n=document.createElement("IMG")).className="dhx_acc_item_icon",i.insertBefore(n,i.childNodes[0]),this.setText(t,null,20)),n.src=this.imagePath+e}},this.clearIcon=function(t){if(null!=this.idPull[t]){for(var e=this.idPull[t].childNodes[0],i=null,n=0;n<e.childNodes.length;n++)"dhx_acc_item_icon"==e.childNodes[n].className&&(i=e.childNodes[n]);null!=i&&(e.removeChild(i),i=null,this.setText(t,null,0))}},this.moveOnTop=function(t){this.idPull[t]&&(this.base.childNodes.length<=1||(this.base.insertBefore(this.idPull[t],this.base.childNodes[0]),this.setSizes()))},this.removeItem=function(t){var e=this.idPull[t],i=e.childNodes[0];for(i.onclick=null,i.onmouseover=null,i.onmouseout=null,i.onselectstart=null,i._idd=null,i.className="";i.childNodes.length>0;)i.removeChild(i.childNodes[0]);for(i.parentNode&&i.parentNode.removeChild(i),i=null,e._dhxContDestruct();e.childNodes.length>0;)e.removeChild(e.childNodes[0]);e._dhxContDestruct=null,e._doOnAttachMenu=null,e._doOnAttachToolbar=null,e._doOnAttachStatusBar=null,e.clearIcon=null,e.close=null,e.dock=null,e.getId=null,e.getText=null,e.hide=null,e.isOpened=null,e.open=null,e.setHeight=null,e.setIcon=null,e.setText=null,e.show=null,e.undock=null,e.parentNode&&e.parentNode.removeChild(e),e=null,this.idPull[t]=null;try{delete this.idPull[t]}catch(t){}},this.unload=function(){for(var t in this.skinParams){this.skinParams[t]=null;try{delete this.skinParams[t]}catch(t){}}for(var t in this.skinParams=null,this.idPull)this.removeItem(t);for(var t in this.idPull=null,this.sk=null,this._initWindows=null,this._lastVisible=null,this._reopenItem=null,this._updateArrows=null,this.addItem=null,this.attachEvent=null,this.callEvent=null,this.cells=null,this.checkEvent=null,this.clearIcon=null,this.closeItem=null,this.detachEvent=null,this.dockItem=null,this.dockWindow=null,this.enableMultiMode=null,this.eventCatcher=null,this.forEachItem=null,this.getText=null,this.h=null,this.hideItem=null,this.imagePath=null,this.isActive=null,this.itemH=null,this.multiMode=null,this.openItem=null,this.removeItem=null,this.setActive=null,this.setEffect=null,this.setIcon=null,this.setIconsPath=null,this.setItemHeight=null,this.setOffset=null,this.setSizes=null,this.setSkin=null,this.setSkinParameters=null,this.setText=null,this.showItem=null,this.skin=null,this.w=null,this.undockItem=null,this.undockWindow=null,this.undockWindowunload=null,this.unload=null,this.userOffset=null,1==this._isAccFS&&(_isIE?window.detachEvent("onresize",this._doOnResize):window.removeEventListener("resize",this._doOnResize,!1),this._isAccFS=null,this._doOnResize=null,this._adjustAccordion=null,this._adjustToFullScreen=null,this._resizeTM=null,this._resizeTMTime=null,document.body.className=String(document.body.className).replace("dhxacc_fullscreened",""),this.cont.obj._dhxContDestruct(),this.cont.dhxcont.parentNode&&this.cont.dhxcont.parentNode.removeChild(this.cont.dhxcont),this.cont.dhxcont=null,this.cont.setContent=null,this.cont=null),this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),this.base.className="",this.base=null,this)try{delete this[t]}catch(t){}},this._initWindows(),dhtmlxEventable(this),this}alert("dhtmlxcontainer.js is missed on the page")}function dhtmlXContainer(t){var e=this;this.obj=t,this.dhxcont=null,this.setContent=function(t){this.dhxcont=t,this.dhxcont.innerHTML="<div style='position: relative;left: 0px;top: 0px;overflow: hidden;'></div><div class='dhxcont_content_blocker' style='display: none;'></div>",this.dhxcont.mainCont=this.dhxcont.childNodes[0],this.obj.dhxcont=this.dhxcont},this.obj._genStr=function(t){for(var e="",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<t;n++)e+=i.charAt(Math.round(Math.random()*i.length));return e},this.obj.setMinContentSize=function(t,e){this._minDataSizeW=t,this._minDataSizeH=e},this.obj.moveContentTo=function(t){var e=null;if(this.grid&&(e="grid"),this.tree&&(e="tree"),this.tabbar&&(e="tabbar"),this.folders&&(e="folders"),this.layout&&(e="layout"),null!=e){if("layout"==e&&this._isCell&&t._isWindow){var i=this.layout._defineWindowMinDimension(this,!0),n=t.getDimension();t.setDimension(i[1]>n[0]?i[1]:null,i[2]>n[1]?i[2]:null)}"tabbar"==e&&t._isCell&&t.hideHeader(),t.attachObject(this[e+"Id"]),t[e]=this[e],t[e+"Id"]=this[e+"Id"],t[e+"Obj"]=this[e+"Obj"],"layout"==e&&(t.layout._baseWFix=-2,t.layout._baseHFix=-2,t._isWindow&&t.attachEvent("_onBeforeTryResize",t.layout._defineWindowMinDimension)),this[e]=null,this[e+"Id"]=null,this[e+"Obj"]=null,"tabbar"==e&&this._isCell&&this.showHeader()}null!=this.menu&&(t.dhxcont.insertBefore(document.getElementById(this.menuId),t.dhxcont.childNodes[0]),t.menu=this.menu,t.menuId=this.menuId,t.menuHeight=this.menuHeight,this.menu=null,this.menuId=null,this.menuHeight=null,this._doOnAttachMenu&&this._doOnAttachMenu("unload"),t._doOnAttachMenu&&t._doOnAttachMenu("move")),null!=this.toolbar&&(t.dhxcont.insertBefore(document.getElementById(this.toolbarId),t.dhxcont.childNodes[null!=t.menu?1:0]),t.toolbar=this.toolbar,t.toolbarId=this.toolbarId,t.toolbarHeight=this.toolbarHeight,this.toolbar=null,this.toolbarId=null,this.toolbarHeight=null,this._doOnAttachToolbar&&this._doOnAttachToolbar("unload"),t._doOnAttachToolbar&&t._doOnAttachToolbar("move")),null!=this.sb&&(t.dhxcont.insertBefore(document.getElementById(this.sbId),t.dhxcont.childNodes[t.dhxcont.childNodes.length-1]),t.sb=this.sb,t.sbId=this.sbId,t.sbHeight=this.sbHeight,this.sb=null,this.sbId=null,this.sbHeight=null,this._doOnAttachToolbar&&this._doOnAttachToolbar("unload"),t._doOnAttachToolbar&&t._doOnAttachToolbar("move"));for(var s=this.dhxcont.childNodes[0],o=t.dhxcont.childNodes[0];s.childNodes.length>0;)o.appendChild(s.childNodes[0]);t.updateNestedObjects()},this.obj.adjustContent=function(t,e,i,n,s){this.dhxcont.style.left=(this._offsetLeft||0)+"px",this.dhxcont.style.top=(this._offsetTop||0)+e+"px";var o=t.clientWidth+(this._offsetWidth||0);!0!==n&&(this.dhxcont.style.width=Math.max(0,o)+"px"),!0!==n&&this.dhxcont.offsetWidth>o&&(this.dhxcont.style.width=Math.max(0,2*o-this.dhxcont.offsetWidth)+"px");var l=t.clientHeight+(this._offsetHeight||0);this.dhxcont.style.height=Math.max(0,l-e)+(null!=i?i:0)+"px",this.dhxcont.offsetHeight>l-e&&(this.dhxcont.style.height=Math.max(0,2*(l-e)-this.dhxcont.offsetHeight)+"px"),s&&(isNaN(s)||(this.dhxcont.style.height=Math.max(0,parseInt(this.dhxcont.style.height)-s)+"px")),null!=this._minDataSizeH&&parseInt(this.dhxcont.style.height)<this._minDataSizeH&&(this.dhxcont.style.height=this._minDataSizeH+"px"),null!=this._minDataSizeW&&parseInt(this.dhxcont.style.width)<this._minDataSizeW&&(this.dhxcont.style.width=this._minDataSizeW+"px"),!0!==n&&(this.dhxcont.mainCont.style.width=this.dhxcont.clientWidth+"px",this.dhxcont.mainCont.offsetWidth>this.dhxcont.clientWidth&&(this.dhxcont.mainCont.style.width=Math.max(0,2*this.dhxcont.clientWidth-this.dhxcont.mainCont.offsetWidth)+"px"));var r=null!=this.menu?this.menuHidden?0:this.menuHeight:0,a=null!=this.toolbar?this.toolbarHidden?0:this.toolbarHeight:0,h=null!=this.sb?this.sbHidden?0:this.sbHeight:0;this.dhxcont.mainCont.style.height=this.dhxcont.clientHeight+"px",this.dhxcont.mainCont.offsetHeight>this.dhxcont.clientHeight&&(this.dhxcont.mainCont.style.height=Math.max(0,2*this.dhxcont.clientHeight-this.dhxcont.mainCont.offsetHeight)+"px"),this.dhxcont.mainCont.style.height=Math.max(0,parseInt(this.dhxcont.mainCont.style.height)-r-a-h)+"px"},this.obj.coverBlocker=function(){return this.dhxcont.childNodes[this.dhxcont.childNodes.length-1]},this.obj.showCoverBlocker=function(){this.coverBlocker().style.display=""},this.obj.hideCoverBlocker=function(){this.coverBlocker().style.display="none"},this.obj.updateNestedObjects=function(){this.grid&&this.grid.setSizes(),this.tabbar&&this.tabbar.adjustOuterSize(),this.folders&&this.folders.setSizes(),this.editor&&(_isIE||this.editor._prepareContent(!0),this.editor.setSizes()),this.layout&&(this.layoutObj.style.width=this.dhxcont.mainCont.style.width,this.layoutObj.style.height=this.dhxcont.mainCont.style.height,this._isAcc&&"dhx_skyblue"==this.skin&&(this.layoutObj.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px",this.layoutObj.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px"),this.layout.setSizes()),null!=this.accordion&&(this.accordionObj.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px",this.accordionObj.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px",this.accordion.setSizes()),this.dockedCell&&this.dockedCell.updateNestedObjects()},this.obj.attachStatusBar=function(){var t=document.createElement("DIV");return this._isCell?t.className="dhxcont_sb_container_layoutcell":t.className="dhxcont_sb_container",t.id="sbobj_"+this._genStr(12),t.innerHTML="<div class='dhxcont_statusbar'></div>",this.dhxcont.insertBefore(t,this.dhxcont.childNodes[this.dhxcont.childNodes.length-1]),t.setText=function(t){this.childNodes[0].innerHTML=t},t.getText=function(){return this.childNodes[0].innerHTML},t.onselectstart=function(t){return(t=t||event).returnValue=!1,!1},this.sb=t,this.sbHeight=t.offsetHeight,this.sbId=t.id,this._doOnAttachStatusBar&&this._doOnAttachStatusBar("init"),this.adjust(),this.sb},this.obj.detachStatusBar=function(){this.sb&&(this.sb.setText=null,this.sb.getText=null,this.sb.onselectstart=null,this.sb.parentNode.removeChild(this.sb),this.sb=null,this.sbHeight=null,this.sbId=null,this._doOnAttachStatusBar&&this._doOnAttachStatusBar("unload"))},this.obj.attachMenu=function(){var t=document.createElement("DIV");return t.style.position="relative",t.style.overflow="hidden",t.id="dhxmenu_"+this._genStr(12),this.dhxcont.insertBefore(t,this.dhxcont.childNodes[0]),this.menu=new dhtmlXMenuObject(t.id,this.skin),this.menuHeight=t.offsetHeight,this.menuId=t.id,this._doOnAttachMenu&&this._doOnAttachMenu("init"),this.adjust(),this.menu},this.obj.detachMenu=function(){if(this.menu){var t=document.getElementById(this.menuId);this.menu.unload(),this.menu=null,this.menuId=null,this.menuHeight=null,t.parentNode.removeChild(t),t=null,this._doOnAttachMenu&&this._doOnAttachMenu("unload")}},this.obj.attachToolbar=function(){var t=document.createElement("DIV");return t.style.position="relative",t.style.overflow="hidden",t.id="dhxtoolbar_"+this._genStr(12),this.dhxcont.insertBefore(t,this.dhxcont.childNodes[null!=this.menu?1:0]),this.toolbar=new dhtmlXToolbarObject(t.id,this.skin),this.toolbarHeight=t.offsetHeight+(this._isLayout&&"dhx_skyblue"==this.skin?2:0),this.toolbarId=t.id,this._doOnAttachToolbar&&this._doOnAttachToolbar("init"),this.adjust(),this.toolbar},this.obj.detachToolbar=function(){if(this.toolbar){var t=document.getElementById(this.toolbarId);this.toolbar.unload(),this.toolbar=null,this.toolbarId=null,this.toolbarHeight=null,t.parentNode.removeChild(t),t=null,this._doOnAttachToolbar&&this._doOnAttachToolbar("unload")}},this.obj.attachGrid=function(){this._isWindow&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this._redraw());var t=document.createElement("DIV");return t.id="dhxGridObj_"+this._genStr(12),t.style.width="100%",t.style.height="100%",t.cmp="grid",document.body.appendChild(t),this.attachObject(t.id),this.grid=new dhtmlXGridObject(t.id),this.grid.setSkin(this.skin),this.grid.entBox.style.border="0px solid white",this.grid._sizeFix=0,this.gridId=t.id,this.gridObj=t,this.grid},this.obj.attachScheduler=function(t,e){var i=document.createElement("DIV");return i.innerHTML='<div id="scheduler_here" class="dhx_cal_container" style="width:100%;height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(i.firstChild),this.attachObject("scheduler_here"),this.grid=scheduler,scheduler.setSizes=scheduler.update_view,scheduler.destructor=function(){},scheduler.init("scheduler_here",t,e),this.grid},this.obj.attachTree=function(t){this._isWindow&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this._redraw());var e=document.createElement("DIV");return e.id="dhxTreeObj_"+this._genStr(12),e.style.width="100%",e.style.height="100%",e.cmp="tree",document.body.appendChild(e),this.attachObject(e.id),this.tree=new dhtmlXTreeObject(e.id,"100%","100%",t||0),this.tree.setSkin(this.skin),this.tree.allTree.childNodes[0].style.marginTop="2px",this.tree.allTree.childNodes[0].style.marginBottom="2px",this.treeId=e.id,this.treeObj=e,this.tree},this.obj.attachTabbar=function(t){this._isWindow&&"dhx_skyblue"==this.skin&&(this.dhxcont.style.border="none",this.setDimension(this.w,this.h));var e=document.createElement("DIV");return e.id="dhxTabbarObj_"+this._genStr(12),e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",e.cmp="tabbar",document.body.appendChild(e),this.attachObject(e.id),"dhtmlxLayoutSinglePoly"==this.className&&this.hideHeader(),this.tabbar=new dhtmlXTabBar(e.id,t||"top",20),this._isWindow||(this.tabbar._s.expand=!0),this.tabbar.setSkin(this.skin),this.tabbar.adjustOuterSize(),this.tabbarId=e.id,this.tabbarObj=e,this.tabbar},this.obj.attachFolders=function(){this._isWindow&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this._redraw());var t=document.createElement("DIV");return t.id="dhxFoldersObj_"+this._genStr(12),t.style.width="100%",t.style.height="100%",t.style.overflow="hidden",t.cmp="folders",document.body.appendChild(t),this.attachObject(t.id),this.folders=new dhtmlxFolders(t.id),this.folders.setSizes(),this.foldersId=t.id,this.foldersObj=t,this.folders},this.obj.attachAccordion=function(){this._isWindow&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this._redraw());var t=document.createElement("DIV");return t.id="dhxAccordionObj_"+this._genStr(12),t.style.left="-1px",t.style.top="-1px",t.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px",t.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px",t.style.position="relative",t.cmp="accordion",document.body.appendChild(t),this.attachObject(t.id),this.accordion=new dhtmlXAccordion(t.id,this.skin),this.accordion.setSizes(),this.accordionId=t.id,this.accordionObj=t,this.accordion},this.obj.attachLayout=function(t,e){this._isCell&&"dhx_skyblue"==this.skin&&(this.hideHeader(),this.dhxcont.style.border="0px solid white",this.adjustContent(this.childNodes[0],0));var i=document.createElement("DIV");return i.id="dhxLayoutObj_"+this._genStr(12),i.style.overflow="hidden",i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width=parseInt(this.dhxcont.mainCont.style.width)+"px",i.style.height=parseInt(this.dhxcont.mainCont.style.height)+"px",this._isAcc&&"dhx_skyblue"==this.skin&&(i.style.left="-1px",i.style.top="-1px",i.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px",i.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px"),i.dhxContExists=!0,i.cmp="layout",document.body.appendChild(i),this.attachObject(i.id),this.layout=new dhtmlXLayoutObject(i,t,this.skin),this._isWindow&&this.attachEvent("_onBeforeTryResize",this.layout._defineWindowMinDimension),this.layoutId=i.id,this.layoutObj=i,this.layout},this.obj.attachEditor=function(t){this._isWindow&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this._redraw());var e=document.createElement("DIV");return e.id="dhxEditorObj_"+this._genStr(12),e.style.position="relative",e.style.display="none",e.style.overflow="hidden",e.style.width="100%",e.style.height="100%",e.cmp="editor",document.body.appendChild(e),this.attachObject(e.id),this.editor=new dhtmlXEditor(e.id,this.skin),this.editorId=e.id,this.editorObj=e,this.editor},this.obj.attachObject=function(t,e){if("string"==typeof t&&(t=document.getElementById(t)),e){t.style.visibility="hidden",t.style.display="";var i=t.offsetWidth,n=t.offsetHeight}this._attachContent("obj",t),e&&this._isWindow&&(t.style.visibility="visible",this._adjustToContent(i,n))},this.obj.detachObject=function(t,e){var i=null;if(this.tree&&(i="tree"),this.grid&&(i="grid"),this.layout&&(i="layout"),this.tabbar&&(i="tabbar"),this.accordion&&(i="accordion"),this.folders&&(i="folders"),null!=i){var n=null,s=null;if(1==t)for(this[i].unload&&this[i].unload(),this[i].destructor&&this[i].destructor();this[i+"Obj"].childNodes.length>0;)this[i+"Obj"].removeChild(this[i+"Obj"].childNodes[0]);else document.body.appendChild(this[i+"Obj"]),this[i+"Obj"].style.display="none",n=this[i],s=this[i+"Obj"];return this[i]=null,this[i+"Id"]=null,this[i+"Obj"]=null,new Array(n,s)}for(var o=this.dhxcont.childNodes[0];o.childNodes.length>0;)if(1==t)o.removeChild(o.childNodes[0]);else{var l=o.childNodes[0];null!=e?("object"!=typeof e&&(e=document.getElementById(e)),e.appendChild(l)):document.body.appendChild(l),l.style.display="none"}},this.obj.appendObject=function(t){"string"==typeof t&&(t=document.getElementById(t)),this._attachContent("obj",t,!0)},this.obj.attachHTMLString=function(t){this._attachContent("str",t);for(var e=t.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],i=0;i<e.length;i++){var n=e[i].replace(/<([\/]{0,1})script[^>]*>/g,"");window.execScript?window.execScript(n):window.eval(n)}},this.obj.attachURL=function(t,e){this._attachContent(1==e?"urlajax":"url",t,!1)},this.obj.adjust=function(){"dhx_skyblue"==this.skin&&(this.menu&&((this._isWindow||this._isLayout)&&(this.menu._topLevelOffsetLeft=0,document.getElementById(this.menuId).style.height="26px",this.menuHeight=document.getElementById(this.menuId).offsetHeight,this._doOnAttachMenu&&this._doOnAttachMenu("show")),this._isCell&&(document.getElementById(this.menuId).className+=" in_layoutcell",this.menuHeight=25),this._isAcc&&(document.getElementById(this.menuId).className+=" in_acccell",this.menuHeight=25),this._doOnAttachMenu&&this._doOnAttachMenu("adjust")),this.toolbar&&((this._isWindow||this._isLayout)&&(document.getElementById(this.toolbarId).style.height="29px",this.toolbarHeight=document.getElementById(this.toolbarId).offsetHeight,this._doOnAttachToolbar&&this._doOnAttachToolbar("show")),this._isCell&&(document.getElementById(this.toolbarId).className+=" in_layoutcell"),this._isAcc&&(document.getElementById(this.toolbarId).className+=" in_acccell")))},this.obj._attachContent=function(t,i,n){if(!0!==n)for(;e.dhxcont.mainCont.childNodes.length>0;)e.dhxcont.mainCont.removeChild(e.dhxcont.mainCont.childNodes[0]);if("url"==t){this._isWindow&&null==i.cmp&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this._redraw());var s=document.createElement("IFRAME");s.frameBorder=0,s.border=0,s.style.width="100%",s.style.height="100%",s.setAttribute("src","javascript:false;"),e.dhxcont.mainCont.appendChild(s),s.src=i,this._frame=s,this._doOnAttachURL&&this._doOnAttachURL(!0)}else if("urlajax"==t){this._isWindow&&null==i.cmp&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this.dhxcont.mainCont.style.backgroundColor="#FFFFFF",this._redraw());var o=this,l=new dtmlXMLLoaderObject(function(){o.attachHTMLString(this.xmlDoc.responseText,this),o._doOnAttachURL&&o._doOnAttachURL(!1),this.destructor()},window);l.dhxWindowObject=this,l.loadXML(i)}else"obj"==t?(this._isWindow&&null==i.cmp&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this.dhxcont.mainCont.style.backgroundColor="#FFFFFF",this._redraw()),e.dhxcont._frame=null,e.dhxcont.mainCont.appendChild(i),e.dhxcont.mainCont.style.overflow=!0===n?"auto":"hidden",i.style.display=""):"str"==t&&(this._isWindow&&null==i.cmp&&"dhx_skyblue"==this.skin&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this.dhxcont.mainCont.style.backgroundColor="#FFFFFF",this._redraw()),e.dhxcont._frame=null,e.dhxcont.mainCont.innerHTML=i)},this.obj.showMenu=function(){this.menu&&this.menuId&&"none"==document.getElementById(this.menuId).style.display&&(this.menuHidden=!1,this._doOnAttachMenu&&this._doOnAttachMenu("show"),document.getElementById(this.menuId).style.display="")},this.obj.hideMenu=function(){this.menu&&this.menuId&&"none"!=document.getElementById(this.menuId).style.display&&(document.getElementById(this.menuId).style.display="none",this.menuHidden=!0,this._doOnAttachMenu&&this._doOnAttachMenu("hide"))},this.obj.showToolbar=function(){this.toolbar&&this.toolbarId&&"none"==document.getElementById(this.toolbarId).style.display&&(this.toolbarHidden=!1,this._doOnAttachToolbar&&this._doOnAttachToolbar("show"),document.getElementById(this.toolbarId).style.display="")},this.obj.hideToolbar=function(){this.toolbar&&this.toolbarId&&"none"!=document.getElementById(this.toolbarId).style.display&&(this.toolbarHidden=!0,document.getElementById(this.toolbarId).style.display="none",this._doOnAttachToolbar&&this._doOnAttachToolbar("hide"))},this.obj.showStatusBar=function(){this.sb&&this.sbId&&"none"==document.getElementById(this.sbId).style.display&&(this.sbHidden=!1,this._doOnAttachStatusBar&&this._doOnAttachStatusBar("show"),document.getElementById(this.sbId).style.display="")},this.obj.hideStatusBar=function(){this.sb&&this.sbId&&"none"!=document.getElementById(this.sbId).style.display&&(this.sbHidden=!0,document.getElementById(this.sbId).style.display="none",this._doOnAttachStatusBar&&this._doOnAttachStatusBar("hide"))},this.obj._dhxContDestruct=function(){for(this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachObject(!0),this.layout&&this.layout.unlaod(),this.accordion&&this.accordion.unlaod(),this.grid&&this.grid.destructor(),this.tree&&this.tree.destructor(),this.tabbar&&this.tabbar.destructor(),this.layout=null,this.accordion=null,this.grid=null,this.tree=null,this.tabbar=null,this.adjust=null,this._genStr=null,this.setMinContentSize=null,this.moveContentTo=null,this.adjustContent=null,this.coverBlocker=null,this.showCoverBlocker=null,this.hideCoverBlocker=null,this.updateNestedObjects=null,this.attachStatusBar=null,this.detachStatusBar=null,this.attachMenu=null,this.detachMenu=null,this.attachToolbar=null,this.detachToolbar=null,this.attachGrid=this.attachTree=this.attachTabbar=this.attachFolders=this.attachAccordion=this.attachLayout=this.attachEditor=this.attachObject=this.detachObject=this.appendObject=this.attachHTMLString=this.attachURL=this._attachContent=this.attachScheduler=null,this.showMenu=null,this.hideMenu=null,this.showToolbar=null,this.hideToolbar=null,this.showStatusBar=null,this.hideStatusBar=null;this.dhxcont.mainCont.childNodes.length>0;)this.dhxcont.mainCont.removeChild(this.dhxcont.mainCont.childNodes[0]);this.dhxcont.mainCont.innerHTML="",this.dhxcont.mainCont=null;try{delete this.dhxcont.mainCont}catch(t){}for(;this.dhxcont.childNodes.length>0;)this.dhxcont.removeChild(this.dhxcont.childNodes[0]);this.dhxcont.innerHTML="",this.dhxcont=null;try{delete this.dhxcont}catch(t){}}}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}if(null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),void 0===dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){var t,e,i,n;function s(){if(e){var i=document.createEvent("HTMLEvents");i.initEvent("dblclick",!0,!0),e.dispatchEvent(i),t=e=null}}dhtmlxEvent(document.body,"touchstart",function(o){e=o.touches[0].target,i=o.touches[0].clientX,n=o.touches[0].clientY,t=window.setTimeout(s,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(s){t&&(Math.abs(s.touches[0].clientX-i)>50||Math.abs(s.touches[0].clientY-n)>50)&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent(document.body,"touchend",function(i){t&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent.initTouch=function(){}}),dataProcessor.prototype={setTransactionMode:function(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,this._headers=this._headers||t.headers,this._payload=this._payload||t.payload):(this._tMode=t,this._tSend=e),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0)},escape:function(t){return this._utf?encodeURIComponent(t):escape(t)},enableUTFencoding:function(t){this._utf=dhx4.s2b(t)},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=dhx4.s2b(t)},enablePartialDataSend:function(t){this._changed=dhx4.s2b(t)},setUpdateMode:function(t,e){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=e},ignore:function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},setUpdated:function(t,e,i){if(!this._silent_mode){var n=this.findRow(t);i=i||"updated";var s=this.obj.getUserData(t,this.action_param);s&&"updated"==i&&(i=s),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.obj.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.obj.setUserData(t,this.action_param,"")),e||this._clearUpdateFlag(t),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},_clearUpdateFlag:function(t){},markRow:function(t,e,i){var n="",s=this.is_invalid(t);if(s&&(n=this.styles[s],e=!0),this.callEvent("onRowMark",[t,e,i,s])&&(n=this.styles[e?i:"clear"]+n,this.obj[this._methods[0]](t,n),s&&s.details)){n+=this.styles[s+"_cell"];for(var o=0;o<s.details.length;o++)s.details[o]&&this.obj[this._methods[1]](t,o,n)}},getState:function(t){return this.obj.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},checkBeforeUpdate:function(t){return!0},sendData:function(t){if(!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),void 0===t||this._tSend)return this.sendAllData();if(this._in_progress[t])return!1;if(this.messages=[],"deleted"!==this.getState(t)&&!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))return!1;this._beforeSendData(this._getRowData(t),t)}},_beforeSendData:function(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)},serialize:function(t,e){if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");var i=[],n=[];for(var s in t)t.hasOwnProperty(s)&&(i.push(this.serialize_one(t[s],s+this.post_delim)),n.push(s));return i.push("ids="+this.escape(n.join(","))),dhtmlx.security_key&&i.push("dhx_security="+dhtmlx.security_key),i.join("&")},serialize_one:function(t,e){if("string"==typeof t)return t;var i=[];for(var n in t)if(t.hasOwnProperty(n)){if(("id"==n||n==this.action_param)&&"REST"==this._tMode)continue;i.push(this.escape((e||"")+n)+"="+this.escape(t[n]))}return i.join("&")},_sendData:function(t,e){if(t){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());var i=this,n=function(n){var s=[];if(e)s.push(e);else if(t)for(var o in t)s.push(o);return i.afterUpdate(i,n,s)},s=this.serverProcessor+(this._user?dhtmlx.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");if("GET"==this._tMode)dhx4.ajax.get(s+(-1!=s.indexOf("?")?"&":"?")+this.serialize(t,e),n);else if("POST"==this._tMode)dhx4.ajax.post(s,this.serialize(t,e),n);else if("REST"==this._tMode){var o=this.getState(e),l=s.replace(/(\&|\?)editing\=true/,""),r=l.split("?");r[1]&&(r[1]="?"+r[1]);var a="",h="post";if("inserted"==o?a=this.serialize(t,e):"deleted"==o?(h="DELETE",l=r[0]+e+(r[1]||"")):(h="PUT",a=this.serialize(t,e),l=r[0]+e+(r[1]||"")),this._payload)for(var d in this._payload)l=l+(-1===l.indexOf("?")?"?":"&")+this.escape(d)+"="+this.escape(this._payload[d]);dhx4.ajax.query({url:l,method:h,headers:this._headers,data:a,callback:n})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var t=!0,e=0;e<this.updatedRows.length;e++)"deleted"!==this.getState(this.updatedRows[e])&&(t&=this.checkBeforeUpdate(this.updatedRows[e]));if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(e=0;e<this.updatedRows.length;e++)if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(t){for(var e={},i=!1,n=0;n<this.updatedRows.length;n++){var s=this.updatedRows[n];this._in_progress[s]||this.is_invalid(s)||this.callEvent("onBeforeUpdate",[s,this.getState(s),this._getRowData(s)])&&(e[s]=this._getRowData(s,s+this.post_delim),i=!0,this._in_progress[s]=(new Date).valueOf())}return i?e:null},setVerificator:function(t,e){this.mandatoryFields[t]=e||function(t){return""!==t}},clearVerificator:function(t){this.mandatoryFields[t]=!1},findRow:function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},defineAction:function(t,e){this._uActions||(this._uActions=[]),this._uActions[t]=e},afterUpdateCallback:function(t,e,i,n){var s=t,o="error"!=i&&"invalid"!=i;if(o||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[s];"wait"!=this._in_progress[s]&&this.setUpdated(t,!1);var l=t;switch(i){case"inserted":case"insert":e!=t&&(this.obj[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj[this._methods[3]](t),delete this._in_progress[s],this.callEvent("onAfterUpdate",[t,i,e,n])}"wait"!=this._in_progress[s]?(o&&this.obj.setUserData(t,this.action_param,""),delete this._in_progress[s]):(delete this._in_progress[s],this.setUpdated(e,!0,this.obj.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[l,i,e,n])},afterUpdate:function(t,e,i){if(window.JSON)try{var n=JSON.parse(e.xmlDoc.responseText),s=n.action||this.getState(i)||"updated",o=n.sid||i[0],l=n.tid||i[0];return t.afterUpdateCallback(o,l,s,n),void t.finalizeUpdate()}catch(t){}var r=dhx4.ajax.xmltop("data",e.xmlDoc);if(!r||"DIV"==r.tagName)return this.cleanUpdate(i);var a=dhx4.ajax.xpath("//data/action",r);if(!a.length)return this.cleanUpdate(i);for(var h=0;h<a.length;h++){var d=a[h];s=d.getAttribute("type"),o=d.getAttribute("sid"),l=d.getAttribute("tid");t.afterUpdateCallback(o,l,s,d)}t.finalizeUpdate()},cleanUpdate:function(t){if(t)for(var e=0;e<t.length;e++)delete this._in_progress[t[e]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){this.obj=t,t._dp_init&&t._dp_init(this),this.connector_init&&(t._dataprocessor=this)},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},enableDebug:function(t){},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(t,e,i,n){this.afterAutoUpdate(t,e,i,n)}),this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},t)},afterAutoUpdate:function(t,e,i,n){return"collision"!=e||(this._need_update=!0,!1)},fullSync:function(){return 1==this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,e){if(this._update_busy)return!1;this._update_busy=!0,dhx4.ajax.get(t,e)},_v:function(t){return t.firstChild?t.firstChild.nodeValue:""},_a:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this._v(t[i]);return e},loadUpdate:function(){var t=this,e=this.obj.getUserData(0,"version"),i=this.serverProcessor+dhtmlx.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+e].join("&");i=i.replace("editing=true&",""),this.getUpdates(i,function(e){var i=dhx4.ajax.xmltop("updates",e.xmlDoc),n=dhx4.ajax.xpath("//userdata",i);t.obj.setUserData(0,"version",t._v(n[0]));var s=dhx4.ajax.xpath("//update",i);if(s.length){t._silent_mode=!0;for(var o=0;o<s.length;o++){var l=s[o].getAttribute("status"),r=s[o].getAttribute("id"),a=s[o].getAttribute("parent");switch(l){case"inserted":t.callEvent("insertCallback",[s[o],r,a]);break;case"updated":t.callEvent("updateCallback",[s[o],r,a]);break;case"deleted":t.callEvent("deleteCallback",[s[o],r,a])}}t._silent_mode=!1}t._update_busy=!1,t=null})}},window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.connector_init=!0),dhtmlXCalendarObject.prototype.lang="en",dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w"}},dhtmlXCalendarObject.prototype._buildMonthHdr=function(t){var e=this,i=function(t){return 1==String(t).length?"0"+String(t):t},n=function(t,e){return"<span class='dhtmlxcalendar_month_label_"+t+"'>"+e+"</span>"},s=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(s){switch(s){case"%m":return n("month",i(t.getMonth()+1));case"%n":return n("month",t.getMonth()+1);case"%M":return n("month",e.langData[e.lang].monthesSNames[t.getMonth()]);case"%F":return n("month",e.langData[e.lang].monthesFNames[t.getMonth()]);case"%y":return n("year",i(t.getYear()%100));case"%Y":return n("year",t.getFullYear());case"%%":return"%";default:return s}});return e=i=n=null,s},dhtmlXCalendarObject.prototype.enableIframe=function(t){1==t?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)},dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")},dhtmlxCalendarObject=dhtmlXCalendarObject,dhtmlXCalendarObject.prototype._dateStrings=function(){var t=this.langData[this.lang];return{monthFullName:t.monthesFNames,monthShortName:t.monthesSNames,dayFullName:t.daysFNames,dayShortName:t.daysSNames}},dhtmlXCalendarObject.prototype._strToDate=function(t,e){return window.dhx4.str2date(t,e||this._dateFormat,this._dateStrings())},dhtmlXCalendarObject.prototype._dateToStr=function(t,e){return window.dhx4.date2str(t,e||this._dateFormat,this._dateStrings())},window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(t){var e=this;return this.leftCalendar=new dhtmlXCalendarObject(t),this.leftCalendar.hideTime(),this.rightCalendar=new dhtmlXCalendarObject(t),this.rightCalendar.hideTime(),this.leftCalendar.attachEvent("onClick",function(t){e._updateRange("rightCalendar",t,null),e._evOnClick(["left",t])}),this.rightCalendar.attachEvent("onClick",function(t){e._updateRange("leftCalendar",null,t),e._evOnClick(["right",t])}),this.leftCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["left",t])}),this.rightCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["right",t])}),this.show=function(){this.leftCalendar.show(),this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px",this.rightCalendar.show()},this.hide=function(){this.leftCalendar.hide(),this.rightCalendar.hide()},this.setDateFormat=function(t){this.leftCalendar.setDateFormat(t),this.rightCalendar.setDateFormat(t)},this.setDates=function(t,e){null!=t&&this.leftCalendar.setDate(t),null!=e&&this.rightCalendar.setDate(e),this._updateRange()},this._updateRange=function(t,e,i){3==arguments.length?("leftCalendar"==t?this.leftCalendar:this.rightCalendar).setSensitiveRange(e,i):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))},this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)},this.unload=function(){window.dhx4._eventable(this,"clear"),this.leftCalendar.unload(),this.rightCalendar.unload(),this.leftCalendar=this.rightCalendar=null,this._updateRange=null,this._evOnClick=null,this._evOnBeforeChange=null,this.show=null,this.hide=null,this.setDateFormat=null,this.setDates=null,this.getFormatedDate=null,this.unload=null,e=null},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnBeforeChange=function(t){return this.callEvent("onBeforeChange",t)},window.dhx4._eventable(this),this},dhtmlXCombo.prototype.setName=function(t){this.conf.form_name=t,this.base.childNodes[1].name=t,this.base.childNodes[2].name=t.replace(/(\[.*)?$/,"_new_value$1")},dhtmlXCombo.prototype.readonly=function(t){window.dhx4.s2b(t)?(this.base.firstChild.setAttribute("readOnly","true"),this.conf.ro_mode=!0):(this.base.firstChild.removeAttribute("readOnly"),this.conf.ro_mode=!1)},dhtmlXCombo.prototype.setPlaceholder=function(t){void 0!==t&&null!=t||(t=""),this.base.firstChild.setAttribute("placeholder",String(t))},dhtmlXCombo.prototype.setTemplate=function(t){for(var e in t)void 0!==this.conf.template[e]&&(this.conf.template[e]=String(t[e]));for(var e in null!=t.columns?this._mcMakeTemplate(t.columns):this._mcDetachHeader(),this.t)this.t[e].obj.setText(this.t[e].item,this.t[e].item._conf.text);this._confirmSelect()},dhtmlXCombo.prototype.setSkin=function(t){t!=this.conf.skin&&(this.conf.skin=t,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin+(null!=this.hdr?" dhxcombolist_multicolumn":""),null!=this.hdr&&(this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"))},dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild},dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]},dhtmlXCombo.prototype.getList=function(){return this.list},dhtmlXCombo.prototype.getBase=function(){return this.base},dhtmlXCombo.prototype.getParent=function(){return this.DOMParent},dhtmlXCombo.prototype.forEachOption=function(t){for(var e=0;e<this.list.childNodes.length;e++)t.apply(window,[this._getOption(this.list.childNodes[e]._optId,e)])},dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()},dhtmlXCombo.prototype.setFontSize=function(t,e){null!=t&&(this.base.firstChild.style.fontSize=t),null!=e&&(this.list.style.fontSize=e)},dhtmlXCombo.prototype.getOption=function(t){for(var e=null,i=null,n=0;n<this.list.childNodes.length;n++)if(null==e){var s=this.list.childNodes[n]._optId;this.t[s].obj.getValue(this.t[s].item)==t&&(e=s,i=n)}return null==e?null:this._getOption(e,i)},dhtmlXCombo.prototype.getOptionByIndex=function(t){return t<0?null:null==this.list.childNodes[t]?null:this._getOption(this.list.childNodes[t]._optId,t)},dhtmlXCombo.prototype.getOptionByLabel=function(t){for(var e=null,i=null,n=0;n<this.list.childNodes.length;n++)if(null==e){var s=this.list.childNodes[n]._optId;this.t[s].obj.getText(this.t[s].item,!0)==t&&(e=s,i=n)}return null==e?null:this._getOption(e,i)},dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)},dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")},dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.last_selected,"value",null)},dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value},dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value},dhtmlXCombo.prototype.getIndexByValue=function(t){var e=this.getOption(t);return null!=e?e.index:-1},dhtmlXCombo.prototype.setComboText=function(t){1==this.conf.allow_free_text&&(this.unSelectOption(),this.conf.last_text=this.base.firstChild.value=t,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())},dhtmlXCombo.prototype.setComboValue=function(t){var e=this.getOption(t);null!=e?this.selectOption(e.index):(this.conf.last_value=t,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")},dhtmlXCombo.prototype.selectOption=function(t,e,i){if(!(t<0||t>=this.list.childNodes.length)){var n=this.list.childNodes[t]._optId;this._setSelected(n,this._isListVisible(),!0),this._confirmSelect("script")}},dhtmlXCombo.prototype.unSelectOption=function(){null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null),this.base.firstChild.value="",0!=this.conf.f_mode&&this._filterOpts(!0),this._hideList(),this._updateTopImage(null),this._confirmSelect("script")},dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")},dhtmlXCombo.prototype.enable=function(t){t=void 0===t||window.dhx4.s2b(t),this.conf.enabled!=t&&(this.conf.enabled=t,t?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))},dhtmlXCombo.prototype.disable=function(t){t=void 0===t||window.dhx4.s2b(t),this.enable(!t)},dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled},dhtmlXCombo.prototype.show=function(t){t=void 0===t||window.dhx4.s2b(t),this.base.style.display=1==t?"":"none"},dhtmlXCombo.prototype.hide=function(t){void 0===t&&(t=!0),this.show(!t)},dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display},dhtmlXCombo.prototype.setFilterHandler=function(t){"function"==typeof t?(this.conf.f_func=t,this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):"string"==typeof t&&"function"==typeof window[t]?(this.conf.f_func=window[t],this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):this.conf.f_func=null},dhtmlXCombo.prototype.enableFilteringMode=function(t,e,i,n){1==t||"between"==t?(this.conf.f_mode=1==t?"start":"between",null!=e?(this.conf.f_url=e,this.conf.f_cache=window.dhx4.s2b(i),this.conf.f_dyn=window.dhx4.s2b(n)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)},dhtmlXCombo.prototype.filter=function(t,e){for(var i=0;i<this.list.childNodes.length;i++){var n=t.apply(window,[this._getOption(this.list.childNodes[i]._optId,i)]);this.list.childNodes[i].style.display=!0===n?"":"none"}void 0!==e&&1!=e||this._showList(!0)},dhtmlXCombo.prototype.sort=function(t){for(var e=[],i=0;i<this.list.childNodes.length;i++){var n=this.list.childNodes[i]._optId;e.push([n,this._getOption(n,i)])}for("asc"==t||"desc"==t?(k=!0,e.sort(function(e,i){e=e[1].text_option.toLowerCase(),i=i[1].text_option.toLowerCase();var n="asc"==t?1:-1;return e>i?n:-1*n})):"function"!=typeof t&&"function"!=typeof window[t]||("function"==typeof window[t]&&(t=window[t]),e.sort(function(e,i){return t.apply(window,[e[1],i[1]])}));this.list.childNodes.length>0;)this.list.removeChild(this.list.lastChild);for(i=0;i<e.length;i++)this.list.appendChild(this.t[e[i][0]].item)},dhtmlXCombo.prototype.enableAutocomplete=function(t){t=void 0===t||window.dhx4.s2b(t),this.conf.f_ac=t},dhtmlXCombo.prototype.disableAutocomplete=function(t){t=void 0===t||window.dhx4.s2b(t),this.enableAutocomplete(!t)},dhtmlXCombo.prototype.allowFreeText=function(t){this.conf.allow_free_text=void 0===t||window.dhx4.s2b(t)},dhtmlXCombo.prototype._checkForMatch=function(t){for(var e=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),i=null,n=this.list.firstChild;null!=n;){if(""==n.style.display&&null!=n._optId)e==window.dhx4.trim(this.t[n._optId].obj.getText(n,!0)).toLowerCase()&&(i=n._optId,n=null);null!=n&&(n=n.nextSibling)}null==this.conf.last_match?null!=i?(this._setSelected(i,!0,!0),this.conf.last_match=i):"between"==this.conf.f_mode&&1!=t||(this._setSelected(null,!0,!0),this.conf.last_match=null):null!=i?i!=this.conf.last_match&&(this._setSelected(i,!0,!0),this.conf.last_match=i):(this._setSelected(null,!0,!0),this.conf.last_match=null)},dhtmlXCombo.prototype._selectRange=function(t,e){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,t,e)},dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()},dhtmlXCombo.prototype.closeAll=function(){this._hideList()},dhtmlXCombo.prototype._showList=function(t){if(0!=this._getListVisibleCount())if(this._isListVisible())this._checkListHeight();else{this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),null!=this.hdr&&(this.hdr.style.zIndex=Number(this.list.style.zIndex)+1),this.list.style.visibility="hidden",this.list.style.display="",null!=this.hdr&&(this.hdr.style.visibility=this.list.style.visibility,this.hdr.style.display=this.list.style.display);var e=null!=this.hdr?this.hdr.offsetHeight:0;this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+e+this.base.offsetHeight-1+"px",this.list.style.left=window.dhx4.absLeft(this.base)+"px",null!=this.hdr&&(this.hdr.style.width=this.list.style.width,this.hdr.style.left=this.list.style.left,this.hdr.style.top=parseInt(this.list.style.top)-e+"px"),this._checkListHeight(),this.list.style.visibility="visible",null!=this.hdr&&(this.hdr.style.visibility="visible"),this.callEvent("onOpen",[])}else t&&this._isListVisible()&&this._hideList()},dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",null!=this.hdr&&(this.hdr.style.display="none"),this.conf.clear_click=!1,this.callEvent("onClose",[]))},dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display},dhtmlXCombo.prototype._getListVisibleCount=function(){for(var t=0,e=0;e<this.list.childNodes.length;e++)t+=""==this.list.childNodes[e].style.display?1:0;return t},dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h){for(var t=this.list.firstChild;null!=t;)""==t.style.display?(this.conf.item_h=t.offsetHeight+(null!=this.hdr?-1:0),t=null):t=t.nextSibling;t=null}var e=window.dhx4.screenDim(),i=window.dhx4.absTop(this.base),n=this.base.offsetHeight,s=null!=this.hdr?this.hdr.offsetHeight:0,o=Math.max(0,Math.floor((i+s-e.top)/this.conf.item_h)),l=Math.max(0,Math.floor((e.bottom-(i+n+s))/this.conf.item_h)),r=this._getListVisibleCount();l<Math.min(this.conf.opts_count_min,r)&&o>l&&(l=null);var a=Math.min(null==l?o:l,this.conf.opts_count,r),h=a<r?a*this.conf.item_h+"px":"",d=this.conf.sp[this.conf.skin][null!=this.hdr?"hdr_ofs":"list_ofs"];this.list.style.height=h,this.list.style.top=(null==l?i-this.list.offsetHeight+d:i+n+s-d)+"px",null!=this.hdr&&(this.hdr.style.top=(null==l?i-s-this.list.offsetHeight+d:i+n-d)+"px")}},dhtmlXCombo.prototype._scrollToItem=function(t){var e=this.t[t].item.offsetTop,i=e+this.t[t].item.offsetHeight,n=this.list.scrollTop,s=n+this.list.clientHeight;e<n?this.list.scrollTop=e+(null!=this.hdr?1:0):i>s&&(this.list.scrollTop=i-this.list.clientHeight+(null!=this.hdr?-this.conf.sp[this.conf.skin].scr_ofs:0))},dhtmlXCombo.prototype._setSelected=function(t,e,i){i&&this._updateTopImage(t),null==t||this.conf.last_hover!=t?(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,null==t&&this.callEvent("onSelectionChange",[])),null!=t&&(this.t[t].obj.setSelected(this.t[t].item,!0),this.conf.last_hover=t,this.callEvent("onSelectionChange",[]),"select"==this.conf.s_mode&&this.t[t].item==this.t[t].item.parentNode.lastChild&&this._subloadRequest(),e&&this._scrollToItem(t))):e&&this._scrollToItem(t)},dhtmlXCombo.prototype._subloadRequest=function(){if(null!=this.conf.f_url&&1==this.conf.f_dyn&&0==this.conf.f_dyn_end){var t="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,e=this,i=function(t){e.conf.f_cache&&e.conf.f_cache_data[e.conf.f_mask].data.push(t.xmlDoc.responseXML);var n=e.list.childNodes.length;e.conf.f_loading=!0,e.load(t.xmlDoc.responseXML),e.conf.f_loading=!1,n==e.list.childNodes.length&&(e.conf.f_dyn_end=!0,e.conf.f_cache&&(e.conf.f_cache_data[e.conf.f_mask].dyn_end=!0)),i=e=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,t,i):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+t,i)}},dhtmlXCombo.prototype.addOption=function(t,e,i,n,s){var o=null;if(t instanceof Array){for(var l=0;l<t.length;l++)if(void 0!==t[l])if(t[l]instanceof Array)r=this._renderOption({value:t[l][0],text:t[l][1],css:t[l][2],img:t[l][3]}),null==o&&1==window.dhx4.s2b(t[l][4])&&(o=r);else{r=this._renderOption(t[l]);null==o&&1==window.dhx4.s2b(t[l].selected)&&(o=r)}}else{var r=this._renderOption({value:t,text:e,css:i,img:n});null==o&&1==window.dhx4.s2b(s)&&(o=r)}null!=o&&(this._setSelected(o,this._isListVisible(),!0),this._confirmSelect("onInit"))},dhtmlXCombo.prototype.updateOption=function(t,e,i,n){var s=this._getOptionId(t);null!=s&&(this.t[s].obj.update(this.t[s].item,{value:e,text:i,css:n}),this.conf.last_selected==s&&(this.conf.last_text=this.base.firstChild.value=this.t[s].obj.getText(this.t[s].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))},dhtmlXCombo.prototype.deleteOption=function(t){for(var e in this.t){this.t[e].obj.getValue(this.t[e].item)==t&&this._removeOption(e)}this._isListVisible()&&this._showList(!0)},dhtmlXCombo.prototype.clearAll=function(t){for(var e in t=void 0===t||window.dhx4.s2b(t),this.t)this._removeOption(e);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover),this.conf.last_hover=null,this.conf.last_selected=null,this.list.scrollTop=0,1==t&&this._hideList()},dhtmlXCombo.prototype._renderOption=function(t){var e=window.dhx4.newId(),i=document.createElement("DIV");i._optId=e,i._tpl=this.conf.template,void 0===t.img&&void 0!==t.img_src&&(t.img=t.img_src,delete t.img_src),void 0===t.img_dis&&void 0!==t.img_src_dis&&(t.img_dis=t.img_src_dis,delete t.img_src_dis),t.img_path=this.conf.img_path,t.img_def=this.conf.img_def,t.img_def_dis=this.conf.img_def_dis,this.list.appendChild(i);var n=this._isListVisible()&&1==window.dhx4.isFF;if(1==n){this.list.scrollTop;this.list.scrollTop-=1}return null!=this.hdr&&(t.multicol=!0),this.t[i._optId]={obj:this.modes[this.conf.opts_type].render(i,t),item:i,conf:{type:this.conf.opts_type}},i=null,1==n&&(this.list.scrollTop+=1),e},dhtmlXCombo.prototype._removeOption=function(t){this.t[t].obj.destruct(this.t[t].item),this.t[t].obj=null,this.t[t].item.parentNode.removeChild(this.t[t].item),this.t[t].item=null,this.t[t].conf=null,this.t[t]=null,delete this.t[t],this.conf.last_hover==t&&(this.conf.last_hover=null),this.conf.last_selected==t&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))},dhtmlXCombo.prototype._confirmSelect=function(t,e){var i=!1;if(void 0===e&&(e=!0),this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),null!=this.conf.last_hover)i=i||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else{if(!(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value))return this._cancelSelect(),void this._updateTopImage(this.conf.last_selected);i=i||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true"}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=t&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)),e&&this._hideList(),1==i&&"onInit"!=t&&"onDelete"!=t&&this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])},dhtmlXCombo.prototype._cancelSelect=function(){this._hideList(),this.base.firstChild.value=this.conf.last_text,0!=this.conf.f_mode&&this._filterOpts(!0)},dhtmlXCombo.prototype._getOption=function(t,e){if(!this.t[t])return null;if(void 0===e&&(e=-1),e<0)for(var i=0;i<this.list.childNodes.length;i++)e<0&&this.list.childNodes[i]._optId==t&&(e=i);var n={value:this.t[t].obj.getValue(this.t[t].item),text:this.t[t].obj.getText(this.t[t].item),text_input:this.t[t].obj.getText(this.t[t].item,!0),text_option:this.t[t].obj.getText(this.t[t].item,null,!0),css:this.t[t].obj.getCss(this.t[t].item),selected:t==this.conf.last_selected,index:e};if("function"==typeof this.t[t].obj.getExtraData){var s=this.t[t].obj.getExtraData(this.t[t].item);for(var o in s)void 0===n[o]&&(n[o]=s[o])}return n},dhtmlXCombo.prototype._getOptionProp=function(t,e,i){if(null!=t){var n=this._getOption(t);if(null!=n)return n[e]}return i},dhtmlXCombo.prototype._getOptionId=function(t){for(var e=null,i=0;i<this.list.childNodes.length;i++)if(null==e){var n=this.list.childNodes[i]._optId;t==this.t[n].obj.getValue(this.t[n].item)&&(e=n)}return e},dhtmlXCombo.prototype._getOptionValue=function(t){return this._getOptionProp(t,"value",null)},dhtmlXCombo.prototype.setSize=function(t){this.conf.combo_width=parseInt(t)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),this.base.style.width=Math.max(0,this.conf.combo_width)+"px",this._adjustBase()},dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px",this.base.firstChild.style.marginLeft=this.conf.combo_image?"23px":"0px"},dhtmlXCombo.prototype.setOptionWidth=function(t){this.conf.opts_width=parseInt(t)||null},dhtmlXCombo.prototype.setOptionIndex=function(t,e){if(!(isNaN(e)||e<0)){var i=this.getOption(t);if(null!=i&&e!=i.index){var n=this.list.childNodes[i.index];n.parentNode.removeChild(n),null!=this.list.childNodes[e]?this.list.insertBefore(n,this.list.childNodes[e]):this.list.appendChild(n),n=null}}},dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length},dhtmlXCombo.prototype._mcMakeTemplate=function(t){var e="",i="";this.conf.col_w=0;for(var n=0;n<t.length;n++){var s=Number(parseInt(t[n].width)||50),o=t[n].css||"",l=0==n&&1==window.dhx4.isIE6?"_first":"";i+="<div class='dhxcombo_cell"+l+" "+o+"' style='width:"+s+"px;'><div class='dhxcombo_cell_text'>"+(t[n].option||"&nbsp;")+"</div></div>",e+="<div class='dhxcombo_hdrcell"+l+" "+o+"' style='width:"+s+"px;'><div class='dhxcombo_hdrcell_text'>"+(t[n].header||"&nbsp;")+"</div></div>",this.conf.col_w+=s+1}s=500;var r=document.createElement("DIV");r.style.position="absolute",r.style.top="10px",r.style.left=2*-s+"px",r.style.width=s+"px",r.style.height="50px",r.style.overflowY="scroll",r.innerHTML="<div>&nbsp;</div>",document.body.appendChild(r),this.conf.col_w+=s-r.firstChild.offsetWidth+10,r.parentNode.removeChild(r),r=null,this.conf.template.option=i,this._mcAttachHeader(e),this.list.className+=" dhxcombolist_multicolumn"},dhtmlXCombo.prototype._mcAttachHeader=function(t){null==this.hdr&&(this.hdr=document.createElement("DIV"),this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr",this.hdr.style.display="none",this.list.parentNode.insertBefore(this.hdr,this.list),"function"==typeof window.addEventListener?this.hdr.addEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.attachEvent("onmousedown",this._doOnListMouseDown),"checkbox"==this.conf.opts_type&&1==this.conf.combo_image&&(this.conf.combo_image=!1,null!=this.base.lastChild.className.match(/dhxcombo_top_image/)&&this.base.removeChild(this.base.lastChild),this._adjustBase())),this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+t+"</div>"},dhtmlXCombo.prototype._mcDetachHeader=function(){null!=this.hdr&&("function"==typeof window.addEventListener?this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.detachEvent("onmousedown",this._doOnListMouseDown),this.hdr.parentNode.removeChild(this.hdr),this.hdr=null),this.conf.col_w=null,this.conf.item_h=null},dhtmlXCombo.prototype.modes={},dhtmlXCombo.prototype.doWithItem=function(t,e,i,n){var s=t>=0&&t<this.list.childNodes.length?this.list.childNodes[t]._optId:null;if(null==s)return null;if("function"!=typeof this.t[s].obj[e])return null;for(var o=[this.t[s].item],l=2;l<arguments.length;l++)o.push(arguments[l]);return this.t[s].obj[e].apply(this.t[s].obj,o)},dhtmlXCombo.prototype.modes.option={image:!1,html:!1,option_css:"dhxcombo_option_text",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText=e.css,t._conf.css=e.css),this.setText(t,e.text),this},destruct:function(t){t._conf=null},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text)},setText:function(t,e){t._conf.text=e;var i="object"==typeof e?window.dhx4.template(t._tpl.option,this.replaceHtml(t._conf.text),!0):window.dhx4.trim(this.replaceHtml(t._conf.text)||"");t.lastChild.innerHTML=0==i.length?"&nbsp;":i},getText:function(t,e,i){return window.dhx4.s2b(e)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.input,t._conf.text,!0):window.dhx4.s2b(i)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.option,t._conf.text,!0):t._conf.text},getValue:function(t){return t._conf.value},getCss:function(t){return t._conf.css},setSelected:function(t,e){t.className="dhxcombo_option"+(e?" dhxcombo_option_selected":"")},isSelected:function(t){return String(t.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(t){return{type:"option"}},replaceHtml:function(t){if(1==this.html)return t;if("object"==typeof t){var e={};for(var i in t)e[i]=this.replaceHtml(t[i])}else e=t.replace(/[\<\>\&\s]/g,function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return t});return e}},dhtmlXCombo.prototype.modes.checkbox={image:!0,html:!0,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(t,e){return null==this.image_css_regexp&&(this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))),t._conf={value:e.value,css:"",checked:window.dhx4.s2b(e.checked)},t.className="dhxcombo_option",1==e.multicol?(e.text.checkbox="<div class='"+String(this.image_css).replace("#state#",t._conf.checked?"1":"0")+"'></div>&nbsp;",t.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"):t.innerHTML="<div class='"+String(this.image_css).replace("#state#",t._conf.checked?"1":"0")+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text),this},setChecked:function(t,e){t._conf.checked=window.dhx4.s2b(e);var i=String(this.image_css).replace("#state#",t._conf.checked?"1":"0");this._changeChbxCss(t.childNodes,i)},_changeChbxCss:function(t,e){for(var i=0;i<t.length;i++)null!=t[i].tagName&&null!=t[i].className&&null!=t[i].className.match(this.image_css_regexp)?t[i].className=e:t[i].childNodes.length>0&&this._changeChbxCss(t[i].childNodes,e)},isChecked:function(t){return 1==t._conf.checked},getExtraData:function(t){return{type:"checkbox",checked:t._conf.checked}},optionClick:function(t,e,i){for(var n=!0,s=e.target||e.srcElement;1==n&&null!=s&&s!=t&&null!=s.className;)if(null!=s.className.match(this.image_css_regexp)){var o=[t._conf.value,!t._conf.checked];!0===i.callEvent("onBeforeCheck",o)&&(this.setChecked(t,!this.isChecked(t)),i.callEvent("onCheck",o)),n=!1,o=null}else s=s.parentNode;return s=i=t=null,n},getTopImage:function(t,e){return""},topImageClick:function(t,e){return!0}},dhtmlXComboExtend("checkbox","option"),dhtmlXCombo.prototype.setChecked=function(t,e){this.doWithItem(t,"setChecked",e)},dhtmlXCombo.prototype.getChecked=function(t){for(var e=[],i=0;i<this.list.childNodes.length;i++)this.isChecked(i)&&e.push(this._getOptionProp(this.list.childNodes[i]._optId,"value",""));return e},dhtmlXCombo.prototype.isChecked=function(t){return this.doWithItem(t,"isChecked")},dhtmlXCombo.prototype.modes.image={image:!0,html:!0,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis),this},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis)},setImage:function(t,e,i,n,s,o){e=null!=e&&e.length>0?n+e:null!=s&&s.length>0?n+s:null,i=null!=i&&i.length>0?n+i:null!=o&&o.length>0?n+o:1==o?e:null,t._conf.img=e,t._conf.img_dis=i,t.firstChild.style.backgroundImage=null!=e?"url("+e+")":"none"},getExtraData:function(t){return{type:"image"}},getTopImage:function(t,e){var i=e?"img":"img_dis";return null!=t&&null!=t._conf[i]?"<div class='"+this.image_css+"' style='background-image:url("+t._conf[i]+");'></div>":""}},dhtmlXComboExtend("image","option"),dhtmlXCombo.prototype.setDefaultImage=function(t,e){null!=t&&(this.conf.img_def=t),null!=e&&(this.conf.img_def_dis=e)},dhtmlXCombo.prototype.setImagePath=function(t){this.conf.img_path=t},dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))},dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(t){var e=0;for(var i in this.itemPull){var n=this.itemPull[i].parent,s=this.itemPull[i].type;null!=this.idPull[i]&&(n!=t||"item"!=s&&"radio"!=s&&"checkbox"!=s||"none"==this.idPull[i].style.display||e++)}return e},dhtmlXMenuObject.prototype._redefineComplexState=function(t){if(this.idPrefix+this.topId!=t&&null!=this.idPull["polygon_"+t]&&null!=this.idPull[t]){var e=this._countVisiblePolygonItems(t);e>0&&!this.itemPull[t].complex&&this._updateItemComplexState(t,!0,!1),0==e&&this.itemPull[t].complex&&this._updateItemComplexState(t,!1,!1)}},dhtmlXMenuObject.prototype._updateItemComplexState=function(t,e,i){if(this.conf.context||"TopLevel"!=this._getItemLevelType(t.replace(this.idPrefix,""))){if(null!=this.idPull[t]&&null!=this.itemPull[t]&&(this.itemPull[t].complex=e,t!=this.idPrefix+this.topId)){var n=null,s=this.idPull[t].childNodes[this.conf.rtl?0:2];if(s.childNodes[0]&&0===String(s.childNodes[0].className).search("complex_arrow")&&(n=s.childNodes[0]),this.itemPull[t].complex){if(null==n){for((n=document.createElement("DIV")).className="complex_arrow",n.id="arrow_"+t;s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(n)}this.conf.dload&&"get"==this.itemPull[t].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=n.className&&(n.className="complex_arrow_loading"):n.className="complex_arrow"}else this.itemPull[t].complex||null==n||(s.removeChild(n),null!=this.itemPull[t].hotkey_backup&&this.setHotKey&&this.setHotKey(t.replace(this.idPrefix,""),this.itemPull[t].hotkey_backup))}}else this.itemPull[t].complex=e},dhtmlXMenuObject.prototype._getItemLevelType=function(t){return this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"},dhtmlXMenuObject.prototype.setIconsPath=function(t){this.conf.icons_path=t},dhtmlXMenuObject.prototype._updateItemImage=function(t,e){t=this.idPrefix+t;var i=this.itemPull[t].type;if("checkbox"!=i&&"radio"!=i){var n=this.itemPull[t].parent==this.idPrefix+this.topId&&!this.conf.context,s=null;if(n)for(var o=0;o<this.idPull[t].childNodes.length;o++)try{"dhtmlxMenu_TopLevel_Item_Icon"==this.idPull[t].childNodes[o].className&&(s=this.idPull[t].childNodes[o])}catch(t){}else{try{s=this.idPull[t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(t){}null!=s&&void 0!==s.className&&"sub_icon"==s.className||(s=null)}var l=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(l.length>0)if(null!=s)s.src=this.conf.icons_path+l;else if(n){(s=document.createElement("IMG")).className="dhtmlxMenu_TopLevel_Item_Icon",s.src=this.conf.icons_path+l,s.border="0",s.id="image_"+t,!this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(s,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(s)}else{(s=document.createElement("IMG")).className="sub_icon",s.src=this.conf.icons_path+l,s.border="0",s.id="image_"+t;for(var r=this.idPull[t].childNodes[this.conf.rtl?2:0];r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(s)}else if(null!=s){var a=s.parentNode;a.removeChild(s),a.innerHTML="&nbsp;",a=s=null}}},dhtmlXMenuObject.prototype._getAllParents=function(t){var e=new Array;for(var i in this.itemPull)if(this.itemPull[i].parent==t&&(e[e.length]=this.itemPull[i].id,this.itemPull[i].complex))for(var n=this._getAllParents(this.itemPull[i].id),s=0;s<n.length;s++)e[e.length]=n[s];return e},dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var t=window.dhx4.screenDim();this.conf.v.x1=t.left,this.conf.v.x2=t.right,this.conf.v.y1=t.top,this.conf.v.y2=t.bottom}},dhtmlXMenuObject.prototype.getItemPosition=function(t){t=this.idPrefix+t;var e=-1;if(null==this.itemPull[t])return e;for(var i=this.itemPull[t].parent,n=null!=this.idPull["polygon_"+i]?this.idPull["polygon_"+i].tbd:this.cont,s=0;s<n.childNodes.length;s++)n.childNodes[s]!=this.idPull["separator_"+t]&&n.childNodes[s]!=this.idPull[t]||(e=s);return e},dhtmlXMenuObject.prototype.setItemPosition=function(t,e){if(t=this.idPrefix+t,null!=this.idPull[t]){var i=this.itemPull[t].parent==this.idPrefix+this.topId,n=this.idPull[t],s=this.getItemPosition(t.replace(this.idPrefix,"")),o=this.itemPull[t].parent,l=null!=this.idPull["polygon_"+o]?this.idPull["polygon_"+o].tbd:this.cont;l.removeChild(l.childNodes[s]),e<0&&(e=0),i&&e<1&&(e=1),e<l.childNodes.length?l.insertBefore(n,l.childNodes[e]):l.appendChild(n)}},dhtmlXMenuObject.prototype.getParentId=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:(null!=this.itemPull[t].parent?this.itemPull[t].parent:this.topId).replace(this.idPrefix,"")},dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()},dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0),this._isInited=!1,this.idPrefix=this._genStr(12)+"_",this.itemPull={}},void 0===dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={}),dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(t,e){var i=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var n=0;n<i.length;n++)i[n]!=t&&this._hidePolygon(i[n]),null!=this.idPull[i[n]]&&i[n]!=t&&(this.idPull[i[n]].className=this.idPull[i[n]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+t].state&&(this.idPull[this.idPrefix+t].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+t,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?t:this.conf.selected:t,this.itemPull[this.idPrefix+t].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+t,this.conf.dir_toplv))},dhtmlXMenuObject.prototype._initTopLevelMenu=function(){if(this.conf.dir_toplv="bottom",this.conf.dir_sublv=this.conf.rtl?"left":"right",this.conf.context)this.idPull[this.idPrefix+this.topId]=new Array(0,0),this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var t=this._getMenuNodes(this.idPrefix+this.topId),e=0;e<t.length;e++)"item"==this.itemPull[t[e]].type&&this._renderToplevelItem(t[e],null),"separator"==this.itemPull[t[e]].type&&this._renderSeparator(t[e],null)},dhtmlXMenuObject.prototype._renderToplevelItem=function(t,e){var i=this,n=document.createElement("DIV");if(n.id=t,"enabled"==this.itemPull[t].state&&null!=this.itemPull[t].cssNormal?n.className=this.itemPull[t].cssNormal:n.className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[t].state?"Normal":"Disabled"),""!=this.itemPull[t].title){var s=document.createElement("DIV");s.className="top_level_text",s.innerHTML=this.itemPull[t].title,n.appendChild(s)}if(this.itemPull[t].tip.length>0&&(n.title=this.itemPull[t].tip),""!=this.itemPull[t].imgen||""!=this.itemPull[t].imgdis){var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(o){var l=document.createElement("IMG");l.border="0",l.id="image_"+t,l.src=this.conf.icons_path+o,l.className="dhtmlxMenu_TopLevel_Item_Icon",n.childNodes.length>0&&!this.conf.rtl?n.insertBefore(l,n.childNodes[0]):n.appendChild(l)}}n.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},n.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont)),null!=e&&(++e<0&&(e=0),e>this.cont.childNodes.length-1&&(e=null)),null!=e?this.cont.insertBefore(n,this.cont.childNodes[e]):this.cont.appendChild(n),this.idPull[n.id]=n,this.itemPull[t].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[t].id,this.itemPull[t].id),n.onmouseover=function(){"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler);var t=i._getSubItemToDeselectByPolygon("parent");i._removeSubItemFromSelected(-1,-1);for(var e=0;e<t.length;e++)t[e]!=this.id&&i._hidePolygon(t[e]),null!=i.idPull[t[e]]&&t[e]!=this.id&&(null!=i.itemPull[t[e]].cssNormal?i.idPull[t[e]].className=i.itemPull[t[e]].cssNormal:("sub_item_selected"==i.idPull[t[e]].className&&(i.idPull[t[e]].className="sub_item"),i.idPull[t[e]].className=i.idPull[t[e]].className.replace(/Selected/g,"Normal")));if("enabled"==i.itemPull[this.id].state){if(this.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected",i._addSubItemToSelected(this.id,"parent"),i.conf.selected="win"==i.conf.mode?-1!=i.conf.selected?this.id:i.conf.selected:this.id,i.conf.dload){if("no"==i.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime(),i.itemPull[this.id].loaded="get";var n=this.id.replace(i.idPrefix,"");i._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in t.params[this.conf.dload_pid]=n,this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},i.loadStruct(i.conf.dload_url)}i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!0)}if((!i.conf.dload||i.conf.dload&&(!i.itemPull[this.id].loaded||"yes"==i.itemPull[this.id].loaded))&&i.itemPull[this.id].complex&&-1!=i.conf.selected)if(i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context){this._mouseOver=!0;var s=this.id;this._menuOpenTM=window.setTimeout(function(){i._showPolygon(s,i.conf.dir_toplv)},i.conf.top_tmtime)}else i._showPolygon(this.id,i.conf.dir_toplv)}i._doOnTouchMenu(this.id.replace(i.idPrefix,""))},n.onmouseout=function(){i.itemPull[this.id].complex&&-1!=i.conf.selected||"enabled"!=i.itemPull[this.id].state||(null!=i.itemPull[this.id].cssNormal?n.className=i.itemPull[this.id].cssNormal:n.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal"),"web"==i.conf.mode&&(window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i._clearAndHide()},i.conf.tm_sec,"JavaScript")),i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))},n.onclick=function(t){if("web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),"web"==i.conf.mode||"disabled"!=i.itemPull[this.id].state){if((t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,"win"==i.conf.mode&&i.itemPull[this.id].complex){if(i.conf.selected==this.id){i.conf.selected=-1;var e=!1}else{i.conf.selected=this.id;e=!0}e?i._showPolygon(this.id,i.conf.dir_toplv):i._hidePolygon(this.id)}var n=i.itemPull[this.id].complex?"c":"-",s="enabled"!=i.itemPull[this.id].state?"d":"-",o={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};return i._doOnClick(this.id.replace(i.idPrefix,""),n+s+"t",o),!1}},"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addSubMenuPolygon=function(t,e){this._renderSublevelPolygon(t,e);var i=this._getMenuNodes(e);for(n=0;n<i.length;n++)"separator"==this.itemPull[i[n]].type?this._renderSeparator(i[n],null):this._renderSublevelItem(i[n],null);if(t==e);else;for(var n=0;n<i.length;n++)this.itemPull[i[n]].complex&&this._addSubMenuPolygon(t,this.itemPull[i[n]].id)},dhtmlXMenuObject.prototype._renderSublevelPolygon=function(t,e){var i=document.createElement("DIV");i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":""),i.dir="ltr",i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1},i.id="polygon_"+e,i.onclick=function(t){(t=t||event).cancelBubble=!0},i.style.display="none",document.body.insertBefore(i,document.body.firstChild),i.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var n=document.createElement("TABLE");n.className="dhtmlxMebu_SubLevelArea_Tbl",n.cellSpacing=0,n.cellPadding=0,n.border=0;var s=document.createElement("TBODY");return n.appendChild(s),i.childNodes[1].appendChild(n),i.tbl=n,i.tbd=s,this.idPull[i.id]=i,null!=this.sxDacProc&&(this.idPull["sxDac_"+e]=new this.sxDacProc(i,i.className),window.dhx4.isIE?(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCycles))),i},dhtmlXMenuObject.prototype._renderSublevelItem=function(t,e){var i=this,n=document.createElement("TR");n.className="enabled"==this.itemPull[t].state?"sub_item":"sub_item_dis";var s=document.createElement("TD");s.className="sub_item_icon";var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(""!=o){var l,r=this.itemPull[t].type;if("checkbox"==r||"radio"==r)(l=document.createElement("DIV")).id="image_"+this.itemPull[t].id,l.className="sub_icon "+o,s.appendChild(l);if("checkbox"!=r&&"radio"!=r)(l=document.createElement("IMG")).id="image_"+this.itemPull[t].id,l.className="sub_icon",l.src=this.conf.icons_path+o,s.appendChild(l)}else s.innerHTML="&nbsp;";var a=document.createElement("TD");if(a.className="sub_item_text",""!=this.itemPull[t].title){var h=document.createElement("DIV");h.className="sub_item_text",h.innerHTML=this.itemPull[t].title,a.appendChild(h)}else a.innerHTML="&nbsp;";var d=document.createElement("TD");if(d.className="sub_item_hk",this.itemPull[t].complex){var c=document.createElement("DIV");c.className="complex_arrow",c.id="arrow_"+this.itemPull[t].id,d.appendChild(c)}else if(this.itemPull[t].hotkey.length>0&&!this.itemPull[t].complex){var u=document.createElement("DIV");u.className="sub_item_hk",u.innerHTML=this.itemPull[t].hotkey,d.appendChild(u)}else d.innerHTML="&nbsp;";n.appendChild(this.conf.rtl?d:s),n.appendChild(a),n.appendChild(this.conf.rtl?s:d),n.id=this.itemPull[t].id,n.parent=this.itemPull[t].parent,this.itemPull[t].tip.length>0&&(n.title=this.itemPull[t].tip),n.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},n.onmouseover=function(t){i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),this._visible||i._redistribSubLevelSelection(this.id,this.parent),this._visible=!0},n.onmouseout=function(){"web"==i.conf.mode&&(i.conf.tm_handler&&window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i&&i._clearAndHide&&i._clearAndHide()},i.conf.tm_sec,"JavaScript"));var t=this;i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),i.conf.hide_tm[this.id]=window.setTimeout(function(){t._visible=!1},50)},n.onclick=function(t){if(i.checkEvent("onClick")||!i.itemPull[this.id].complex){(t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,tc=i.itemPull[this.id].complex?"c":"-",td="enabled"==i.itemPull[this.id].state?"-":"d";var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};switch(i.itemPull[this.id].type){case"checkbox":i._checkboxOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"radio":i._radioOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"item":i._doOnClick(this.id.replace(i.idPrefix,""),tc+td+"n",e)}return!1}};var f=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(++e<0&&(e=0),e>f.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=f.tbd.childNodes[e]?f.tbd.insertBefore(n,f.tbd.childNodes[e]):f.tbd.appendChild(n),this.idPull[n.id]=n},dhtmlXMenuObject.prototype._renderSeparator=function(t,e){var i=this.conf.context?"SubLevelArea":this.itemPull[t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=i||!this.conf.context){var n=this;if("TopLevel"!=i){var s=document.createElement("TR");s.className="sub_sep";var o=document.createElement("TD");o.colSpan="3",s.appendChild(o)}var l=document.createElement("DIV");if(l.id="separator_"+t,l.className="TopLevel"==i?"top_sep":"sub_sep",l.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},l.onclick=function(t){(t=t||event).cancelBubble=!0;var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};n._doOnClick(this.id.replace("separator_"+n.idPrefix,""),"--s",e)},"TopLevel"==i){if(null!=e)++e<0&&(e=0),null!=this.cont.childNodes[e]?this.cont.insertBefore(l,this.cont.childNodes[e]):this.cont.appendChild(l);else{var r=this.cont.childNodes[this.cont.childNodes.length-1];-1==String(r).search("TopLevel_Text")?this.cont.appendChild(l):this.cont.insertBefore(l,r)}this.idPull[l.id]=l}else{var a=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(++e<0&&(e=0),e>a.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=a.tbd.childNodes[e]?a.tbd.insertBefore(s,a.tbd.childNodes[e]):a.tbd.appendChild(s),o.appendChild(l),this.idPull[l.id]=s}}},dhtmlXMenuObject.prototype.addNewSeparator=function(t,e){e=this.idPrefix+(null!=e?e:this._genStr(24));var i=this.idPrefix+this.getParentId(t);this._addItemIntoGlobalStrorage(e,i,"","separator",!1,"",""),this._renderSeparator(e,this.getItemPosition(t))},dhtmlXMenuObject.prototype._initObj=function(t,e,i){t instanceof Array||(null!=(i=t.parentId)&&0!==String(i).indexOf(this.idPrefix)&&(i=this.idPrefix+String(i)),t=t.items);for(var n=0;n<t.length;n++){void 0!==t[n].id&&null!=t[n].id||(t[n].id=this._genStr(24)),null==t[n].text&&(t[n].text=""),0!==String(t[n].id).indexOf(this.idPrefix)&&(t[n].id=this.idPrefix+String(t[n].id));var s={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var o in s)void 0===t[n][o]&&(t[n][o]=s[o]);if(""==t[n].imgen&&null!=t[n].img&&(t[n].imgen=t[n].img),""==t[n].imgdis&&null!=t[n].img_disabled&&(t[n].imgdis=t[n].img_disabled),null==t[n].title&&null!=t[n].text&&(t[n].title=t[n].text),null!=t[n].href&&(null!=t[n].href.link&&(t[n].href_link=t[n].href.link),null!=t[n].href.target&&(t[n].href_target=t[n].href.target)),null!=t[n].userdata)for(var o in t[n].userdata)this.userData[t[n].id+"_"+o]=t[n].userdata[o];void 0!==t[n].enabled&&0==window.dhx4.s2b(t[n].enabled)?t[n].state="disabled":void 0!==t[n].disabled&&1==window.dhx4.s2b(t[n].disabled)&&(t[n].state="disabled"),void 0===t[n].parent&&(t[n].parent=null!=i?i:this.idPrefix+this.topId),"checkbox"==t[n].type&&(t[n].checked=window.dhx4.s2b(t[n].checked),t[n].imgen=t[n].imgdis="chbx_"+(t[n].checked?"1":"0")),"radio"==t[n].type&&(t[n].checked=window.dhx4.s2b(t[n].checked),t[n].imgen=t[n].imgdis="rdbt_"+(t[n].checked?"1":"0"),void 0!==t[n].group&&null!=t[n].group||(t[n].group=this._genStr(24)),null==this.radio[t[n].group]&&(this.radio[t[n].group]=[]),this.radio[t[n].group].push(t[n].id)),this.itemPull[t[n].id]=t[n],null!=t[n].items&&t[n].items.length>0?(this.itemPull[t[n].id].complex=!0,this._initObj(t[n].items,!0,t[n].id)):this.conf.dload&&1==t[n].complex&&(this.itemPull[t[n].id].loaded="no"),this.itemPull[t[n].id].items=null}if(!0!==e)if(1==this.conf.dload)if(null==i)this._initTopLevelMenu();else{if(this._addSubMenuPolygon(i,i),this.conf.selected==i){var l=this.itemPull[i].parent==this.idPrefix+this.topId,r=l&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv,a=!1;if(l&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context){var h=this.idPull[i];if(1==h._mouseOver){var d=this.conf.top_tmtime-((new Date).getTime()-h._dynLoadTM);if(d>1){var c=i,u=this;h._menuOpenTM=window.setTimeout(function(){u._showPolygon(c,r),u=c=null},d),a=!0}}}a||this._showPolygon(i,r)}this.itemPull[i].loaded="yes",1==this.conf.dload_icon&&this._updateLoaderIcon(i,!1)}else this._init()},dhtmlXMenuObject.prototype._xmlToJson=function(t,e){var i=[];if(null==e){var n=t.getElementsByTagName(this.conf.tags.root);if(null==n||null!=n&&0==n.length)return{items:[]};n=n[0]}else n=t;null!=n.getAttribute("parentId")&&(e=this.idPrefix+n.getAttribute("parentId"));for(var s=0;s<n.childNodes.length;s++)if(void 0!==n.childNodes[s].tagName&&String(n.childNodes[s].tagName).toLowerCase()==this.conf.tags.item){var o=n.childNodes[s],l={id:this.idPrefix+(o.getAttribute("id")||this._genStr(24)),title:o.getAttribute("text")||"",imgen:o.getAttribute("img")||"",imgdis:o.getAttribute("imgdis")||"",tip:"",hotkey:"",type:o.getAttribute("type")||"item"};if(null!=o.getAttribute("cssNormal")&&(l.cssNormal=o.getAttribute("cssNormal")),"checkbox"==l.type&&(l.checked=o.getAttribute("checked")),"radio"==l.type&&(l.checked=o.getAttribute("checked"),l.group=o.getAttribute("group")),l.state="enabled",null!=o.getAttribute("enabled")&&0==window.dhx4.s2b(o.getAttribute("enabled"))?l.state="disabled":null!=o.getAttribute("disabled")&&1==window.dhx4.s2b(o.getAttribute("disabled"))&&(l.state="disabled"),l.parent=null!=e?e:this.idPrefix+this.topId,this.conf.dload)l.complex=null!=o.getAttribute("complex"),l.complex&&(l.loaded="no");else{var r=this._xmlToJson(o,l.id);l.items=r.items,l.complex=l.items.length>0}for(var a=0;a<o.childNodes.length;a++)if(void 0!==o.childNodes[a].tagName){var h=String(o.childNodes[a].tagName||"").toLowerCase();if(h==this.conf.tags.userdata){var d=o.childNodes[a];null!=d.getAttribute("name")&&(this.userData[l.id+"_"+d.getAttribute("name")]=null!=d.firstChild&&null!=d.firstChild.nodeValue?d.firstChild.nodeValue:"")}h==this.conf.tags.text_ext&&(l.title=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.tooltip&&(l.tip=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.hotkey&&(l.hotkey=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.href&&"item"==l.type&&(l.href_link=o.childNodes[a].firstChild.nodeValue,null!=o.childNodes[a].getAttribute("target")&&(l.href_target=o.childNodes[a].getAttribute("target")))}i.push(l)}return o={parentId:e,items:i}},dhtmlXMenuObject.prototype.enableDynamicLoading=function(t,e){this.conf.dload=!0,this.conf.dload_url=t,this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"&",this.conf.dload_icon=e,this._init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(t,e){if(null!=this.idPull[t]&&!(String(this.idPull[t].className).search("TopLevel_Item")>=0)){var i=this.conf.rtl?0:2;if(this.idPull[t].childNodes[i]&&this.idPull[t].childNodes[i].childNodes[0]){var n=this.idPull[t].childNodes[i].childNodes[0];0===String(n.className).search("complex_arrow")&&(n.className="complex_arrow"+(e?"_loading":""))}}},dhtmlXMenuObject.prototype.addNewSibling=function(t,e,i,n,s,o){var l=this.idPrefix+(null!=e?e:this._genStr(24)),r=this.idPrefix+(null!=t?this.getParentId(t):this.topId);this._addItemIntoGlobalStrorage(l,r,i,"item",n,s,o),r!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(l,this.getItemPosition(t)):this._renderToplevelItem(l,this.getItemPosition(t))},dhtmlXMenuObject.prototype.addNewChild=function(t,e,i,n,s,o,l){if(null==t){if(!this.conf.context)return this.addNewSibling(t,i,n,s,o,l),void(null!=e&&this.setItemPosition(i,e));t=this.topId}i=this.idPrefix+(null!=i?i:this._genStr(24)),this.setHotKey&&this.setHotKey(t,""),t=this.idPrefix+t,this._addItemIntoGlobalStrorage(i,t,n,"item",s,o,l),null==this.idPull["polygon_"+t]&&this._renderSublevelPolygon(t,t),this._renderSublevelItem(i,e-1),this._redefineComplexState(t)},dhtmlXMenuObject.prototype.removeItem=function(t,e,i){e||(t=this.idPrefix+t);var n=null;if(t!=this.idPrefix+this.topId){if(null==this.itemPull[t])return;this.idPull["polygon_"+t]&&this.idPull["polygon_"+t]._tmShow&&window.clearTimeout(this.idPull["polygon_"+t]._tmShow);var s=this.itemPull[t].type;if("separator"==s){var o=this.idPull["separator_"+t];this.itemPull[t].parent==this.idPrefix+this.topId?(o.onclick=null,o.onselectstart=null,o.id=null,o.parentNode.removeChild(o)):(o.childNodes[0].childNodes[0].onclick=null,o.childNodes[0].childNodes[0].onselectstart=null,o.childNodes[0].childNodes[0].id=null,o.childNodes[0].removeChild(o.childNodes[0].childNodes[0]),o.removeChild(o.childNodes[0]),o.parentNode.removeChild(o)),this.idPull["separator_"+t]=null,this.itemPull[t]=null,delete this.idPull["separator_"+t],delete this.itemPull[t],o=null}else{for(n=this.itemPull[t].parent,(o=this.idPull[t]).onclick=null,o.oncontextmenu=null,o.onmouseover=null,o.onmouseout=null,o.onselectstart=null,o.id=null;o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.parentNode.removeChild(o),this.idPull[t]=null,this.itemPull[t]=null,delete this.idPull[t],delete this.itemPull[t],o=null}s=null}for(var l in this.itemPull)this.itemPull[l].parent==t&&this.removeItem(l,!0,!0);var r=new Array(t);null==n||i||null!=this.idPull["polygon_"+n]&&0==this.idPull["polygon_"+n].tbd.childNodes.length&&(r.push(n),this._updateItemComplexState(n,!1,!1));for(var a=0;a<r.length;a++)if(this.idPull["polygon_"+r[a]]){var h=this.idPull["polygon_"+r[a]];if(h.onclick=null,h.oncontextmenu=null,h.tbl.removeChild(h.tbd),h.tbd=null,h.childNodes[1].removeChild(h.tbl),h.tbl=null,h.id=null,h.parentNode.removeChild(h),h=null,window.dhx4.isIE6){var d="polygon_"+r[a]+"_ie6cover";null!=this.idPull[d]&&(document.body.removeChild(this.idPull[d]),delete this.idPull[d])}null!=this.idPull["arrowup_"+t]&&this._removeArrow&&this._removeArrow("arrowup_"+t),null!=this.idPull["arrowdown_"+t]&&this._removeArrow&&this._removeArrow("arrowdown_"+t),this.idPull["polygon_"+r[a]]=null,delete this.idPull["polygon_"+r[a]]}r=null,"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(t,e,i,n,s,o,l){var r={id:t,title:i,imgen:null!=o?o:"",imgdis:null!=l?l:"",type:n,state:1==s?"disabled":"enabled",parent:e,complex:!1,hotkey:"",tip:""};this.itemPull[r.id]=r},dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0,1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1),null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)},dhtmlXMenuObject.prototype.addContextZone=function(t){if(t==document.body){t="document.body."+this.idPrefix;var e=document.body}else if("string"==typeof t)e=document.getElementById(t);else e=t;var i=!1;for(var n in this.conf.ctx_zones)i=i||n==t||this.conf.ctx_zones[n]==e;if(1==i)return!1;this.conf.ctx_zones[t]=e;var s=this;window.dhx4.isOpera?(this.operaContext=function(t){s._doOnContextMenuOpera(t,s)},e.addEventListener("mouseup",this.operaContext,!1)):(null==e.oncontextmenu||e._oldContextMenuHandler||(e._oldContextMenuHandler=e.oncontextmenu),e.oncontextmenu=function(t){for(var e in dhtmlXMenuObject.prototype.liveInst)e!=s.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[e].context&&dhtmlXMenuObject.prototype.liveInst[e]._hideContextMenu();return(t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,s._doOnContextBeforeCall(t,this),!1})},dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(t,e){for(var i in dhtmlXMenuObject.prototype.liveInst)i!=e.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[i].context&&dhtmlXMenuObject.prototype.liveInst[i]._hideContextMenu();return t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,0==t.button&&1==t.ctrlKey&&e._doOnContextBeforeCall(t,this),!1},dhtmlXMenuObject.prototype.removeContextZone=function(t){if(!this.isContextZone(t))return!1;t==document.body&&(t="document.body."+this.idPrefix);var e=this.conf.ctx_zones[t];window.dhx4.isOpera?e.removeEventListener("mouseup",this.operaContext,!1):(e.oncontextmenu=null!=e._oldContextMenuHandler?e._oldContextMenuHandler:null,e._oldContextMenuHandler=null);try{this.conf.ctx_zones[t]=null,delete this.conf.ctx_zones[t]}catch(t){}return!0},dhtmlXMenuObject.prototype.isContextZone=function(t){if(t==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var e=!1;return null!=this.conf.ctx_zones[t]&&this.conf.ctx_zones[t]==document.getElementById(t)&&(e=!0),e},dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null!=this.idPull["polygon_"+this.idPrefix+this.topId]&&""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display},dhtmlXMenuObject.prototype._showContextMenu=function(t,e,i){if(this._clearAndHide(),null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;window.clearTimeout(this.conf.tm_handler),this.idPull[this.idPrefix+this.topId]=new Array(t,e),this._showPolygon(this.idPrefix+this.topId,"bottom"),this.callEvent("onContextMenu",[i])},dhtmlXMenuObject.prototype._hideContextMenu=function(){if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;this._clearAndHide(),this._hidePolygon(this.idPrefix+this.topId)},dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(t,e){this.conf.ctx_zoneid=e.id,this._clearAndHide(),this._hideContextMenu();var i=t.srcElement||t.target,n=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML||window.dhx4.isEdge?t.offsetX:t.layerX,s=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML||window.dhx4.isEdge?t.offsetY:t.layerY,o=window.dhx4.absLeft(i)+n,l=window.dhx4.absTop(i)+s;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[e.id,t])&&this.conf.ctx_autoshow&&(this._showContextMenu(o,l,e.id),this.callEvent("onAfterContextMenu",[e.id,t])):this.conf.ctx_autoshow&&(this._showContextMenu(o,l,e.id),this.callEvent("onAfterContextMenu",[e.id]))},dhtmlXMenuObject.prototype.showContextMenu=function(t,e){this._showContextMenu(t,e,!1)},dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()},dhtmlXMenuObject.prototype.setAutoShowMode=function(t){this.conf.ctx_autoshow=1==t},dhtmlXMenuObject.prototype.setAutoHideMode=function(t){this.conf.ctx_autohide=1==t},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(t){this.conf.ctx_hideall=1==t},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall},dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var t in this.itemPull)if(this.itemPull[t].parent==this.idPrefix+this.topId&&null!=this.idPull[t]){var e=!1,i=!1;for(var n in this.idPull[t].parentNode.firstChild==this.idPull[t]&&(e=!0),this.idPull[t].parentNode.lastChild==this.idPull[t]&&(i=!0),this.itemPull)"separator"==this.itemPull[n].type&&this.itemPull[n].parent==this.idPrefix+this.topId&&(this.idPull[t].nextSibling==this.idPull["separator_"+n]&&(i=!0),this.idPull[t].previousSibling==this.idPull["separator_"+n]&&(e=!0));this.idPull[t].style.borderLeftWidth=e?"1px":"0px",this.idPull[t].style.borderTopLeftRadius=this.idPull[t].style.borderBottomLeftRadius=e?"3px":"0px",this.idPull[t].style.borderTopRightRadius=this.idPull[t].style.borderBottomRightRadius=i?"3px":"0px",this.idPull[t]._bl=e,this.idPull[t]._br=i}},dhtmlXMenuObject.prototype._improveTerraceButton=function(t,e){e?(this.idPull[t].style.borderBottomLeftRadius=this.idPull[t]._bl?"3px":"0px",this.idPull[t].style.borderBottomRightRadius=this.idPull[t]._br?"3px":"0px"):(this.idPull[t].style.borderBottomLeftRadius="0px",this.idPull[t].style.borderBottomRightRadius="0px")},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_menu=function(t,e,i,n,s){return void 0!==s?t=s:((t=document.createElement("DIV")).className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV"))),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),this.conf.ofs_nodes.t.menu=!0,this._updateIdx(),t},dhtmlXCellObject.prototype.attachMenu=function(t){if(!this.dataNodes.menu)return this.callEvent("_onBeforeContentAttach",["menu"]),void 0===t&&(t={}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(t),this._adjustCont(this._idd),t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataNodes.menu},dhtmlXCellObject.prototype.detachMenu=function(){this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu}),dhtmlXMenuObject.prototype.setItemEnabled=function(t){this._changeItemState(t,"enabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.setItemDisabled=function(t){this._changeItemState(t,"disabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.isItemEnabled=function(t){return null!=this.itemPull[this.idPrefix+t]&&"enabled"==this.itemPull[this.idPrefix+t].state},dhtmlXMenuObject.prototype._changeItemState=function(t,e,i){var n=this.idPrefix+t;return null!=this.itemPull[n]&&null!=this.idPull[n]&&this.itemPull[n].state!=e&&(this.itemPull[n].state=e,this.itemPull[n].parent!=this.idPrefix+this.topId||this.conf.context?this.idPull[n].className="sub_item"+("enabled"==this.itemPull[n].state?"":"_dis"):this.idPull[n].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[n].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+t,this.itemPull[this.idPrefix+t].complex,!1),this._updateItemImage(t,i),this.idPrefix+this.conf.last_click==n&&"TopLevel"!=i&&this._redistribSubLevelSelection(n,this.itemPull[n].parent),"TopLevel"==i&&this.conf.context),!1},dhtmlXMenuObject.prototype.getItemText=function(t){return null!=this.itemPull[this.idPrefix+t]?this.itemPull[this.idPrefix+t].title:""},dhtmlXMenuObject.prototype.setItemText=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t])if(this._clearAndHide(),this.itemPull[t].title=e,this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context){for(i=null,n=0;n<this.idPull[t].childNodes[1].childNodes.length;n++)"sub_item_text"==String(this.idPull[t].childNodes[1].childNodes[n].className||"")&&(i=this.idPull[t].childNodes[1].childNodes[n]);""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?i&&(i.parentNode.removeChild(i),i=null,this.idPull[t].childNodes[1].innerHTML="&nbsp;"):(i||((i=document.createElement("DIV")).className="sub_item_text",this.idPull[t].childNodes[1].innerHTML="",this.idPull[t].childNodes[1].appendChild(i)),i.innerHTML=this.itemPull[t].title)}else{for(var i=null,n=0;n<this.idPull[t].childNodes.length;n++)try{"top_level_text"==this.idPull[t].childNodes[n].className&&(i=this.idPull[t].childNodes[n])}catch(t){}""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?null!=i&&i.parentNode.removeChild(i):(i||((i=document.createElement("DIV")).className="top_level_text",this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(i,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(i)),i.innerHTML=this.itemPull[t].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(t,e,i){var n=this.conf.tags.item;this.conf.tags.item="div";var s="string"==typeof t?document.getElementById(t):t,o=this._xmlToJson(s,this.idPrefix+this.topId);this._initObj(o),this.conf.tags.item=n,e&&s.parentNode.removeChild(s),s=objOd=null,null!=onload&&("function"==typeof i?i():"function"==typeof window[i]&&window[i]())},dhtmlXMenuObject.prototype.hideItem=function(t){this._changeItemVisible(t,!1)},dhtmlXMenuObject.prototype.showItem=function(t){this._changeItemVisible(t,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(t){var e=null;return null!=this.idPull[this.idPrefix+t]&&(e="none"==this.idPull[this.idPrefix+t].style.display),e},dhtmlXMenuObject.prototype._changeItemVisible=function(t,e){var i=this.idPrefix+t;null!=this.itemPull[i]&&("separator"==this.itemPull[i].type&&(i="separator_"+i),null!=this.idPull[i]&&(this.idPull[i].style.display=e?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+t].parent)))},dhtmlXMenuObject.prototype.setUserData=function(t,e,i){this.userData[this.idPrefix+t+"_"+e]=i},dhtmlXMenuObject.prototype.getUserData=function(t,e){return null!=this.userData[this.idPrefix+t+"_"+e]?this.userData[this.idPrefix+t+"_"+e]:null},dhtmlXMenuObject.prototype.setOpenMode=function(t){this.conf.mode="win"==t?"win":"web"},dhtmlXMenuObject.prototype.setWebModeTimeout=function(t){this.conf.tm_sec=isNaN(t)?400:t},dhtmlXMenuObject.prototype.getItemImage=function(t){var e=new Array(null,null);return t=this.idPrefix+t,"item"==this.itemPull[t].type&&(e[0]=this.itemPull[t].imgen,e[1]=this.itemPull[t].imgdis),e},dhtmlXMenuObject.prototype.setItemImage=function(t,e,i){"item"==this.itemPull[this.idPrefix+t].type&&(this.itemPull[this.idPrefix+t].imgen=e,this.itemPull[this.idPrefix+t].imgdis=i,this._updateItemImage(t,this._getItemLevelType(t)))},dhtmlXMenuObject.prototype.clearItemImage=function(t){this.setItemImage(t,"","")},dhtmlXMenuObject.prototype.setVisibleArea=function(t,e,i,n){this.conf.v_enabled=!0,this.conf.v.x1=t,this.conf.v.x2=e,this.conf.v.y1=i,this.conf.v.y2=n},dhtmlXMenuObject.prototype.setTooltip=function(t,e){t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.idPull[t].title=e.length>0?e:null,this.itemPull[t].tip=e)},dhtmlXMenuObject.prototype.getTooltip=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].tip},dhtmlXMenuObject.prototype.setTopText=function(t){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=t)},dhtmlXMenuObject.prototype.setAlign=function(t){this.conf.align!=t&&("left"!=t&&"right"!=t||(this.conf.align=t,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left"))))},dhtmlXMenuObject.prototype.setHref=function(t,e,i){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].href_link=e,null!=i&&(this.itemPull[this.idPrefix+t].href_target=i))},dhtmlXMenuObject.prototype.clearHref=function(t){null!=this.itemPull[this.idPrefix+t]&&(delete this.itemPull[this.idPrefix+t].href_link,delete this.itemPull[this.idPrefix+t].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(t){for(var e=new Array(t);this.getParentId(t)!=this.topId;)t=this.getParentId(t),e[e.length]=t;return e.reverse()},dhtmlXMenuObject.prototype._getCheckboxState=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(t,e){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].checked=e)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(t){if(null!=this.idPull[this.idPrefix+t]){this.itemPull[this.idPrefix+t].imgen="chbx_"+(this._getCheckboxState(t)?"1":"0"),this.itemPull[this.idPrefix+t].imgdis=this.itemPull[this.idPrefix+t].imgen;try{this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+t].imgen}catch(t){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t]){var n=this._getCheckboxState(t);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[t,n,this.conf.ctx_zoneid,i])&&this.setCheckboxState(t,!n):this.setCheckboxState(t,!n),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.setCheckboxState=function(t,e){this._setCheckboxState(t,e),this._updateCheckboxImage(t)},dhtmlXMenuObject.prototype.getCheckboxState=function(t){return this._getCheckboxState(t)},dhtmlXMenuObject.prototype.addCheckbox=function(t,e,i,n,s,o,l){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var r="chbx_"+(o?"1":"0"),a=r;if("sibling"==t){var h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,this._renderSublevelItem(h,this.getItemPosition(e))}else{h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+e;this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,null==this.idPull["polygon_"+d]&&this._renderSublevelPolygon(d,d),this._renderSublevelItem(h,i-1),this._redefineComplexState(d)}},dhtmlXMenuObject.prototype.setHotKey=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[t].complex){var i=this.itemPull[t].type;if("item"==i||"checkbox"==i||"radio"==i){var n=null;try{"sub_item_hk"==this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(n=this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(t){}if(0==e.length)this.itemPull[t].hotkey_backup=this.itemPull[t].hotkey,this.itemPull[t].hotkey="",null!=n&&n.parentNode.removeChild(n);else{if(this.itemPull[t].hotkey=e,this.itemPull[t].hotkey_backup=null,null==n){(n=document.createElement("DIV")).className="sub_item_hk";for(var s=this.idPull[t].childNodes[this.conf.rtl?0:2];s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(n)}n.innerHTML=e}}}},dhtmlXMenuObject.prototype.getHotKey=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].hotkey},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(t){for(var e=this._getSubItemToDeselectByPolygon(t),i=0;i<this.conf.opened_poly.length;i++)this.conf.opened_poly[i]!=t&&this._hidePolygon(this.conf.opened_poly[i]);for(i=0;i<e.length;i++)null!=this.idPull[e[i]]&&"enabled"==this.itemPull[e[i]].state&&(this.idPull[e[i]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(t){var e=this.idPull["polygon_"+t].childNodes[1],i=this.idPull["arrowup_"+t],n=this.idPull["arrowdown_"+t];0==e.scrollTop?i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(i.over?"_Over":""),e.scrollTop+e.offsetHeight<e.scrollHeight?n.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(n.over?"_Over":""):n.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled",e=i=n=null},dhtmlXMenuObject.prototype._addUpArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowup_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp",i.over=!1,i.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,e._canScrollUp=!0,e._doScrollUp(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollUp=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(e.conf.of_utm))},i.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var n=this.idPull["polygon_"+this.idPrefix+t];n.childNodes[0].appendChild(i),this.idPull[i.id]=i,n=i=null},dhtmlXMenuObject.prototype._addDownArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowdown_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown",i.over=!1,i.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,e._canScrollDown=!0,e._doScrollDown(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollDown=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(e.conf.of_dtm))},i.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var n=this.idPull["polygon_"+this.idPrefix+t];n.childNodes[2].appendChild(i),this.idPull[i.id]=i,n=i=null},dhtmlXMenuObject.prototype._removeUpArrow=function(t){var e="arrowup_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeDownArrow=function(t){var e="arrowdown_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeArrow=function(t){var e=this.idPull[t];e.onselectstart=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onclick=null,e.parentNode&&e.parentNode.removeChild(e),e=null,this.idPull[t]=null;try{delete this.idPull[t]}catch(t){}},dhtmlXMenuObject.prototype._isArrowExists=function(t){return null!=this.idPull["arrowup_"+t]&&null!=this.idPull["arrowdown_"+t]},dhtmlXMenuObject.prototype._doScrollUp=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollUp&&i.scrollTop>0){var n=!1,s=i.scrollTop-this.conf.of_ustep;if(s<0&&(n=!0,s=0),i.scrollTop=s,n)e=!0;else{var o=this;this.conf.of_utm=window.setTimeout(function(){o._doScrollUp(t,!1),o=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._doScrollDown=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollDown&&i.scrollTop+i.offsetHeight<=i.scrollHeight){var n=!1,s=i.scrollTop+this.conf.of_dstep;if(s+i.offsetHeight>=i.scrollHeight&&(n=!0,s=i.scrollHeight-i.offsetHeight),i.scrollTop=s,n)e=!0;else{var o=this;this.conf.of_dtm=window.setTimeout(function(){o._doScrollDown(t,!1),o=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._countPolygonItems=function(t){var e=0;for(var i in this.itemPull){var n=this.itemPull[i].parent,s=this.itemPull[i].type;n!=this.idPrefix+t||"item"!=s&&"radio"!=s&&"checkbox"!=s||e++}return e},dhtmlXMenuObject.prototype.setOverflowHeight=function(t){if("auto"===t)return this.conf.overflow_limit=0,void(this.conf.auto_overflow=!0);if(!(0==this.conf.overflow_limit&&t<=0))if(this._clearAndHide(),this.conf.overflow_limit>=0&&t>0)this.conf.overflow_limit=t;else if(this.conf.overflow_limit>0&&t<=0){for(var e in this.itemPull)if(this._isArrowExists(e)){var i=String(e).replace(this.idPrefix,"");this._removeUpArrow(i),this._removeDownArrow(i),this.idPull["polygon_"+e].childNodes[1].style.height=""}this.conf.overflow_limit=0}else;},dhtmlXMenuObject.prototype._getRadioImgObj=function(t){try{var e=this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(t){e=null}return e},dhtmlXMenuObject.prototype._setRadioState=function(t,e){var i=this._getRadioImgObj(t);if(null!=i){var n=this.itemPull[this.idPrefix+t];n.checked=e,n.imgen="rdbt_"+(n.checked?"1":"0"),n.imgdis=n.imgen,i.className="sub_icon "+n.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t].group){var n=this.itemPull[this.idPrefix+t].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[n,this.getRadioChecked(n),t,this.conf.ctx_zoneid,i])&&this.setRadioChecked(n,t):this.setRadioChecked(n,t),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.getRadioChecked=function(t){for(var e=null,i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,""),s=this._getRadioImgObj(n);if(null!=s)null!=s.className.match(/rdbt_1$/gi)&&(e=n)}return e},dhtmlXMenuObject.prototype.setRadioChecked=function(t,e){if(null!=this.radio[t])for(var i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,"");this._setRadioState(n,n==e)}},dhtmlXMenuObject.prototype.addRadioButton=function(t,e,i,n,s,o,l,r){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var a=this.idPrefix+(null!=n?n:this._genStr(24)),h="rdbt_"+(l?"1":"0"),d=h;if("sibling"==t){var c=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),this._renderSublevelItem(a,this.getItemPosition(e))}else{c=this.idPrefix+e;this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),null==this.idPull["polygon_"+c]&&this._renderSublevelPolygon(c,c),this._renderSublevelItem(a,i-1),this._redefineComplexState(c)}var u=null!=o?o:this._genStr(24);this.itemPull[a].group=u,null==this.radio[u]&&(this.radio[u]=new Array),this.radio[u][this.radio[u].length]=a,1==l&&this.setRadioChecked(u,String(a).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>"},dhtmlXMenuObject.prototype._readLevel=function(t){var e="";for(var i in this.itemPull)if(this.itemPull[i].parent==t){var n="",s="",o="",l=String(this.itemPull[i].id).replace(this.idPrefix,""),r="",a=""!=this.itemPull[i].title?' text="'+this.itemPull[i].title+'"':"",h="";"item"==this.itemPull[i].type&&(""!=this.itemPull[i].imgen&&(n=' img="'+this.itemPull[i].imgen+'"'),""!=this.itemPull[i].imgdis&&(s=' imgdis="'+this.itemPull[i].imgdis+'"'),""!=this.itemPull[i].hotkey&&(o="<hotkey>"+this.itemPull[i].hotkey+"</hotkey>")),"separator"==this.itemPull[i].type?r=' type="separator"':"disabled"==this.itemPull[i].state&&(h=' enabled="false"'),"checkbox"==this.itemPull[i].type&&(r=' type="checkbox"'+(this.itemPull[i].checked?' checked="true"':"")),"radio"==this.itemPull[i].type&&(r=' type="radio" group="'+this.itemPull[i].group+'" '+(this.itemPull[i].checked?' checked="true"':"")),e+="<item id='"+l+"'"+a+r+n+s+h+">",e+=o,this.itemPull[i].complex&&(e+=this._readLevel(i)),e+="</item>"}return e},dhtmlXMenuObject.prototype.enableEffect=function(t,e,i){for(var n in this._menuEffect=("opacity"==t||"slide"==t||"slide+"==t)&&t,this._pOpStyleIE=navigator.userAgent.search(/MSIE\s[678]\.0/gi)>=0,this.idPull)0===n.search(/polygon/)&&(this._pOpacityApply(n,this._pOpStyleIE?100:1),this.idPull[n].style.height="");this._pOpMax=(void 0===e?100:e)/(this._pOpStyleIE?1:100),this._pOpStyleName=this._pOpStyleIE?"filter":"opacity",this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#",this._pSlSteps=this._pOpStyleIE?10:20,this._pSlTMTimeMax=i||50},dhtmlXMenuObject.prototype._showPolygonEffect=function(t){this._pShowHide(t,!0)},dhtmlXMenuObject.prototype._hidePolygonEffect=function(t){this._pShowHide(t,!1)},dhtmlXMenuObject.prototype._pOpacityApply=function(t,e){this.idPull[t].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",e||this.idPull[t]._op)},dhtmlXMenuObject.prototype._pShowHide=function(t,e){if(this.idPull){if(null!=this.idPull[t]._tmShow){if(this.idPull[t]._step_h>0&&1==e||this.idPull[t]._step_h<0&&0==e)return;window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._tmShow=null,this.idPull[t]._max_h=null}if(0!=e||"hidden"!=this.idPull[t].style.visibility&&"none"!=this.idPull[t].style.display){if(1==e&&"none"==this.idPull[t].style.display&&(this.idPull[t].style.visibility="hidden",this.idPull[t].style.display=""),null==this.idPull[t]._max_h){if(this.idPull[t]._max_h=parseInt(this.idPull[t].offsetHeight),this.idPull[t]._h=1==e?0:this.idPull[t]._max_h,this.idPull[t]._step_h=Math.round(this.idPull[t]._max_h/this._pSlSteps)*(1==e?1:-1),0==this.idPull[t]._step_h)return;this.idPull[t]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps),"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[t].op_tm=this.idPull[t]._step_tm,this.idPull[t].op_step=this._pOpMax/this._pSlSteps*(1==e?1:-1),this._pOpStyleIE&&(this.idPull[t].op_step=Math.round(this.idPull[t].op_step)),this.idPull[t]._op=1==e?0:this._pOpMax,this._pOpacityApply(t)):(this.idPull[t]._op=this._pOpStyleIE?100:1,this._pOpacityApply(t)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height="0px"),this.idPull[t].style.visibility="visible"}this._pEffectSet(t,this.idPull[t]._h+this.idPull[t]._step_h)}}},dhtmlXMenuObject.prototype._pEffectSet=function(t,e){if(this.idPull)if(this.idPull[t]._tmShow&&window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._h=Math.max(0,Math.min(e,this.idPull[t]._max_h)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=this.idPull[t]._h+"px"),e+=this.idPull[t]._step_h,"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[t]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[t]._op+this.idPull[t].op_step)),this._pOpacityApply(t)),this.idPull[t]._step_h>0&&e<=this.idPull[t]._max_h||this.idPull[t]._step_h<0&&e>=0){var i=this;this.idPull[t]._tmShow=window.setTimeout(function(){i._pEffectSet(t,e)},this.idPull[t]._step_tm)}else 0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=""),this.idPull[t]._step_h<0&&(this.idPull[t].style.visibility="hidden"),"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[t]._op=this.idPull[t]._step_h<0?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(t)),this.idPull[t]._tmShow=null,this.idPull[t]._h=null,this.idPull[t]._max_h=null,this.idPull[t]._step_tm=null},dhtmlXToolbarObject.prototype.addSpacer=function(t){var e=this.idPrefix+t;if(null!=this._spacer){if(this._spacer.idd==t)return;if(this._spacer==this.objPull[e].obj.parentNode){for(var i=!0;i;){var n=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]),n!=t&&0!=this._spacer.childNodes.length||(null!=this.objPull[e].arw&&this.base.appendChild(this.objPull[e].arw),i=!1)}return this._spacer.idd=t,void this._fixSpacer()}if(this.base==this.objPull[e].obj.parentNode){i=!0;for(var s=null!=this.objPull[e].arw;i;){var o=this.base.childNodes.length-1;1==s&&this.base.childNodes[o]==this.objPull[e].arw&&(i=!1),this.base.childNodes[o].idd==t&&(i=!1),i&&(this._spacer.childNodes.length>0?this._spacer.insertBefore(this.base.childNodes[o],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[o]))}return this._spacer.idd=t,void this._fixSpacer()}}else{var l=null;for(o=0;o<this.base.childNodes.length;o++)this.base.childNodes[o]==this.objPull[this.idPrefix+t].obj&&(l=o,null!=this.objPull[this.idPrefix+t].arw&&(l=o+1));if(null!=l){for(this._spacer=document.createElement("DIV"),this._spacer.className="right"==this.conf.align?" dhxtoolbar_float_left":" dhxtoolbar_float_right",this._spacer.dir="ltr",this._spacer.idd=t;this.base.childNodes.length>l+1;)this._spacer.appendChild(this.base.childNodes[l+1]);this.cont.appendChild(this._spacer),this._fixSpacer()}}"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;this._spacer.childNodes.length>0;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer),this._spacer=null,"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()}},dhtmlXToolbarObject.prototype._fixSpacer=function(){if(void 0===window.addEventListener&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var t=this._spacer;window.setTimeout(function(){t.style.borderLeft="0px solid #a4bed4",t=null},1)}},dhtmlXToolbarObject.prototype.getType=function(t){var e=this.getParentId(t);if(null!=e){var i=null,n=this.objPull[this.idPrefix+e]._listOptions[t];return null!=n&&(i=null!=n.sep?"buttonSelectSeparator":"buttonSelectButton"),i}return null==this.objPull[this.idPrefix+t]?null:this.objPull[this.idPrefix+t].type},dhtmlXToolbarObject.prototype.getTypeExt=function(t){var e=this.getType(t);return"buttonSelectButton"==e||"buttonSelectSeparator"==e?e="buttonSelectButton"==e?"button":"separator":null},dhtmlXToolbarObject.prototype.inArray=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},dhtmlXToolbarObject.prototype.getParentId=function(t){var e=null;for(var i in this.objPull)if(this.objPull[i]._listOptions)for(var n in this.objPull[i]._listOptions)n==t&&(e=String(i).replace(this.idPrefix,""));return e},dhtmlXToolbarObject.prototype._addItem=function(t,e){"string"==typeof t.text&&(t.text=window.dhx4.trim(t.text),0==t.text.length&&(t.text=null)),this._addItemToStorage(t,e),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.addButton=function(t,e,i,n,s){this._addItem({id:t,type:"button",text:i,img:n,imgdis:s},e)},dhtmlXToolbarObject.prototype.addText=function(t,e,i){this._addItem({id:t,type:"text",text:i},e)},dhtmlXToolbarObject.prototype.addButtonSelect=function(t,e,i,n,s,o,l,r,a,h){for(var d=[],c=0;c<n.length;c++){var u={};n[c]instanceof Array?(u.id=n[c][0],u.type="obj"==n[c][1]?"button":"separator",u.text=n[c][2]||null,u.img=n[c][3]||null):n[c]instanceof Object&&null!=n[c]&&void 0!==n[c].id&&void 0!==n[c].type&&(u.id=n[c].id,u.type="obj"==n[c].type?"button":"separator",u.text=n[c].text,u.img=n[c].img),d.push(u)}this._addItem({id:t,type:"buttonSelect",text:i,img:s,imgdis:o,renderSelect:l,openAll:r,options:d,maxOpen:a,mode:h},e)},dhtmlXToolbarObject.prototype.addButtonTwoState=function(t,e,i,n,s){this._addItem({id:t,type:"buttonTwoState",img:n,imgdis:s,text:i},e)},dhtmlXToolbarObject.prototype.addSeparator=function(t,e){this._addItem({id:t,type:"separator"},e)},dhtmlXToolbarObject.prototype.addSlider=function(t,e,i,n,s,o,l,r,a){this._addItem({id:t,type:"slider",length:i,valueMin:n,valueMax:s,valueNow:o,textMin:l,textMax:r,toolTip:a},e)},dhtmlXToolbarObject.prototype.addInput=function(t,e,i,n){this._addItem({id:t,type:"buttonInput",value:i,width:n},e)},dhtmlXToolbarObject.prototype.forEachItem=function(t){for(var e in this.objPull)this.inArray(this.rootTypes,this.objPull[e].type)&&t(this.objPull[e].id.replace(this.idPrefix,""))},function(){for(var t="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","),e=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],i=function(t,e){return function(i,n,s){return i=this.idPrefix+i,null!=this.objPull[i][t]?this.objPull[i][t].call(this.objPull[i],n,s):e}},n=0;n<t.length;n++){var s=t[n],o=e[n];dhtmlXToolbarObject.prototype[s]=i(s,o)}}(),dhtmlXToolbarObject.prototype.showItem=function(t){t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].showItem&&(this.objPull[t].showItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.hideItem=function(t){t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].hideItem&&(this.objPull[t].hideItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.getPosition=function(t){return this._getPosition(t)},dhtmlXToolbarObject.prototype._getPosition=function(t,e){if(null==this.objPull[this.idPrefix+t])return null;for(var i=null,n=0,s=0;s<this.base.childNodes.length;s++)null!=this.base.childNodes[s].idd&&(this.base.childNodes[s].idd==t&&(i=n),n++);if(!i&&null!=this._spacer)for(s=0;s<this._spacer.childNodes.length;s++)null!=this._spacer.childNodes[s].idd&&(this._spacer.childNodes[s].idd==t&&(i=n),n++);return i},dhtmlXToolbarObject.prototype.setPosition=function(t,e){this._setPosition(t,e)},dhtmlXToolbarObject.prototype._setPosition=function(t,e){if(null!=this.objPull[this.idPrefix+t]){isNaN(e)&&(e=this.base.childNodes.length),e<0&&(e=0);var i=null;this._spacer&&(i=this._spacer.idd,this.removeSpacer());var n=this.objPull[this.idPrefix+t];this.base.removeChild(n.obj),n.arw&&this.base.removeChild(n.arw);var s=this._getIdByPosition(e,!0);null==s[0]?(this.base.appendChild(n.obj),n.arw&&this.base.appendChild(n.arw)):(this.base.insertBefore(n.obj,this.base.childNodes[s[1]]),n.arw&&this.base.insertBefore(n.arw,this.base.childNodes[s[1]+1])),null!=i&&this.addSpacer(i)}},dhtmlXToolbarObject.prototype._getIdByPosition=function(t,e){for(var i=null,n=0,s=0,o=0;o<this.base.childNodes.length;o++)null!=this.base.childNodes[o].idd&&null==i&&n++==t&&(i=this.base.childNodes[o].idd),null==i&&s++;return s=null==i?null:s,1==e?new Array(i,s):i},dhtmlXToolbarObject.prototype.removeItem=function(t){this._removeItem(t),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._removeItem=function(t){var e=this.getType(t);t=this.idPrefix+t;var i=this.objPull[t];if("button"==e&&(i.obj._doOnMouseOver=null,i.obj._doOnMouseOut=null,i.obj._doOnMouseUp=null,i.obj._doOnMouseUpOnceAnywhere=null,i.obj.onclick=null,i.obj.onmouseover=null,i.obj.onmouseout=null,i.obj.onmouseup=null,i.obj.onmousedown=null,i.obj.onselectstart=null,i.obj.renderAs=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.state=null,i.img=null,i.imgEn=null,i.imgDis=null,i.type=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemText=null,i.getItemText=null,i.setItemImage=null,i.clearItemImage=null,i.setItemImageDis=null,i.clearItemImageDis=null,i.setItemToolTip=null,i.getItemToolTip=null),"buttonTwoState"==e&&(i.obj._doOnMouseOver=null,i.obj._doOnMouseOut=null,i.obj.onmouseover=null,i.obj.onmouseout=null,i.obj.onmousedown=null,i.obj.onselectstart=null,i.obj.renderAs=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.state=null,i.img=null,i.imgEn=null,i.imgDis=null,i.type=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemText=null,i.getItemText=null,i.setItemImage=null,i.clearItemImage=null,i.setItemImageDis=null,i.clearItemImageDis=null,i.setItemToolTip=null,i.getItemToolTip=null,i.setItemState=null,i.getItemState=null),"buttonSelect"==e){for(var n in i._listOptions)this.removeListOption(t,n);i._listOptions=null,i.polygon._ie6cover&&(document.body.removeChild(i.polygon._ie6cover),i.polygon._ie6cover=null),i.p_tbl.removeChild(i.p_tbody),i.polygon.removeChild(i.p_tbl),i.polygon.onselectstart=null,document.body.removeChild(i.polygon),i.p_tbody=null,i.p_tbl=null,i.polygon=null,i.obj.onclick=null,i.obj.onmouseover=null,i.obj.onmouseout=null,i.obj.onmouseup=null,i.obj.onmousedown=null,i.obj.onselectstart=null,i.obj.idd=null,i.obj.iddPrefix=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.arw.onclick=null,i.arw.onmouseover=null,i.arw.onmouseout=null,i.arw.onmouseup=null,i.arw.onmousedown=null,i.arw.onselectstart=null,i.arw.parentNode.removeChild(i.arw),i.arw=null,i.renderSelect=null,i.state=null,i.type=null,i.id=null,i.img=null,i.imgEn=null,i.imgDis=null,i.openAll=null,i._isListButton=null,i._separatorButtonSelectObject=null,i._buttonButtonSelectObject=null,i.setWidth=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemText=null,i.getItemText=null,i.setItemImage=null,i.clearItemImage=null,i.setItemImageDis=null,i.clearItemImageDis=null,i.setItemToolTip=null,i.getItemToolTip=null,i.addListOption=null,i.removeListOption=null,i.showListOption=null,i.hideListOption=null,i.isListOptionVisible=null,i.enableListOption=null,i.disableListOption=null,i.isListOptionEnabled=null,i.setListOptionPosition=null,i.getListOptionPosition=null,i.setListOptionImage=null,i.getListOptionImage=null,i.clearListOptionImage=null,i.setListOptionText=null,i.getListOptionText=null,i.setListOptionToolTip=null,i.getListOptionToolTip=null,i.forEachListOption=null,i.getAllListOptions=null,i.setListOptionSelected=null,i.getListOptionSelected=null}if("buttonInput"==e&&(i.obj.childNodes[0].onkeydown=null,i.obj.removeChild(i.obj.childNodes[0]),i.obj.w=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemToolTip=null,i.getItemToolTip=null,i.setWidth=null,i.getWidth=null,i.setValue=null,i.getValue=null,i.setItemText=null,i.getItemText=null),"slider"==e){for(window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",i.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",i.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",i.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",i.pen._doOnMouseMoveEnd)),i.pen.allowMove=null,i.pen.initXY=null,i.pen.maxX=null,i.pen.minX=null,i.pen.nowX=null,i.pen.newNowX=null,i.pen.valueMax=null,i.pen.valueMin=null,i.pen.valueNow=null,i.pen._definePos=null,i.pen._detectLimits=null,i.pen._doOnMouseMoveStart=null,i.pen._doOnMouseMoveEnd=null,i.pen.onmousedown=null,i.obj.removeChild(i.pen),i.pen=null,i.label.tip=null,document.body.removeChild(i.label),i.label=null,i.obj.onselectstart=null,i.obj.idd=null;i.obj.childNodes.length>0;)i.obj.removeChild(i.obj.childNodes[0]);i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.state=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.setItemToolTipTemplate=null,i.getItemToolTipTemplate=null,i.setMaxValue=null,i.setMinValue=null,i.getMaxValue=null,i.getMinValue=null,i.setValue=null,i.getValue=null,i.showItem=null,i.hideItem=null,i.isVisible=null}"separator"==e&&(i.obj.onselectstart=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.showItem=null,i.hideItem=null,i.isVisible=null),"text"==e&&(i.obj.onselectstart=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setWidth=null,i.setItemText=null,i.getItemText=null),e=null,i=null,this.objPull[this.idPrefix+t]=null,delete this.objPull[this.idPrefix+t]},function(){for(var t="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","),e=function(t){return function(e,i,n,s,o,l){if(e=this.idPrefix+e,null!=this.objPull[e]&&"buttonSelect"==this.objPull[e].type)return this.objPull[e][t].call(this.objPull[e],i,n,s,o,l)}},i=0;i<t.length;i++){var n=t[i];dhtmlXToolbarObject.prototype[n]=e(n)}}(),dhtmlXToolbarObject.prototype._rtlParseBtn=function(t,e){return t+e},dhtmlXToolbarObject.prototype._separatorObject=function(t,e,i){return this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_sep",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},window.dhx4.isIPad&&(this.obj.ontouchstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1}),t.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this},dhtmlXToolbarObject.prototype._textObject=function(t,e,i){return this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_text",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},window.dhx4.isIPad&&(this.obj.ontouchstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1}),this.obj.innerHTML=i.text||"",t.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(t){this.obj.innerHTML=t},this.getItemText=function(){return this.obj.innerHTML},this.setWidth=function(t){this.obj.style.width=t+"px"},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.renderAs=this.obj.className,this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed=!1,this.obj.innerHTML=t._rtlParseBtn(""!=this.img?"<img src='"+t.conf.icons_path+this.img+"'>":"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":"");var n=this;return this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.onmouseover=function(){this._doOnMouseOver()},this.obj.onmouseout=function(){this._doOnMouseOut()},this.obj._doOnMouseOver=function(){this.allowClick=!0,0!=n.state&&"none"==t.anyUsed&&(this.className="dhx_toolbar_btn dhxtoolbar_btn_over",this.renderAs=this.className)},this.obj._doOnMouseOut=function(){this.allowClick=!1,0!=n.state&&"none"==t.anyUsed&&(this.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.renderAs=this.renderAs)},this.obj.onclick=function(e){if(0!=n.state&&0!=this.allowClick){e=e||event;var i=this.idd.replace(t.idPrefix,"");if(this.extAction)try{window[this.extAction](i)}catch(e){}t&&t.callEvent&&t.callEvent("onClick",[i])}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(e){return 0==n.state?((e=e||event).preventDefault?e.preventDefault():e.returnValue=!1,e.cancelBubble=!0,!1):"none"==t.anyUsed?(t.anyUsed=this.idd,this.className="dhx_toolbar_btn dhxtoolbar_btn_pres",this.pressed=!0,this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){t.anyUsed="none",this._doOnMouseOut()},!1):void 0},this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(i){if(0!=n.state&&("none"==t.anyUsed||t.anyUsed==this.idd)){var s=t.anyUsed;if(this._doOnMouseUp(),window.dhx4.isIPad&&"none"!=s){if(this.extAction){var o=this;window.setTimeout(function(){try{window[o.extAction](e)}catch(t){}o=null},1)}t.callEvent("onClick",[this.idd.replace(t.idPrefix,"")])}}},window.dhx4.isIPad&&(this.obj.ontouchmove=function(t){this._doOnMouseUp()}),this.obj._doOnMouseUp=function(){t.anyUsed="none",this.className=this.renderAs,this.pressed=!1},this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp(),this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){this._doOnMouseOut()}},t.base.appendChild(this.obj),this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonSelectObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled||"true"==i.enabled,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.mode=i.mode||"button","select"==this.mode?(this.openAll=!0,this.renderSelect=!1,i.text&&0!=i.text.length||(i.text="&nbsp;")):(this.openAll=1==window.dhx4.s2b(i.openAll),this.renderSelect=null==i.renderSelect||window.dhx4.s2b(i.renderSelect)),this.maxOpen=isNaN(i.maxOpen?i.maxOpen:"")?null:i.maxOpen,this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!t._sbw){var e=document.createElement("DIV");e.className="dhxtoolbar_maxopen_test",document.body.appendChild(e);var i=document.createElement("DIV");i.className="dhxtoolbar_maxopen_test2",e.appendChild(i),t._sbw=e.offsetWidth-i.offsetWidth,e.removeChild(i),i=null,document.body.removeChild(e),e=null}},this._maxOpenTest(),this.obj=document.createElement("DIV"),this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed=!1,this.callEvent=!1,this.obj.innerHTML=t._rtlParseBtn(""!=this.img?"<img src='"+t.conf.icons_path+this.img+"'>":"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":""),t.base.appendChild(this.obj),this.arw=document.createElement("DIV"),this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis"),this.arw.style.display=this.obj.style.display,this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>",this.arw.title=this.obj.title,this.arw.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},t.base.appendChild(this.arw);var n=this;if(this.obj.onmouseover=function(e){e=e||event,"none"==t.anyUsed&&n.state&&(n.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over",n.obj.className=n.obj.renderAs,n.arw.className=String(n.obj.renderAs).replace("btn","arw"))},this.obj.onmouseout=function(){n.obj.allowClick=!1,"none"==t.anyUsed&&n.state&&(n.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",n.obj.className=n.obj.renderAs,n.arw.className=String(n.obj.renderAs).replace("btn","arw"),n.callEvent=!1)},this.arw.onmouseover=this.obj.onmouseover,this.arw.onmouseout=this.obj.onmouseout,1==this.openAll||(this.obj.onclick=function(e){if(e=e||event,n.obj.allowClick&&n.state&&"none"==t.anyUsed){var i=n.obj.idd.replace(t.idPrefix,"");if(n.obj.extAction)try{window[n.obj.extAction](i)}catch(e){}t.callEvent("onClick",[i])}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(e){e=e||event,"none"==t.anyUsed&&n.state&&(n.obj.allowClick=!0,n.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",n.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",n.callEvent=!0)},this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(e){if((e=e||event).cancelBubble=!0,"none"==t.anyUsed&&n.state&&(n.obj.className=n.obj.renderAs,n.arw.className=String(n.obj.renderAs).replace("btn","arw"),window.dhx4.isIPad)){if(this.extAction){var i=this;window.setTimeout(function(){try{window[i.extAction](s)}catch(t){}i=null},1)}if(n.callEvent){var s=n.obj.idd.replace(t.idPrefix,"");t.callEvent("onClick",[s])}}}),window.dhx4.isIPad&&(this.obj.ontouchmove=this.obj.onmouseout),this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(e){e=e||event;var i=0===this.className.indexOf("dhx_toolbar_arw")?this:this.nextSibling;if(i._skip?(e=e||event).cancelBubble=!0:i._skip=!0,i=null,n.state){if(t.anyUsed==n.obj.idd)n.obj.className=n.obj.renderAs,n.arw.className=String(n.obj.renderAs).replace("btn","arw"),t.anyUsed="none",window.dhx4.zim.clear(n.polygon._idd),n.polygon.style.display="none",n.polygon._ie6cover&&(n.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(n.id,!0),t.callEvent("onButtonSelectHide",[n.obj.idd]);else{if("none"!=t.anyUsed&&"buttonSelect"==t.objPull[t.idPrefix+t.anyUsed].type){var s=t.objPull[t.idPrefix+t.anyUsed];"none"!=s.polygon.style.display&&(s.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",s.obj.className=s.obj.renderAs,s.arw.className=String(n.obj.renderAs).replace("btn","arw"),window.dhx4.zim.clear(s.polygon._idd),s.polygon.style.display="none",s.polygon._ie6cover&&(s.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(s.id,!0),t.callEvent("onButtonSelectHide",[s.obj.idd]))}n.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",n.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",t.anyUsed=n.obj.idd,n.polygon.style.top="0px",n.polygon.style.visibility="hidden",n.polygon.style.zIndex=window.dhx4.zim.reserve(n.polygon._idd),n.polygon.style.display="","dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(n.id,!1),n._fixMaxOpenHeight(n.maxOpen||null),t._autoDetectVisibleArea();var o=window.dhx4.absTop(n.obj)+n.obj.offsetHeight+t.conf.sel_ofs_y,l=n.polygon.offsetHeight;if(o+l>t.tY2){var r=null!=n.maxOpen?Math.floor((t.tY2-o)/22):0;r>=1?n._fixMaxOpenHeight(r):(o=window.dhx4.absTop(n.obj)-l-t.conf.sel_ofs_y)<0&&(o=0)}if(n.polygon.style.top=o+"px",t.rtl)n.polygon.style.left=window.dhx4.absLeft(n.obj)+n.obj.offsetWidth-n.polygon.offsetWidth+t.conf.sel_ofs_x+"px";else{var a=document.body.scrollLeft+(window.innerWidth||document.body.clientWidth),h=window.dhx4.absLeft(n.obj)+t.conf.sel_ofs_x;h+n.polygon.offsetWidth>a&&(h=window.dhx4.absLeft(n.arw)+n.arw.offsetWidth-n.polygon.offsetWidth),n.polygon.style.left=Math.max(h,5)+"px"}n.polygon.style.visibility="visible",n.polygon._ie6cover&&(n.polygon._ie6cover.style.left=n.polygon.style.left,n.polygon._ie6cover.style.top=n.polygon.style.top,n.polygon._ie6cover.style.width=n.polygon.offsetWidth+"px",n.polygon._ie6cover.style.height=n.polygon.offsetHeight+"px",n.polygon._ie6cover.style.display=""),t.callEvent("onButtonSelectShow",[n.obj.idd])}return!1}},this.arw.onclick=function(t){(t=t||event).cancelBubble=!0},this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(t){(t=t||event).cancelBubble=!0},!0===this.openAll&&(this.obj.onclick=this.arw.onclick,this.obj.onmousedown=this.arw.onmousedown,this.obj.onmouseup=this.arw.onmouseup,window.dhx4.isIPad&&(this.obj.ontouchstart=this.arw.ontouchstart,this.obj.ontouchend=this.arw.ontouchend)),this.obj.iddPrefix=t.idPrefix,this._listOptions={},this._fixMaxOpenHeight=function(e){var i="auto",s=!1;if(null!==e){var o=0;for(var l in this._listOptions)o++;o>e?(this._ph=22*e,i=this._ph+"px"):s=!0}this.polygon.style.width="auto",this.polygon.style.height="auto",s||null==n.maxOpen||(this.polygon.style.width=this.p_tbl.offsetWidth+t._sbw+"px",this.polygon.style.height=i)},this._separatorButtonSelectObject=function(t,e,i){return this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.className="tr_sep",this.obj.tr.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td=document.createElement("TD"),this.obj.td.colSpan="2",this.obj.td.className="td_btn_sep",this.obj.td.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},isNaN(i)?i=n.p_tbody.childNodes.length+1:i<1&&(i=1),i>n.p_tbody.childNodes.length?n.p_tbody.appendChild(this.obj.tr):n.p_tbody.insertBefore(this.obj.tr,n.p_tbody.childNodes[i-1]),this.obj.tr.appendChild(this.obj.td),this.obj.sep=document.createElement("DIV"),this.obj.sep.className="btn_sep",this.obj.sep.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td.appendChild(this.obj.sep),n._listOptions[t]=this.obj,this},this._buttonButtonSelectObject=function(e,i,s){var o=!0;void 0!==i.enabled?o=window.dhx4.s2b(i.enabled):void 0!==i.disabled&&(o=window.dhx4.s2b(i.disabled)),this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.en=o,this.obj.tr.extAction=i.action||null,this.obj.tr._selected=null!=i.selected,this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&n.renderSelect?" tr_btn_selected":"":" tr_btn_disabled"),this.obj.tr.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.tr.idd=String(e),isNaN(s)?s=n.p_tbody.childNodes.length+1:s<1&&(s=1),s>n.p_tbody.childNodes.length?n.p_tbody.appendChild(this.obj.tr):n.p_tbody.insertBefore(this.obj.tr,n.p_tbody.childNodes[s-1]),this.obj.td_a=document.createElement("TD"),this.obj.td_a.className="td_btn_img",this.obj.td_a.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td_b=document.createElement("TD"),this.obj.td_b.className="td_btn_txt",this.obj.td_b.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},t.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b)),null!=i.img?(this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+t.conf.icons_path+i.img+"' border='0'>",this.obj.tr._img=i.img):this.obj.td_a.innerHTML="&nbsp;";var l=null!=i.text?i.text:i.itemText||"";return this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+l+"</div>",this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){!this.en||this._selected&&n.renderSelect||(this.className="tr_btn tr_btn_over")},this.obj.tr.onmouseout=function(){this.en&&(this._selected&&n.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")},this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(e){if((e=e||event).cancelBubble=!0,this.en){n.setListOptionSelected(this.idd.replace(t.idPrefix,"")),n.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",n.obj.className=n.obj.renderAs,n.arw.className=String(n.obj.renderAs).replace("btn","arw"),window.dhx4.zim.clear(n.polygon._idd),n.polygon.style.display="none",n.polygon._ie6cover&&(n.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(n.id,!0),t.anyUsed="none",t.callEvent("onButtonSelectHide",[n.obj.idd]);var i=this.idd.replace(t.idPrefix,"");if(this.extAction)try{window[this.extAction](i)}catch(e){}t.callEvent("onClick",[i])}},n._listOptions[e]=this.obj,this},this.polygon=document.createElement("DIV"),this.polygon.dir="ltr",this.polygon.style.display="none",this.polygon.className="dhx_toolbar_poly_"+t.conf.skin+" dhxtoolbar_icons_"+t.conf.iconSize,this.polygon.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.polygon.onmousedown=function(t){(t=t||event).cancelBubble=!0},this.polygon.style.overflowY="auto",this.polygon._idd=window.dhx4.newId(),window.dhx4.isIPad&&(this.polygon.ontouchstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1}),this.p_tbl=document.createElement("TABLE"),this.p_tbl.className="buttons_cont",this.p_tbl.cellSpacing="0",this.p_tbl.cellPadding="0",this.p_tbl.border="0",this.polygon.appendChild(this.p_tbl),this.p_tbody=document.createElement("TBODY"),this.p_tbl.appendChild(this.p_tbody),null!=i.options)for(var s=0;s<i.options.length;s++){var o="_"+(i.options[s].type||"")+"ButtonSelectObject";null==i.options[s].id&&(i.options[s].id=t._genStr(24)),"function"==typeof this[o]&&new this[o](i.options[s].id,i.options[s])}return document.body.appendChild(this.polygon),window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover)),this.setWidth=function(t){this.obj.style.width=t-this.arw.offsetWidth+"px",this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px",this.p_tbl.style.width=this.polygon.style.width},this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display="",this.arw.style.display=""},this.hideItem=function(){this.obj.style.display="none",this.arw.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t,this.arw.title=t},this.getItemToolTip=function(){return this.obj.title},this.addListOption=function(t,e,i,n,s){if("button"==i||"separator"==i){var o={id:t,type:i,text:n,img:s};new this["_"+i+"ButtonSelectObject"](t,o,e)}},this.removeListOption=function(t){if(this._isListButton(t,!0)){var e=this._listOptions[t];if(null!=e.td_a&&null!=e.td_b){for(e.td_a.onselectstart=null,e.td_b.onselectstart=null;e.td_a.childNodes.length>0;)e.td_a.removeChild(e.td_a.childNodes[0]);for(;e.td_b.childNodes.length>0;)e.td_b.removeChild(e.td_b.childNodes[0]);for(e.tr.onselectstart=null,e.tr.onmouseover=null,e.tr.onmouseout=null,e.tr.onclick=null;e.tr.childNodes.length>0;)e.tr.removeChild(e.tr.childNodes[0]);e.tr.parentNode.removeChild(e.tr),e.td_a=null,e.td_b=null,e.tr=null}else{for(e.sep.onselectstart=null,e.td.onselectstart=null,e.tr.onselectstart=null;e.td.childNodes.length>0;)e.td.removeChild(e.td.childNodes[0]);for(;e.tr.childNodes.length>0;)e.tr.removeChild(e.tr.childNodes[0]);e.tr.parentNode.removeChild(e.tr),e.sep=null,e.td=null,e.tr=null}e=null,this._listOptions[t]=null;try{delete this._listOptions[t]}catch(t){}}},this.showListOption=function(t){this._isListButton(t,!0)&&(this._listOptions[t].tr.style.display="")},this.hideListOption=function(t){this._isListButton(t,!0)&&(this._listOptions[t].tr.style.display="none")},this.isListOptionVisible=function(t){if(this._isListButton(t,!0))return"none"!=this._listOptions[t].tr.style.display},this.enableListOption=function(e){this._isListButton(e)&&(this._listOptions[e].tr.en=!0,this._listOptions[e].tr.className="tr_btn"+(this._listOptions[e].tr._selected&&t.renderSelect?" tr_btn_selected":""))},this.disableListOption=function(t){this._isListButton(t)&&(this._listOptions[t].tr.en=!1,this._listOptions[t].tr.className="tr_btn tr_btn_disabled")},this.isListOptionEnabled=function(t){if(this._isListButton(t))return this._listOptions[t].tr.en},this.setListOptionPosition=function(t,e){if(this._listOptions[t]&&this.getListOptionPosition(t)!=e&&!isNaN(e)){e<1&&(e=1);var i=this._listOptions[t].tr;this.p_tbody.removeChild(i),e>this.p_tbody.childNodes.length?this.p_tbody.appendChild(i):this.p_tbody.insertBefore(i,this.p_tbody.childNodes[e-1]),i=null}},this.getListOptionPosition=function(t){var e=-1;if(!this._listOptions[t])return e;for(var i=0;i<this.p_tbody.childNodes.length;i++)this.p_tbody.childNodes[i]==this._listOptions[t].tr&&(e=i+1);return e},this.setListOptionImage=function(e,i){if(this._isListButton(e)){var n=this._listOptions[e].tr.childNodes[t.rtl?1:0];n.innerHTML="<img src='"+t.conf.icons_path+i+"' class='btn_sel_img'>",n=null}},this.getListOptionImage=function(e){if(this._isListButton(e)){var i=this._listOptions[e].tr.childNodes[t.rtl?1:0],n=null;return i.childNodes.length>0&&(n=i.childNodes[0].src),i=null,n}},this.clearListOptionImage=function(e){if(this._isListButton(e)){for(var i=this._listOptions[e].tr.childNodes[t.rtl?1:0];i.childNodes.length>0;)i.removeChild(i.childNodes[0]);i.innerHTML="&nbsp;",i=null}},this.setListOptionText=function(e,i){this._isListButton(e)&&(this._listOptions[e].tr.childNodes[t.rtl?0:1].childNodes[0].innerHTML=i)},this.getListOptionText=function(e){if(this._isListButton(e))return this._listOptions[e].tr.childNodes[t.rtl?0:1].childNodes[0].innerHTML},this.setListOptionToolTip=function(t,e){this._isListButton(t)&&(this._listOptions[t].tr.title=e)},this.getListOptionToolTip=function(t){if(this._isListButton(t))return this._listOptions[t].tr.title},this.forEachListOption=function(t){for(var e in this._listOptions)t(e)},this.getAllListOptions=function(){var t=new Array;for(var e in this._listOptions)t[t.length]=e;return t},this.setListOptionSelected=function(t){for(var e in this._listOptions){var i=this._listOptions[e];null!=i.td_a&&null!=i.td_b&&i.tr.en&&(e==t?(i.tr._selected=!0,i.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),"select"==this.mode&&(i.tr._img?this.setItemImage(i.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(t)))):(i.tr._selected=!1,i.tr.className="tr_btn")),i=null}},this.getListOptionSelected=function(){var t=null;for(var e in this._listOptions)1==this._listOptions[e].tr._selected&&(t=e);return t},this._isListButton=function(t,e){return null!=this._listOptions[t]&&!(!e&&"tr_sep"==this._listOptions[t].tr.className)},this.setMaxOpen=function(t){if(this._ph=null,"number"==typeof t)return this.maxOpen=t,void this._maxOpenTest();this.maxOpen=null},i.width&&this.setWidth(i.width),"select"==this.mode&&void 0!==i.selected&&this.setListOptionSelected(i.selected),this},dhtmlXToolbarObject.prototype._buttonInputObject=function(t,e,i){this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.w=null!=i.width?i.width:100,this.obj.title=null!=i.title?i.title:"",this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(null!=i.value?" value='"+i.value+"'":"")+">";var n=t,s=this;return this.obj.childNodes[0].onkeydown=function(t){13==(t=t||event).keyCode&&n.callEvent("onEnter",[s.obj.idd,this.value])},t.base.appendChild(this.obj),this.enableItem=function(){this.obj.childNodes[0].disabled=!1},this.disableItem=function(){this.obj.childNodes[0].disabled=!0},this.isEnabled=function(){return!this.obj.childNodes[0].disabled},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return"none"!=this.obj.style.display},this.setValue=function(t){this.obj.childNodes[0].value=t},this.getValue=function(){return this.obj.childNodes[0].value},this.setWidth=function(t){this.obj.w=t,this.obj.childNodes[0].style.width=this.obj.w+"px"},this.getWidth=function(){return this.obj.w},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this.getInput=function(){return this.obj.firstChild},void 0!==i.enabled&&0==window.dhx4.s2b(i.enabled)&&this.disableItem(),this},dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled,this.imgEn=null!=i.img?i.img:"",this.imgDis=null!=i.imgdis?i.imgdis:"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.pressed=null!=i.selected,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"),this.obj.innerHTML=t._rtlParseBtn(""!=this.img?"<img src='"+t.conf.icons_path+this.img+"'>":"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":""),t.base.appendChild(this.obj);var n=this;return this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.onmouseover=function(){this._doOnMouseOver()},this.obj.onmouseout=function(){this._doOnMouseOut()},this.obj._doOnMouseOver=function(){0!=n.state&&"none"==t.anyUsed&&(this.pressed?this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over":(this.className="dhx_toolbar_btn dhxtoolbar_btn_over",this.renderAs=this.className))},this.obj._doOnMouseOut=function(){0!=n.state&&"none"==t.anyUsed&&(this.pressed?this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def":(this.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.renderAs=this.className))},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(e){if((!t.checkEvent("onBeforeStateChange")||t.callEvent("onBeforeStateChange",[this.idd.replace(t.idPrefix,""),this.pressed]))&&0!=n.state&&"none"==t.anyUsed){this.pressed=!this.pressed,this.className=this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs;var i=this.idd.replace(t.idPrefix,"");if(this.extAction)try{window[this.extAction](i,this.pressed)}catch(e){}return t.callEvent("onStateChange",[i,this.pressed]),!1}},this.setItemState=function(e,i){if(this.obj.pressed!=e&&(1==e?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis"),this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.renderAs=this.obj.className),1==i)){var n=this.obj.idd.replace(t.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](n,this.obj.pressed)}catch(t){}t.callEvent("onStateChange",[n,this.obj.pressed])}},this.getItemState=function(){return this.obj.pressed},this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._sliderObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled||"true"==i.enabled,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.idd=String(e),this.obj.len=null!=i.length?Number(i.length):50,this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(i.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(i.textMax||"")+"</div>",t.base.appendChild(this.obj);var n=this;this.pen=document.createElement("DIV"),this.pen.className="dhxtoolbar_sl_pen",this.obj.appendChild(this.pen);var s=this.pen;this.label=document.createElement("DIV"),this.label.dir="ltr",this.label.className="dhx_toolbar_slider_label_"+t.conf.skin+(t.rtl?"_rtl":""),this.label.style.display="none",this.label.tip=i.toolTip||"%v",this.label._zi=window.dhx4.newId(),document.body.appendChild(this.label);var o=this.label;return this.pen.valueMin=null!=i.valueMin?Number(i.valueMin):0,this.pen.valueMax=null!=i.valueMax?Number(i.valueMax):100,this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax),this.pen.valueNow=null!=i.valueNow?Number(i.valueNow):this.pen.valueMax,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits=function(){this.minX=n.obj.childNodes[1].offsetLeft+2,this.maxX=n.obj.childNodes[3].offsetLeft-this.offsetWidth+1},this.pen._detectLimits(),this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX),this.style.left=this.nowX+"px",this.newNowX=this.nowX},this.pen._definePos(),this.pen.initXY=0,this.pen.allowMove=!1,this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(t){0!=n.state&&(t=t||event,this.initXY=window.dhx4.isIPad?t.touches[0].clientX:t.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",""!=o.tip&&(o.style.visibility="hidden",o.style.display="",o.innerHTML=o.tip.replace("%v",this.valueNow),o.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-o.offsetWidth/2)+"px",o.style.top=window.dhx4.absTop(this)-o.offsetHeight-3+"px",o.style.visibility="",o.style.zIndex=window.dhx4.zim.reserve(o._zi)))},this.pen._doOnMouseMoveStart=function(t){if(t=t||event,s.allowMove){var e=window.dhx4.isIPad?t.touches[0].clientX:t.clientX,i=e-s.initXY;if(!(e<window.dhx4.absLeft(s)+Math.round(s.offsetWidth/2)&&s.nowX==s.minX||e>window.dhx4.absLeft(s)+Math.round(s.offsetWidth/2)&&s.nowX==s.maxX))return s.newNowX=s.nowX+i,s.newNowX<s.minX&&(s.newNowX=s.minX),s.newNowX>s.maxX&&(s.newNowX=s.maxX),s.nowX=s.newNowX,s.style.left=s.nowX+"px",s.initXY=e,s.newValueNow=Math.round((s.valueMax-s.valueMin)*(s.newNowX-s.minX)/(s.maxX-s.minX)+s.valueMin),""!=o.tip&&(o.innerHTML=o.tip.replace(/%v/gi,s.newValueNow),o.style.left=Math.round(window.dhx4.absLeft(s)+s.offsetWidth/2-o.offsetWidth/2)+"px",o.style.top=window.dhx4.absTop(s)-o.offsetHeight-3+"px"),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},this.pen._doOnMouseMoveEnd=function(){s.allowMove&&(s.className="dhxtoolbar_sl_pen",s.allowMove=!1,s.nowX=s.newNowX,s.valueNow=s.newValueNow,""!=o.tip&&(o.style.display="none",window.dhx4.zim.clear(o._zi)),t.callEvent("onValueChange",[n.obj.idd.replace(t.idPrefix,""),s.valueNow]))},window.dhx4.isIPad?(document.addEventListener("touchmove",s._doOnMouseMoveStart,!1),document.addEventListener("touchend",s._doOnMouseMoveEnd,!1)):void 0!==window.addEventListener?(window.addEventListener("mousemove",s._doOnMouseMoveStart,!1),window.addEventListener("mouseup",s._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",s._doOnMouseMoveStart),document.body.attachEvent("onmouseup",s._doOnMouseMoveEnd)),this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")},this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setValue=function(e,i){(e=Number(e))<this.pen.valueMin&&(e=this.pen.valueMin),e>this.pen.valueMax&&(e=this.pen.valueMax),this.pen.valueNow=e,this.pen._definePos(),1==i&&t.callEvent("onValueChange",[this.obj.idd.replace(t.idPrefix,""),this.pen.valueNow])},this.getValue=function(){return this.pen.valueNow},this.setMinValue=function(t,e){(t=Number(t))>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=e,this.obj.childNodes[0].style.display=e.length>0?"":"none",this.pen.valueMin=t,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())},this.setMaxValue=function(t,e){(t=Number(t))<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=e,this.obj.childNodes[4].style.display=e.length>0?"":"none",this.pen.valueMax=t,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())},this.getMinValue=function(){var t=this.obj.childNodes[0].innerHTML,e=this.pen.valueMin;return new Array(e,t)},this.getMaxValue=function(){var t=this.obj.childNodes[4].innerHTML,e=this.pen.valueMax;return new Array(e,t)},this.setItemToolTipTemplate=function(t){this.label.tip=t},this.getItemToolTipTemplate=function(){return this.label.tip},this},dhtmlXToolbarObject.prototype.unload=function(){for(this.conf.isIPad?document.removeEventListener("touchstart",this._doOnClick,!1):"function"==typeof window.addEventListener?window.removeEventListener("mousedown",this._doOnClick,!1):document.body.detachEvent("onmousedown",this._doOnClick),this._doOnClick=null,this.clearAll(),this.objPull=null,this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);for(this.cont.removeChild(this.base),this.base=null;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="",this.cont=null,window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.tX1=null,this.tX2=null,this.tY1=null,this.tY2=null,this.anyUsed=null,this.idPrefix=null,this.rootTypes=null,this._rtl=null,this._rtlParseBtn=null,this.setRTL=null,this._sbw=null,this._getObj=null,this._addImgObj=null,this._setItemImage=null,this._clearItemImage=null,this._setItemText=null,this._getItemText=null,this._enableItem=null,this._disableItem=null,this._xmlParser=null,this._addItemToStorage=null,this._genStr=null,this._addItem=null,this._getPosition=null,this._setPosition=null,this._getIdByPosition=null,this._separatorObject=null,this._textObject=null,this._buttonObject=null,this._buttonSelectObject=null,this._buttonInputObject=null,this._buttonTwoStateObject=null,this._sliderObject=null,this._autoDetectVisibleArea=null,this._removeItem=null,this.setAlign=null,this.setSkin=null,this.setIconsPath=null,this.setIconPath=null,this.loadXML=null,this.loadXMLString=null,this.clearAll=null,this.addSpacer=null,this.removeSpacer=null,this.getType=null,this.getTypeExt=null,this.inArray=null,this.getParentId=null,this.addButton=null,this.addText=null,this.addButtonSelect=null,this.addButtonTwoState=null,this.addSeparator=null,this.addSlider=null,this.addInput=null,this.forEachItem=null,this.showItem=null,this.hideItem=null,this.isVisible=null,this.enableItem=null,this.disableItem=null,this.isEnabled=null,this.setItemText=null,this.getItemText=null,this.setItemToolTip=null,this.getItemToolTip=null,this.setItemImage=null,this.setItemImageDis=null,this.clearItemImage=null,this.clearItemImageDis=null,this.setItemState=null,this.getItemState=null,this.setItemToolTipTemplate=null,this.getItemToolTipTemplate=null,this.setValue=null,this.getValue=null,this.setMinValue=null,this.getMinValue=null,this.setMaxValue=null,this.getMaxValue=null,this.setWidth=null,this.getWidth=null,this.getPosition=null,this.setPosition=null,this.removeItem=null,this.addListOption=null,this.removeListOption=null,this.showListOption=null,this.hideListOption=null,this.isListOptionVisible=null,this.enableListOption=null,this.disableListOption=null,this.isListOptionEnabled=null,this.setListOptionPosition=null,this.getListOptionPosition=null,this.setListOptionText=null,this.getListOptionText=null,this.setListOptionToolTip=null,this.getListOptionToolTip=null,this.setListOptionImage=null,this.getListOptionImage=null,this.clearListOptionImage=null,this.forEachListOption=null,this.getAllListOptions=null,this.setListOptionSelected=null,this.getListOptionSelected=null,this.unload=null,this.setUserData=null,this.getUserData=null,this.setMaxOpen=null,this.items=null,this.conf=null},dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var t=window.dhx4.screenDim();this.tX1=t.left,this.tX2=t.right,this.tY1=t.top,this.tY2=t.bottom},dhtmlXToolbarObject.prototype._initObj=function(t){for(var e=0;e<t.length;e++)this._addItemToStorage(t[e]);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._xmlToJson=function(t){var e=[],i=t.getElementsByTagName("toolbar");if(null!=i&&null!=i[0]){i=i[0];for(var n=function(t){var e=t.getElementsByTagName("itemText");return null!=e&&null!=e[0]?window.dhx4._xmlNodeValue(e[0]):null},s=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"],o=["id","type","enabled","disabled","action","selected","img","text"],l=0;l<i.childNodes.length;l++)if("item"==i.childNodes[l].tagName){for(var r={},a=0;a<s.length;a++){null!=(c=i.childNodes[l].getAttribute(s[a]))&&(r[s[a]]=c)}for(var h=0;h<i.childNodes[l].childNodes.length;h++){if("item"==i.childNodes[l].childNodes[h].tagName&&"buttonSelect"==r.type){var d={};for(a=0;a<o.length;a++){var c;null!=(c=i.childNodes[l].childNodes[h].getAttribute(o[a]))&&(d[o[a]]=c)}var u=i.childNodes[l].childNodes[h].getElementsByTagName("userdata");for(a=0;a<u.length;a++){d.userdata||(d.userdata={});var f={};try{f.name=u[a].getAttribute("name")}catch(t){f.name=null}try{f.value=u[a].firstChild.nodeValue}catch(t){f.value=""}null!=f.name&&(d.userdata[f.name]=f.value)}d.text=n(i.childNodes[l].childNodes[h])||d.text,null==r.options&&(r.options=[]),r.options.push(d)}if("userdata"==i.childNodes[l].childNodes[h].tagName){null==r.userdata&&(r.userdata={});d={};try{d.name=i.childNodes[l].childNodes[h].getAttribute("name")}catch(t){d.name=null}try{d.value=i.childNodes[l].childNodes[h].firstChild.nodeValue}catch(t){d.value=""}null!=d.name&&(r.userdata[d.name]=d.value)}}r.text=n(i.childNodes[l])||r.text,e.push(r)}n=null}return e},dhtmlXToolbarObject.prototype._addItemToStorage=function(t,e){var i=t.id||this._genStr(24),n=t.type||"";if("spacer"==n?this.addSpacer(this._lastId):this._lastId=i,""!=n&&null!=this["_"+n+"Object"]){if("buttonSelect"==n&&null!=t.options)for(var s=0;s<t.options.length;s++)"obj"==t.options[s].type&&(t.options[s].type="button"),"sep"==t.options[s].type&&(t.options[s].type="separator");if("slider"==n){var o={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var l in o)null==t[o[l]]&&null!=t[l]&&(t[o[l]]=t[l])}"buttonInput"==n&&null==t.value&&null!=t.text&&(t.value=t.text),"buttonTwoState"==n&&void 0===t.selected&&void 0!==t.pressed&&window.dhx4.s2b(t.pressed)&&(t.selected=!0),void 0===t.enabled&&void 0!==t.disabled&&window.dhx4.s2b(t.disabled)&&(t.enabled=!1),null==t.imgDis&&null!=t.img_disabled&&(t.imgdis=t.img_disabled),void 0!==t.openAll&&null!=t.openAll||"dhx_terrace"!=this.conf.skin||(t.openAll=!0),this.objPull[this.idPrefix+i]=new this["_"+n+"Object"](this,i,t),this.objPull[this.idPrefix+i].type=n,this.setPosition(i,e)}if(null!=t.userdata)for(var l in t.userdata)this.setUserData(i,l,t.userdata[l]);if(null!=t.options)for(s=0;s<t.options.length;s++)if(null!=t.options[s].userdata)for(var l in t.options[s].userdata)this.setListOptionUserData(t.id,t.options[s].id,l,t.options[s].userdata[l])},dhtmlXToolbarObject.prototype.setSkin=function(t,e){for(var i in!0===e?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=t,"dhx_skyblue"==this.conf.skin&&(this.conf.sel_ofs_y=1),"dhx_web"==this.conf.skin&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),"dhx_terrace"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize),this.objPull){var n=this.objPull[i];"slider"==n.type&&(n.pen._detectLimits(),n.pen._definePos(),n.label.className="dhx_toolbar_slider_label_"+this.conf.skin),"buttonSelect"==n.type&&(n.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize)}"dhx_terrace"==t&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.setAlign=function(t){this.conf.align="right"==t?"right":"left",this.base.className="right"==t?"dhxtoolbar_float_right":"dhxtoolbar_float_left",this._spacer&&(this._spacer.className="right"==t?" dhxtoolbar_float_left":" dhxtoolbar_float_right")},dhtmlXToolbarObject.prototype.setIconSize=function(t){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[t]?t:18,this.setSkin(this.conf.skin,!0),this.callEvent("_onIconSizeChange",[this.conf.iconSize])},dhtmlXToolbarObject.prototype.setIconsPath=function(t){this.conf.icons_path=t},dhtmlXToolbarObject.prototype.setUserData=function(t,e,i){t=this.idPrefix+t,null!=this.objPull[t]&&(null==this.objPull[t].userData&&(this.objPull[t].userData={}),this.objPull[t].userData[e]=i)},dhtmlXToolbarObject.prototype.getUserData=function(t,e){return t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].userData&&this.objPull[t].userData[e]||null},dhtmlXToolbarObject.prototype._isListOptionExists=function(t,e){if(null==this.objPull[this.idPrefix+t])return!1;var i=this.objPull[this.idPrefix+t];return"buttonSelect"==i.type&&null!=i._listOptions[e]},dhtmlXToolbarObject.prototype.setListOptionUserData=function(t,e,i,n){if(this._isListOptionExists(t,e)){var s=this.objPull[this.idPrefix+t]._listOptions[e];null==s.userData&&(s.userData={}),s.userData[i]=n}},dhtmlXToolbarObject.prototype.getListOptionUserData=function(t,e,i){if(!this._isListOptionExists(t,e))return null;var n=this.objPull[this.idPrefix+t]._listOptions[e];return n.userData&&n.userData[i]?n.userData[i]:null},dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){null==this.conf.terrace_radius&&(this.conf.terrace_radius="3px");var t=[],e={separator:!0,text:!0},i=[this.base];null!=this._spacer&&i.push(this._spacer);for(var n=0;n<i.length;n++){t[n]=[];for(var s=0;s<i[n].childNodes.length;s++)if(null!=i[n].childNodes[s].idd&&"none"!=i[n].childNodes[s].style.display){var o=this.idPrefix+i[n].childNodes[s].idd;null!=this.objPull[o]&&this.objPull[o].obj==i[n].childNodes[s]&&t[n].push({a:o,type:this.objPull[o].type,node:this.objPull[o]["buttonSelect"==this.objPull[o].type?"arw":"obj"]})}i[n]=null}for(n=0;n<t.length;n++)for(s=0;s<t[n].length;s++){var l=t[n][s],r=!1,a=!1;e[l.type]||((s==t[n].length-1||null!=t[n][s+1]&&e[t[n][s+1].type])&&(r=!0),(0==s||s-1>=0&&null!=t[n][s-1]&&e[t[n][s-1].type])&&(a=!0)),l.node.style.borderRightWidth=r?"1px":"0px",l.node.style.borderTopRightRadius=l.node.style.borderBottomRightRadius=r?this.conf.terrace_radius:"0px","buttonSelect"==l.type?(l.node.previousSibling.style.borderTopLeftRadius=l.node.previousSibling.style.borderBottomLeftRadius=a?this.conf.terrace_radius:"0px",l.node.previousSibling._br=r,l.node.previousSibling._bl=a):l.node.style.borderTopLeftRadius=l.node.style.borderBottomLeftRadius=a?this.conf.terrace_radius:"0px",l.node._br=r,l.node._bl=a}for(n=0;n<t.length;n++){for(s=0;s<t[n].length;s++){for(var o in t[n][s])t[n][s][o]=null;t[n][s]=null}t[n]=null}t=i=null},dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(t,e){var i=this.objPull[t];1==e?(i.obj.style.borderBottomLeftRadius=i.obj._bl?this.conf.terrace_radius:"0px",i.arw.style.borderBottomRightRadius=i.obj._br?this.conf.terrace_radius:"0px"):(i.obj.style.borderBottomLeftRadius="0px",i.arw.style.borderBottomRightRadius="0px"),i=null},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_toolbar=function(t,e,i,n,s){return void 0!==s?t=s:((t=document.createElement("DIV")).className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV")),t.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.toolbar=!0,this._updateIdx(),t},dhtmlXCellObject.prototype.attachToolbar=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.callEvent("_onBeforeContentAttach",["toolbar"]),void 0===t?t={}:"string"==typeof t&&(t={skin:t}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(t),this._adjustCont(this._idd),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()}),t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataNodes.toolbar},dhtmlXCellObject.prototype.detachToolbar=function(){this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar}),String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")},dhtmlxArray._master={_dhx_find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},_dhx_insertAt:function(t,e){this[this.length]=null;for(var i=this.length-1;i>=t;i--)this[i]=this[i-1];this[t]=e},_dhx_removeAt:function(t){this.splice(t,1)},_dhx_swapItems:function(t,e){var i=this[t];this[t]=this[e],this[e]=i}},dhtmlXGridObject.prototype={getRowAttribute:function(t,e){return this.getRowById(t)._attrs[e]},setRowAttribute:function(t,e,i){this.getRowById(t)._attrs[e]=i},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(t,e){dhx4.s2b(e);var i=this.getRowById(t);if(i){if(""===i.expand&&this.collapseKids(i),e&&"none"!=i.style.display){i.style.display="none";var n=this.selectedRows._dhx_find(i);if(-1!=n){i.className=i.className.replace("rowselected","");for(var s=0;s<i.childNodes.length;s++)i.childNodes[s].className=i.childNodes[s].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(n)}this.callEvent("onGridReconstructed",[])}e||"none"!=i.style.display||(i.style.display="",this.callEvent("onGridReconstructed",[])),this.callEvent("onRowHide",[t,e]),this.setSizes()}},setColumnHidden:function(t,e){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[t]=e;if(this.fldSorted&&this.fldSorted.cellIndex==t&&e&&(this.sortImg.style.display="none"),dhx4.s2b(e)){if(this._hrrar){if(this._hrrar[t])return}else this._hrrar=new Array;this._hrrar[t]="display:none;",this._hideShowColumn(t,"none")}else{if(!this._hrrar||!this._hrrar[t])return;this._hrrar[t]="",this._hideShowColumn(t,"")}this.fldSorted&&this.fldSorted.cellIndex==t&&!e&&(this.sortImg.style.display="inline"),this.setSortImgPos(),this.callEvent("onColumnHidden",[t,e])},isColumnHidden:function(t){return!(!this._hrrar||!this._hrrar[t])},setColumnsVisibility:function(t){if(t&&(this._ivizcol=t.split(this.delim)),this.hdr.rows.length&&this._ivizcol)for(var e=0;e<this._ivizcol.length;e++)this.setColumnHidden(e,this._ivizcol[e])},_fixHiddenRowsAll:function(t,e,i,n,s){s=s||"_cellIndex";for(var o=t.rows.length,l=0;l<o;l++){var r=t.rows[l].childNodes;if(r.length!=this._cCount){for(var a=0;a<r.length;a++)if(r[a][s]==e){r[a].style[i]=n;break}}else r[e].style[i]=n}},_hideShowColumn:function(t,e){if(this.hdr.rows[1]&&this.hdr.rows[1]._childIndexes&&this.hdr.rows[1]._childIndexes[t]!=t&&this.hdr.rows[1]._childIndexes[t],"none"==e){this.hdr.rows[0].cells[t]._oldWidth=this.hdr.rows[0].cells[t].style.width||this.initCellWidth[t]+"px",this.hdr.rows[0].cells[t]._oldWidthP=this.cellWidthPC[t],this.obj.rows[0].cells[t].style.width="0px";var i={rows:[this.obj.rows[0]]};this.forEachRow(function(t){"TR"==this.rowsAr[t].tagName&&i.rows.push(this.rowsAr[t])}),this._fixHiddenRowsAll(i,t,"display","none"),this.isTreeGrid()&&this._fixHiddenRowsAllTG(t,"none"),(_isOpera&&_OperaRv<9||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,t,"display","none","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],t,"display","none"),this._fixHiddenRowsAll(this.hdr,t,"whiteSpace","nowrap","_cellIndexS"),this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth)),this.cellWidthPX[t]&&(this.cellWidthPX[t]=0),this.cellWidthPC[t]&&(this.cellWidthPC[t]=0)}else if(this.hdr.rows[0].cells[t]._oldWidth){var n=this.hdr.rows[0].cells[t];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,t,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],t,"display","");i={rows:[this.obj.rows[0]]};this.forEachRow(function(t){"TR"==this.rowsAr[t].tagName&&i.rows.push(this.rowsAr[t])}),this._fixHiddenRowsAll(i,t,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(t,""),this._fixHiddenRowsAll(this.hdr,t,"whiteSpace","normal","_cellIndexS"),n._oldWidthP&&(this.cellWidthPC[t]=n._oldWidthP),n._oldWidth&&(this.cellWidthPX[t]=parseInt(n._oldWidth))}this.setSizes(),_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(t){this._ecspn=dhx4.s2b(t)},enableRowsHover:function(t,e){this._unsetRowHover(!1,!0),this._hvrCss=e,dhx4.s2b(t)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(t,e,i){this._sclE=dhx4.s2b(t),this._dclE=dhx4.s2b(e),this._f2kE=dhx4.s2b(i)},enableLightMouseNavigation:function(t){dhx4.s2b(t)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");e&&(this.grid.editStop(),this.grid.doClick(e),this.grid.editCell(),(t||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(t,e){if(that=e?this:this.grid,that._lahRw&&that._lahRw!=e){for(var i=0;i<that._lahRw.childNodes.length;i++)that._lahRw.childNodes[i].className=that._lahRw.childNodes[i].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");if(e&&e.parentNode!=this.grid._lahRw){if(this.grid._unsetRowHover(0,e),!(e=e.parentNode).idd||"__filler__"==e.idd)return;for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].className+=" "+this.grid._hvrCss;this.grid._lahRw=e}this._honmousemove(t)},_autoMoveSelect:function(t){if(!this.grid.editor){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");e.parentNode.idd&&this.grid.doClick(e,!0,0)}this._onmousemove(t)},enableDistributedParsing:function(t,e,i){dhx4.s2b(t)?(this._ads_count=e||10,this._ads_time=i||250):this._ads_count=0},destructor:function(){if(this.editStop(!0),this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime)),this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,""),this.formInputs)for(var t=0;t<this.formInputs.length;t++)this.parentForm.removeChild(this.formInputs[t]);var e;for(t=0;t<this.rowsCol.length;t++)this.rowsCol[t]&&(this.rowsCol[t].grid=null);for(t in this.rowsAr)this.rowsAr[t]&&(this.rowsAr[t]=null);this.rowsCol=new dhtmlxArray,this.rowsAr={},this.entBox.innerHTML="";var i=function(){};for(e in this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=i,this.setSizes=this._update_srnd_view=this.callEvent=i,this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null,this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=i,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=i),this)this[e]&&this[e].m_obj&&(this[e].m_obj=null),this[e]=null;return this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null),null},getSortingState:function(){var t=new Array;return this.fldSorted&&(t[0]=this.fldSorted._cellIndex,t[1]="dhxgrid_sort_desc"==this.sortImg.className?"des":"asc"),t},enableAutoHeight:function(t,e,i){this._ahgr=dhx4.s2b(t),this._ahgrF=dhx4.s2b(i),this._ahgrM=e||null,1==arguments.length&&(this.objBox.style.overflowY=t?"hidden":"auto"),"auto"==e&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(t){this._sst=dhx4.s2b(t),this.rowsCol.stablesort=function(t){for(var e=this.length-1,i=0;i<this.length-1;i++){for(var n=0;n<e;n++)if(t(this[n],this[n+1])>0){var s=this[n];this[n]=this[n+1],this[n+1]=s}e--}}},enableKeyboardSupport:function(t){this._htkebl=!dhx4.s2b(t)},enableContextMenu:function(t){this._ctmndx=t},setScrollbarWidthCorrection:function(t){},enableTooltips:function(t){this._enbTts=t.split(",");for(var e=0;e<this._enbTts.length;e++)this._enbTts[e]=dhx4.s2b(this._enbTts[e])},enableResizing:function(t){this._drsclmn=t.split(",");for(var e=0;e<this._drsclmn.length;e++)this._drsclmn[e]=dhx4.s2b(this._drsclmn[e])},setColumnMinWidth:function(t,e){2==arguments.length?(this._drsclmW||(this._drsclmW=new Array),this._drsclmW[e]=t):this._drsclmW=t.split(",")},enableCellIds:function(t){this._enbCid=dhx4.s2b(t)},lockRow:function(t,e){var i=this.getRowById(t);i&&(i._locked=dhx4.s2b(e),this.cell&&this.cell.parentNode.idd==t&&this.editStop())},_getRowArray:function(t){for(var e=new Array,i=0;i<t.childNodes.length;i++){var n=this.cells3(t,i);e[i]=n.getValue()}return e},setDateFormat:function(t,e){this._dtmask=t,this._dtmask_inc=e},setNumberFormat:function(t,e,i,n){var s=t.replace(/[^0\,\.]*/g,""),o=s.indexOf(".");o>-1&&(o=s.length-o-1);var l=s.indexOf(",");l>-1&&(l=s.length-o-2-l),"string"!=typeof i&&(i=this.i18n.decimal_separator),"string"!=typeof n&&(n=this.i18n.group_separator);var r=t.split(s)[0],a=t.split(s)[1];this._maskArr[e]=[o,l,r,a,i,n]},_aplNFb:function(t,e){var i=this._maskArr[e];if(!i)return t;var n=parseFloat(t.toString().replace(/[^0-9]*/g,""));return"-"==t.toString().substr(0,1)&&(n*=-1),i[0]>0&&(n/=Math.pow(10,i[0])),n},_aplNF:function(t,e){var i=this._maskArr[e];if(!i)return t;var n=(parseFloat(t)<0?"-":"")+i[2];if((t=((t=Math.abs(Math.round(parseFloat(t)*Math.pow(10,i[0]>0?i[0]:0))).toString()).length<i[0]?Math.pow(10,i[0]+1-t.length).toString().substr(1,i[0]+1)+t.toString():t).split("").reverse())[i[0]]=(t[i[0]]||"0")+i[4],i[1]>0)for(var s=(i[0]>0?0:1)+i[0]+i[1];s<t.length;s+=i[1])t[s]+=i[5];return n+t.reverse().join("")+i[3]},_launchCommands:function(t){for(var e=0;e<t.length;e++){for(var i=new Array,n=0;n<t[e].childNodes.length;n++)1==t[e].childNodes[n].nodeType&&(i[i.length]=t[e].childNodes[n].firstChild.data);this[t[e].getAttribute("command")].apply(this,i)}},_parseHead:function(t){var e=dhx4.ajax.xpath("./head",t);if(e.length){var i=dhx4.ajax.xpath("./column",e[0]),n=dhx4.ajax.xpath("./settings",e[0]),s="setInitWidths",o=!1;if(n[0])for(var l=0;l<n[0].childNodes.length;l++)switch(n[0].childNodes[l].tagName){case"colwidth":n[0].childNodes[l].firstChild&&"%"==n[0].childNodes[l].firstChild.data&&(s="setInitWidthsP");break;case"splitat":o=!!n[0].childNodes[l].firstChild&&n[0].childNodes[l].firstChild.data}if(this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",e[0])),i.length>0){this.hdr.rows.length>0&&this.clearAll(!0);for(var r=[[],[],[],[],[],[],[],[],[]],a=["","width","type","align","sort","color","format","hidden","id"],h=["",s,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],d=0;d<i.length;d++){for(var c=1;c<a.length;c++)r[c].push(i[d].getAttribute(a[c]));r[0].push((i[d].firstChild?i[d].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(r[0]);for(d=0;d<h.length;d++)h[d]&&this[h[d]](r[d].join(this.delim));for(d=0;d<i.length;d++)if(0==this.cellType[d].indexOf("co")||"clist"==this.cellType[d]){var u=dhx4.ajax.xpath("./option",i[d]);if(u.length){var f=new Array;if("clist"==this.cellType[d]){for(c=0;c<u.length;c++)f[f.length]=u[c].firstChild?u[c].firstChild.data:"";this.registerCList(d,f)}else{var p=this.getCombo(d);for(c=0;c<u.length;c++)p.put(u[c].getAttribute("value"),u[c].firstChild?u[c].firstChild.data:"")}}}else r[6][d]&&(-1!=this.cellType[d].toLowerCase().indexOf("calendar")||"date"==this.fldSort[d]?this.setDateFormat(r[6][d]):this.setNumberFormat(r[6][d],d));this.init();var m=r[7].join(this.delim);this.setColHidden&&""!=m.replace(/,/g,"")&&this.setColHidden(m),o&&this.splitAt&&this.splitAt(o)}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",e[0]))}var g=dhx4.ajax.xpath("//rows/userdata",t);if(g.length>0){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(c=0;c<g.length;c++){for(var _="",v=0;v<g[c].childNodes.length;v++)_+=g[c].childNodes[v].nodeValue;this.UserData.gridglobaluserdata.put(g[c].getAttribute("name"),_)}}},getCheckedRows:function(t){var e=new Array;return this.forEachRowA(function(i){var n=this.cells(i,t);n.changeState&&0!=n.getValue()&&e.push(i)},!0),e.join(",")},checkAll:function(){for(var t=arguments.length?arguments[0]:1,e=0;e<this.getColumnsNum();e++)"ch"==this.getColType(e)&&this.setCheckedRows(e,t)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(t,e){this.forEachRowA(function(i){this.cells(i,t).isCheckbox()&&this.cells(i,t).setValue(e)})},_drawTooltip:function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");if(!e||this.grid.editor&&this.grid.editor.cell==e)return!0;var i=e.parentNode;if(i.idd&&"__filler__"!=i.idd){var n=t?t.target:event.srcElement;if(i.idd==window.unknown)return!0;if(!this.grid.callEvent("onMouseOver",[i.idd,e._cellIndex,t||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[e._cellIndex])return n.title&&(n.title=""),!0;if(!(e._cellIndex>=this.grid._cCount)){var s=this.grid.cells3(i,e._cellIndex);if(s&&s.cell&&s.cell._attrs)return n._title&&(s.cell.title=""),s.cell._attrs.title||(n._title=!0),s&&(n.title=s.cell._attrs.title||(s.getTitle?s.getTitle():(s.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}}},enableCellWidthCorrection:function(t){_isFF&&(this._wcorr=parseInt(t))},getAllRowIds:function(t){for(var e=[],i=0;i<this.rowsBuffer.length;i++)this.rowsBuffer[i]&&e.push(this.rowsBuffer[i].idd);return e.join(t||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(t,e,i){if(this._ecspn){var n=this.getRowById(t);if(n._childIndexes&&n.childNodes[n._childIndexes[e]]){var s=n._childIndexes[e],o=n.childNodes[s],l=o.colSpan;if(o.colSpan=1,l&&1!=l)for(var r=1;r<l;r++){var a=document.createElement("TD");o.nextSibling?n.insertBefore(a,o.nextSibling):n.appendChild(a),n._childIndexes[e+r]=s+r,a._cellIndex=e+r,a.style.textAlign=this.cellAlign[r],a.style.verticalAlign=this.cellVAlign[r],o=a,this.cells3(n,e+r).setValue("")}for(var h=1*e+1*l;h<n._childIndexes.length;h++)n._childIndexes[h]+=1*(l-1)}if(i&&i>1){if(n._childIndexes)s=n._childIndexes[e];else{s=e;n._childIndexes=new Array;for(h=0;h<n.childNodes.length;h++)n._childIndexes[h]=h}n.childNodes[s].colSpan=i;for(h=1;h<i;h++)n._childIndexes[n.childNodes[s+1]._cellIndex]=s,n.removeChild(n.childNodes[s+1]);for(h=1*n.childNodes[n._childIndexes[e]]._cellIndex+1*i;h<n._childIndexes.length;h++)n._childIndexes[h]-=i-1}}},preventIECaching:function(t){dhx4.ajax.cache=!t},enableColumnAutoSize:function(t){this._eCAS=dhx4.s2b(t)},_onHeaderDblClick:function(t){var e=this.grid,i=e.getFirstParentOfType(_isIE?event.srcElement:t.target,"TD");if(!e._eCAS)return!1;e.adjustColumnSize(i._cellIndexS)},adjustColumnSize:function(t,e){if(!this._hrrar||!this._hrrar[t]){this._notresize=!0;var i=0;this._setColumnSizeR(t,20);for(var n=1;n<this.hdr.rows.length;n++){var s=this.hdr.rows[n];(s=s.childNodes[s._childIndexes?s._childIndexes[t]:t])&&(!s.colSpan||s.colSpan<2)&&s._cellIndex==t&&(s.childNodes[0]&&"hdrcell"==s.childNodes[0].className&&(s=s.childNodes[0]),i=Math.max(i,s.scrollWidth))}for(var o=this.obj.rows.length,l=0,r=this.cellType._dhx_find("tree"),a=1;a<o;a++){var h=this.obj.rows[a];this.rowsAr[h.idd]&&(h._childIndexes&&h._childIndexes[t]!=t||!h.childNodes[t]||(l=(h.childNodes[t].innerText||h.childNodes[t].textContent||"").length*this.fontWidth,this._h2&&t==r&&(l+=22*this._h2.get[h.idd].level),l>i&&(i=l)))}i+=20+(e||0),this._setColumnSizeR(t,i),this._notresize=!1,this.setSizes()}},detachHeader:function(t,e){var i=(e=e||this.hdr).rows[t+1];i&&i.parentNode.removeChild(i),this.setSizes()},detachFooter:function(t){this.detachHeader(t,this.ftr)},attachHeader:function(t,e,i){if("string"==typeof t&&(t=this._eSplit(t)),"string"==typeof e&&(e=e.split(this.delim)),i=i||"_aHead",this.hdr.rows.length){if(t)this._createHRow([t,e],this["_aHead"==i?"hdr":"ftr"]);else if(this[i])for(var n=0;n<this[i].length;n++)this.attachHeader.apply(this,this[i][n])}else this[i]||(this[i]=new Array),this[i][this[i].length]=[t,e,i]},_createHRow:function(t,e){if(!e){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative"),(l=document.createElement("DIV")).className="c_ftr".substr(2),this.entBox.appendChild(l),(c=document.createElement("TABLE")).cellPadding=c.cellSpacing=0,_isIE&&8!=_isIE||(c.width="100%",c.style.paddingRight="20px"),c.style.marginRight="20px",c.style.tableLayout="fixed",l.appendChild(c),c.appendChild(document.createElement("TBODY")),this.ftr=e=c;for(var i=c.insertRow(0),n=this.hdrLabels.length<=1?t[0].length:this.hdrLabels.length,s=0;s<n;s++)i.appendChild(document.createElement("TH")),i.childNodes[s]._cellIndex=s;_isIE&&_isIE<8?i.style.position="absolute":i.style.height="auto"}var o=t[1],l=document.createElement("TR");e.rows[0].parentNode.appendChild(l);for(s=0;s<t[0].length;s++){if("#cspan"!=t[0][s])if("#rspan"==t[0][s]&&e.rows.length>1){for(var r=e.rows.length-2,a=!1,h=null;!a;){h=e.rows[r];for(var d=0;d<h.cells.length;d++)if(h.cells[d]._cellIndex==s){a=d+1;break}r--}(h=h.cells[a-1]).rowSpan=(h.rowSpan||1)+1}else{var c,u=document.createElement("TD");if(u._cellIndex=u._cellIndexS=s,this._hrrar&&this._hrrar[s]&&!_isIE&&(u.style.display="none"),"object"==typeof t[0][s])u.appendChild(t[0][s]);else if(this.forceDivInHeader?u.innerHTML="<div class='hdrcell'>"+(t[0][s]||"&nbsp;")+"</div>":u.innerHTML=t[0][s]||"&nbsp;",-1!=(t[0][s]||"").indexOf("#"))if(c=t[0][s].match(/(^|{)#([^}]+)(}|$)/)){var f="_in_header_"+c[2];this[f]&&this[f](this.forceDivInHeader?u.firstChild:u,s,t[0][s].split(c[0]))}o&&(u.style.cssText=o[s]),l.appendChild(u)}else(h=l.cells[l.cells.length-1]).colSpan=(h.colSpan||1)+1}_isKHTML&&(e._kTimer&&window.clearTimeout(e._kTimer),e._kTimer=window.setTimeout(function(){e.rows[1].style.display="none",window.setTimeout(function(){e.rows[1].style.display=""},1)},500))},attachFooter:function(t,e){this.attachHeader(t,e,"_aFoot")},setCellExcellType:function(t,e,i){this.changeCellType(this.getRowById(t),e,i)},changeCellType:function(t,e,i){i=i||this.cellType[e];var n,s=(n=this.cells3(t,e)).getValue();n.cell._cellType=i,(n=this.cells3(t,e)).setValue(s)},setRowExcellType:function(t,e){for(var i=this.rowsAr[t],n=0;n<i.childNodes.length;n++)this.changeCellType(i,n,e)},setColumnExcellType:function(t,e){for(var i=0;i<this.rowsBuffer.length;i++)this.rowsBuffer[i]&&"TR"==this.rowsBuffer[i].tagName&&this.changeCellType(this.rowsBuffer[i],t,e);"math"==this.cellType[t]?this._strangeParams[i]=e:this.cellType[t]=e},forEachRow:function(t){for(var e in this.rowsAr)this.rowsAr[e]&&this.rowsAr[e].idd&&t.apply(this,[this.rowsAr[e].idd])},forEachRowA:function(t){for(var e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&t.call(this,this.render_row(e).idd)},forEachCell:function(t,e){var i=this.getRowById(t);if(i)for(var n=0;n<this._cCount;n++)e(this.cells3(i,n),n)},enableAutoWidth:function(t,e,i){this._awdth=[dhx4.s2b(t),parseInt(e||99999),parseInt(i||0)],1==arguments.length&&(this.objBox.style.overflowX=t?"hidden":"auto")},updateFromXML:function(t,e,i,n){void 0===e&&(e=!0),this._refresh_mode=[!0,e,i],this.load(t,n)},_refreshFromXML:function(t){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(t){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(t):this.setValueX(t)});var e=this.cellType._dhx_find("tree"),i=dhx4.ajax.xmltop("rows",t),n=i.getAttribute("parent")||0,s={};this._refresh_mode[2]&&(-1!=e?this._h2.forEachChild(n,function(t){s[t.id]=!0},this):this.forEachRow(function(t){s[t]=!0}));for(var o=dhx4.ajax.xpath("//row",i),l=0;l<o.length;l++){var r=o[l],a=r.getAttribute("id");s[a]=!1;n=r.parentNode.getAttribute("id")||n;if(this.rowsAr[a]&&"TR"!=this.rowsAr[a].tagName)this._h2?this._h2.get[a].buff.data=r:this.rowsBuffer[this.getRowIndex(a)].data=r,this.rowsAr[a]=r;else if(this.rowsAr[a])this._process_xml_row(this.rowsAr[a],r,-1),this._postRowProcessing(this.rowsAr[a],!0),this._fake&&this._fake.rowsAr[a]&&this._fake._process_xml_row(this._fake.rowsAr[a],r,-1);else if(this._refresh_mode[1]){var h={idd:a,data:r,_parser:this._process_xml_row,_locator:this._get_xml_data},d=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(h),d=0):this.rowsBuffer.push(h),this._h2?(reset=!0,this._h2.add(a,r.parentNode.getAttribute("id")||r.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0),this.rowsAr[a]=r,r=this.render_row(d),this._insertRowAt(r,d?-1:0)}}if(this._refresh_mode[2])for(a in s)s[a]&&this.rowsAr[a]&&this.deleteRow(a);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&(this._h2?this._renderSort():this.render_dataset()),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(t,e){var i=this.cells(t,e).cell;return i._combo||(i._combo=new dhtmlXGridComboObject),i._combo},setTabOrder:function(t){var e=t.split(this.delim);this._tabOrder=[];for(var i=this._cCount||t.length,n=0;n<i;n++)e[n]={c:parseInt(e[n]),ind:n};e.sort(function(t,e){return t.c>e.c?1:-1});for(n=0;n<i;n++)e[n+1]&&void 0!==e[n].c?this._tabOrder[e[n].ind]=e[n+1].ind:this._tabOrder[e[n].ind]=-1*(e[0].ind+1)},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var t=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[t+1],this.cell._cellIndex,!0)},k13_0_1:function(){var t=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[t-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var t=this._getNextCell(null,1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!1;var t=this._getNextCell(null,-1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var t=this.cells4(this.cell);if(!t.changeState||!1===t.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor||!this.isTreeGrid())return!1;this.collapseKids(this.row)},k39_0_0:function(){if(this.editor||!this.isTreeGrid())return!1;this.expandKids(this.row)},k40_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var e=Math.max(t._r_select||0,this.getRowIndex(this.row.idd)),i=this._nextRow(e,1);if(i)t._r_select=null,this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&t.showRow(i.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]),this.pagingOn&&this.rowsCol[e+1]&&this.selectCell(e+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var e=this.getRowIndex(this.row.idd)+1;if(-1==e||this.pagingOn&&1==e)this._key_events.k33_0_0.apply(this,[]);else{var i=this._nextRow(e-1,-1);this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&i&&t.showRow(i.idd)}}this._still_active=!0}},_build_master_row:function(){for(var t=document.createElement("DIV"),e=["<table><tr>"],i=0;i<this._cCount;i++)e.push("<td></td>");e.push("</tr></table>"),t.innerHTML=e.join(""),this._master_row=t.firstChild.rows[0]},_prepareRow:function(t){this._master_row||this._build_master_row();for(var e=this._master_row.cloneNode(!0),i=0;i<e.childNodes.length;i++)e.childNodes[i]._cellIndex=i,this._enbCid&&(e.childNodes[i].id="c_"+t+"_"+i),this.dragAndDropOff&&this.dragger.addDraggableItem(e.childNodes[i],this);return e.idd=t,e.grid=this,e},_process_jsarray_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(e):e),t},_get_jsarray_data:function(t,e){return t[e]},_process_json_row:function(t,e){return e=this._c_order?this._swapColumns(e.data):e.data,this._process_some_row(t,e)},_process_some_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,e),t},_get_json_data:function(t,e){return t.data[e]},_process_js_row:function(t,e){for(var i=[],n=0;n<this.columnIds.length;n++)i[n]=e[this.columnIds[n]],i[n]||0===i[n]||(i[n]="");return this._process_some_row(t,i),t._attrs=e,t},_get_js_data:function(t,e){return t[this.columnIds[e]]},_process_csv_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(e.split(this.csv.cell)):e.split(this.csv.cell)),t},_get_csv_data:function(t,e){return t.split(this.csv.cell)[e]},_process_store_row:function(t,e){for(var i=[],n=0;n<this.columnIds.length;n++)i[n]=e[this.columnIds[n]];for(var s=0;s<t.childNodes.length;s++)t.childNodes[s]._attrs={};t._attrs=e,this._fillRow(t,i)},_process_xml_row:function(t,e){var i=dhx4.ajax.xpath(this.xml.cell,e),n=[];if(t._attrs=this._xml_attrs(e),this._ud_enabled)for(var s=dhx4.ajax.xpath("./userdata",e),o=s.length-1;o>=0;o--){for(var l="",r=0;r<s[o].childNodes.length;r++)l+=s[o].childNodes[r].nodeValue;this.setUserData(t.idd,s[o].getAttribute("name"),l)}for(r=0;r<i.length;r++){var a=i[this._c_order?this._c_order[r]:r];if(a){var h=t._childIndexes?t._childIndexes[r]:r,d=a.getAttribute("type");t.childNodes[h]&&(d&&(t.childNodes[h]._cellType=d),t.childNodes[h]._attrs=this._xml_attrs(a)),a.getAttribute("xmlcontent")||(a=a.firstChild?a.firstChild.wholeText||a.firstChild.data:""),n.push(a)}}for(i.length;r<t.childNodes.length;r++)t.childNodes[r]._attrs={};return t.parentNode&&"row"==t.parentNode.tagName&&(t._attrs.parent=t.parentNode.getAttribute("idd")),this._fillRow(t,n),t},_get_xml_data:function(t,e){for(t=t.firstChild;;){if(!t)return"";if("cell"==t.tagName&&e--,e<0)break;t=t.nextSibling}return t.firstChild?t.firstChild.data:""},_fillRow:function(t,e){this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==t.idd&&this.editStop();for(var i=0;i<t.childNodes.length;i++)if(i<e.length||this.defVal[i]){var n=t.childNodes[i]._cellIndex,s=e[n],o=this.cells4(t.childNodes[i]);!this.defVal[n]||""!=s&&void 0!==s||(s=this.defVal[n]),o&&o.setValue(s)}else t.childNodes[i].innerHTML="&nbsp;",t.childNodes[i]._clearCell=!0;return t},_postRowProcessing:function(t,e){t._attrs.class&&(t._css=t.className=t._attrs.class),t._attrs.locked&&(t._locked=!0),t._attrs.bgColor&&(t.bgColor=t._attrs.bgColor);for(var i=0,n=0;n<t.childNodes.length;n++){var s=t.childNodes[n],o=s._cellIndex,l=s._attrs.style||t._attrs.style;l&&(s.style.cssText+=";"+l),s._attrs.class&&(s.className=s._attrs.class),(l=s._attrs.align||this.cellAlign[o])&&(s.align=l),s.vAlign=s._attrs.valign||this.cellVAlign[o];var r=s._attrs.bgColor||this.columnColor[o];r&&(s.bgColor=r),s._attrs.colspan&&!e&&(this.setColspan(t.idd,n+i,s._attrs.colspan),i+=s._attrs.colspan-1),this._hrrar&&this._hrrar[o]&&!e&&(s.style.display="none")}this.callEvent("onRowCreated",[t.idd,t,null])},load:function(t,e,i){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof e&&(i=e,e=null),i=i||"xml",this.xmlFileUrl||(this.xmlFileUrl=t),this._data_type=i,this.xmlLoader=this.doLoadDetails;var n=this;return this.xmlLoader=function(t){n.callEvent&&(n["_process_"+i](t.xmlDoc),n._contextCallTimer||n.callEvent("onXLE",[n,0,0,t.xmlDoc]),e&&(e(),e=null))},dhx4.ajax.get(t,this.xmlLoader)},loadXMLString:function(t,e){window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.parse({responseXML:dhx4.ajax.parse(t)},e,"xml")},loadXML:function(t,e){window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.load(t,e,"xml")},parse:function(t,e,i){2==arguments.length&&"function"!=typeof e&&(i=e,e=null),i=i||"xml",this._data_type=i,"xml"==i&&"string"==typeof t&&(t={responseXML:dhx4.ajax.parse(t)}),this["_process_"+i](t),this._contextCallTimer||this.callEvent("onXLE",[this,0,0,t]),e&&e()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(t){var e={};if(t.attributes.length)for(var i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;return e},_process_xml:function(t){if(this._refresh_mode)return this._refreshFromXML(t);this._parsing=!0;var e=dhx4.ajax.xmltop(this.xml.top,t);if(e.tagName==this.xml.top){var i=e.getAttribute("dhx_security");i&&(dhtmlx.security_key=i),this._parseHead(e);var n=dhx4.ajax.xpath(this.xml.row,e),s=parseInt(e.getAttribute("pos")||0),o=parseInt(e.getAttribute("total_count")||0);if(!this.pagingOn)o=Math.min(o,32e6/this._srdh);var l=!1;if(o&&o!=this.rowsBuffer.length&&(this.rowsBuffer[o-1]||(this.rowsBuffer.length&&(l=!0),this.rowsBuffer[o-1]=null),o<this.rowsBuffer.length&&(this.rowsBuffer.splice(o,this.rowsBuffer.length-o),l=!0)),this.isTreeGrid())return this._process_tree_xml(e);for(var r=0;r<n.length;r++)if(!this.rowsBuffer[r+s]){var a=n[r].getAttribute("id")||r+s+1;this.rowsBuffer[r+s]={idd:a,data:n[r],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[a]=n[r]}if(this.callEvent("onDataReady",[]),l&&this._srnd){var h=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=h}else this.render_dataset();this._parsing=!1}},_process_jsarray:function(data){this._parsing=!0,data=data.responseText||data,"string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp);for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data}),this.rowsAr[id]=data[i]}this.render_dataset(),this._parsing=!1},_process_csv:function(t){if(this._parsing=!0,t=(t=(t=t.responseText||t).replace(/\r/g,"")).split(this.csv.row),this._csvHdr){this.clearAll();var e=t.splice(0,1)[0].split(this.csv.cell);this._csvAID||e.splice(0,1),this.setHeader(e.join(this.delim)),this.init()}for(var i=0;i<t.length;i++)if(t[i]||i!=t.length-1){if(this._csvAID){var n=i+1;this.rowsBuffer.push({idd:n,data:t[i],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var s=t[i].split(this.csv.cell);n=s.splice(0,1)[0];this.rowsBuffer.push({idd:n,data:s,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[n]=t[i]}this.render_dataset(),this._parsing=!1},_process_js:function(t){return this._process_json(t,"js")},_process_json:function(data,mode){this._parsing=!0;var data=data.responseText||data;if("string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp),"js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++){var row=data[i],id=row.id||i+1;this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data}),this.rowsAr[id]=data[i]}}else if(data.rows)for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[id]=data.rows[i]}data.dhx_security&&(dhtmlx.security_key=data.dhx_security),this.callEvent("onDataReady",[]),this.render_dataset(),this._parsing=!1},render_dataset:function(t,e){if(this._srnd){if(this._fillers)return this._update_srnd_view();e=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(t=Math.max(t||0,(this.currentPage-1)*this.rowsBufferOutSize),e=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(t=t||0,e=e||this.rowsBuffer.length);for(var i=t;i<e;i++){var n=this.render_row(i);if(-1==n){this.xmlFileUrl&&this.callEvent("onDynXLS",[i,this._dpref?this._dpref:e-i])&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+i+"&count="+(this._dpref?this._dpref:e-i),this._data_type),e=i;break}if(n.parentNode&&n.parentNode.tagName||(this._insertRowAt(n,i),(n._attrs.selected||n._attrs.select)&&(this.selectRow(n,!!n._attrs.call,!0),n._attrs.selected=n._attrs.select=null)),this._ads_count&&i-t==this._ads_count){var s=this;return this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){s._contextCallTimer=null,s.render_dataset(i,e),s._contextCallTimer||(s._context_parsing?s.callEvent("onXLE",[]):s._fixAlterCss(),s._context_parsing=!1)},this._ads_time)}}if(this._ads_count&&i==e&&this.callEvent("onDistributedEnd",[]),this._srnd&&!this._fillers){var o=this.rowsBuffer.length-e;for(this._fillers=[],this._fake&&!this._realfake&&(this._fake._fillers=[]);o>0;){var l=_isIE||window._FFrv?Math.min(o,35e3):o,r=this._add_filler(e,l);r&&this._fillers.push(r),o-=l,e+=l}}this.setSizes()},render_row:function(t){if(!this.rowsBuffer[t])return-1;if(this.rowsBuffer[t]._parser){var e=this.rowsBuffer[t];if(this.rowsAr[e.idd]&&"TR"==this.rowsAr[e.idd].tagName)return this.rowsBuffer[t]=this.rowsAr[e.idd];var i=this._prepareRow(e.idd);return this.rowsBuffer[t]=i,this.rowsAr[e.idd]=i,e._parser.call(this,i,e.data),this._postRowProcessing(i),i}return this.rowsBuffer[t]},_get_cell_value:function(t,e,i){return t._locator?(this._c_order&&(e=this._c_order[e]),t._locator.call(this,t.data,e)):this.cells3(t,e)[i||"getValue"]()},sortRows:function(t,e,i){if(this.editStop(),i=(i||"asc").toLowerCase(),e=e||this.fldSort[t],t=t||0,this.isTreeGrid())this.sortTreeRows(t,e,i);else{var n={},s=this.cellType[t],o="getValue";"link"==s&&(o="getContent"),"dhxCalendar"!=s&&"dhxCalendarA"!=s||(o="getDate");for(var l=0;l<this.rowsBuffer.length;l++)n[this.rowsBuffer[l].idd]=this._get_cell_value(this.rowsBuffer[l],t,o);this._sortRows(t,e,i,n)}this.callEvent("onAfterSorting",[t,e,i])},_sortCore:function(t,e,i,n,s){var o="sort";if(this._sst&&(s.stablesort=this.rowsCol.stablesort,o="stablesort"),e.length>4&&(e=window[e]),"cus"==e){var l=this._customSorts[t];s[o](function(t,e){return l(n[t.idd],n[e.idd],i,t.idd,e.idd)})}else"function"==typeof e?s[o](function(t,s){return e(n[t.idd],n[s.idd],i,t.idd,s.idd)}):"str"==e?s[o](function(t,e){return"asc"==i?n[t.idd]>n[e.idd]?1:n[t.idd]<n[e.idd]?-1:0:n[t.idd]<n[e.idd]?1:n[t.idd]>n[e.idd]?-1:0}):"int"==e?s[o](function(t,e){var s=parseFloat(n[t.idd]);s=isNaN(s)?-99999999999999:s;var o=parseFloat(n[e.idd]);return o=isNaN(o)?-99999999999999:o,"asc"==i?s-o:o-s}):"date"==e&&s[o](function(t,e){var s=Date.parse(n[t.idd])||Date.parse("01/01/1900"),o=Date.parse(n[e.idd])||Date.parse("01/01/1900");return"asc"==i?s-o:o-s})},_sortRows:function(t,e,i,n){this._sortCore(t,e,i,n,this.rowsBuffer),this._reset_view(),this.callEvent("onGridReconstructed",[])},_reset_view:function(t){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0),this.callEvent("onResetView",[]);var e=this.obj.rows[0].parentNode,i=e.removeChild(e.childNodes[0],!0);if(_isKHTML)for(var n=e.parentNode.childNodes.length-1;n>=0;n--)"TR"==e.parentNode.childNodes[n].tagName&&e.parentNode.removeChild(e.parentNode.childNodes[n],!0);else if(_isIE)for(n=e.childNodes.length-1;n>=0;n--)e.childNodes[n].removeNode(!0);else e.innerHTML="";e.appendChild(i),this.rowsCol=dhtmlxArray(),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,t||(_isIE&&this._srnd,this.render_dataset())}},deleteRow:function(t,e){if(e||(e=this.getRowById(t)),e){if(this.editStop(),!this._realfake&&0==this.callEvent("onBeforeRowDeleted",[t]))return!1;var i=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){e.parentNode&&e.parentNode.removeChild(e);var n=this.rowsCol._dhx_find(e);-1!=n&&this.rowsCol._dhx_removeAt(n);for(var s=0;s<this.rowsBuffer.length;s++)if(this.rowsBuffer[s]&&this.rowsBuffer[s].idd==t){this.rowsBuffer._dhx_removeAt(s),n=s;break}}else i=this._h2.get[t].parent.id,this._removeTrGrRow(e);this.rowsAr[t]=null;for(s=0;s<this.selectedRows.length;s++)this.selectedRows[s].idd==t&&this.selectedRows._dhx_removeAt(s);if(this._srnd){for(s=0;s<this._fillers.length;s++){var o=this._fillers[s];o&&(o[0]>=n?this._update_fillers(s,0,-1):o[0]+o[1]>n&&this._update_fillers(s,-1,0))}this._update_srnd_view()}return this.pagingOn&&this.changePage(),this._realfake||this.callEvent("onAfterRowDeleted",[t,i]),this.callEvent("onGridReconstructed",[]),this._ahgr&&this.setSizes(),!0}},_addRow:function(t,e,i){-1!=i&&void 0!==i||(i=this.rowsBuffer.length),"string"==typeof e&&(e=e.split(this.delim));var n=this._prepareRow(t);n._attrs={};for(var s=0;s<n.childNodes.length;s++)n.childNodes[s]._attrs={};if(this.rowsAr[n.idd]=n,this._h2&&(this._h2.get[n.idd].buff=n),this._fillRow(n,e),this._postRowProcessing(n),this._skipInsert)return this._skipInsert=!1,this.rowsAr[n.idd]=n;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(i,n),this.rowsAr[n.idd]=n,n;if(this._fillers){this.rowsCol._dhx_insertAt(i,null),this.rowsBuffer._dhx_insertAt(i,n),this._fake&&this._fake.rowsCol._dhx_insertAt(i,null),this.rowsAr[n.idd]=n;for(var o=!1,l=0;l<this._fillers.length;l++){var r=this._fillers[l];if(r&&r[0]<=i&&r[0]+r[1]>=i){r[1]=r[1]+1;var a=r[2].firstChild.style.height=parseInt(r[2].firstChild.style.height)+this._srdh+"px";o=!0,this._fake&&(this._fake._fillers[l][1]++,this._fake._fillers[l][2].firstChild.style.height=a)}r&&r[0]>i&&(r[0]=r[0]+1,this._fake&&this._fake._fillers[l][0]++)}return o||this._fillers.push(this._add_filler(i,1,0==i?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[i-1])),n}return this.rowsBuffer._dhx_insertAt(i,n),this._insertRowAt(n,i)},addRow:function(t,e,i){var n=this._addRow(t,e,i);return this.dragContext||this.callEvent("onRowAdded",[t]),this.pagingOn&&this.changePage(this.currentPage),this._srnd&&this._update_srnd_view(),n._added=!0,this._srnd&&!this._fillers&&(this._fillers=[]),this._ahgr&&this.setSizes(),this.callEvent("onGridReconstructed",[]),n},_insertRowAt:function(t,e,i){if(this.rowsAr[t.idd]=t,this._skipInsert)return this._skipInsert=!1,t;if(e<0||!e&&0!==parseInt(e)?e=this.rowsCol.length:e>this.rowsCol.length&&(e=this.rowsCol.length),this._cssEven){var n=t.className.replace(this._cssUnEven,"");(this._cssSP?this.getLevel(t.idd):e)%2==1?t.className=n+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(t.idd):""):t.className=n+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(t.idd):"")}return i||(e!=this.obj.rows.length-1&&this.rowsCol[e]?this.rowsCol[e].parentNode.insertBefore(t,this.rowsCol[e]):_isKHTML?this.obj.appendChild(t):this.obj.firstChild.appendChild(t)),this.rowsCol._dhx_insertAt(e,t),this.callEvent("onRowInserted",[t,e]),t},getRowById:function(t){var e=this.rowsAr[t];if(e){if("TR"!=e.tagName){for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==t)return this.render_row(i);if(this._h2)return this.render_row(null,e.idd)}return e}return null},cellById:function(t,e){return this.cells(t,e)},cells:function(t,e){if(0==arguments.length)return this.cells4(this.cell);var i=this.getRowById(t),n=i._childIndexes?i.childNodes[i._childIndexes[e]]:i.childNodes[e];return!n&&i._childIndexes&&(n=i.firstChild||{}),this.cells4(n)},cellByIndex:function(t,e){return this.cells2(t,e)},cells2:function(t,e){var i=this.render_row(t),n=i._childIndexes?i.childNodes[i._childIndexes[e]]:i.childNodes[e];return!n&&i._childIndexes&&(n=i.firstChild||{}),this.cells4(n)},cells3:function(t,e){var i=t._childIndexes?t.childNodes[t._childIndexes[e]]:t.childNodes[e];return this.cells4(i)},cells4:function(t){var e=window["eXcell_"+(t._cellType||this.cellType[t._cellIndex])];if(e)return new e(t)},cells5:function(t,e){e=e||t._cellType||this.cellType[t._cellIndex];if(!this._ecache[e]){if(window["eXcell_"+e])i=window["eXcell_"+e];else var i=eXcell_ro;this._ecache[e]=new i(t)}return this._ecache[e].cell=t,this._ecache[e]},dma:function(t){this._ecache||(this._ecache={}),t&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!t&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(t){arguments.length>0?this.smartTabOrder=dhx4.s2b(t):this.smartTabOrder=!0},setExternalTabOrder:function(t,e){var i=this;this.tabStart="object"==typeof t?t:document.getElementById(t);var n=this.tabStart.onkeydown;this.tabStart.onkeydown=function(t){n&&n.call(this,t);var e=t||window.event;if(9==e.keyCode&&!e.shiftKey)return e.cancelBubble=!0,i.selectCell(0,0,0,0,1),i.smartTabOrder&&i.cells2(0,0).isDisabled()&&i._key_events.k9_0_0.call(i),this.blur(),!1},_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown),this.tabEnd="object"==typeof e?e:document.getElementById(e);var s=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(t){s&&s.call(this,t);var e=t||window.event;if(9==e.keyCode&&e.shiftKey)return e.cancelBubble=!0,i.selectCell(i.getRowsNum()-1,i.getColumnCount()-1,0,0,1),i.smartTabOrder&&i.cells2(i.getRowsNum()-1,i.getColumnCount()-1).isDisabled()&&i._key_events.k9_0_1.call(i),this.blur(),!1},_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){return this._ui_seed||(this._ui_seed=(new Date).valueOf()),this._ui_seed++},clearAndLoad:function(){if(this._last_load_request){var t=this._last_load_request.xmlDoc;if(4!=t.readyState)try{t.onreadystatechange=function(){},t.abort()}catch(t){}}var e=this._pgn_skin;this._pgn_skin=null,this.clearAll(),this._pgn_skin=e,this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var t=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,t,Math.min(t+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}},function(){function t(t,e){this[t]=e}function e(t,e){this[t].call(this,e)}function i(t,e){this[t].call(this,e.join(this.delim))}var n=[{name:"label",def:"&nbsp;",operation:"setHeader",type:function(t,e,i){var n=[];function s(t,e,i){n[e]||(n[e]=[]),"object"==typeof i&&(i.toString=function(){return this.text}),n[e][t]=i}for(var o=0;o<e.length;o++)if("object"==typeof e[o]&&e[o].length)for(var l=0;l<e[o].length;l++)s(o,l,e[o][l]);else s(o,0,e[o]);for(o=0;o<n.length;o++)for(l=0;l<n[0].length;l++){var r=n[o][l];if(n[o][l]=(r||"").toString()||"&nbsp;",r&&r.colspan)for(var a=1;a<r.colspan;a++)s(l+a,o,"#cspan");if(r&&r.rowspan)for(a=1;a<r.rowspan;a++)s(l,o+a,"#rspan")}for(this.setHeader(n[0]),o=1;o<n.length;o++)this.attachHeader(n[o])}},{name:"id",def:"",operation:"columnIds",type:t},{name:"width",def:"*",operation:"setInitWidths",type:i},{name:"align",def:"left",operation:"cellAlign",type:t},{name:"valign",def:"middle",operation:"cellVAlign",type:t},{name:"sort",def:"na",operation:"fldSort",type:t},{name:"type",def:"ro",operation:"setColTypes",type:i},{name:"options",def:"",operation:"",type:function(t,e){for(var i=0;i<e.length;i++)if("object"==typeof e[i]){var n=this.getCombo(i);for(var s in e[i])n.put(s,e[i][s])}}}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(t){return[t.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(t){for(var i=0;i<n.length;i++){for(var s=[],o=0;o<t.length;o++)s[o]=t[o][n[i].name]||n[i].def;(n[i].type||e).call(this,n[i].operation,s,t)}this.init()},rows:function(t){},headers:function(t){for(var e=0;e<t.length;e++)this.attachHeader(t[e])}})}(),dhtmlXGridObject.prototype._dp_init=function(t){t.attachEvent("insertCallback",function(t,e){this.obj._h2?this.obj.addRow(e,i,null,parent):this.obj.addRow(e,[],0);var i=this.obj.getRowById(e);i&&(this.obj._process_xml_row(i,t.firstChild),this.obj._postRowProcessing(i))}),t.attachEvent("updateCallback",function(t,e){var i=this.obj.getRowById(e);i&&(this.obj._process_xml_row(i,t.firstChild),this.obj._postRowProcessing(i))}),t.attachEvent("deleteCallback",function(t,e){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteRow(e)}),t._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"],this.attachEvent("onEditCell",function(e,i,n){if(t._columns&&!t._columns[n])return!0;var s=this.cells(i,n);return 1==e?s.isCheckbox()&&t.setUpdated(i,!0):2==e&&s.wasChanged()&&t.setUpdated(i,!0),!0}),this.attachEvent("onRowPaste",function(e){t.setUpdated(e,!0)}),this.attachEvent("onUndo",function(e){t.setUpdated(e,!0)}),this.attachEvent("onRowIdChange",function(e,i){var n=t.findRow(e);n<t.updatedRows.length&&(t.updatedRows[n]=i)}),this.attachEvent("onSelectStateChanged",function(e){return"row"==t.updateMode&&t.sendData(),!0}),this.attachEvent("onEnter",function(e,i){return"row"==t.updateMode&&t.sendData(),!0}),this.attachEvent("onBeforeRowDeleted",function(e){if(t._silent_mode||!this.rowsAr[e])return!0;if(this.dragContext&&t.dnd)return window.setTimeout(function(){t.setUpdated(e,!0)},1),!0;var i=t.getState(e);return this._h2&&this._h2.forEachChild(e,function(e){t.setUpdated(e.id,!1),t.markRow(e.id,!0,"deleted")},this),"inserted"==i?(t.set_invalid(e,!1),t.setUpdated(e,!1),!0):"deleted"!=i&&("true_deleted"==i?(t.setUpdated(e,!1),!0):(t.setUpdated(e,!0,"deleted"),!1))}),this.attachEvent("onBindUpdate",function(e){"object"==typeof e&&(e=e.id),t.setUpdated(e,!0)}),this.attachEvent("onRowAdded",function(e){return!(!this.dragContext||!t.dnd)||(t.setUpdated(e,!0,"inserted"),!0)}),t._getRowData=function(t,e){var i,n=[];n.gr_id=t,this.obj.isTreeGrid()&&(n.gr_pid=this.obj.getParentId(t));for(var s=this.obj.getRowById(t),o=0;o<this.obj._cCount;o++){if(this.obj._c_order)var l=this.obj._c_order[o];else l=o;var r=this.obj.cells(s.idd,o);this._changed&&!r.wasChanged()||(this._endnm?n[this.obj.getColumnId(o)]=r.getValue():n["c"+l]=r.getValue())}if(i=this.obj.UserData[t])for(var a=0;a<i.keys.length;a++)i.keys[a]&&0!=i.keys[a].indexOf("__")&&(n[i.keys[a]]=i.values[a]);if(i=this.obj.UserData.gridglobaluserdata)for(a=0;a<i.keys.length;a++)n[i.keys[a]]=i.values[a];return n},t._clearUpdateFlag=function(t){if(this.obj.getRowById(t))for(var e=0;e<this.obj._cCount;e++)this.obj.cells(t,e).cell.wasChanged=!1},t.checkBeforeUpdate=function(t){for(var e=!0,i=[],n=0;n<this.obj._cCount;n++)if(this.mandatoryFields[n]){var s=this.mandatoryFields[n].call(this.obj,this.obj.cells(t,n).getValue(),t,n);"string"==typeof s?(this.messages.push(s),e=!1):(e&=s,i[n]=!s)}return e||(this.set_invalid(t,"invalid",i),this.setUpdated(t,!1)),e}},dhx4.attachEvent("onGridCreated",function(t){t._con_f_used=[].concat(t._con_f_used),dhtmlXGridObject.prototype._con_f_used=[];var e=function(t){return function(t){return(t=t.replace(/(\?|\&)connector[^\f]*/g,""))+(-1!=t.indexOf("?")?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")}.call(this,t)+(this._connector_sorting||"")+(this._connector_filter||"")};t.attachEvent("onCollectValues",function(t){return!this._con_f_used[t]||"object"==typeof this._con_f_used[t]&&this._con_f_used[t]}),t.attachEvent("onDynXLS",function(){return this.xmlFileUrl&&(this.xmlFileUrl=e.call(this,this.xmlFileUrl)),!0}),t.attachEvent("onBeforeSorting",function(t,i,n){if("connector"==i){var s=this;return this.clearAndLoad(function(t,i,n){return this._connector_sorting="&dhx_sort["+i+"]="+n,e.call(this,t)}.call(this,this.xmlFileUrl,t,n),function(){s.setSortImgState(!0,t,n)}),!1}return!0}),t.attachEvent("onFilterStart",function(t,i){if(this._con_f_used.length){var n=this.getSortingState();return this.clearAndLoad(function(t,i,n){for(var s=[],o=0;o<i.length;o++)s[o]="dhx_filter["+i[o]+"]="+encodeURIComponent(n[o]);return this._connector_filter="&"+s.join("&"),e.call(this,t)}.call(this,this.xmlFileUrl,t,i)),n.length&&this.setSortImgState(!0,n[0],n[1]),!1}return!0})}),dhtmlXGridObject.prototype._con_f_used=[],dhtmlXGridObject.prototype._in_header_connector_text_filter=function(t,e){return this._con_f_used[e]||(this._con_f_used[e]=1),this._in_header_text_filter(t,e)},dhtmlXGridObject.prototype._in_header_connector_select_filter=function(t,e){return this._con_f_used[e]||(this._con_f_used[e]=2),this._in_header_select_filter(t,e)},dhtmlXGridObject.prototype.load_connector||(dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(t,e,i){if(!this._colls_loaded&&this.cellType){for(var n=[],s=0;s<this.cellType.length;s++)0!=this.cellType[s].indexOf("co")&&0!=this.cellType[s].indexOf("clist")&&2!=this._con_f_used[s]||n.push(s);n.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"&":"?")+"connector=true&dhx_colls="+n.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(t,e,i){if(this._parseHead_connector.apply(this,arguments),!this._colls_loaded){for(var n=dhx4.ajax.xpath("./coll_options",arguments[0]),s=0;s<n.length;s++){var o=n[s].getAttribute("for"),l=[],r=null;"combo"==this.cellType[o]?r=this.getColumnCombo(o):0==this.cellType[o].indexOf("co")&&(r=this.getCombo(o));for(var a=dhx4.ajax.xpath("./item",n[s]),h=[],d=0;d<a.length;d++){var c=a[d].getAttribute("value");if(r){var u=a[d].getAttribute("label")||c;r.addOption?h.push([c,u]):r.put(c,u),l[l.length]=u}else l[l.length]=c}h.length?r&&r.addOption(h):l.length&&!r&&this.registerCList&&this.registerCList(1*o,l),this._con_f_used[1*o]&&(this._con_f_used[1*o]=l)}this._colls_loaded=!0}}),dhtmlXGridCellObject.prototype={getAttribute:function(t){return this.cell._attrs[t]},setAttribute:function(t,e){this.cell._attrs[t]=e},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var t=(this.obj||this.cell).getElementsByTagName("TEXTAREA");return t.length||(t=(this.obj||this.cell).getElementsByTagName("INPUT")),t[0]}},dhtmlXGridCellObject.prototype.setValue=function(t){"number"==typeof t||t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),this.setCValue(t)},dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent},dhtmlXGridCellObject.prototype.setCValue=function(t,e){this.cell.innerHTML=t,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,arguments.length>1?e:t])},dhtmlXGridCellObject.prototype.setCTxtValue=function(t){this.cell.innerHTML="",this.cell.appendChild(document.createTextNode(t)),this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,t])},dhtmlXGridCellObject.prototype.setLabel=function(t){this.cell.innerHTML=t},dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()},eXcell.prototype=new dhtmlXGridCellObject,eXcell_ed.prototype=new eXcell,eXcell_edtxt.prototype=new eXcell_ed,eXcell_edn.prototype=new eXcell_ed,eXcell_edn.prototype.setValue=function(t){if(!t||""==t.toString()._dhx_trim())return this.cell._clearCell=!0,this.setCValue("&nbsp;",0);this.cell._clearCell=!1,this.cell._orig_value=t,this.setCValue(this.grid._aplNF(t,this.cell._cellIndex),t)},eXcell_ch.prototype=new eXcell,eXcell_ch.prototype.setValue=function(t){this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+t+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)},eXcell_ra.prototype=new eXcell_ch,eXcell_ra.prototype.setValue=function(t){if(this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t){if(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]){var e=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);e.setValue("0"),this.grid.rowsAr[e.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,e.cell.parentNode.idd,e.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell,t="1",this.cell.chstate="1"}else t="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+t+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)},eXcell_txt.prototype=new eXcell,eXcell_txttxt.prototype=new eXcell_txt,eXcell_txt.prototype.setValue=function(t){this.cell._brval=t,t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),!this.grid.multiLine||this.cell._clearCell?this.setCValue(t,this.cell._brval):this.setCValue(t.replace(/\n/g,"<br/>"),t)},eXcell_co.prototype=new eXcell,eXcell_co.prototype.getText=function(){return this.cell.innerHTML},eXcell_co.prototype.setValue=function(t){if("object"==typeof t){var e=dhx4.ajax.xpath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}if(""==(t||"").toString()._dhx_trim()&&(t=null),this.cell.combo_value=t,null!==t){var n=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t);this.setCValue(null===n?t:n,t)}else this.setCValue("&nbsp;",t)},eXcell_coro.prototype=new eXcell_co,eXcell_cotxt.prototype=new eXcell_co,eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent},eXcell_cotxt.prototype.setValue=function(t){if("object"==typeof t){var e=dhx4.ajax.xpath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""==(t||"").toString()._dhx_trim()&&(t=null),null!==t?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t)||t,t):this.setCTxtValue(" ",t),this.cell.combo_value=t},eXcell_corotxt.prototype=new eXcell_cotxt,eXcell_cp.prototype=new eXcell,eXcell_cp.prototype.setValue=function(t){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?"100%":23)+";background-color:"+(t||"")+";border:0px;'>&nbsp;</div>",t),this.cell.firstChild._bg=t},eXcell_img.prototype=new eXcell,eXcell_img.prototype.getTitle=function(){return this.cell._brval},eXcell_img.prototype.setValue=function(t){var e=t;if(-1!=(t||"").indexOf("^")){var i=t.split("^");t=i[0],e=this.cell._attrs.title||i[1],i.length>2&&(this.cell.lnk=i[2],i[3]&&(this.cell.trg=i[3])),this.cell.titFl="1"}this.grid.multiLine?this.setCValue("<img src='"+this.grid.iconURL+(t||"")._dhx_trim()+"' border='0'>",t):this.setCValue("<img src='"+this.grid.iconURL+(t||"")._dhx_trim()+"' border='0' style='max-height:"+(this.grid._srdh-4)+"px'>",t),this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"),this.cell._brval=e},eXcell_price.prototype=new eXcell_ed,eXcell_price.prototype.setValue=function(t){isNaN(parseFloat(t))&&(t=this.val||0);var e="green";t<0&&(e="red"),this.setCValue("<span>$</span><span style='padding-right:2px;color:"+e+";'>"+t+"</span>",t)},eXcell_dyn.prototype=new eXcell_ed,eXcell_dyn.prototype.setValue=function(t){if(t&&!isNaN(Number(t))||""!==t&&(t=0),t>0)var e="green",i="dyn_up.gif";else if(0==t)e="black",i="dyn_.gif";else e="red",i="dyn_down.gif";this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='"+this.grid.imgURL+i+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:"+e+";'>"+t+"</span></div>",t)},eXcell_ro.prototype=new eXcell,window.eXcell_hidden=function(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell.val}},eXcell_hidden.prototype=new eXcell,eXcell_hidden.prototype.setValue=function(t){this.cell.val=t},eXcell_ron.prototype=new eXcell,eXcell_ron.prototype.setValue=function(t){if(0===t);else if(!t||""==t.toString()._dhx_trim())return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._orig_value=t,this.cell._clearCell=!1,this.setCValue(t?this.grid._aplNF(t,this.cell._cellIndex):"0")},eXcell_rotxt.prototype=new eXcell,Hashtable.prototype=new dhtmlXGridComboObject,void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachGrid=function(){this.callEvent("_onBeforeContentAttach",["grid"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),this.dataType="grid",this.dataObj=new dhtmlXGridObject(t),this.dataObj.setSkin(this.conf.skin),void 0!==window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&null!=navigator.userAgent.match(/7[\.\d]* mobile/gi)&&null!=navigator.userAgent.match(/AppleWebKit/gi)&&(this.dataObj.objBox.style.webkitOverflowScrolling="auto"),"dhx_skyblue"==this.conf.skin&&void 0!==window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2),t=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXGridObject.prototype.enableDragAndDrop=function(t){"temporary_disabled"==t?(this.dADTempOff=!1,t=!0):this.dADTempOff=!0,this.dragAndDropOff=dhx4.s2b(t),this._drag_validate=!0,t&&(this.objBox.ondragstart=function(t){return(t||event).cancelBubble=!0,!1})},dhtmlXGridObject.prototype.setDragBehavior=function(t){switch(this.dadmodec=this.dadmodefix=0,t){case"child":this.dadmode=0,this._sbmod=!1;break;case"sibling":this.dadmode=1,this._sbmod=!1;break;case"sibling-next":this.dadmode=1,this._sbmod=!0;break;case"complex":this.dadmode=2,this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}},dhtmlXGridObject.prototype.enableDragOrder=function(t){this._dndorder=dhx4.s2b(t)},dhtmlXGridObject.prototype._checkParent=function(t,e){var i=this._h2.get[t.idd].parent;if(i.parent){for(var n=0;n<e.length;n++)if(e[n]==i.id)return!0;return this._checkParent(this.rowsAr[i.id],e)}},dhtmlXGridObject.prototype._createDragNode=function(t,e){if(this.editStop(),window.dhtmlDragAndDrop.dragNode)return null;if(!this.dADTempOff)return null;t.parentObject=new Object,t.parentObject.treeNod=this;var i=this.callEvent("onBeforeDrag",[t.parentNode.idd,t._cellIndex,e]);if(!i)return null;var n=new Array;n=(n=this.getSelectedId())&&""!=n?n.split(this.delim):[];for(var s=!1,o=0;o<n.length;o++)n[o]==t.parentNode.idd&&(s=!0);if(s||(this.selectRow(this.rowsAr[t.parentNode.idd],!1,e.ctrlKey,!1),e.ctrlKey||(n=[]),n[this.selMultiRows?n.length:0]=t.parentNode.idd),this.isTreeGrid())for(o=n.length-1;o>=0;o--)this._checkParent(this.rowsAr[n[o]],n)&&n.splice(o,1);var l=this;n.length&&this._dndorder&&n.sort(function(t,e){return l.rowsAr[t].rowIndex>l.rowsAr[e].rowIndex?1:-1});var r=this.getFirstParentOfType(_isIE?e.srcElement:e.target,"TD");r&&(this._dndExtra=r._cellIndex),this._dragged=new Array;for(o=0;o<n.length;o++)this.rowsAr[n[o]]&&(this._dragged[this._dragged.length]=this.rowsAr[n[o]],this.rowsAr[n[o]].treeNod=this);t.parentObject.parentNode=t.parentNode;var a=document.createElement("div");return a.innerHTML=!0!==i?i:this.rowToDragElement(t.parentNode.idd),a.style.position="absolute",a.className="dragSpanDiv",a},dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV"),this._sdrgc.innerHTML="&nbsp;",this._sdrgc.className="gridDragLine",this.objBox.appendChild(this._sdrgc)},dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var t=this.tid;t=this.tobj.getParentId(t);)if(this.sid==t)return!1;return!0},dragContext.prototype.close=function(){this.sobj=null,this.tobj=null},dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)},dragContext.prototype.set=function(t,e){return this[t]=e,this},dragContext.prototype.uid=function(t,e){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this},dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)},dragContext.prototype.attrs=function(){return"tree"==this.source?{}:this.sobj.rowsAr[this.sid]._attrs},dragContext.prototype.childs=function(){return"treeGrid"==this.source&&this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null},dragContext.prototype.pid=function(){if(!this.tid)return 0;if(!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var t=this.tobj.rowsAr[this.tid],e=this.tobj._h2.get[t.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&t.nextSibling){var i=this.tobj._h2.get[t.nextSibling.idd].parent.id;if(i==this.tid)return this.tid;if(i!=e)return i}return e}},dragContext.prototype.ind=function(){if(this.tid==window.unknown)return this.tobj.rowsBuffer.length;"treeGrid"==this.target&&("child"==this.dropmode?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid)));var t=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var e=this.tobj.rowsAr[this.tid];if(e.nextSibling&&this._h2.get[e.nextSibling.idd].parent.id==this.tid)return t+1}return t+1+("treeGrid"==this.target&&t>=0&&"minus"==this.tobj._h2.get[this.tobj.rowsBuffer[t].idd].state?this.tobj._getOpenLenght(this.tobj.rowsBuffer[t].idd,0):0)},dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null},dragContext.prototype.slist=function(){for(var t=new Array,e=0;e<this.sid.length;e++)t[t.length]=this.sid[e]["tree"==this.source?"id":"idd"];return t.join(",")},dhtmlXGridObject.prototype._drag=function(t,e,i,n){if(this._realfake)return this._fake._drag();this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var s=i.parentNode,o=t.parentObject;s.idd||(s.grid=this,this.dadmodefix=0);var l=new dragContext(0,0,0,1==s.grid.dadmode||s.grid.dadmodec?"sibling":"child");if(o&&o.childNodes)l.set("source","tree").set("sobj",o.treeNod).set("sid",l.sobj._dragged);else{if(!o)return!0;o.treeNod.isTreeGrid&&o.treeNod.isTreeGrid()&&l.set("source","treeGrid"),l.set("sobj",o.treeNod).set("sid",l.sobj._dragged)}s.grid.isTreeGrid()?l.set("target","treeGrid"):l.set("dropmode","sibling"),l.set("tobj",s.grid).set("tid",s.idd),2==l.tobj.dadmode&&1==l.tobj.dadmodec&&l.tobj.dadmodefix<0&&(l.tobj.obj.rows[1].idd!=l.tid?l.tid=s.previousSibling.idd:l.tid=0);var r=this.getFirstParentOfType(n,"TD");if(r&&l.set("tExtra",r._cellIndex),r&&l.set("sExtra",l.sobj._dndExtra),l.sobj.dpcpy&&l.set("mode","copy"),l.tobj._realfake&&(l.tobj=l.tobj._fake),l.sobj._realfake&&(l.sobj=l.sobj._fake),l.tobj._clearMove(),o&&o.treeNod&&o.treeNod._nonTrivialRow)o.treeNod._nonTrivialRow(this,l.tid,l.dropmode,o);else{if(l.tobj.dragContext=l,!l.tobj.callEvent("onDrag",[l.slist(),l.tid,l.sobj,l.tobj,l.sExtra,l.tExtra]))return l.tobj.dragContext=null;var a=new Array;if("object"==typeof l.sid){for(var h=l.copy(),d=0;d<l.sid.length;d++)h.set("alfa",!d).set("sid",l.sid[d]["tree"==l.source?"id":"idd"]).valid()&&(h.tobj._dragRoutine(h),"treeGrid"==h.target&&"child"==h.dropmode&&h.tobj.openItem(h.tid),a[a.length]=h.nid,h.set("dropmode","sibling").set("tid",h.nid));h.close()}else l.tobj._dragRoutine(l);l.tobj.laterLink&&l.tobj.laterLink(),l.tobj.callEvent("onDrop",[l.slist(),l.tid,a.join(","),l.sobj,l.tobj,l.sExtra,l.tExtra])}l.tobj.dragContext=null,l.close()},dhtmlXGridObject.prototype._dragRoutine=function(t){if(t.sobj==t.tobj&&"grid"==t.source&&"move"==t.mode&&!this._fake){if(t.sobj._dndProblematic)return;var e=t.sobj.rowsAr[t.sid],i=t.sobj.rowsCol._dhx_find(e);if(t.sobj.rowsCol._dhx_removeAt(t.sobj.rowsCol._dhx_find(e)),t.sobj.rowsBuffer._dhx_removeAt(t.sobj.rowsBuffer._dhx_find(e)),t.sobj.rowsBuffer._dhx_insertAt(t.ind(),e),t.tobj._fake){t.tobj._fake.rowsCol._dhx_removeAt(i);var n=t.tobj._fake.rowsAr[t.sid];n.parentNode.removeChild(n)}return t.sobj._insertRowAt(e,t.ind()),t.nid=t.sid,void t.sobj.callEvent("onGridReconstructed",[])}var s;if(this._h2&&void 0!==t.tid&&"sibling"==t.dropmode&&(this._sbmod||t.tid)?t.alfa&&this._sbmod&&this._h2.get[t.tid].childs.length?(this.openItem(t.tid),s=t.uid().tobj.addRowBefore(t.nid,t.data(),this._h2.get[t.tid].childs[0].id,t.img(),t.childs())):s=t.uid().tobj.addRowAfter(t.nid,t.data(),t.tid,t.img(),t.childs()):s=t.uid().tobj.addRow(t.nid,t.data(),t.ind(),t.pid(),t.img(),t.childs()),s._attrs=t.attrs(),"tree"==t.source){this.callEvent("onRowAdded",[t.nid]);var o=t.sobj._globalIdStorageFind(t.sid);if(o.childsCount){for(var l=t.copy().set("tid",t.nid).set("dropmode","grid"==t.target?"sibling":"child"),r=0;r<o.childsCount;r++)t.tobj._dragRoutine(l.set("sid",o.childNodes[r].id)),"move"==t.mode&&r--;l.close()}}else if(t.tobj._copyUserData(t),this.callEvent("onRowAdded",[t.nid]),"treeGrid"==t.source){t.sobj==t.tobj&&(s._xml=t.sobj.rowsAr[t.sid]._xml);var a=t.sobj._h2.get[t.sid];if(a&&a.childs.length){l=t.copy().set("tid",t.nid);"grid"==t.target?l.set("dropmode","sibling"):(l.tobj.kidsXmlFile||l.tobj.openItem(t.tid),l.set("dropmode","child"));var h=a.childs.length;if(!l.tobj.kidsXmlFile)for(r=0;r<h;r++)t.sobj.render_row_tree(null,a.childs[r].id),t.tobj._dragRoutine(l.set("sid",a.childs[r].id)),h!=a.childs.length&&(r--,h=a.childs.length);l.close()}}"move"==t.mode&&(t.sobj["tree"==t.source?"deleteItem":"deleteRow"](t.sid),t.sobj!=t.tobj||t.tobj.rowsAr[t.sid]||(t.tobj.changeRowId(t.nid,t.sid),t.nid=t.sid))},dhtmlXGridObject.prototype.gridToGrid=function(t,e,i){for(var n=new Array,s=0;s<e.hdr.rows[0].cells.length;s++)n[s]=e.cells(t,s).getValue();return n},dhtmlXGridObject.prototype.checkParentLine=function(t,e){return!!(this._h2&&e&&t)&&(t.id==e||this.checkParentLine(t.parent,e))},dhtmlXGridObject.prototype._dragIn=function(t,e,i,n){if(!this.dADTempOff)return 0;var s=this.isTreeGrid(),o=e.parentNode.idd?e.parentNode:e.parentObject;if(this._drag_validate){if(t.parentNode==e.parentNode)return 0;if(s&&this==o.grid&&this.checkParentLine(this._h2.get[t.parentNode.idd],e.parentNode.idd))return 0}if(!this.callEvent("onDragIn",[o.idd||o.id,t.parentNode.idd,o.grid||o.treeNod,t.grid||t.parentNode.grid]))return this._setMove(t,i,n,!0);if(this._setMove(t,i,n),s&&""!=t.parentNode.expand){var l=this;this._autoOpenTimer=window.setTimeout(function(){l._autoOpenItem(null,l),l=null},1e3),this._autoOpenId=t.parentNode.idd}else this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);return t},dhtmlXGridObject.prototype._autoOpenItem=function(t,e){e.openItem(e._autoOpenId)},dhtmlXGridObject.prototype._dragOut=function(t){this._clearMove();var e=t.parentNode.parentObject?t.parentObject.id:t.parentNode.idd;this.callEvent("onDragOut",[e]),this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)},dhtmlXGridObject.prototype._setMove=function(t,e,i,n){if(t.parentNode.idd){var s=dhx4.absTop(t),o=dhx4.absTop(this.objBox);if(s-o>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),s-o+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),n)return 0;if(2==this.dadmode){var l=i-s+(document.body.scrollTop||document.documentElement.scrollTop)-2-t.offsetHeight/2;Math.abs(l)-t.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=l<0?-1:1):this.dadmodec=0}else this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=s-o+parseInt(this.objBox.scrollTop)+(this.dadmodefix>=0?t.offsetHeight:0)+"px";else if(this._llSelD=t,"TR"==t.parentNode.tagName)for(var r=0;r<t.parentNode.childNodes.length;r++){(l=t.parentNode.childNodes[r])._bgCol=l.style.backgroundColor,l.style.backgroundColor="#FFCCCC"}}},dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var t=this._llSelD.parentNode.childNodes,e=0;e<t.length;e++)t[e].style.backgroundColor=t[e]._bgCol;this._llSelD=null},dhtmlXGridObject.prototype.rowToDragElement=function(t){return this.cells(t,0).getValue()},dhtmlXGridObject.prototype._copyUserData=function(t){if(!t.tobj.UserData[t.nid]||t.tobj!=t.sobj){t.tobj.UserData[t.nid]=new Hashtable;var e=t.sobj.UserData[t.sid],i=t.tobj.UserData[t.nid];e&&(i.keys=i.keys.concat(e.keys),i.values=i.values.concat(e.values))}},dhtmlXGridObject.prototype.moveRow=function(t,e,i,n){switch(e){case"row_sibling":this.moveRowTo(t,i,"move","sibling",this,n);break;case"up":this.moveRowUp(t);break;case"down":this.moveRowDown(t)}},dhtmlXGridObject.prototype._nonTrivialNode=function(t,e,i,n,s){if(t.callEvent&&!s&&!t.callEvent("onDrag",[n.idd,e.id,i?i.id:null,this,t]))return!1;for(var o=n.idd,l=o;t._idpull[l];)l+=(new Date).getMilliseconds().toString();var r=this.isTreeGrid()?this.getItemImage(o):"";if(i){for(d=0;d<e.childsCount&&e.childNodes[d]!=i;d++);0!=d?i=e.childNodes[d-1]:(st="TOP",i="")}var a=t._attachChildNode(e,l,this.gridToTreeElement(t,l,o),"",r,r,r,"","",i);if(this._h2){var h=this._h2.get[o];if(h.childs.length)for(var d=0;d<h.childs.length;d++)this._nonTrivialNode(t,a,0,this.rowsAr[h.childs[d].id],1),this.dpcpy||d--}this.dpcpy||this.deleteRow(o),t.callEvent&&!s&&t.callEvent("onDrop",[l,e.id,i?i.id:null,this,t])},dhtmlXGridObject.prototype.gridToTreeElement=function(t,e,i){return this.cells(i,0).getValue()},dhtmlXGridObject.prototype.treeToGridElement=function(t,e,i){var n=new Array,s=this.cellType._dhx_find("tree");-1==s&&(s=0);for(var o=0;o<this.getColumnCount();o++)n[n.length]=o!=s?t.getUserData(e,this.getColumnId(o))||"":t.getItemText(e);return n},dhtmlXGridObject.prototype.moveRowTo=function(t,e,i,n,s,o){var l=new dragContext((s||this).isTreeGrid()?"treeGrid":"grid",(o||this).isTreeGrid()?"treeGrid":"grid",i,n||"sibling",t,e,s||this,o||this);return l.tobj._dragRoutine(l),l.close(),l.nid},dhtmlXGridObject.prototype.enableMercyDrag=function(t){this.dpcpy=dhx4.s2b(t)},dhtmlXGridObject.prototype.toPDF=function(t,e,i,n,s,o){var l={row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()};if(null===l.row||-1===l.col)l=!1;else if(l.row){for(var r=0;r<l.row.length;r++)if(l.row[r]){var a=this.cells(l.row[r],l.col).cell;a.parentNode.className=a.parentNode.className.replace(" rowselected",""),a.className=a.className.replace(" cellselected",""),l.row[r]=a}}else l=!1;var h="full_color"==(e=e||"color"),d=this;function c(t,e){return(window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle?t.currentStyle[e]:null)||""}function u(t){if(!d.rowsBuffer[t])return"";var e=d.render_row(t);if("none"==e.style.display)return"";for(var i="<row"+(d.isTreeGrid()?' level="'+d.getLevel(e.idd)+'"':"")+">",n=0;n<d._cCount;n++)if((!d._srClmn||d._srClmn[n])&&(!d._hrrar[n]||d._fake&&n<d._fake.hdrLabels.length)){var s=d.cells(e.idd,n);if(h){var o=c(s.cell,"color"),l=c(s.cell,"backgroundColor"),r=c(s.cell,"font-weight")||c(s.cell,"fontWeight"),a=c(s.cell,"font-style")||c(s.cell,"fontStyle"),u=c(s.cell,"text-align")||c(s.cell,"textAlign"),f=c(s.cell,"font-family")||c(s.cell,"fontFamily");"transparent"!=l&&"rgba(0, 0, 0, 0)"!=l||(l="rgb(255,255,255)"),i+="<cell bgColor='"+l+"' textColor='"+o+"' bold='"+r+"' italic='"+a+"' align='"+u+"' font='"+f+"'>"}else i+="<cell>";i+="<![CDATA["+(s.getContent?s.getContent():s.getTitle())+"]]></cell>"}return i+"</row>"}d._asCDATA=!0,this.target=void 0===o?' target="_blank"':o,eXcell_ch.prototype.getContent=function(){return this.getValue()},eXcell_ra.prototype.getContent=function(){return this.getValue()};var f=document.createElement("div");f.style.display="none",document.body.appendChild(f);var p="form_"+d.uid();if(f.innerHTML='<form id="'+p+'" method="post" action="'+t+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>',document.getElementById(p).firstChild.value=encodeURIComponent(function(t){for(var e=[],s=1;s<d.hdr.rows.length;s++){e[s]=[];for(var o=0;o<d._cCount;o++){var l=d.hdr.rows[s].childNodes[o];e[s][o]||(e[s][o]=[0,0]),l&&(e[s][l._cellIndexS]=[l.colSpan,l.rowSpan])}}var r="<rows profile='"+t+"'";for(i&&(r+=" header='"+i+"'"),n&&(r+=" footer='"+n+"'"),r+="><head>"+d._serialiseExportConfig(e).replace(/^<head/,"<columns").replace(/head>$/,"columns>"),s=2;s<d.hdr.rows.length;s++){var a=0,h=d.hdr.rows[s],c="";for(o=0;o<d._cCount;o++)if(d._srClmn&&!d._srClmn[o]||d._hrrar[o]&&(!d._fake||o>=d._fake.hdrLabels.length))a++;else{var u=e[s][o],f=u[0]&&u[0]>1?' colspan="'+u[0]+'" ':"";u[1]&&u[1]>1&&(f+=' rowspan="'+u[1]+'" ',a=-1);var p="",m=h;d._fake&&o<d._fake._cCount&&(m=d._fake.hdr.rows[s]);for(var g=0;g<m.cells.length;g++)if(m.cells[g]._cellIndexS==o){p=(p=m.cells[g].getElementsByTagName("SELECT").length?"":_isIE?m.cells[g].innerText:m.cells[g].textContent).replace(/[ \n\r\t\xA0]+/," ");break}p&&" "!=p||a++,c+="<column"+f+"><![CDATA["+p+"]]></column>"}a!=d._cCount&&(r+="\n<columns>"+c+"</columns>")}return r+="</head>\n",r+=function(){var t=["<foot>"];if(!d.ftr)return"";for(var e=1;e<d.ftr.rows.length;e++){t.push("<columns>");for(var i=d.ftr.rows[e],n=0;n<d._cCount;n++)if((!d._srClmn||d._srClmn[n])&&(!d._hrrar[n]||d._fake&&!(n>=d._fake.hdrLabels.length))){for(var s=0;s<i.cells.length;s++){var o="",l="";if(i.cells[s]._cellIndexS==n){o=(o=_isIE?i.cells[s].innerText:i.cells[s].textContent).replace(/[ \n\r\t\xA0]+/," "),i.cells[s].colSpan&&1!=i.cells[s].colSpan&&(l=" colspan='"+i.cells[s].colSpan+"' "),i.cells[s].rowSpan&&1!=i.cells[s].rowSpan&&(l=" rowspan='"+i.cells[s].rowSpan+"' ");break}}t.push("<column"+l+"><![CDATA["+o+"]]></column>")}t.push("</columns>")}return t.push("</foot>"),t.join("\n")}()}(e).replace("","-")+function(){var t=[];if(s)for(var e=0;e<s.length;e++)t.push(u(d.getRowIndex(s[e])));else for(e=0;e<d.getRowsNum();e++)t.push(u(e));return t.join("\n")}()+"</rows>"),document.getElementById(p).submit(),f.parentNode.removeChild(f),d=null,l&&l.row.length)for(r=0;r<l.row.length;r++)l.row[r].parentNode.className+=" rowselected",1==l.row.length&&(l.row[r].className+=" cellselected");l=null},dhtmlXGridObject.prototype._serialiseExportConfig=function(t){for(var e,i="<head>",n=0;n<this.hdr.rows[0].cells.length;n++)if((!this._srClmn||this._srClmn[n])&&(!this._hrrar[n]||this._fake&&!(n>=this._fake.hdrLabels.length))){var s=this.fldSort[n];"cus"==s&&(s=(s=this._customSorts[n].toString()).replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));var o=t[1][n];i+="<column "+((o[1]&&o[1]>1?' rowspan="'+o[1]+'" ':"")+(o[0]&&o[0]>1?' colspan="'+o[0]+'" ':""))+" width='"+this.getColWidth(n)+"' align='"+this.cellAlign[n]+"' type='"+this.cellType[n]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(n)?"true":"false")+"' sort='"+(s||"na")+"' color='"+(this.columnColor[n]||"")+"'"+(this.columnIds[n]?" id='"+this.columnIds[n]+"'":"")+">",this._asCDATA?i+="<![CDATA["+this.getColumnLabel(n)+"]]>":i+=this.getColumnLabel(n);var l=this.combos[n]?this.getCombo(n):null;if(l)for(var r=0;r<l.keys.length;r++)i+="<option value='"+("string"!=typeof(e=l.keys[r])?e:e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/'/g,"&apos;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"))+"'><![CDATA["+l.values[r]+"]]></option>";i+="</column>"}return i+"</head>"},window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""}),dhtmlXGridObject.prototype.toExcel=function(t,e,i,n,s){if(!document.getElementById("ifr")){var o=document.createElement("iframe");o.style.display="none",o.setAttribute("name","dhx_export_iframe"),o.setAttribute("src",""),o.setAttribute("id","dhx_export_iframe"),document.body.appendChild(o)}this.toPDF(t,e,i,n,s,' target="dhx_export_iframe"')},dhtmlXGridObject.prototype.filterBy=function(t,e,i){if(this.isTreeGrid())return this.filterTreeBy(t,e,i);if(this._f_rowsBuffer?i||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(this.dma(!0),"object"==typeof t)for(var n=0;n<e.length;n++)this._filterA(t[n],e[n]);else this._filterA(t,e);this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._filterA=function(t,e){if(""!=e){var i=!0;if("function"==typeof e?i=!1:e=(e||"").toString().toLowerCase(),this.rowsBuffer.length)for(var n=this.rowsBuffer.length-1;n>=0;n--)(i?-1!=this._get_cell_value(this.rowsBuffer[n],t).toString().toLowerCase().indexOf(e):e.call(this,this._get_cell_value(this.rowsBuffer[n],t),this.rowsBuffer[n].idd))||this.rowsBuffer.splice(n,1)}},dhtmlXGridObject.prototype.getFilterElement=function(t){if(this.filters){for(var e=0;e<this.filters.length;e++)if(this.filters[e][1]==t)return this.filters[e][0].combo||this.filters[e][0];return null}},dhtmlXGridObject.prototype.collectValues=function(t){var e=this.dhxevs.data.oncollectvalues;if(e){var i=!0;for(var n in e){var s=e[n].call(this,t);!0!==s&&(i=s||i)}if(!0!==i)return i}if(this.isTreeGrid())return this.collectTreeValues(t);this.dma(!0),this._build_m_order(),t=this._m_order?this._m_order[t]:t;for(var o={},l=[],r=this._f_rowsBuffer||this.rowsBuffer,a=0;a<r.length;a++){var h=this._get_cell_value(r[a],t);!h||r[a]._childIndexes&&r[a]._childIndexes[t]==r[a]._childIndexes[t-1]||(o[h]=!0)}this.dma(!1);var d=this.combos[t]||!!this._col_combos&&this._col_combos[t];for(var c in o)!0===o[c]&&(d&&(d.get&&d.get(c)?c=d.get(c):d.getOption&&d.getOption(c)&&(c=d.getOption(c).text)),l.push(c));return l.sort()},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var t=0;t<this._c_order.length;t++)this._m_order[this._c_order[t]]=t}},dhtmlXGridObject.prototype.filterByAll=function(){var t=[],e=[];this._build_m_order();for(var i=0;i<this.filters.length;i++){var n=this._m_order?this._m_order[this.filters[i][1]]:this.filters[i][1];if(!(n>=this._cCount)){e.push(n);var s,o=this.filters[i][0].old_value=this.filters[i][0].value;this.filters[i][0]._filter&&(o=this.filters[i][0]._filter()),"function"!=typeof o&&(s=this.combos[n]||!!this._col_combos&&this._col_combos[n])&&(s.values?o=-1==(n=s.values._dhx_find(o))?o:s.keys[n]:s.getOptionByLabel&&(o=s.getOptionByLabel(o)?s.getOptionByLabel(o).value:o)),t.push(o)}}this.callEvent("onFilterStart",[e,t])&&(this.filterBy(e,t),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length&&(this._f_rowsBuffer=null))},dhtmlXGridObject.prototype.makeFilter=function(t,e,i){if(this.filters||(this.filters=[]),"object"!=typeof t&&(t=document.getElementById(t)),t){var n=this;if(t.style.width||(t.style.width="90%"),"SELECT"==t.tagName)this.filters.push([t,e]),this._loadSelectOptins(t,e),t.onchange=function(){n.filterByAll()},_isIE&&(t.style.marginTop="1px"),this.attachEvent("onEditCell",function(i,n,s){return this._build_m_order(),2==i&&this.filters&&(this._m_order?s==this._m_order[e]:s==e)&&this._loadSelectOptins(t,e),!0});else if("INPUT"==t.tagName)this.filters.push([t,e]),t.old_value=t.value="",t.onkeydown=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){t.value!=t.old_value&&(n.filterByAll(),t.old_value=t.value)},500)};else if("DIV"==t.tagName){this.filters.push([t,e]),t.style.padding="0px",t.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var s=new dhtmlXCombo(t,"_filter","90%");s.filterSelfA=s.filterSelf,s.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(""),this.filterSelfA.apply(this,arguments),this.optionsArr[0].hide(!1)},s.enableFilteringMode(!0),t.combo=s,t.value="",this._loadComboOptins(t,e),s.attachEvent("onChange",function(){t.value=s.getSelectedValue(),null===t.value&&(t.value=""),n.filterByAll()})}t.parentNode&&(t.parentNode.className+=" filter"),this._filters_ready()}},dhtmlXGridObject.prototype.findCell=function(t,e,i,n){!0===(n=n||function(t,e){return-1!=e.toString().toLowerCase().indexOf(t)})&&(n=function(t,e){return e.toString().toLowerCase()==t});var s=new Array;if(t=t.toString().toLowerCase(),"number"!=typeof i&&(i=i?1:0),!this.rowsBuffer.length)return s;for(var o=e||0;o<this._cCount;o++){if(this._h2)this._h2.forEachChild(0,function(e){if(i&&s.length==i)return s;n(t,this._get_cell_value(e.buff,o))&&s.push([e.id,o])},this);else for(var l=0;l<this.rowsBuffer.length;l++)if(n(t,this._get_cell_value(this.rowsBuffer[l],o))&&(s.push([this.rowsBuffer[l].idd,o]),i&&s.length==i))return s;if(void 0!==e)return s}return s},dhtmlXGridObject.prototype.makeSearch=function(t,e,i){if("object"!=typeof t&&(t=document.getElementById(t)),t){var n=this;"INPUT"==t.tagName&&(t.onkeypress=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){if(""!=t.value){var s=n.findCell(t.value,e,!0,i);s.length&&(n._h2&&n.openItem(s[0][0]),n.selectCell(n.getRowIndex(s[0][0]),e||0))}},500)}),t.parentNode&&(t.parentNode.className+=" filter")}},dhtmlXGridObject.prototype._loadSelectOptins=function(t,e){var i=this.collectValues(e),n=t.value;t.innerHTML="",t.options[0]=new Option("","");for(var s=this._filter_tr?this._filter_tr[e]:null,o=0;o<i.length;o++)t.options[t.options.length]=new Option(s?s(i[o]):i[o],i[o]);t.value=n},dhtmlXGridObject.prototype.setSelectFilterLabel=function(t,e){this._filter_tr||(this._filter_tr=[]),this._filter_tr[t]=e},dhtmlXGridObject.prototype._loadComboOptins=function(t,e){if(t.combo){var i=this.collectValues(e);t.combo.clearAll();for(var n=[["",""]],s=0;s<i.length;s++)n.push([i[s],i[s]]);t.combo.addOption(n)}},dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var t=0;t<this.filters.length;t++)switch(this.filters[t][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[t]);break;case"div":this._loadComboOptins.apply(this,this.filters[t])}},dhtmlXGridObject.prototype._filters_ready=function(t,e){this.attachEvent("onXLE",this.refreshFilters),this.attachEvent("onRowCreated",function(t,e){if(this._f_rowsBuffer)for(var i=0;i<this._f_rowsBuffer.length;i++)if(this._f_rowsBuffer[i].idd==t)return this._f_rowsBuffer[i]=e}),this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null,this.hdr.rows.length||(this.filters=[])}),this.attachEvent("onSetSizes",this._filters_resize_combo),this.attachEvent("onResize",this._filters_resize_combo),this._filters_ready=function(){}},dhtmlXGridObject.prototype._filters_resize_combo=function(){if(this.filters){for(var t=0;t<this.filters.length;t++)null!=this.filters[t][0].combo&&this.filters[t][0].combo.setSize(Math.round(90*this.filters[t][0].offsetWidth/100));return!0}},dhtmlXGridObject.prototype._in_header_text_filter=function(t,e){t.innerHTML="<input type='text'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_filter_inc=function(t,e){t.innerHTML="<input type='text'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e),t.firstChild._filter=function(){return""==t.firstChild.value?"":function(e){return 0==e.toString().toLowerCase().indexOf(t.firstChild.value.toLowerCase())}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_select_filter=function(t,e){t.innerHTML="<select></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_select_filter_strict=function(t,e){t.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e);var i=this.combos;t.firstChild._filter=function(){var n=t.firstChild.value;return n?(i[e]&&(n=i[e].keys[i[e].values._dhx_find(n)]),n=n.toLowerCase(),function(t){return t.toString().toLowerCase()==n}):""},this._filters_ready()},dhtmlXGridObject.prototype._in_header_combo_filter=function(t,e){t.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>",t.onselectstart=function(){return event.cancelBubble=!0},t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._search_common=function(t,e){t.innerHTML="<input type='text' style='width:90%; '>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_text_search=function(t,e,i){this._search_common(t,e),this.makeSearch(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_search_strict=function(t,e){this._search_common(t,e),this.makeSearch(t.firstChild,e,!0)},dhtmlXGridObject.prototype._in_header_numeric_filter=function(t,e){this._in_header_text_filter.call(this,t,e),t.firstChild._filter=function(){var t,e=this.value,i="==",n=parseFloat(e.replace("=","")),s=null;return e?-1!=e.indexOf("..")?(e=e.split(".."),n=parseFloat(e[0]),s=parseFloat(e[1]),function(t){return t>=n&&t<=s}):((t=e.match(/>=|<=|>|</))&&(i=t[0],n=parseFloat(e.replace(i,""))),Function("v"," if (v "+i+" "+n+" ) return true; return false;")):""}},dhtmlXGridObject.prototype._in_header_master_checkbox=function(t,e,i){t.innerHTML=i[0]+"<input type='checkbox' />"+i[1];var n=this;t.getElementsByTagName("input")[0].onclick=function(t){n._build_m_order();var i=n._m_order?n._m_order[e]:e,s=this.checked?1:0;n.forEachRowA(function(t){var e=this.cells(t,i);e.isCheckbox()&&(e.setValue(s),e.cell.wasChanged=!0),this.callEvent("onEditCell",[1,t,i,s]),this.callEvent("onCheckbox",[t,i,s])}),(t||event).cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_stat_total=function(t,e,i){this._stat_in_header(t,function(){var t=0;this._build_m_order();for(var i=this._m_order?this._m_order[e]:e,n=0;n<this.rowsBuffer.length;n++){var s=parseFloat(this._get_cell_value(this.rowsBuffer[n],i));t+=isNaN(s)?0:s}return this._maskArr[i]?this._aplNF(t,i):Math.round(100*t)/100},e,i,i)},dhtmlXGridObject.prototype._in_header_stat_multi_total=function(t,e,i){var n=i[1].split(":");i[1]="";for(var s=0;s<n.length;s++)n[s]=parseInt(n[s]);for(var o=[],l=0;l<n.length;l++)o[n[l]]=!0;this._stat_in_header(t,function(){for(var t=0,i=0;i<this.rowsBuffer.length;i++){for(var s=1,o=0;o<n.length;o++)s*=parseFloat(this._get_cell_value(this.rowsBuffer[i],n[o]));t+=isNaN(s)?0:s}return this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},o,i,i)},dhtmlXGridObject.prototype._in_header_stat_max=function(t,e,i){this._stat_in_header(t,function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var n=0;n<this.rowsBuffer.length;n++)i=Math.max(i,parseFloat(this._get_cell_value(this.rowsBuffer[n],t)));return this._maskArr[e]?this._aplNF(i,e):i},e,i)},dhtmlXGridObject.prototype._in_header_stat_min=function(t,e,i){this._stat_in_header(t,function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var n=0;n<this.rowsBuffer.length;n++)i=Math.min(i,parseFloat(this._get_cell_value(this.rowsBuffer[n],t)));return this._maskArr[e]?this._aplNF(i,e):i},e,i)},dhtmlXGridObject.prototype._in_header_stat_average=function(t,e,i){this._stat_in_header(t,function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=0,n=0;if(0==this.getRowsNum())return"&nbsp;";for(var s=0;s<this.rowsBuffer.length;s++){var o=parseFloat(this._get_cell_value(this.rowsBuffer[s],t));isNaN(o)||(i+=o,n++)}return this._maskArr[e]?this._aplNF(i/n,e):Math.round(i/n*100)/100},e,i)},dhtmlXGridObject.prototype._in_header_stat_count=function(t,e,i){this._stat_in_header(t,function(){return this.getRowsNum()},e,i)},dhtmlXGridObject.prototype._stat_in_header=function(t,e,i,n){var s=function(){this.dma(!0),t.innerHTML=(n[0]?n[0]:"")+e.call(this)+(n[1]?n[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var t=0;t<this._stat_events.length;t++)for(var e=0;e<4;e++)this.detachEvent(this._stat_events[t][e]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",s),this.attachEvent("onXLE",s),this.attachEvent("onFilterEnd",s),this.attachEvent("onEditCell",function(t,e,n){return 2==t&&(n==i||i&&i[n])&&s.call(this),!0})]),t.innerHTML=""},dhtmlXGridObject.prototype.loadCSVFile=function(t,e){this.load(t,e,"csv")},dhtmlXGridObject.prototype.enableCSVAutoID=function(t){this._csvAID=dhx4.s2b(t)},dhtmlXGridObject.prototype.enableCSVHeader=function(t){this._csvHdr=dhx4.s2b(t)},dhtmlXGridObject.prototype.setCSVDelimiter=function(t){this.csv.cell=t},dhtmlXGridObject.prototype._csvAID=!0,dhtmlXGridObject.prototype.loadCSVString=function(t){this.parse(t,"csv")},dhtmlXGridObject.prototype.serializeToCSV=function(t){this.editStop(),this._mathSerialization?this._agetm="getMathValue":this._strictText||t?this._agetm="getTitle":this._agetm="getValue";var e=[];if(this._csvHdr)for(var i=1;i<this.hdr.rows.length;i++){for(var n=[],s=0;s<this._cCount;s++)this._srClmn&&!this._srClmn[s]||n.push(this.getColumnLabel(s,i-1));e.push(this.csvParser.str(n,this.csv.cell,this.csv.row))}s=0;for(var o=this.rowsBuffer.length;s<o;s++){var l=this._serializeRowToCVS(null,s);""!=l&&e.push(l)}return this.csvParser.block(e,this.csv.row)},dhtmlXGridObject.prototype._serializeRowToCVS=function(t,e,i,n){var s=new Array;t||(t=this.render_row(e),this._fake&&!this._fake.rowsAr[t.idd]&&this._fake.render_row(e)),this._csvAID||(s[s.length]=t.idd),i=i||0,n=n||this._cCount;for(var o=!1,l=i;t.childNodes[i]._cellIndex>l&&i;)i--;for(var r=i;l<n&&t.childNodes[r];r++){var a=t.childNodes[r]._cellIndex;if(this._srClmn&&!this._srClmn[a]||this._serialize_visible&&this._hrrar[a])l++;else{for(var h=t.childNodes[r],d=this.cells(t.idd,a);l!=a&&(l++,s.push(""),!(l>=n)););if(l>=n)break;if(l++,d.cell?zxVal=d[this._agetm]():zxVal="",this._chAttr&&d.wasChanged()&&(o=!0),s[s.length]=null===zxVal?"":zxVal,this._ecspn&&h.colSpan&&h.colSpan>1){h=h.colSpan-1;for(var c=0;c<h;c++)s[s.length]="",l++}}}return this._onlChAttr&&!o?"":this.csvParser.str(s,this.csv.cell,this.csv.row)},dhtmlXGridObject.prototype.toClipBoard=function(t){window.clipboardData?window.clipboardData.setData("Text",t):(new Clipboard).copy(t)},dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()},dhtmlXGridObject.prototype.cellToClipboard=function(t,e){if(!t||!e&&0!==e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);this.toClipBoard(((i.getLabel?i.getLabel():i.getValue())||"").toString())},dhtmlXGridObject.prototype.updateCellFromClipboard=function(t,e){if(!t||!e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);i[i.setImage?"setLabel":"setValue"](this.fromClipBoard())},dhtmlXGridObject.prototype.rowToClipboard=function(t){var e="";if(this._mathSerialization?this._agetm="getMathValue":this._strictText?this._agetm="getTitle":this._agetm="getValue",this._serialize_visible=!this._fake,t)e=this._serializeRowToCVS(this.getRowById(t));else for(var i=[],n=0;n<this.selectedRows.length;n++)i[i.length]=this._serializeRowToCVS(this.selectedRows[n]),e=this.csvParser.block(i,this.csv.row);this._serialize_visible=!1,this.toClipBoard(e)},dhtmlXGridObject.prototype.updateRowFromClipboard=function(t){var e=this.fromClipBoard();if(e){if(t)var i=this.getRowById(t);else i=this.selectedRows[0];if(i){e=this.csvParser.unblock(e,this.csv.cell,this.csv.row)[0],this._csvAID||e.splice(0,1);for(var n=0;n<e.length;n++){var s=this.cells3(i,n);s[s.setImage?"setLabel":"setValue"](e[n])}}}},dhtmlXGridObject.prototype.csvParser={block:function(t,e){return t.join(e)},unblock:function(t,e,i){for(var n=(t||"").split(i),s=0;s<n.length;s++)n[s]=(n[s]||"").split(e);var o=n.length-1;return 1==n[o].length&&""==n[o][0]&&n.splice(o,1),n},str:function(t,e,i){return t.join(e)}},dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('\\\\"',"g"),block:function(t,e){return t.join(e)},unblock:function(t,e,i){var n=[[]],s=0;if(!t)return n;for(var o=/^[ ]*"/,l=/"[ ]*$/,r=new RegExp(".*"+i+".*$"),a=t.split(e),h=0;h<a.length;h++)if(a[h].match(o)){for(var d=a[h].replace(o,"");!a[h].match(l);)d+=a[++h];n[s].push(d.replace(l,"").replace(this._quote_esc,'"'))}else if(a[h].match(r)){var c=a[h].indexOf(i);n[s].push(a[h].substr(0,c)),n[++s]=[],a[h]=a[h].substr(c+1),h--}else(a[h]||h!=a.length-1)&&n[s].push(a[h]);var u=n.length-1;return u>0&&!n[u].length&&n.splice(u,1),n},str:function(t,e,i){for(var n=0;n<t.length;n++)t[n]='"'+t[n].replace(this._quote,'\\"')+'"';return t.join(e)}},dhtmlXGridObject.prototype.addRowFromClipboard=function(){var t=this.fromClipBoard();if(t)for(var e=this.csvParser.unblock(t,this.csv.cell,this.csv.row),i=0;i<e.length;i++)if(e[i]){if(!(t=e[i]).length)continue;this._csvAID?this.addRow(this.getRowsNum()+2,t):(this.rowsAr[t[0]]&&(t[0]=this.uid()),this.addRow(t[0],t.slice(1)))}},dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())},dhtmlXGridObject.prototype.gridFromClipboard=function(){var t=this.fromClipBoard();t&&this.loadCSVString(t)},dhtmlXGridObject.prototype.getXLS=function(t){if(!this.xslform){this.xslform=document.createElement("FORM"),this.xslform.action=(t||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform);var e=document.createElement("INPUT");e.type="hidden",e.name="csv",this.xslform.appendChild(e);var i=document.createElement("INPUT");i.type="hidden",i.name="csv_header",this.xslform.appendChild(i)}var n=this.serializeToCSV();this.xslform.childNodes[0].value=n;for(var s=[],o=this._cCount,l=0;l<o;l++)s.push(this.getHeaderCol(l));s=s.join(","),this.xslform.childNodes[1].value=s,this.xslform.submit()},dhtmlXGridObject.prototype.printView=function(t,e){var i="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  </style>",n=null;if(this._fake){n=[].concat(this._hrrar);for(var s=0;s<this._fake._cCount;s++)this._hrrar[s]=null}i+="<base  href='"+document.location.protocol+"//"+document.location.hostname+document.location.pathname+"'></base>",this.parentGrid||(i+=t||""),i+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var o=Math.max(this.rowsBuffer.length,this.rowsCol.length),l=this._cCount,r=this._printWidth();i+='<tr class="header_row_1">';for(s=0;s<l;s++)if(!this._hrrar||!this._hrrar[s]){for(var a=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(s)]:s],h=a.colSpan||1,d=a.rowSpan||1,c=1;c<h;c++)r[s]+=r[c];i+='<td rowspan="'+d+'" width="'+r[s]+'%" style="background-color:lightgrey;" colspan="'+h+'">'+this.getHeaderCol(s)+"</td>",s+=h-1}i+="</tr>";for(s=2;s<this.hdr.rows.length;s++)if(_isIE){i+="<tr style='background-color:lightgrey' class='header_row_"+s+"'>";var u=this.hdr.rows[s].childNodes;for(c=0;c<u.length;c++)this._hrrar&&this._hrrar[u[c]._cellIndex]||(i+=u[c].outerHTML);i+="</tr>"}else i+="<tr class='header_row_"+s+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[s].innerHTML:"")+this.hdr.rows[s].innerHTML+"</tr>";for(s=0;s<o;s++)if(i+="<tr>",this.rowsCol[s]&&this.rowsCol[s]._cntr)i+=this.rowsCol[s].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[s]||"none"!=this.rowsCol[s].style.display){var f;if(this.rowsCol[s])f=this.rowsCol[s].idd;else{if(!this.rowsBuffer[s])continue;f=this.rowsBuffer[s].idd}for(c=0;c<l;c++)if(!this._hrrar||!this._hrrar[c]){if(this.rowsAr[f]&&"TR"==this.rowsAr[f].tagName){var p=this.cells(f,c);if(p._setState)var m="";else if(p.getContent)m=p.getContent();else if(p.getImage||p.combo)m=p.cell.innerHTML;else m=p.getValue()}else m=this._get_cell_value(this.rowsBuffer[s],c);var g=this.columnColor[c]?"background-color:"+this.columnColor[c]+";":"",_=this.cellAlign[c]?"text-align:"+this.cellAlign[c]+";":"",v=p.getAttribute("colspan");i+='<td style="'+g+_+'" '+(v?'colSpan="'+v+'"':"")+">"+(""===m?"&nbsp;":m)+"</td>",v&&(c+=v-1)}if(i+="</tr>",this.rowsCol[s]&&this.rowsCol[s]._expanded){var b=this.cells4(this.rowsCol[s]._expanded.ctrl);b.getSubGrid?i+='<tr><td colspan="'+l+'">'+b.getSubGrid().printView()+"</td></tr>":i+='<tr><td colspan="'+l+'">'+this.rowsCol[s]._expanded.innerHTML+"</td></tr>"}}if(this.ftr)for(s=1;s<this.ftr.childNodes[0].rows.length;s++)i+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[s].innerHTML:"")+this.ftr.childNodes[0].rows[s].innerHTML+"</tr>";if(i+="</table>",this.parentGrid)return i;i+=e||"";var y=window.open("","_blank");y.document.write(i),y.document.write("<script>window.onerror=function(){return true;}<\/script>"),y.document.close(),this._fake&&(this._hrrar=n)},dhtmlXGridObject.prototype._printWidth=function(){for(var t=[],e=0,i=0;i<this._cCount;i++){var n=this.getColWidth(i);t.push(n),e+=n}var s=[],o=0;for(i=0;i<t.length;i++){var l=Math.floor(t[i]/e*100);o+=l,s.push(l)}return s[s.length-1]+=100-o,s},dhtmlXGridObject.prototype.enableBlockSelection=function(t){if(void 0===this._bs_mode){var e=this;this.obj.onmousedown=function(t){return e._bs_mode&&e._OnSelectionStart(t||event,this),!0},this._CSVRowDelimiter=this.csv.row,this.attachEvent("onResize",function(){return e._HideSelection(),!0}),this.attachEvent("onGridReconstructed",function(){return e._HideSelection(),!0}),this.attachEvent("onFilterEnd",this._HideSelection)}if(!1===t)return this._bs_mode=!1,this._HideSelection();if(this._bs_mode=!0,!window.dhx4.isIPad){var i=this._clip_area=document.createElement("textarea");i.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",i.onkeydown=function(t){86==(t=t||event).keyCode&&(t.ctrlKey||t.metaKey)&&e.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){!e.editor&&e._clip_area&&e._clip_area.select()})}},dhtmlXGridObject.prototype.forceLabelSelection=function(t){this._strictText=dhx4.s2b(t)},dhtmlXGridObject.prototype._OnSelectionStart=function(t,e){var i=this;if(2!=t.button){var n=t.srcElement||t.target;if(this.editor){if(n.tagName&&("INPUT"==n.tagName||"TEXTAREA"==n.tagName))return;this.editStop()}i.setActive(!0);var s=this.getPosition(this.obj),o=t.clientX-s[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),l=t.clientY-s[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(this._CreateSelection(o-4,l-4),n==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;n&&(!n.tagName||"td"!=n.tagName.toLowerCase());)n=n.parentNode;this._startSelectionCell=n}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null,this.obj[_isIE?"onmouseleave":"onmouseout"]=function(t){i._blsTimer&&window.clearTimeout(i._blsTimer)},this.obj.onmmold=this.obj.onmousemove,this._init_pos=[o,l],this._selectionObj.onmousemove=this.obj.onmousemove=function(e){(e=e||t).preventDefault?e.preventDefault():e.returnValue=!1,i._OnSelectionMove(e)},this._oldDMP=document.body.onmouseup,document.body.onmouseup=function(e){return e=e||t,i._OnSelectionStop(e,this),!0},this.callEvent("onBeforeBlockSelection",[]),document.body.onselectstart=function(){return!1}}},dhtmlXGridObject.prototype._getCellByPos=function(t,e){t=t,this._fake&&(t+=this._fake.objBox.scrollWidth),e=e;for(var i=0,n=0;n<this.obj.rows.length;n++)if((e-=this.obj.rows[n].offsetHeight)<=0){i=this.obj.rows[n];break}if(!i||!i.idd)return null;for(n=0;n<this._cCount;n++)if((t-=this.getColWidth(n))<=0)for(;;){if(!i._childIndexes||i._childIndexes[n+1]!=i._childIndexes[n])return this.cells(i.idd,n).cell;i=i.previousSibling}return null},dhtmlXGridObject.prototype._OnSelectionMove=function(t){var e=this;this._ShowSelection();var i=this.getPosition(this.obj),n=t.clientX-i[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),s=t.clientY-i[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(Math.abs(this._init_pos[0]-n)<5&&Math.abs(this._init_pos[1]-s)<5)return this._HideSelection();var o=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(t.srcElement||t.target,"TD");else if(t.srcElement||t.target)if("dhtmlxGrid_selection"==(t.srcElement||t.target).className)this._endSelectionCell=this._getCellByPos(n,s)||this._endSelectionCell;else{var l=this.getFirstParentOfType(t.srcElement||t.target,"TD");l.parentNode.idd&&(this._endSelectionCell=l)}this._endSelectionCell&&(this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])||(this._endSelectionCell=o));var r=this.objBox.scrollLeft+this.objBox.clientWidth,a=this.objBox.scrollTop+this.objBox.clientHeight,h=this.objBox.scrollLeft,d=this.objBox.scrollTop,c=!1;if(this._blsTimer&&window.clearTimeout(this._blsTimer),n+20>=r?(this.objBox.scrollLeft=this.objBox.scrollLeft+20,c=!0):n-20<h&&(this.objBox.scrollLeft=this.objBox.scrollLeft-20,c=!0),s+20>=a&&!this._realfake?(this.objBox.scrollTop=this.objBox.scrollTop+20,c=!0):s-20<d&&!this._realfake&&(this.objBox.scrollTop=this.objBox.scrollTop-20,c=!0),this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell),c){var u=t.clientX,f=t.clientY;this._blsTimer=window.setTimeout(function(){e._OnSelectionMove({clientX:u,clientY:f})},100)}},dhtmlXGridObject.prototype._OnSelectionStop=function(t){var e=this;if(this._blsTimer&&window.clearTimeout(this._blsTimer),this.obj.onmousedown=function(i){return e._bs_mode&&e._OnSelectionStart(i||t,this),!0},this.obj.onmousemove=this.obj.onmmold||null,this._selectionObj.onmousemove=null,document.body.onmouseup=this._oldDMP||null,parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2)this._HideSelection();else{var i=this.getFirstParentOfType(t.srcElement||t.target,"TD");for(i&&i.parentNode.idd||(i=this._endSelectionCell);i&&(!i.tagName||"td"!=i.tagName.toLowerCase());)i=i.parentNode;if(!i)return this._HideSelection();this._stopSelectionCell=i,this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell),this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}},dhtmlXGridObject.prototype._RedrawSelectionPos=function(t,e){if(t.parentNode.grid!=e.parentNode.grid)return this._selectionArea;var i={};i.LeftTopCol=t._cellIndex,i.LeftTopRow=this.getRowIndex(t.parentNode.idd),i.RightBottomCol=e._cellIndex,i.RightBottomRow=this.getRowIndex(e.parentNode.idd);var n=t.offsetWidth,s=t.offsetHeight;t=this.getPosition(t,this.obj);var o=e.offsetWidth,l=e.offsetHeight;if(e=this.getPosition(e,this.obj),t[0]<e[0])var r=t[0],a=e[0]+o;else{var h=i.RightBottomCol;i.RightBottomCol=i.LeftTopCol,i.LeftTopCol=h;r=e[0],a=t[0]+n}if(t[1]<e[1])var d=t[1],c=e[1]+l;else{h=i.RightBottomRow;i.RightBottomRow=i.LeftTopRow,i.LeftTopRow=h;d=e[1],c=t[1]+s}var u=a-r,f=c-d;return this._selectionObj.style.left=r+"px",this._selectionObj.style.top=d+"px",this._selectionObj.style.width=u+"px",this._selectionObj.style.height=f+"px",i},dhtmlXGridObject.prototype._CreateSelection=function(t,e){if(null==this._selectionObj){var i=document.createElement("div");i.style.position="absolute",i.style.display="none",i.className="dhtmlxGrid_selection",this._selectionObj=i,this._selectionObj.onmousedown=function(t){if(2==(t=t||event).button||_isMacOS&&t.ctrlKey)return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",t])},this._selectionObj.oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1},this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px",this._selectionObj.style.height="0px",this._selectionObj.style.left=t+"px",this._selectionObj.style.top=e+"px",this._selectionObj.startX=t,this._selectionObj.startY=e},dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")},dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none"),this._selectionArea=null,this._clip_area&&(this._clip_area.value="",this._clip_area.blur())},dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(this._clip_area&&null!=this._selectionArea){var t=new Array;this._mathSerialization?this._agetm="getMathValue":this._strictText?this._agetm="getTitle":this._agetm="getValue",this._serialize_visible=!0;for(var e=this._selectionArea.LeftTopRow;e<=this._selectionArea.RightBottomRow;e++){var i=this._serializeRowToCVS(this.rowsBuffer[e],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);this._csvAID?t[t.length]=i:t[t.length]=i.substr(i.indexOf(this.csv.cell)+1)}t=t.join(this._CSVRowDelimiter),this._clip_area.value=t,this._clip_area.select(),this._serialize_visible=!1}},dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(this._clip_area){this._clip_area.select();var t=this;window.setTimeout(function(){t._pasteBlockFromClipboard(),t=null},1)}},dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var t=this._clip_area.value;if(t){if(null!=this._selectionArea)var e=this._selectionArea.LeftTopRow,i=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;e=this.getRowIndex(this.cell.parentNode.idd),i=this.cell._cellIndex}var n=e+(t=this.csvParser.unblock(t,this.csv.cell,this.csv.row)).length,s=i+t[0].length;s>this._cCount&&(s=this._cCount);for(var o=0,l=e;l<n;l++){var r=this.render_row(l);if(-1!=r){for(var a=0,h=i;h<s;h++)if(!this._hrrar[h]||this._fake){var d=this.cells3(r,h);if(d.isDisabled())a++;else{if(this._onEditUndoRedo&&this._onEditUndoRedo(2,r.idd,h,t[o][a],d.getValue()),d.combo){for(var c=d.combo.values,u=0;u<c.length;u++)if(t[o][a]==c[u]){d.setValue(d.combo.keys[u]),c=null;break}null!=c&&d.editable?d.setValue(t[o][a++]):a++}else d[d.setImage?"setLabel":"setValue"](t[o][a++]);d.cell.wasChanged=!0}}else s=Math.min(s+1,this._cCount);this.callEvent("onRowPaste",[r.idd]),o++}}}},dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null},dhtmlXGridObject.prototype.enableSmartRendering=function(t,e,i){arguments.length>2&&(e&&!this.rowsBuffer[e-1]&&(this.rowsBuffer[e-1]=0),e=i),this._srnd=dhx4.s2b(t),this._srdh=this._srdh||20,this._dpref=e||0},dhtmlXGridObject.prototype.enablePreRendering=function(t){this._srnd_pr=parseInt(t||50)},dhtmlXGridObject.prototype.forceFullLoading=function(t,e){for(var i=0;i<this.rowsBuffer.length;i++)if(!this.rowsBuffer[i]){var n=t||this.rowsBuffer.length-i;if(this.callEvent("onDynXLS",[i,n])){var s=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+i+"&count="+n,function(){window.setTimeout(function(){s.forceFullLoading(t,e)},100)},this._data_type)}return}e&&e.call(this)},dhtmlXGridObject.prototype.setAwaitedRowHeight=function(t){this._srdh=parseInt(t)},dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2},dhtmlXGridObject.prototype._add_filler=function(t,e,i,n){if(!e)return null;var s=this._prepareRow("__filler__");s.firstChild.style.width="1px",s.firstChild.style.borderWidth=s.firstChild.style.padding=s.firstChild.style.margin="0px";for(var o=1;o<s.childNodes.length;o++)s.childNodes[o].style.display="none";return s.firstChild.style.height=e*this._srdh+"px",(i=i||this.rowsCol[t])&&i.nextSibling?i.parentNode.insertBefore(s,i.nextSibling):_isKHTML?this.obj.appendChild(s):this.obj.rows[0].parentNode.appendChild(s),this.callEvent("onAddFiller",[t,e,s,i,n]),[t,e,s]},dhtmlXGridObject.prototype._update_srnd_view=function(){var t=Math.floor(this.objBox.scrollTop/this._srdh),e=t+this._get_view_size();if(this.multiLine){var i=this.objBox.scrollTop;for(t=0;i>0;)i-=this.rowsCol[t]?this.rowsCol[t].offsetHeight:this._srdh,t++;e=t+this._get_view_size(),t>0&&t--}(e+=this._srnd_pr||0)>this.rowsBuffer.length&&(e=this.rowsBuffer.length);for(var n=t;n<e;n++)if(!this.rowsCol[n]){if(-1==this._add_from_buffer(n)){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[e-1]){this._dpref&&this._dpref;var s=Math.max(0,Math.min(n,e-this._dpref));this._current_load=[s,e-s]}else this._current_load=[n,this._dpref?this._dpref:e-n];this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n]),this._updateParentLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n])),n&&n==(this._realfake?this._fake:this)._r_select&&this.selectCell(n,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)},dhtmlXGridObject.prototype._add_from_buffer=function(t){var e=this.render_row(t);if(-1==e)return-1;if((e._attrs.selected||e._attrs.select)&&(this.selectRow(e,!1,!0),e._attrs.selected=e._attrs.select=null),this._cssSP){if(this._h2){var i=this._h2.get[e.idd];e.className+=" "+(i.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+i.level+(this.rowsAr[i.id]._css||"")}}else this._cssEven&&t%2==0?e.className=this._cssEven+(-1!=e.className.indexOf("rowselected")?" rowselected ":" ")+(e._css||""):this._cssUnEven&&t%2==1&&(e.className=this._cssUnEven+(-1!=e.className.indexOf("rowselected")?" rowselected ":" ")+(e._css||""));for(var n=0;n<this._fillers.length;n++){var s=this._fillers[n];if(s&&s[0]<=t&&s[0]+s[1]>t){var o=t-s[0];return void(0==o?(this._insert_before(t,e,s[2]),this._update_fillers(n,-1,1)):o==s[1]-1?(this._insert_after(t,e,s[2]),this._update_fillers(n,-1,0)):(this._fillers.push(this._add_filler(t+1,s[1]-o-1,s[2],1)),this._insert_after(t,e,s[2]),this._update_fillers(n,-s[1]+o,0)))}}},dhtmlXGridObject.prototype._update_fillers=function(t,e,i){var n=this._fillers[t];n[1]=n[1]+e,n[0]=n[0]+i,n[1]?(n[2].firstChild.style.height=parseFloat(n[2].firstChild.style.height)+e*this._srdh+"px",this.callEvent("onUpdateFiller",[n[2]])):(this.callEvent("onRemoveFiller",[n[2]]),n[2].parentNode.removeChild(n[2]),this._fillers.splice(t,1))},dhtmlXGridObject.prototype._insert_before=function(t,e,i){i.parentNode.insertBefore(e,i),this.rowsCol[t]=e,this.callEvent("onRowInserted",[e,null,i,"before"])},dhtmlXGridObject.prototype._insert_after=function(t,e,i){i.nextSibling?i.parentNode.insertBefore(e,i.nextSibling):i.parentNode.appendChild(e),this.rowsCol[t]=e,this.callEvent("onRowInserted",[e,null,i,"after"])},void 0!==window.dhtmlxValidation&&(dhtmlxValidation.trackInput=function(t,e,i,n){dhtmlxEvent(t,"keyup",function(s){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null),dhtmlxValidation._timer=window.setTimeout(function(){dhtmlxValidation.checkInput(t,e)?(t.className=t.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),n&&n(t,t.value,e)):i&&!i(t,t.value,e)||(t.className+=" dhtmlx_live_validation_error")},250)})},dhtmlxValidation.checkInput=function(t,e){return dhtmlxValidation.checkValue(t.value,e)},dhtmlxValidation.checkValue=function(t,e){"string"==typeof e&&(e=e.split(","));for(var i=!0,n=0;n<e.length;n++)this["is"+e[n]]?i=i&&this["is"+e[n]](t):alert("Incorrect validation rule: "+e[n]);return i}),dhtmlXGridObject.prototype.enableValidation=function(t,e){t=dhx4.s2b(t),this._validators=!!t&&{data:[]},arguments.length>1&&(this._validators._live=e),this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))},dhtmlXGridObject.prototype.setColValidators=function(t){this._validators||this.enableValidation(!0),"string"==typeof t&&(t=t.split(this.delim)),this._validators.data=t},dhtmlXGridObject.prototype.validationEvent=function(t,e,i,n,s){var o=this._validators;if(!o)return!0;var l=o.data[i]||this.cells(e,i).getAttribute("validate")||"";if(1==t&&l){var r=this.editor||(this._fake||{}).editor;if(!r)return!0;if(r.cell.className=r.cell.className.replace(/[ ]*dhtmlx_validation_error/g,""),o._live){var a=this;dhtmlxValidation.trackInput(r.getInput(),l,function(t,n,s){return a.callEvent("onLiveValidationError",[e,i,n,t,s])},function(t,n,s){return a.callEvent("onLiveValidationCorrect",[e,i,n,t,s])})}}return 2==t&&this.validateCell(e,i,l,n),!0},dhtmlXGridObject.prototype.validateCell=function(t,e,i,n){if(i=i||this._validators.data[e]||this.cells(t,e).getAttribute("validate"),n=n||this.cells(t,e).getValue(),i){var s=this.cells(t,e).cell,o=!0;"string"==typeof i&&(i=i.split(this.delim));for(var l=0;l<i.length;l++)dhtmlxValidation.checkValue(n,i[l])||(this.callEvent("onValidationError",[t,e,n,i[l]])&&(s.className+=" dhtmlx_validation_error"),o=!1);return o&&(this.callEvent("onValidationCorrect",[t,e,n,i]),s.className=s.className.replace(/[ ]*dhtmlx_validation_error/g,"")),o}},eXcell_stree.prototype=new eXcell,dhtmlXGridObject.prototype.setSubTree=function(t,e){this._sub_trees||(this._sub_trees=[]),this._sub_trees[e]=[t],t.parentObject.style.display="none";var i=this;t.parentObject.onclick=function(t){return(t||window.event).cancelBubble=!0,!1},t.ev_onDblClick=null,t.attachEvent("onDblClick",function(t){return i._sub_id=t,i.editStop(),!0}),t._chRRS=!0},eXcell_link.prototype=new eXcell,eXcell_link.prototype.getTitle=function(){var t=this.cell.firstChild;return t&&t.tagName?t.getAttribute("href"):""},eXcell_link.prototype.getContent=function(){var t=this.cell.firstChild;return t&&t.tagName?t.innerHTML:""},eXcell_grid.prototype=new eXcell,dhtmlXGridObject.prototype.setSubGrid=function(t,e,i){this._sub_grids||(this._sub_grids=[]),this._sub_grids[e]=[t,i],t.entBox.style.display="none";var n=this;t.entBox.onclick=function(t){return(t||window.event).cancelBubble=!0,!1},t.attachEvent("onRowSelect",function(t){return n.editStop(),!0}),t._chRRS=!1},eXcell_dhxCalendar.prototype=new eXcell,eXcell_dhxCalendar.prototype.edit=function(){var t=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(t[0],t[1]+this.cell.offsetHeight),this.grid._grid_calendarA._last_operation_calendar=!1,this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val||new Date),this.grid._grid_calendarA.draw=e},eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){var t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),e=this.grid._grid_calendarA.getDate();this.cell.val=new Date(e),this.setCValue(t,e),this.cell._clearCell=!t;var i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()}return!1}},eXcell_dhxCalendar.prototype.setValue=function(t){if(t&&"object"==typeof t)return this.cell.val=t,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",t).toString(),this.cell.val);t&&""!=t.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",t.toString(),null,!0)),this.grid._dtmask_inc&&(t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(t="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((t||"").toString(),this.cell.val)},eXcell_dhxCalendarA.prototype=new eXcell,eXcell_dhxCalendarA.prototype.edit=function(){var t=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(1*t[0]+this.cell.offsetWidth,1*t[1]),this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid._grid_calendarA._last_operation_calendar=!1,this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val),this.grid._grid_calendarA.draw=e,this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.obj=document.createElement(this.cell.atag),this.obj.style.height=this.cell.offsetHeight-4+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.align,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.getValue(),this.cell.innerHTML="",this.cell.appendChild(this.obj),window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll")),this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},this.obj.focus(),this.obj.focus()},eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),e=this.grid._grid_calendarA.getDate();this.cell.val=new Date(e),this.setCValue(t,e),this.cell._clearCell=!t;var i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()}this.setValue(this.obj.value);i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()}},eXcell_dhxCalendarA.prototype.setValue=function(t){if(t&&"object"==typeof t)return this.cell.val=t,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",t).toString(),this.cell.val);t&&""!=t.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",t.toString(),null,!0)),this.grid._dtmask_inc&&(t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(t="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((t||"").toString(),this.cell.val)},dhtmlXGridObject.prototype.resetCounter=function(t){this._fake&&!this._realfake&&t<this._fake._cCount&&this._fake.resetCounter(t,this.currentPage);var e=arguments[0]||0;for(this.currentPage&&(e=(this.currentPage-1)*this.rowsBufferOutSize),e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&"TR"==this.rowsBuffer[e].tagName&&this.rowsAr[this.rowsBuffer[e].idd]&&(this.rowsAr[this.rowsBuffer[e].idd].childNodes[t].innerHTML=e+1)},eXcell_cntr.prototype=new eXcell,eXcell_acheck.prototype=new eXcell,eXcell_acheck.prototype.setValue=function(t){-1!=(t=(t||"").toString()).indexOf("1")||-1!=t.indexOf("true")?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.setCValue(this.drawCurrentState(),this.cell.chstate)},eXcell_context.prototype=new eXcell,dhtmlXGridObject.prototype.setSubContext=function(t,e,i){var n=this;t.attachEvent("onClick",function(e,i){return n._sub_id=e,n.editStop(),t.hideContextMenu(),!0}),this._sub_context||(this._sub_context=[]),this._sub_context[e]=[t,i],t.hideContextMenu()},dhtmlXGridObject.prototype._process_html=function(t){if(t.tagName&&"TABLE"==t.tagName)return this._process_inner_html(t,0);var e=document.createElement("DIV");e.innerHTML=t.xmlDoc.responseText;var i=e.getElementsByTagName("TABLE")[0];this._process_inner_html(i,0)},dhtmlXGridObject.prototype._process_inner_html=function(t,e){for(var i=t.rows.length,n=e;n<i;n++){var s=t.rows[n].getAttribute("id")||n;this.rowsBuffer.push({idd:s,data:t.rows[n],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset(),this.setSizes()},dhtmlXGridObject.prototype._process_html_row=function(t,e){var i=e.getElementsByTagName("TD"),n=[];t._attrs=this._xml_attrs(e);for(var s=0;s<i.length;s++){var o=i[s],l=o.getAttribute("type");if(t.childNodes[s]&&(l&&(t.childNodes[s]._cellType=l),t.childNodes[s]._attrs=this._xml_attrs(i[s])),o.firstChild?n.push(o.innerHTML):n.push(""),o.colSpan>1){t.childNodes[s]._attrs.colspan=o.colSpan;for(var r=1;r<o.colSpan;r++)n.push("")}}for(i.length;s<t.childNodes.length;s++)t.childNodes[s]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(n):n),t},dhtmlXGridObject.prototype._get_html_data=function(t,e){for(t=t.firstChild;;){if(!t)return"";if("TD"==t.tagName&&e--,e<0)break;t=t.nextSibling}return t.firstChild?t.firstChild.data:""},dhtmlxEvent(window,"load",function(){for(var t=document.getElementsByTagName("table"),e=0;e<t.length;e++)"dhtmlxGrid"==t[e].className&&dhtmlXGridFromTable(t[e])}),dhtmlXGridObject.prototype._process_xmlA=function(t){this._parsing=!0;var e=dhx4.ajax.xmltop(this.xml.top,t);this._parseHead(e);var i=dhx4.ajax.xpath(this.xml.row,e),n=parseInt(e.getAttribute("pos")||0),s=parseInt(e.getAttribute("total_count")||0);if(s&&!this.rowsBuffer[s-1]&&(this.rowsBuffer[s-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataA,this._process_xml_row=this._process_xml_rowA,this._process_tree_xml(t);for(var o=0;o<i.length;o++)if(!this.rowsBuffer[o+n]){var l=i[o].getAttribute("id")||this.uid();this.rowsBuffer[o+n]={idd:l,data:i[o],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA},this.rowsAr[l]=i[o]}this.render_dataset(),this._parsing=!1},dhtmlXGridObject.prototype._process_xmlB=function(t){this._parsing=!0;var e=dhx4.ajax.xmltop(this.xml.top,t);this._parseHead(e);var i=dhx4.ajax.xpath(this.xml.row,e),n=parseInt(e.getAttribute("pos")||0),s=parseInt(e.getAttribute("total_count")||0);if(s&&!this.rowsBuffer[s-1]&&(this.rowsBuffer[s-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataB,this._process_xml_row=this._process_xml_rowB,this._process_tree_xml(t);for(var o=0;o<i.length;o++)if(!this.rowsBuffer[o+n]){var l=i[o].getAttribute("id")||this.uid();this.rowsBuffer[o+n]={idd:l,data:i[o],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB},this.rowsAr[l]=i[o]}this.render_dataset(),this._parsing=!1},dhtmlXGridObject.prototype._process_xml_rowA=function(t,e){var i=[];t._attrs=this._xml_attrs(e);for(var n=0;n<this.columnIds.length;n++){var s=this.columnIds[n],o=t._attrs[s]||"";t.childNodes[n]&&(t.childNodes[n]._attrs={}),i.push(o)}return this._fillRow(t,this._c_order?this._swapColumns(i):i),t},dhtmlXGridObject.prototype._get_xml_dataA=function(t,e){return t.getAttribute(this.getColumnId(e))},dhtmlXGridObject.prototype._process_xml_rowB=function(t,e){var i=[];if(t._attrs=this._xml_attrs(e),this._ud_enabled)for(var n=dhx4.ajax.xpath("./userdata",e),s=n.length-1;s>=0;s--)this.setUserData(n[s].getAttribute("name"),n[s].firstChild?n[s].firstChild.data:"");for(var o=0;o<e.childNodes.length;o++){var l=e.childNodes[o];if(l.tagName){var r=this.getColIndexById(l.tagName);if(!isNaN(r)){var a=l.getAttribute("type");a&&(t.childNodes[r]._cellType=a),t.childNodes[r]._attrs=this._xml_attrs(l),l.getAttribute("xmlcontent")||(l=l.firstChild?l.firstChild.data:""),i[r]=l}}}for(s=0;s<t.childNodes.length;s++)t.childNodes[s]._attrs||(t.childNodes[s]._attrs={});return this._fillRow(t,i),t},dhtmlXGridObject.prototype._get_xml_dataB=function(t,e){var i=this.getColumnId(e);for(t=t.firstChild;;){if(!t)return"";if(t.tagName==i)return t.firstChild?t.firstChild.data:"";t=t.nextSibling}return""},dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=["setSizes","callEvent","_fixAlterCss","cells4","forEachRow","_correctMonolite"],this._disA=[];for(var t=this._disF.length-1;t>=0;t--)this._disA[t]=this[this._disF[t]],this[this._disF[t]]=function(){return!0};this._cellCache=[],this.cells4=function(t){var e=this._cellCache[t._cellIndex];return e||((e=this._cellCache[t._cellIndex]=this._disA[3].apply(this,[t])).destructor=function(){return!0},e.setCValue=function(t){e.cell.innerHTML=t}),e.cell=t,e.combo=t._combo||this.combos[t._cellIndex],e}},dhtmlXGridObject.prototype.stopFastOperations=function(){if(this._disF){for(var t=this._disF.length-1;t>=0;t--)this[this._disF[t]]=this._disA[t];this._correctMonolite&&this._correctMonolite(),this.setSizes(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._in_header_number_filter=function(t,e){this._in_header_text_filter.call(this,t,e);var i=this;t.firstChild._filter=function(){var t=i._get_filters(this.value,"num");return function(e){for(var i=!(t.length>0),n=0;n<t.length;n++)i=i||t[n](e);return i}}},dhtmlXGridObject.prototype._in_header_string_filter=function(t,e){this._in_header_text_filter.call(this,t,e);var i=this;t.firstChild._filter=function(){var t=i._get_filters(this.value,"str");return function(e){for(var i=!(t.length>0),n=0;n<t.length;n++)i=i||t[n](e);return i}}},dhtmlXGridObject.prototype._get_filters=function(t,e){for(var i=t.split(","),n=[],s=0;s<i.length;s++)if(""!=i[s]){var o=this["_get_"+e+"_filter"](i[s]);n.push(o)}return n},dhtmlXGridObject.prototype._get_str_filter=function(t){if("null"==t||"empty"==t)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==t||"!empty"==t)return new Function("value",'if (value == null || value == "") return false; return true;');if("!"===t.substr(0,1)){var e=t.substr(1);return new Function("value",'if (value !== "'+e+'") return true; return false;')}if("~"===t.substr(0,1)){e=t.substr(1);return new Function("value",'if (value.indexOf("'+e+'") !== -1) return true; return false;')}if("^"===t.substr(0,1)&&"&"===t.substr(t.length-1,1)&&(t="="+t.substr(1,t.length-2)),"^"===t.substr(0,1)){e=t.substr(1);return new Function("value","if (value.substr(0, "+e.length+') === "'+e+'") return true; return false;')}if("&"===t.substr(t.length-1,1)){e=t.substr(0,t.length-1);return new Function("value","if (value.substr(value.length - "+e.length+') === "'+e+'") return true; return false;')}if("="===t.substr(0,1))e=t.substr(1);else e=t;return new Function("value",'if (value === "'+e+'") return true; return false;')},dhtmlXGridObject.prototype._get_num_filter=function(t){if("null"==t||"empty"==t)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==t||"!empty"==t)return new Function("value",'if (value == null || value == "") return false; return true;');var e=t.split("..");if(2==e.length){var i=parseFloat(e[0]),n=parseFloat(e[1]);return new Function("value","if (value >= "+i+" && value <= "+n+") return true; return false;")}var s=t.match(/<>|>=|<=|>|<|=/);if(s)var o=s[0],l=parseFloat(t.replace(o,""));else{o="==";l=parseFloat(t)}return"<>"==o&&(o="!="),"="==o&&(o="=="),new Function("value"," if (value "+o+" "+l+" ) return true; return false;")},dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader,dhtmlXGridObject.prototype.attachHeader=function(){if(this.attachHeaderA.apply(this,arguments),this._realfake)return!0;this.formAutoSubmit(),void 0===this.FormSubmitOnlyChanged&&this.submitOnlyChanged(!0),void 0===this._submitAR&&this.submitAddedRows(!0);var t=this;this._added_rows=[],this._deleted_rows=[],this.attachEvent("onRowAdded",function(e){return t._added_rows.push(e),t.forEachCell(e,function(t){t.cell.wasChanged=!0}),!0}),this.attachEvent("onBeforeRowDeleted",function(e){return t._deleted_rows.push(e),!0}),this.attachHeader=this.attachHeaderA},dhtmlXGridObject.prototype.formAutoSubmit=function(){if(this.parentForm=this.detectParentFormPresent(),!1===this.parentForm)return!1;if(!this.formEventAttached){this.formInputs=new Array;var t=this;dhtmlxEvent(this.parentForm,"submit",function(){t.entBox&&t.parentFormOnSubmit()}),this.formEventAttached=!0}},dhtmlXGridObject.prototype.parentFormOnSubmit=function(){if(this.formCreateInputCollection(),!this.callEvent("onBeforeFormSubmit",[]))return!1},dhtmlXGridObject.prototype.submitOnlyChanged=function(t){this.FormSubmitOnlyChanged=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitColumns=function(t){"string"==typeof t&&(t=t.split(this.delim)),this._submit_cols=t},dhtmlXGridObject.prototype.setFieldName=function(t){t=(t=(t=(t=(t=t.replace(/\{GRID_ID\}/g,"'+a1+'")).replace(/\{ROW_ID\}/g,"'+a2+'")).replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'")).replace(/\{COLUMN_INDEX\}/g,"'+a3+'")).replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'"),this._input_mask=Function("a1","a2","a3","return '"+t+"';")},dhtmlXGridObject.prototype.submitSerialization=function(t){this.FormSubmitSerialization=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitAddedRows=function(t){this._submitAR=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitOnlySelected=function(t){this.FormSubmitOnlySelected=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitOnlyRowID=function(t){this.FormSubmitOnlyRowID=dhx4.s2b(t)},dhtmlXGridObject.prototype.createFormInput=function(t,e){var i=document.createElement("input");i.type="hidden",this._input_mask&&"string"!=typeof t?i.name=this._input_mask.apply(this,t):i.name=((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+t,i.value=e,this.parentForm.appendChild(i),this.formInputs.push(i)},dhtmlXGridObject.prototype.createFormInputRow=function(t){for(var e=(this.globalBox||this.entBox).id,i=0;i<this._cCount;i++){var n=this.cells3(t,i);this.FormSubmitOnlyChanged&&!n.wasChanged()||this._submit_cols&&!this._submit_cols[i]||this.createFormInput(this._input_mask?[e,t.idd,i]:t.idd+"_"+i,n.getValue())}},dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(0==this.parentForm)return!1;for(var t=0;t<this.formInputs.length;t++)this.parentForm.removeChild(this.formInputs[t]);if(this.formInputs=new Array,this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(t=0;t<this.selectedRows.length;t++)this.createFormInputRow(this.selectedRows[t]);else this._submitAR&&(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(t){-1!==this.getRowById(t)&&this.createFormInputRow(this.rowsAr[t])})},dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var t=!1,e=this.entBox;e&&e.tagName&&e!=document.body;){if("form"==e.tagName.toLowerCase()){t=e;break}e=e.parentNode}return t},dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(t){this.rowsAr[t].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))},dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups,this._fake._gIndex=this._gIndex,this.rowsBuffer=dhtmlxArray();for(var t=0;t<this.rowsCol.length;t++)this.rowsCol[t]._cntr||this.rowsBuffer.push(this.rowsCol[t]);this._fake.rowsBuffer=dhtmlxArray();for(t=0;t<this._fake.rowsCol.length;t++)this._fake.rowsCol[t]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[t])},dhtmlXGridObject.prototype.groupBy=function(t,e){if(this._groups&&this.unGroup(),this._dndProblematic=!0,this._groups={},!e){e=["#title"];for(var i=1;i<this._cCount;i++)e.push("#cspan")}this._gmask=document.createElement("TR"),this._gmask.origin=e;var n,s=0;for(i=0;i<e.length;i++)"#cspan"==e[i]?n.colSpan=(parseInt(n.colSpan)||1)+1:((n=document.createElement("TD"))._cellIndex=i,this._hrrar[i]&&(n.style.display="none"),n.className="group_row",n.innerHTML="&nbsp;","#title"==e[i]?this._gmask._title=s:n.align=this.cellAlign[i]||"left",this._gmask.appendChild(n),0==e[i].indexOf("#stat")&&(this._gmask._math=!0,n._counter=[this["_g_"+e[i].replace("#","")],i,s]),s++);for(var o in this._groups)this._groups[o]=this.undefined;if(this._gIndex=t,this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex),this._nextRow=function(t,e){var i=this.rowsCol[t+e];return i&&("none"==i.style.display||i._cntr)?this._nextRow(t+e,e):i},this.__sortRowsBG||(this._key_events=dhtmlx.extend({},this._key_events),this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{var t=this.row.rowIndex;if(!t)return;var e=this._nextRow(t-1,-1);e&&this.selectCell(e,this.cell._cellIndex,!0)}},this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{var t=this.row.rowIndex;if(!t)return;var e=this._nextRow(t-1,1);e&&this.selectCell(e,this.cell._cellIndex,!0)}},this.attachEvent("onFilterStart",function(){return this._groups&&(this._groups=this.undefined),!0}),this.attachEvent("onFilterEnd",function(){void 0!==this._gIndex&&this.groupBy(this._gIndex,this._gmask.origin)}),this.sortRows_bg=this.sortRows,this.sortRows=function(t,e,i){if(void 0===this._groups)return this.sortRows_bg.apply(this,arguments);if(e=e||"str",i=i||"asc",this.callEvent("onBeforeSorting",[t,e,i])){if(void 0===this._groups)return!0;t==this._gIndex?this._sortByGroup(t,e,i):this._sortInGroup(t,e,i),this.setSortImgState(!0,t,i),this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.setSortImgState(!0,t,i),this.callEvent("onAfterSorting",[t,e,i])}return!1},this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(t){if(!this._groups)return!0;if(!this.rowsAr[t])return!0;var e=this.cells(t,this._gIndex).getValue();""===e&&(e=" ");var i=this._groups[e];return this._dec_group(i),!0}),this.attachEvent("onAfterRowDeleted",function(t){this.updateGroups()}),this.attachEvent("onCheckbox",function(t,e,i){this.callEvent("onEditCell",[2,t,e,i?1:0,i?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(t,e,i,n,s){if(!this._groups)return!0;if(2==t&&n!=s&&i==this._gIndex){""===s&&(s=" "),this._dec_group(this._groups[s]);var o=this.rowsAr[e],l=this.rowsCol._dhx_find(o),r=this._inc_group(n),a=this.rowsCol[r];o==a&&(a=a.nextSibling);var h=o.parentNode;o.rowIndex;h.removeChild(o),a?h.insertBefore(o,a):h.appendChild(o),this.rowsCol._dhx_insertAt(r,o),r<l&&l++,this.rowsCol._dhx_removeAt(l,o),this._fixAlterCss()}else 2==t&&n!=s&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(e,this._gIndex).getValue()||" "]));return!0}),this.__sortRowsBG=!0),this._groupExisting(),this._hrrar)for(i=0;i<this._hrrar.length;i++)this._hrrar[i]&&this.hideGroupColumn(i,!0);this.callEvent("onGroup",[]),(this._ahgr||this._awdth)&&this.setSizes()},dhtmlXGridObject.prototype._sortInGroup=function(t,e,i){var n=this._groups_get();n.reverse();for(var s=0;s<n.length;s++){for(var o=n[s]._cntr._childs,l={},r=0;r<o.length;r++){var a=this.cells3(o[r],t);l[o[r].idd]=a.getDate?a.getDate():a.getValue()}this._sortCore(t,e,i,l,o)}this._groups_put(n),this.setSizes(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortByGroup=function(t,e,i){for(var n=this._groups_get(),s=[],o=0;o<n.length;o++)n[o].idd="_sort_"+o,s["_sort_"+o]=n[o]._cntr.text;this._sortCore(t,e,i,s,n),this._groups_put(n),this.callEvent("onGridReconstructed",[]),this.setSizes()},dhtmlXGridObject.prototype._inc_group=function(t,e,i){""===t&&(t=" "),this._groups[t]||(this._groups[t]={text:t,row:this._addPseudoRow(),count:0,state:e?"plus":"minus"});var n=this._groups[t];n.row._cntr=n;var s=this.rowsCol._dhx_find(n.row)+n.count+1;return n.count++,i||(this._updateGroupView(n),this.updateGroups()),s},dhtmlXGridObject.prototype._dec_group=function(t){if(t)return t.count--,0==t.count?(t.row.parentNode.removeChild(t.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(t.row)),delete this._groups[t.text]):this._updateGroupView(t),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[t.text]),this.updateGroups(),!0},dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt,dhtmlXGridObject.prototype._insertRowAt=function(t,e,i){if(void 0!==this._groups){if(this._realfake)var n=this._fake._bfs_cells(t.idd,this._gIndex).getValue();else if(this._bfs_cells3)n=this._bfs_cells3(t,this._gIndex).getValue();else n=this.cells3(t,this._gIndex).getValue();n||(n=" "),e=this._inc_group(n,"none"==t.style.display)}var s=this._insertRowAt_gA(t,e,i);return void 0!==this._groups&&(this.expandGroup(n),this._updateGroupView(this._groups[n]),this.updateGroups()),s},dhtmlXGridObject.prototype._updateGroupView=function(t){if(this._fake&&!this._realfake)return t.row.firstChild.innerHTML="&nbsp;";var e=this._gmask||this._fake._gmask,i="<img style='margin-bottom:-4px' src='"+this.imgURL+t.state+".gif'> ";this.customGroupFormat?i+=this.customGroupFormat(t.text,t.count):i+=t.text+" ( "+t.count+" ) ",t.row.childNodes[e._title].innerHTML=i},dhtmlXGridObject.prototype._addPseudoRow=function(t){for(var e=this._gmask||this._fake._gmask,i=e.cloneNode(!0),n=0;n<i.childNodes.length;n++)i.childNodes[n]._cellIndex=e.childNodes[n]._cellIndex,this._realfake&&(i.childNodes[n].style.display="");var s=this;return i.onclick=function(t){s.callEvent("onGroupClick",[this._cntr.text])&&(s._fake&&s._realfake?s._fake._switchGroupState(s._fake._groups[this._cntr.text].row):s._switchGroupState(this),(t||event).cancelBubble="true")},i.ondblclick=function(t){(t||event).cancelBubble="true"},t||(_isKHTML?this.obj.appendChild(i):this.obj.firstChild.appendChild(i),this.rowsCol.push(i)),i},dhtmlXGridObject.prototype._groups_get=function(){var t=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var e=[],i=this.rowsCol.length-1;i>=0;i--)this.rowsCol[i]._cntr?(this.rowsCol[i]._cntr._childs=e,e=[],t.push(this.rowsCol[i])):e.push(this.rowsCol[i]),this.rowsCol[i].parentNode.removeChild(this.rowsCol[i]);return t},dhtmlXGridObject.prototype._groups_put=function(t){var e=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray(0),this.rowsCol.stablesort=e;for(var i=0;i<t.length;i++){var n=t[i]._cntr;this.obj.firstChild.appendChild(n.row),this.rowsCol.push(n.row),n.row.idd=null;for(var s=0;s<n._childs.length;s++)this.obj.firstChild.appendChild(n._childs[s]),this.rowsCol.push(n._childs[s]);delete n._childs}this._temp_par.appendChild(this.obj)},dhtmlXGridObject.prototype._groupExisting=function(t){if(this.getRowsNum()){t=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var e=this.rowsCol.length,i=0;i<e;i++){var n=this.cells4(this.rowsCol[i].childNodes[this._gIndex]).getValue();if(this.rowsCol[i].style.display="",n||(n=" "),!this._groups[n]){this._groups[n]={text:n,row:this._addPseudoRow(!0),count:0,state:"minus"};var s=this._groups[n];s.row._cntr=s,this._groups[n]._childs=[],t.push(s.row)}this._groups[n].count++,this._groups[n]._childs.push(this.rowsCol[i]),this.rowsCol[i].parentNode.removeChild(this.rowsCol[i])}for(i=0;i<t.length;i++)this._updateGroupView(t[i]._cntr);this._groups_put(t),this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.callEvent("onGridReconstructed",[]),this.updateGroups()}},dhtmlXGridObject.prototype._switchGroupState=function(t){var e=t._cntr;this._fake&&!this._realfake&&(e.state=this._fake._groups[t._cntr.text].row._cntr.state,this._fake._switchGroupState(this._fake._groups[t._cntr.text].row));var i=this.rowsCol._dhx_find(e.row)+1;e.state="minus"==e.state?"plus":"minus";for(var n="plus"==e.state?"none":"";this.rowsCol[i]&&!this.rowsCol[i]._cntr;)this.rowsCol[i].style.display=n,i++;this._updateGroupView(e),this.callEvent("onGroupStateChanged",[e.text,"minus"==e.state]),this.setSizes()},dhtmlXGridObject.prototype.expandGroup=function(t){"plus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.collapseGroup=function(t){"minus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.expandAllGroups=function(){for(var t in this._groups)this._groups[t]&&"plus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var t in this._groups)this._groups[t]&&"minus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.hideGroupColumn=function(t,e){if(!this._fake){for(var i=-1,n=this._gmask.childNodes,s=0;s<n.length;s++)if(n[s]._cellIndex==t){i=s;break}if(-1!=i)for(var o in this._groups)this._groups[o].row.childNodes[i].style.display=e?"none":""}},dhtmlXGridObject.prototype.groupStat=function(t,e,i){i=this["_g_"+(i||"stat_total")];var n=0,s=0;return this.forEachRowInGroup(t,function(t){n=i(n,1*this.cells(t,e).getValue(),s),s++}),n},dhtmlXGridObject.prototype.forEachRowInGroup=function(t,e){var i=this._groups[t].row.nextSibling;if(i)for(;i&&!i._cntr;)e.call(this,i.idd),i=i.nextSibling;else{var n=this._groups[t]._childs;if(n)for(var s=0;s<n.length;s++)e.call(this,n[s].idd)}},dhtmlXGridObject.prototype.updateGroups=function(){if(this._gmask&&this._gmask._math&&!this._parsing)for(var t=this._gmask.childNodes,e=0;e<t.length;e++)t[e]._counter&&this._b_processing.apply(this,t[e]._counter)},dhtmlXGridObject.prototype._b_processing=function(t,e,i){var n=0,s=0;this._ecache[this.cellType[e]]||this.cells5({parentNode:{grid:this}},this.cellType[e]);for(var o=this.rowsCol.length-1;o>=0;o--)this.rowsCol[o]._cntr?(this.cells5(this.rowsCol[o].childNodes[i],this.cellType[e]).setValue(n),s=n=0):(n=t(n,1*this.cells3(this.rowsCol[o],e).getValue(),s),s++)},dhtmlXGridObject.prototype._g_stat_total=function(t,e,i){return t+e},dhtmlXGridObject.prototype._g_stat_min=function(t,e,i){return i||(t=1/0),Math.min(t,e)},dhtmlXGridObject.prototype._g_stat_max=function(t,e,i){return i||(t=-1/0),Math.max(t,e)},dhtmlXGridObject.prototype._g_stat_average=function(t,e,i){return(t*i+e)/(i+1)},dhtmlXGridObject.prototype._g_stat_count=function(t,e,i){return t++},dhtmlXGridObject.prototype._in_header_collapse=function(t,e,i){var n="TD"==t.tagName?t:t.parentNode;e=n._cellIndexS,this._column_groups||(this._column_groups=[]);var s=i[1].split(":");s=[(s=i[1].split(":")).shift(),s.join(":")];var o=parseInt(s[0]);t.innerHTML=i[0]+"<img src='"+this.imgURL+"minus.gif' style='padding-right:10px;height:16px'/><span style='position:relative; top:-6px;'>"+(s[1]||"")+"<span>",t.style.paddingBottom="0px";var l=this;this._column_groups[e]=t.getElementsByTagName("IMG")[0],this._column_groups[e].onclick=function(t){(t||event).cancelBubble=!0,this._cstate=!this._cstate;for(var i=e+1;i<e+o;i++)l.setColumnHidden(i,this._cstate);if(this._cstate){if(n.colSpan&&n.colSpan>0){n._exp_colspan=n.colSpan;var s=Math.max(1,n.colSpan-o);if(!_isFF)for(var r=0;r<n.colSpan-s;r++){var a=document.createElement("TD");n.nextSibling?n.parentNode.insertBefore(a,n.nextSibling):n.parentNode.appendChild(a)}n.colSpan=s}l.callEvent("onColumnCollapse",[e,this._cstate])}else if(n._exp_colspan){if(n.colSpan=n._exp_colspan,!_isFF)for(r=1;r<n._exp_colspan;r++)n.parentNode.removeChild(n.nextSibling);l.callEvent("onColumnCollapse",[e,this._cstate])}this.src=l.imgURL+(this._cstate?"plus.gif":"minus.gif"),"none"!=l.sortImg.style.display&&l.setSortImgPos()}},dhtmlXGridObject.prototype.collapseColumns=function(t){this._column_groups[t]&&!this._column_groups[t]._cstate&&this._column_groups[t].onclick({})},dhtmlXGridObject.prototype.expandColumns=function(t){this._column_groups[t]&&this._column_groups[t]._cstate&&this._column_groups[t].onclick({})},dhtmlXGridObject.prototype.enableHeaderMenu=function(t){if(!window.dhtmlXMenuObject)return dhtmlx.message("You need to include DHTMLX Menu");if(!this._header_menu){var e=this._header_menu=new dhtmlXMenuObject;e.renderAsContextMenu();var i=this;e.attachEvent("onBeforeContextMenu",function(){return i._showHContext(t),!0}),e.attachEvent("onClick",function(t){for(var e=this.getCheckboxState(t),n=i.hdr.rows[1],s=0;s<n.cells.length;s++){var o=n.cells[s];if(o._cellIndexS==t)for(var l=o.colSpan||1,r=0;r<l;r++)i.setColumnHidden(1*t+r,!e)}}),this.attachEvent("onInit",function(){e.addContextZone(this.hdr)}),this.hdr.rows.length&&this.callEvent("onInit",[])}},dhtmlXGridObject.prototype.getHeaderMenu=function(t){return this._header_menu},dhtmlXGridObject.prototype._hideHContext=function(){this._header_menu&&this._header_menu.hide()},dhtmlXGridObject.prototype._showHContext=function(t){"string"==typeof t&&(t=t.split(this.delim));var e=0,i=0;this._header_menu.clearAll();for(var n=0;n<this.hdr.rows[1].cells.length;n++){var s=this.hdr.rows[1].cells[n];if(!t||t[e]&&"false"!=t[e]){if(s.firstChild&&"DIV"==s.firstChild.tagName)var o=s.firstChild.innerHTML;else o=s.innerHTML;o=o.replace(/<[^>]*>/gi,"");var l=!(this.isColumnHidden(e)||0==this.getColWidth(e));this._header_menu.addCheckbox("child",this._header_menu.topId,i,e,o,l),i++}e+=s.colSpan||1}},dhtmlXGridObject.prototype._process_json_row=function(t,e){t._attrs=e;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};if(e.userdata)for(var n in e.userdata)this.setUserData(t.idd,n,e.userdata[n]);e=this._c_order?this._swapColumns(e.data):e.data;for(var s=0;s<e.length;s++)"object"==typeof e[s]&&null!=e[s]&&(t.childNodes[s]._attrs=e[s],e[s].type&&(t.childNodes[s]._cellType=e[s].type),e[s]=e[s].value);return this._fillRow(t,e),t},dhtmlXGridObject.prototype._process_js_row=function(t,e){t._attrs=e;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};if(e.userdata)for(var n in e.userdata)this.setUserData(t.idd,n,e.userdata[n]);for(var s=[],o=0;o<this.columnIds.length;o++)s[o]=e[this.columnIds[o]],"object"==typeof s[o]&&null!=s[o]&&(t.childNodes[o]._attrs=s[o],s[o].type&&(t.childNodes[o]._cellType=s[o].type),s[o]=s[o].value),s[o]||0===s[o]||(s[o]="");return this._fillRow(t,s),t},dhtmlXGridObject.prototype.updateFromJSON=function(t,e,i,n){void 0===e&&(e=!0),this._refresh_mode=[!0,e,i],this.load(t,n,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(t){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(t){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(t):this.setValueX(t)});var e=this.cellType._dhx_find("tree"),i=t.parent||0,n={};this._refresh_mode[2]&&(-1!=e?this._h2.forEachChild(i,function(t){n[t.id]=!0},this):this.forEachRow(function(t){n[t]=!0}));for(var s=t.rows,o=0;o<s.length;o++){var l=s[o],r=l.id;if(n[r]=!1,this.rowsAr[r]&&"TR"!=this.rowsAr[r].tagName)this._h2?this._h2.get[r].buff.data=l:this.rowsBuffer[this.getRowIndex(r)].data=l,this.rowsAr[r]=l;else if(this.rowsAr[r])this._process_json_row(this.rowsAr[r],l,-1),this._postRowProcessing(this.rowsAr[r],!0);else if(this._refresh_mode[1]){var a={idd:r,data:l,_parser:this._process_json_row,_locator:this._get_json_data},h=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(a),h=0):this.rowsBuffer.push(a),this._h2&&(reset=!0,this._h2.add(r,i).buff=this.rowsBuffer[this.rowsBuffer.length-1]),this.rowsAr[r]=l,l=this.render_row(h),this._insertRowAt(l,h?-1:0)}}if(this._refresh_mode[2])for(r in n)n[r]&&this.rowsAr[r]&&this.deleteRow(r);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&this._renderSort(),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},dhtmlXGridObject.prototype._process_js=function(t){return this._process_json(t,"js")},dhtmlXGridObject.prototype._parseHeadJson=function(t){if(t.head&&t.head.length){var e=t.head,i=t.settings,n="setInitWidths",s=!1;i&&"%"==i.colwidth&&(n="setInitWidthsP"),i&&"%"==i.splitat&&(s=i.splitat),this.hdr.rows.length>0&&this.clearAll(!0);for(var o=[[],[],[],[],[],[],[]],l=["value","width","type","align","sort","hidden","id"],r=["",n,"setColTypes","setColAlign","setColSorting","","setColumnIds"],a=0;a<e.length;a++)for(var h=0;h<l.length;h++)o[h].push(e[a][l[h]]);this.setHeader(o[0]);for(a=0;a<r.length;a++)r[a]&&this[r[a]](o[a].join(this.delim));for(a=0;a<e.length;a++){var d=e[a].options;if(e[a].options)if("clist"==this.cellType[a])this.registerCList(a,d);else{var c=this.getCombo(a);for(h=0;h<d.length;h++)c.put(d[h].id,d[h].value)}}this.init();var u=o[5].join(this.delim);this.setColHidden&&""!=u.replace(/,/g,"")&&this.setColHidden(u),s&&this.splitAt&&this.splitAt(s)}},dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=!0;try{var data=data.responseText||data;"string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp)}catch(t){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",data.xmlDoc||data,this]),data={rows:[]}}if(this._refresh_mode)return this._refreshFromJSON(data);data.head&&this._parseHeadJson(data);var cr=parseInt(data.pos||0),total=parseInt(data.total_count||0),reset=!1;total&&(this.rowsBuffer[total-1]||(this.rowsBuffer.length&&(reset=!0),this.rowsBuffer[total-1]=null),total<this.rowsBuffer.length&&(this.rowsBuffer.splice(total,this.rowsBuffer.length-total),reset=!0));var userdata="js"===mode?data.userdata:data;for(var key in userdata)"js"!==mode&&"rows"==key||this.setUserData("",key,userdata[key]);if("js"==mode&&data.collections)for(var colkey in data.collections){var index=this.getColIndexById(colkey),colrecs=data.collections[colkey];if(index!==window.undefined)if("clist"==this.cellType[index]){colplaindata=[];for(var j=0;j<colrecs.length;j++)colplaindata.push(colrecs[j].label);this.registerCList(index,colplaindata)}else for(var combo=this.getCombo(index),j=0;j<colrecs.length;j++)combo.put(colrecs[j].value,colrecs[j].label)}if(this.isTreeGrid())return this._process_tree_json(data,null,null,mode);if("js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++)if(!this.rowsBuffer[i+cr]){var row=data[i],id=row.id||i+1;this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data},this.rowsAr[id]=data[i]}}else for(var i=0;i<data.rows.length;i++)if(!this.rowsBuffer[i+cr]){var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data},this.rowsAr[id]=data.rows[i]}if(this.callEvent("onDataReady",[]),reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=h}else this.render_dataset();this._parsing=!1},dhtmlXGridObject.prototype._get_json_data=function(t,e){return"object"==typeof t.data[e]?t.data[e].value:t.data[e]},dhtmlXGridObject.prototype._process_tree_json=function(t,e,i,n){this._parsing=!0;var s=!1;if(e||(this.render_row=this.render_row_tree,s=!0,"0"==(i=(e=t).parent||0)&&(i=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2)),"js"==n){e.data&&!i&&(t=e.data),e.rows&&(e=e.rows);for(var o=0;o<e.length;o++){var l=e[o].id;(r=this._h2.add(l,i)).buff={idd:l,data:e[o],_parser:this._process_js_row,_locator:this._get_js_data},e[o].open&&(r.state="minus"),this.rowsAr[l]=r.buff,this._process_tree_json(e[o],e[o],l,n)}}else if(e.rows)for(o=0;o<e.rows.length;o++){var r;l=e.rows[o].id;(r=this._h2.add(l,i)).buff={idd:l,data:e.rows[o],_parser:this._process_json_row,_locator:this._get_json_data},e.rows[o].open&&(r.state="minus"),this.rowsAr[l]=r.buff,this._process_tree_json(e.rows[o],e.rows[o],l,n)}s&&(0!=i&&this._h2.change(i,"state","minus"),this._updateTGRState(this._h2.get[i]),this._h2_to_buff(),this.callEvent("onDataReady",[]),0!=i&&(this._srnd||this.pagingOn)?this._renderSort():this.render_dataset(),!1===this._slowParse&&this.forEachRow(function(t){this.render_row_tree(0,t)}),this._parsing=!1,0==i||this._srnd||this.callEvent("onOpenEnd",[i,1]))},dhtmlXGridObject.prototype.enableMarkedCells=function(t){this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0),this.lastMarkedRow=null,this.lastMarkedColumn=null,this.markedCells=!0,this.lastMarkMethod=0,arguments.length>0&&(dhx4.s2b(t)||(this.markedCells=!1))},dhtmlXGridObject.prototype.doMark=function(t,e){var i=t.parentNode.idd;if(this.setActive(!0),i){this.editStop(),this.cell=t,this.row=t.parentNode;var n=t._cellIndex;if(e||(e=0),0==e)this.unmarkAll();else if(1==e){if(this.lastMarkedRow)for(var s=Math.min(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),o=Math.max(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),l=Math.min(n,this.lastMarkedColumn),r=Math.max(n,this.lastMarkedColumn),a=s;a<o+1;a++)for(var h=l;h<r+1;h++)this.mark(this.getRowId(a),h,!0)}else if(2==e&&-1!=this.markedRowsArr._dhx_find(i))for(var d=0;d<this.markedCellsArr[i].length;d++)if(this.markedCellsArr[i][d]==n)return this.mark(i,n,!1),!0;this.markedCellsArr[i]||(this.markedCellsArr[i]=new dhtmlxArray(0)),1!=e&&this.mark(i,n),this.moveToVisible(this.cells(i,n).cell),this.lastMarkedRow=i,this.lastMarkedColumn=n,this.lastMarkMethod=e}},dhtmlXGridObject.prototype.mark=function(t,e,i){if(arguments.length>2&&!dhx4.s2b(i)){if(this.cells(t,e).cell.className=this.cells(t,e).cell.className.replace(/cellselected/g,""),-1!=this.markedRowsArr._dhx_find(t)){var n=this.markedCellsArr[t]._dhx_find(e);-1!=n&&(this.markedCellsArr[t]._dhx_removeAt(n),0==this.markedCellsArr[t].length&&this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(t)),this.callEvent("onCellUnMarked",[t,e]))}return!0}this.cells(t,e).cell.className+=" cellselected",-1==this.markedRowsArr._dhx_find(t)&&(this.markedRowsArr[this.markedRowsArr.length]=t),this.markedCellsArr[t]||(this.markedCellsArr[t]=new dhtmlxArray(0)),-1==this.markedCellsArr[t]._dhx_find(e)&&(this.markedCellsArr[t][this.markedCellsArr[t].length]=e,this.callEvent("onCellMarked",[t,e]))},dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var t=0;t<this.markedRowsArr.length;t++){var e=this.markedRowsArr[t];if(this.rowsAr[e])for(var i=0;i<this.markedCellsArr[e].length;i++)this.callEvent("onCellUnMarked",[e,this.markedCellsArr[e][i]]),this.cells(e,this.markedCellsArr[e][i]).cell.className=this.cells(e,this.markedCellsArr[e][i]).cell.className.replace(/cellselected/g,"")}this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0)}return!0},dhtmlXGridObject.prototype.getMarked=function(){var t=new Array;if(this.markedRowsArr)for(var e=0;e<this.markedRowsArr.length;e++)for(var i=this.markedRowsArr[e],n=0;n<this.markedCellsArr[i].length;n++)t[t.length]=[i,this.markedCellsArr[i][n]];return t},eXcell_math.prototype=new eXcell,dhx4.attachEvent("onGridCreated",function(t){t._mat_links={},t._aggregators=[],t.attachEvent("onClearAll",function(){this._mat_links={},this._aggregators=[]}),t.attachEvent("onCellChanged",function(t,e){if(this._mat_links[t]){var i=this._mat_links[t][e];if(i)for(var n=0;n<i.length;n++)i[n].parentNode&&this.cells5(i[n]).setValue(this._calcSCL(i[n]))}if(!this._parsing&&this._aggregators[e]){var s=this._h2.get[t].parent.id;if(0!=s){var o=this.cells(s,e);o.setValue(this._calcSCL(o.cell))}}}),t.attachEvent("onAfterRowDeleted",function(t,e){if(0!=e&&!this._parsing&&this._aggregators.length)for(var i=0;i<this._aggregators.length;i++)if(this._aggregators[i]){var n=this.cells(e,i);n.setValue(this._calcSCL(n.cell))}return!0}),t.attachEvent("onXLE",function(){for(var t=0;t<this._aggregators.length;t++)this._aggregators[t]&&this._h2.forEachChild(0,function(e){if(0!=e.childs.length){var i=this.cells(e.id,t);i.setValue(this._calcSCL(i.cell))}},this)})}),dhtmlXGridObject.prototype.enableMathSerialization=function(t){this._mathSerialization=dhx4.s2b(t)},dhtmlXGridObject.prototype.setMathRound=function(t){this._roundDl=t,this._roundD=Math.pow(10,t)},dhtmlXGridObject.prototype.enableMathEditing=function(t){this._mathEdit=dhx4.s2b(t)},dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell._code)return this.cells5(cell).getValue();try{dhtmlx.agrid=this;var z=eval(cell._code)}catch(t){return"#SCL"}if(this._roundD){var pre=Math.abs(z)<1?"0":"";if(z<0&&(pre="-"+pre),z=Math.round(Math.abs(z)*this._roundD).toString(),0==z)return 0;if(this._roundDl>0){var n=z.length-this._roundDl;return n<0&&(z=("000000000"+z).substring(9+n),n=0),pre+z.substring(0,n)+"."+z.substring(n,z.length)}return pre+z}return z},dhtmlXGridObject.prototype._countTotal=function(t,e){for(var i=0,n=this._h2.get[t],s=0;s<n.childs.length;s++){if(!n.childs[s].buff)return i;if(n.childs[s].buff._parser)return this._h2.forEachChild(t,function(t){if(0==t.childs.length){var n=parseFloat(this._get_cell_value(t.buff,e),10);n&&(i+=n)}},this),i;var o=parseFloat(this._get_cell_value(n.childs[s].buff,e),10);o&&(i+=o)}return i},dhtmlXGridObject.prototype._compileSCL=function(t,e,i){if(null===t||t===window.undefined)return t;if(0!=(t=t.toString()).indexOf("=")||!e.parentNode)return this._reLink([],e),i&&(e._code=e.original=null),t;e.original=t;var n=null;if(-1!=(t=t.replace("=","")).indexOf("sum"))return t=t.replace("sum","(dhtmlx.agrid._countTotal('"+e.parentNode.idd+"',"+e._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[e._cellIndex]="sum",e._code=t,this._parsing?"":this._calcSCL(e);if(-1!=t.indexOf("[[")){var s=/(\[\[([^\,]*)\,([^\]]*)]\])/g;dhtmlx.agrid=this,n=n||new Array,t=t.replace(s,function(t,i,s,o){return"-"==s&&(s=e.parentNode.idd),0==s.indexOf("#")&&(s=dhtmlx.agrid.getRowId(s.replace("#",""))),n[n.length]=[s,o],'(parseFloat(dhtmlx.agrid.cells("'+s+'",'+o+").getValue(),10))"})}if(-1!=t.indexOf(":")){s=/:(\w+)/g;dhtmlx.agrid=this;var o=e.parentNode.idd;n=n||new Array,t=t.replace(s,function(t,e,i,s){return n[n.length]=[o,dhtmlx.agrid.getColIndexById(e)],'(parseFloat(dhtmlx.agrid.cells("'+o+'",dhtmlx.agrid.getColIndexById("'+e+'")).getValue(),10))'})}else{s=/c([0-9]+)/g;dhtmlx.agrid=this;o=e.parentNode.idd;n=n||new Array,t=t.replace(s,function(t,e,i,s){return n[n.length]=[o,e],'(parseFloat(dhtmlx.agrid.cells("'+o+'",'+e+").getValue(),10))"})}return this._reLink(n,e),e._code=t,this._calcSCL(e)},dhtmlXGridObject.prototype._reLink=function(t,e){if(t.length)for(var i=0;i<t.length;i++){this._mat_links[t[i][0]]||(this._mat_links[t[i][0]]={});var n=this._mat_links[t[i][0]];n[t[i][1]]||(n[t[i][1]]=[]),n[t[i][1]].push(e)}},_isKHTML&&function(){var t=String.prototype.replace;String.prototype.replace=function(e,i){if("function"!=typeof i)return t.apply(this,arguments);var n=""+this,s=i;if(!(e instanceof RegExp))return-1==(h=n.indexOf(e))?n:t.apply(n,[e,s(e,h,n)]);for(var o,l=e,r=[],a=l.lastIndex;null!=(o=l.exec(n));){var h=o.index,d=o.concat(h,n);if(r.push(n.slice(a,h),s.apply(null,d).toString()),!l.global){a+=RegExp.lastMatch.length;break}a=l.lastIndex}return r.push(n.slice(a)),r.join("")}}(),dhtmlXGridObject.prototype.insertColumn=function(t,e,i,n,s,o,l,r,a){if((t=parseInt(t))>this._cCount&&(t=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,t-1,[e||"&nbsp;",n||100,i||"ed",o||"left",l||"",s||"na",a||"","",this._cMod,n||100]),this._processAllRows("_addColInRow",t),"object"==typeof e)for(var h=1;h<this.hdr.rows.length;h++)if("#rspan"==e[h-1]){for(var d=h-1,c=!1,u=null;!c;){u=this.hdr.rows[d];for(var f=0;f<u.cells.length;f++)if(u.cells[f]._cellIndex==t){c=f;break}d--}this.hdr.rows[d+1].cells[f].rowSpan=(this.hdr.rows[d].cells[f].rowSpan||1)+1}else this.setHeaderCol(t,e[h-1]||"&nbsp;",h);else this.setHeaderCol(t,e||"&nbsp;");this.hdr.rows[0].cells[t],this._cCount++,this._cMod++,this._master_row=null,this.setSizes()},dhtmlXGridObject.prototype.deleteColumn=function(t){t=parseInt(t),0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),t>=this._cCount||(this._processAllArrays(t,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",t),this._cCount--,this._master_row=null,this.setSizes()))},dhtmlXGridObject.prototype._processAllRows=function(t,e,i){this[t](this.obj.rows[0],e,i,0);for(var n=this.hdr.rows.length,s=0;s<n;s++)this[t](this.hdr.rows[s],e,i,s);if(this.ftr)for(n=this.ftr.firstChild.rows.length,s=0;s<n;s++)this[t](this.ftr.firstChild.rows[s],e,i,s);this.forEachRow(function(n){this.rowsAr[n]&&"TR"==this.rowsAr[n].tagName&&this[t](this.rowsAr[n],e,i,-1)})},dhtmlXGridObject.prototype._processAllArrays=function(t,e,i){var n=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];this.cellWidthPX.length&&n.push("cellWidthPX"),this.cellWidthPC.length&&n.push("cellWidthPC"),this._col_combos&&n.push("_col_combos"),this._mCols&&(n[n.length]="_mCols"),this.columnIds&&(n[n.length]="columnIds"),this._maskArr&&n.push("_maskArr"),this._drsclmW&&n.push("_drsclmW"),this._RaSeCol&&n.push("_RaSeCol"),this._hm_config&&n.push("_hm_config"),this._drsclmn&&n.push("_drsclmn"),this.clists&&n.push("clists"),this._validators&&this._validators.data&&n.push(this._validators.data),n.push("combos"),this._customSorts&&n.push("_customSorts"),this._aggregators&&n.push("_aggregators");var s=t<=e;if(!this._c_order){this._c_order=new Array;for(var o=this._cCount,l=0;l<o;l++)this._c_order[l]=l}for(l=0;l<n.length;l++){var r=this[n[l]]||n[l];if(r){if(s){for(var a=r[t],h=t;h<e;h++)r[h]=r[h+1];r[e]=a}else{for(a=r[t],h=t;h>e+1;h--)r[h]=r[h-1];r[e+1]=a}i&&(r[e+(s?0:1)]=i[l])}}},dhtmlXGridObject.prototype.moveColumn=function(t,e){if(e--,t=parseInt(t),(e=parseInt(e))<t)var i=e+1;else i=e;if(!this.callEvent("onBeforeCMove",[t,i]))return!1;t!=i&&(this.editStop(),this._processAllRows("_moveColInRow",t,e),this._processAllArrays(t,e),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[t,i]))},dhtmlXGridObject.prototype._swapColumns=function(t){for(var e=new Array,i=0;i<this._cCount;i++){var n=t[this._c_order[i]];void 0===n&&(n=""),e[i]=n}return e},dhtmlXGridObject.prototype._moveColInRow=function(t,e,i){var n=t.childNodes[e],s=t.childNodes[i+1];if(n){s?t.insertBefore(n,s):t.appendChild(n);for(var o=0;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=o}},dhtmlXGridObject.prototype._addColInRow=function(t,e,i,n){var s=e;if(t._childIndexes){if(t._childIndexes[e-1]!=t._childIndexes[e]&&t.childNodes[t._childIndexes[e-1]])for(o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;else{for(var o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;t._childIndexes[e]--}s=t._childIndexes[e]}var l=t.childNodes[s],r=document.createElement(n?"TD":"TH");n?r._attrs={}:r.style.width=(parseInt(this.cellWidthPX[e])||"100")+"px",l?t.insertBefore(r,l):t.appendChild(r),this.dragAndDropOff&&t.idd&&this.dragger.addDraggableItem(t.childNodes[s],this);for(o=s+1;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=t.childNodes[o]._cellIndex+1;t.childNodes[s]&&(t.childNodes[s]._cellIndex=t.childNodes[s]._cellIndexS=e),t.idd||void 0!==t.idd?(this.cells3(t,e).setValue(""),r.align=this.cellAlign[e],r.style.verticalAlign=this.cellVAlign[e],r.bgColor=this.columnColor[e]):"TD"==r.tagName&&(!t.idd&&this.forceDivInHeader?r.innerHTML="<div class='hdrcell'>&nbsp;</div>":r.innerHTML="&nbsp;")},dhtmlXGridObject.prototype._deleteColInRow=function(t,e){var i=e;t._childIndexes&&(e=t._childIndexes[e]);var n=t.childNodes[e];if(n){if(n.colSpan&&n.colSpan>1&&n.parentNode.idd){var s=n.colSpan-1,o=this.cells4(n).getValue();if(this.setColspan(n.parentNode.idd,n._cellIndex,1),s>1){var l=1*n._cellIndex;this.setColspan(n.parentNode.idd,l+1,s),this.cells(n.parentNode.idd,1*n._cellIndex+1).setValue(o),t._childIndexes.splice(l,1);for(var r=l;r<t._childIndexes.length;r++)t._childIndexes[r]-=1}}else if(t._childIndexes){t._childIndexes.splice(i,1);for(r=i;r<t._childIndexes.length;r++)t._childIndexes[r]--}n&&t.removeChild(n);for(r=e;r<t.childNodes.length;r++)t.childNodes[r]._cellIndex=t.childNodes[r]._cellIndexS=t.childNodes[r]._cellIndex-1}},dhtmlXGridObject.prototype.enableColumnMove=function(t,e){this._mCol=dhx4.s2b(t),void 0!==e&&(this._mCols=e.split(",")),this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)},dhtmlXGridObject.prototype._startColumnMove=function(t){for(var e=(t=t||event).target||t.srcElement,i=e;"TABLE"!=i.tagName;)i=i.parentNode;var n=i.grid;if(n&&(n.setActive(),n._mCol&&2!=t.button))return"default"!=(e=n.getFirstParentOfType(e,"TD")).style.cursor||(n&&!n._colInMove&&(n.resized=null,n._mCols&&"true"!=n._mCols[e._cellIndex]||(n._colInMove=e._cellIndex+1)),n._colInMovePos={x:t.clientX,y:t.clientY},!0)},dhtmlXGridObject.prototype._onColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;if(e&&e._colInMove){if(Math.max(Math.abs(t.clientX-e._colInMovePos.x),Math.abs(t.clientY-e._colInMovePos.y))<20)return;if(e._hideHContext&&e._hideHContext(),"object"!=typeof e._colInMove)(o=document.createElement("DIV"))._aIndex=e._colInMove-1,o._bIndex=null,o.innerHTML=e.getHeaderCol(o._aIndex),o.className="dhx_dragColDiv",o.style.position="absolute",document.body.appendChild(o),e._colInMove=o;var i=[];i[0]=document.body.scrollLeft||document.documentElement.scrollLeft,i[1]=document.body.scrollTop||document.documentElement.scrollTop,e._colInMove.style.left=t.clientX+i[0]+8+"px",e._colInMove.style.top=t.clientY+i[1]+8+"px";for(var n=t.target||t.srcElement;n&&void 0===n._cellIndexS;)n=n.parentNode;if(e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),e._colInMove._oldHe=null,e._colInMove._bIndex=null),n){if(e.hdr.rows[1]._childIndexes)var s=e.hdr.rows[1].cells[e.hdr.rows[1]._childIndexes[n._cellIndexS]];else s=e.hdr.rows[1].cells[n._cellIndexS];var o;(o=t.clientX-(dhx4.absLeft(s)-e.hdrBox.scrollLeft))/s.offsetWidth>.5?(s.className+=" columnTargetR",e._colInMove._bIndex=n._cellIndexS):(s.className+=" columnTargetL",e._colInMove._bIndex=n._cellIndexS-1),s.offsetLeft<e.objBox.scrollLeft+20&&(e.objBox.scrollLeft=Math.max(0,s.offsetLeft-20)),s.offsetLeft+s.offsetWidth-e.objBox.scrollLeft>e.objBox.offsetWidth-20&&(e.objBox.scrollLeft=Math.min(e.objBox.scrollLeft+s.offsetWidth+20,e.objBox.scrollWidth-e.objBox.offsetWidth)),e._colInMove._oldHe=s}return t.cancelBubble=!0,!1}return!0},dhtmlXGridObject.prototype._stopColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;return e&&e._colInMove&&("object"==typeof e._colInMove&&(e._colInMove.parentNode.removeChild(e._colInMove),null!=e._colInMove._bIndex&&e.moveColumn(e._colInMove._aIndex,e._colInMove._bIndex+1),e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),e._colInMove._oldHe=null,e._colInMove.grid=null,e.resized=!0),e._colInMove=0),!0},dhtmlXGridObject.prototype.mouseOverHeader=function(t){var e=this;dhtmlxEvent(this.hdr,"mousemove",function(i){var n=(i=i||window.event).target||i.srcElement;"TD"!=n.tagName&&(n=e.getFirstParentOfType(n,"TD")),n&&void 0!==n._cellIndex&&t(n.parentNode.rowIndex,n._cellIndex)})},dhtmlXGridObject.prototype.mouseOver=function(t){var e=this;dhtmlxEvent(this.obj,"mousemove",function(i){var n=(i=i||window.event).target||i.srcElement;"TD"!=n.tagName&&(n=e.getFirstParentOfType(n,"TD")),n&&void 0!==n._cellIndex&&t(n.parentNode.rowIndex,n._cellIndex)})},dhtmlXGridObject.prototype.enablePaging=function(t,e,i,n,s,o){this._pgn_parentObj="string"==typeof n?document.getElementById(n):n,this._pgn_recInfoParentObj="string"==typeof o?document.getElementById(o):o,this.pagingOn=t,this.showRecInfo=s,this.rowsBufferOutSize=parseInt(e),this.currentPage=1,this.pagesInGroup=parseInt(i),this._init_pgn_events(),this.setPagingSkin("default")},dhtmlXGridObject.prototype.setXMLAutoLoading=function(t,e){this.xmlFileUrl=t,this._dpref=e},dhtmlXGridObject.prototype.changePageRelative=function(t){this.changePage(this.currentPage+t)},dhtmlXGridObject.prototype.changePage=function(t){0==arguments.length&&(t=this.currentPage||0),t=parseInt(t),t=Math.max(1,Math.min(t,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))),this.callEvent("onBeforePageChanged",[this.currentPage,t])&&(this.currentPage=parseInt(t),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))},dhtmlXGridObject.prototype.setPagingSkin=function(t){this._pgn_skin=this["_pgn_"+t],"toolbar"==t&&(this._pgn_skin_tlb=arguments[1])},dhtmlXGridObject.prototype.setPagingTemplates=function(t,e){this._pgn_templateA=this._pgn_template_compile(t),this._pgn_templateB=this._pgn_template_compile(e),this._page_skin_update()},dhtmlXGridObject.prototype._page_skin_update=function(t){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));var e=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(e&&e<this.currentPage)return this.changePage(e);this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView())},dhtmlXGridObject.prototype._init_pgn_events=function(t){this.attachEvent("onXLE",this._page_skin_update),this.attachEvent("onClearAll",this._page_skin_update),this.attachEvent("onPageChanged",this._page_skin_update),this.attachEvent("onGridReconstructed",this._page_skin_update),this._init_pgn_events=function(){}},dhtmlXGridObject.prototype._pgn_default=function(t,e,i){if(!this.pagingBlock){if(this.pagingBlock=document.createElement("DIV"),this.pagingBlock.className="pagingBlock",this.recordInfoBlock=document.createElement("SPAN"),this.recordInfoBlock.className="recordsInfoBlock",!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock),this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock),this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}var n=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,n),this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,n),this._pgn_template_active(this.pagingBlock),this._pgn_template_active(this.recordInfoBlock),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_block=function(t){for(var e=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,i=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),e+this.pagesInGroup),n=[],s=e+1;s<=i;s++)s==this.currentPage?n.push("<a class='dhx_not_active'><b>"+s+"</b></a>"):n.push("<a onclick='this.grid.changePage("+s+"); return false;'>"+s+"</a>");return n.join(t)},dhtmlXGridObject.prototype._pgn_link=function(t,e,i){if("prevpages"==t||"prev"==t)return 1==this.currentPage?i:"<a onclick='this.grid.changePageRelative(-1*"+("prev"==t?"1":"this.grid.pagesInGroup")+"); return false;'>"+e+"</a>";if("nextpages"==t||"next"==t)return this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?i:this.rowsBuffer.length/(this.rowsBufferOutSize*("next"==t?"1":this.pagesInGroup))<=1?i:"<a onclick='this.grid.changePageRelative("+("next"==t?"1":"this.grid.pagesInGroup")+"); return false;'>"+e+"</a>";if("current"==t){var n=this.currentPage+(e?parseInt(e):0);return n<1||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<n?i:"<a "+(n==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+n+"); return false;'>"+n+"</a>"}return e},dhtmlXGridObject.prototype._pgn_template_active=function(t){var e=t.getElementsByTagName("A");if(e)for(var i=0;i<e.length;i++)e[i].grid=this},dhtmlXGridObject.prototype._pgn_template_compile=function(t){return t=t.replace(/\[([^\]]*)\]/g,function(t,e){switch((e=e.split(":"))[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+e[0]+"','"+e[1]+"','"+e[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+e[1]+"')+\""}}),new Function('return "'+t+'";')},dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"},dhtmlXGridObject.prototype.setPagingWTMode=function(t,e,i,n){this._WTDef=[t,e,i,n]},dhtmlXGridObject.prototype._pgn_bricks=function(t,e,i){var n=(this.skin_name||"").split("_")[1],s="";"light"!=n&&"modern"!=n&&"skyblue"!=n||(s="_"+n),this.pagerElAr=new Array,this.pagerElAr.pagerCont=document.createElement("DIV"),this.pagerElAr.pagerBord=document.createElement("DIV"),this.pagerElAr.pagerLine=document.createElement("DIV"),this.pagerElAr.pagerBox=document.createElement("DIV"),this.pagerElAr.pagerInfo=document.createElement("DIV"),this.pagerElAr.pagerInfoBox=document.createElement("DIV");var o=this.globalBox||this.objBox;if(this.pagerElAr.pagerCont.style.width=o.clientWidth+"px",this.pagerElAr.pagerCont.style.overflow="hidden",this.pagerElAr.pagerCont.style.clear="both",this.pagerElAr.pagerBord.className="dhx_pbox"+s,this.pagerElAr.pagerLine.className="dhx_pline"+s,this.pagerElAr.pagerBox.style.clear="both",this.pagerElAr.pagerInfo.className="dhx_pager_info"+s,this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo),this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox),this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox),this._pgn_parentObj.innerHTML="",this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont),this.rowsBuffer.length>0){var l=20;if(t>this.pagesInGroup){var r=document.createElement("DIV"),a=document.createElement("DIV");r.className="dhx_page"+s,a.innerHTML="&larr;",r.appendChild(a),this.pagerElAr.pagerBox.appendChild(r);var h=this;r.pgnum=(Math.ceil(t/this.pagesInGroup)-1)*this.pagesInGroup,r.onclick=function(){h.changePage(this.pgnum)},l+=22}for(var d=1;d<=this.pagesInGroup;d++){r=document.createElement("DIV"),a=document.createElement("DIV");if(r.className="dhx_page"+s,pageNumber=(Math.ceil(t/this.pagesInGroup)-1)*this.pagesInGroup+d,pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;if(a.innerHTML=pageNumber,r.appendChild(a),t==pageNumber)r.className+=" dhx_page_active"+s,a.className="dhx_page_active"+s;else{h=this;r.pgnum=pageNumber,r.onclick=function(){h.changePage(this.pgnum)}}l+=parseInt(22/3)*pageNumber.toString().length+15,a.style.width=parseInt(22/3)*pageNumber.toString().length+8+"px",this.pagerElAr.pagerBox.appendChild(r)}if(Math.ceil(t/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){r=document.createElement("DIV"),a=document.createElement("DIV");r.className="dhx_page"+s,a.innerHTML="&rarr;",r.appendChild(a),this.pagerElAr.pagerBox.appendChild(r);h=this;r.pgnum=Math.ceil(t/this.pagesInGroup)*this.pagesInGroup+1,r.onclick=function(){h.changePage(this.pgnum)},l+=22}this.pagerElAr.pagerLine.style.width=l+"px"}this.rowsBuffer.length>0&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(e+1)+this.i18n.paging.to+i+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound),this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_toolbar=function(t,e,i){this.aToolBar||(this.aToolBar=this._pgn_createToolBar());var n=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(this._WTDef[0]&&(this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage>=n&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs"))),this._WTDef[2]){var s=this;this.aToolBar.forEachListOption("pages",function(t){s.aToolBar.removeListOption("pages",t)});for(var o={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin],l=0;l<n;l++)this.aToolBar.addListOption("pages","pages_"+(l+1),NaN,"button","<span style='padding: 0px "+o+"px 0px 0px;'>"+this.i18n.paging.page+(l+1)+"</span>","paging_page.gif");this.aToolBar.setItemText("pages",this.i18n.paging.page+t)}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(e+1)+this.i18n.paging.to+i+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound)),this._WTDef[3]&&this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL}),this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var t,e=this;if(this.aToolBar.attachEvent("onClick",function(t){switch((t=t.split("_"))[0]){case"leftabs":e.changePage(1);break;case"left":e.changePage(e.currentPage-1);break;case"rightabs":e.changePage(99999);break;case"right":e.changePage(e.currentPage+1);break;case"perpagenum":if(t[1]===this.undefined)return;e.rowsBufferOutSize=parseInt(t[1]),e.changePage(),e.aToolBar.setItemText("perpagenum",t[1]+" "+e.i18n.paging.perpage);break;case"pages":if(t[1]===this.undefined)return;e.changePage(t[1]),e.aToolBar.setItemText("pages",e.i18n.paging.page+t[1])}}),this._WTDef[0]&&(this.aToolBar.addButton("leftabs",NaN,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",NaN,null,"ar_left.gif","ar_left_dis.gif")),this._WTDef[1]&&(this.aToolBar.addText("results",NaN,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results")),this._WTDef[0]&&(this.aToolBar.addButton("right",NaN,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",NaN,null,"ar_right_abs.gif","ar_right_abs_dis.gif")),this._WTDef[2]&&("dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",NaN,"select page",[],"paging_pages.gif",null,!1,!0)),t=this._WTDef[3]){"dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],"paging_rows.gif",null,!1,!0),"object"!=typeof t&&(t=[5,10,15,20,25,30]);for(var i={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],n=0;n<t.length;n++)this.aToolBar.addListOption("perpagenum","perpagenum_"+t[n],NaN,"button","<span style='padding: 0px "+i+"px 0px 0px;'>"+t[n]+" "+this.i18n.paging.perpage+"</span>","paging_page.gif")}return this.aToolBar},dhtmlXGridObject.prototype.post=function(t,e,i,n){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof i&&(n=i,i=null),n=n||"xml",this.xmlFileUrl||(this.xmlFileUrl=t),this._data_type=n,this.xmlLoader=this.doLoadDetails;var s=this;this.xmlLoader=function(t){s.callEvent&&(s["_process_"+n](t.xmlDoc),s._contextCallTimer||s.callEvent("onXLE",[s,0,0,t.xmlDoc]),i&&(i(),i=null))},dhx4.ajax.post(t,e||"",this.xmlLoader)},dhtmlXGridObject.prototype.setRowspan=function(t,e,i){var n=this[this._bfs_cells?"_bfs_cells":"cells"](t,e).cell,s=this.rowsAr[t];if(n.rowSpan&&1!=n.rowSpan)for(var o=s.nextSibling,l=1;l<n.rowSpan;l++){var r=o.childNodes[o._childIndexes[n._cellIndex+1]],a=document.createElement("TD");a.innerHTML="&nbsp;",a._cellIndex=n._cellIndex,a._clearCell=!0,r?r.parentNode.insertBefore(a,r):o.parentNode.appendChild(a),this._shiftIndexes(o,n._cellIndex,-1),o=o.nextSibling}n.rowSpan=i,s=this._h2?this.rowsAr[this._h2.get[s.idd].parent.childs[this._h2.get[s.idd].index+1].id]:s.nextSibling||this.rowsCol[this.rowsCol._dhx_find(s)+1];var h=[];for(l=1;l<i;l++){var d=null;if(d=this._fake&&!this._realfake?this._bfs_cells3(s,e).cell:this.cells3(s,e).cell,this._shiftIndexes(s,n._cellIndex,1),d&&d.parentNode.removeChild(d),h.push(s),this._h2)(s=this._h2.get[s.idd].parent.childs[this._h2.get[s.idd].index+1])&&(s=this.rowsAr[s.id]);else s=s.nextSibling||this.rowsCol[this.rowsCol._dhx_find(s)+1]}this.rowsAr[t]._rowSpan=this.rowsAr[t]._rowSpan||{},this.rowsAr[t]._rowSpan[e]=h,this._fake&&!this._realfake&&e<this._fake._cCount&&this._fake.setRowspan(t,e,i)},dhtmlXGridObject.prototype._shiftIndexes=function(t,e,i){if(!t._childIndexes){t._childIndexes=new Array;for(var n=0;n<t.childNodes.length;n++)t._childIndexes[n]=n}for(n=0;n<t._childIndexes.length;n++)n>e&&(t._childIndexes[n]=t._childIndexes[n]-i)},dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0,this.enableRowspan=function(){},this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var t=1;t<this.obj.rows.length;t++)if(this.obj.rows[t]._rowSpan){var e=this.obj.rows[t];for(var i in e._rowSpan)for(var n=e,s=n._rowSpan[i],o=0;o<s.length;o++){if(n.nextSibling?n.parentNode.insertBefore(s[o],n.nextSibling):n.parentNode.appendChild(s[o]),this._fake){var l=this._fake.rowsAr[n.idd],r=this._fake.rowsAr[s[o].idd];l.nextSibling?l.parentNode.insertBefore(r,l.nextSibling):l.parentNode.appendChild(r),this._correctRowHeight(n.idd)}n=n.nextSibling}}var a=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray,this.rowsCol.stablesort=a;for(t=1;t<this.obj.rows.length;t++)this.rowsCol.push(this.obj.rows[t])}}),this.attachEvent("onXLE",function(t,e,i,n){for(var s=0;s<this.rowsBuffer.length;s++)for(var o=this.render_row(s),l=o.childNodes,r=0;r<l.length;r++)l[r]._attrs.rowspan&&this.setRowspan(o.idd,l[r]._cellIndex,l[r]._attrs.rowspan)})},dhx4.attachEvent("onGridCreated",function(t){t._split_later&&t.splitAt(t._split_later)}),dhtmlXGridObject.prototype.splitAt=function(t){if(!this.obj.rows[0])return this._split_later=t;t=parseInt(t);var e=document.createElement("DIV");this.entBox.appendChild(e);var i=document.createElement("DIV");this.entBox.appendChild(i);for(var n=this.entBox.childNodes.length-3;n>=0;n--)i.insertBefore(this.entBox.childNodes[n],i.firstChild);if(this.entBox.style.position="relative",this.globalBox=this.entBox,this.entBox=i,i.grid=this,e.style.cssText+="border:0px solid red !important;",i.style.cssText+="border:0px solid red !important;",i.style.top="0px",i.style.position="absolute",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=11,i.style.height=e.style.height=this.globalBox.clientHeight,this._fake=new dhtmlXGridObject(e),this.globalBox=this._fake.globalBox=this.globalBox,this._fake._fake=this,this._fake._realfake=!0,this._treeC=this.cellType._dhx_find("tree"),this._fake.delim=this.delim,this._fake.customGroupFormat=this.customGroupFormat,this._fake.setImagesPath(this._imgURL),this._fake.iconURL=this.iconURL,this._fake._customSorts=this._customSorts,this._fake.noHeader=this.noHeader,this._fake._enbTts=this._enbTts,this._fake._drsclmW=this._drsclmW,this._fake._htkebl=this._htkebl,this._fake.clists=this.clists,this._fake.fldSort=new Array,this._fake.selMultiRows=this.selMultiRows,this._fake.multiLine=this.multiLine,this._fake._key_events=this._key_events,this._fake.smartTabOrder=this.smartTabOrder,this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight),this.attachEvent("onRowAdded",this._correctRowHeight);var s=function(){this.forEachRow(function(t){this._correctRowHeight(t)})};this.attachEvent("onPageChanged",s),this.attachEvent("onXLE",s),this.attachEvent("onResizeEnd",s),this._ads_count||this.attachEvent("onAfterSorting",s),this._srnd&&this.attachEvent("onFilterEnd",s),this.attachEvent("onDistributedEnd",s)}this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop}),this._fake.loadedKidsHash=this.loadedKidsHash,this._h2&&(this._fake._h2=this._h2),this._fake._dInc=this._dInc;var o=[[],[],[],[],[],[],[]],l=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"],r=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];this._fake.callEvent=function(){var t=!0;this._fake._split_event=!0;var e="onScroll"==arguments[0];return("onGridReconstructed"==arguments[0]||e)&&this._fake.callEvent.apply(this,arguments),e||(t=this._fake.callEvent.apply(this._fake,arguments)),this._fake._split_event=!1,t},this._elmn&&this._fake.enableLightMouseNavigation(!0),(this.__cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()}),this._fake._cssEven=this._cssEven,this._fake._cssUnEven=this._cssUnEven,this._fake._cssSP=this._cssSP,this._fake.isEditable=this.isEditable,this._fake._edtc=this._edtc,this._sst&&this._fake.enableStableSorting(!0),this._fake._sclE=this._sclE,this._fake._dclE=this._dclE,this._fake._f2kE=this._f2kE,this._fake._maskArr=this._maskArr,this._fake._dtmask=this._dtmask,this._fake.combos=this.combos;var a=0,h=this.globalBox.offsetWidth;for(n=0;n<t;n++){for(var d=0;d<l.length;d++)this[l[d]]&&(o[d][n]=this[l[d]][n]),"string"==typeof o[d][n]&&(o[d][n]=o[d][n].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(o[1][n]=1*o[1][n]),"%"==this.cellWidthType?(o[1][n]=Math.round(parseInt(this[l[1]][n])*h/100),a+=o[1][n]):a+=parseInt(this[l[1]][n]),this.setColumnHidden(n,!0)}for(d=0;d<l.length;d++){var c=o[d].join(this.delim);"setHeader"!=r[d]?""!=c&&this._fake[r[d]](c):this._fake[r[d]](c,null,this._hstyles)}this._fake._strangeParams=this._strangeParams,this._fake._drsclmn=this._drsclmn,a=Math.min(this.globalBox.offsetWidth,a),i.style.left=a+"px",e.style.width=a+"px",i.style.width=Math.max(this.globalBox.offsetWidth-a,0),this._ecspn&&(this._fake._ecspn=!0),this._fake.init(),this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this),this._fake.objBox.style.overflow="hidden",dhtmlx.$customScroll?this._fake.objBox._custom_scroll_mode="":this._fake.objBox.style.overflowX="scroll",this._fake._srdh=this._srdh||20,this._fake._srnd=this._srnd;var u=this;function f(t){var e=t.wheelDelta/-40;t.wheelDelta===window.undefined&&(e=t.detail),u.objBox.scrollTop+=40*e,t.preventDefault&&t.preventDefault()}function p(t,e){e.style.whiteSpace="";var i=e.nextSibling,n=e.parentNode;t.parentNode.insertBefore(e,t),i?n.insertBefore(t,i):n.appendChild(t);var s=t.style.display;t.style.display=e.style.display,e.style.display=s}function m(e,i,n,s){var o=new Array(t).join(this.delim),l=[];if(2==e)for(var r=0;r<t;r++){var a=i[e-1].cells[i[e-1]._childIndexes?i[e-1]._childIndexes[r]:r];a.rowSpan&&a.rowSpan>1&&(l[a._cellIndex]=a.rowSpan-1,s[e-1].cells[s[e-1]._childIndexes?s[e-1]._childIndexes[r]:r].rowSpan=a.rowSpan,a.rowSpan=1)}for(;e<i.length;e++){this._fake.attachHeader(o,null,n),s=s||this._fake.ftr.childNodes[0].rows;for(var h=t,d=0,c=0;c<h;c++)if(l[c]){if(l[c]=l[c]-1,_isIE||_isOpera){var u=document.createElement("TD");_isFF&&(u.style.display="none"),i[e].insertBefore(u,i[e].cells[0])}d++}else{var f=s[e].cells[c-d],m=i[e].cells[c-(_isIE?0:d)],g=m.rowSpan;if(p(f,m),g>1&&(l[c]=g-1,m.rowSpan=g),s[e].cells[c].colSpan>1){i[e].cells[c].colSpan=s[e].cells[c].colSpan,h-=s[e].cells[c].colSpan-1;for(r=1;r<s[e].cells[c].colSpan;r++)s[e].removeChild(s[e].cells[c+1])}}}}dhtmlxEvent(this._fake.objBox,"mousewheel",f),dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",f),this.hdr.rows.length>2&&m.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows),this.ftr&&(m.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px"),this.saveSizeToCookie&&(this.saveSizeToCookie=function(e,i){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);e||(e=this.entBox.id);for(var n=new Array,s="cellWidthPX",o=0;o<this[s].length;o++)n[o]=o<t?this._fake[s][o]:this[s][o];n=n.join(","),this.setCookie(e,i,0,n);n=(this.initCellWidth||new Array).join(",");return this.setCookie(e,i,1,n),!0},this.loadSizeFromCookie=function(e){if(e||(e=this.entBox.id),i=this._getCookie(e,1)){this.initCellWidth=i.split(",");var i=this._getCookie(e,0),n="cellWidthPX";this.cellWidthType="px";var s=0;if(i&&i.length){i=i.split(",");for(var o=0;o<i.length;o++)o<t?(this._fake[n][o]=i[o],s+=1*i[o]):this[n][o]=i[o]}this._fake.entBox.style.width=s+"px",this._fake.objBox.style.width=s+"px";var l=this.globalBox.childNodes[1];return l.style.left=s-(_isFF,0)+"px",this.ftr&&(this.ftr.style.left=s-(_isFF,0)+"px"),l.style.width=this.globalBox.offsetWidth-s+"px",this.setSizes(),!0}},this._fake.onRSE=this.onRSE),this.setCellTextStyleA=this.setCellTextStyle,this.setCellTextStyle=function(e,i,n){i<t&&this._fake.setCellTextStyle(e,i,n),this.setCellTextStyleA(e,i,n)},this.setRowTextBoldA=this.setRowTextBold,this.setRowTextBold=function(t){this.setRowTextBoldA(t),this._fake.setRowTextBold(t)},this.setRowColorA=this.setRowColor,this.setRowColor=function(t,e){this.setRowColorA(t,e),this._fake.setRowColor(t,e)},this.setRowHiddenA=this.setRowHidden,this.setRowHidden=function(t,e){this.setRowHiddenA(t,e),this._fake.setRowHidden(t,e)},this.setRowTextNormalA=this.setRowTextNormal,this.setRowTextNormal=function(t){this.setRowTextNormalA(t),this._fake.setRowTextNormal(t)},this.getChangedRows=function(t){var e=new Array;function i(t){for(var i=0;i<t.childNodes.length;i++)if(t.childNodes[i].wasChanged)return e[e.length]=t.idd}return this.forEachRow(function(n){var s=this.rowsAr[n],o=this._fake.rowsAr[n];"TR"==s.tagName&&o&&"TR"==o.tagName&&(t&&s._added?e[e.length]=s.idd:i(s)||i(o))}),e.join(this.delim)},this.setRowTextStyleA=this.setRowTextStyle,this.setRowTextStyle=function(t,e){this.setRowTextStyleA(t,e),this._fake.rowsAr[t]&&this._fake.setRowTextStyle(t,e)},this.lockRowA=this.lockRow,this.lockRow=function(t,e){this.lockRowA(t,e),this._fake.lockRow(t,e)},this.getColWidth=function(e){return e<t?parseInt(this._fake.cellWidthPX[e]):parseInt(this.cellWidthPX[e])},this.getColumnLabel=function(e){return this._fake.getColumnLabel.apply(e<t?this._fake:this,arguments)},this.setColWidthA=this._fake.setColWidthA=this.setColWidth,this.setColWidth=function(e,i){(e*=1)<t?this._fake.setColWidthA(e,i):this.setColWidthA(e,i),e+1<=t&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))},this.adjustColumnSizeA=this.adjustColumnSize,this.setColumnLabelA=this.setColumnLabel,this.setColumnLabel=function(e,i,n,s){var o=this;return e<t&&(o=this._fake),this.setColumnLabelA.apply(o,[e,i,n,s])},this.adjustColumnSize=function(e,i){if(!(e<t))return this.adjustColumnSizeA(e,i);_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(e,i),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit()};var g="cells";this._bfs_cells=this[g],this[g]=function(){return arguments[1]<t?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)},this._bfs_isColumnHidden=this.isColumnHidden,this.isColumnHidden=function(){return parseInt(arguments[0])<t?this._fake.isColumnHidden.apply(this._fake,arguments):this._bfs_isColumnHidden.apply(this,arguments)},this._bfs_setColumnHidden=this.setColumnHidden,this.setColumnHidden=function(){return parseInt(arguments[0])<t?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};g="cells2";this._bfs_cells2=this[g],this[g]=function(){return arguments[1]<t?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};g="cells3";this._bfs_cells3=this[g],this[g]=function(e,i){return arguments[1]<t&&this._fake.rowsAr[arguments[0].idd]?this._fake.rowsAr[e.idd]&&0==this._fake.rowsAr[e.idd].childNodes.length?this._bfs_cells3.apply(this,arguments):(arguments[0]=arguments[0].idd,this._fake.cells.apply(this._fake,arguments)):this._bfs_cells3.apply(this,arguments)};g="changeRowId";this._bfs_changeRowId=this[g],this[g]=function(){this._bfs_changeRowId.apply(this,arguments),this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)},this._fake.getRowById=function(t){var e=this.rowsAr[t];if(!e&&this._fake.rowsAr[t]&&(e=this._fake.getRowById(t)),e){if("TR"!=e.tagName){for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==t)return this.render_row(i);if(this._h2)return this.render_row(null,e.idd)}return e}return null},this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(t){return this._fake._updateTGRState(t)}),this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var t=this.grid;t._setRowHoverA.apply(this,arguments);var e=_isIE?event.srcElement:arguments[0].target;(e=t._fake.rowsAr[t.getFirstParentOfType(e,"TD").parentNode.idd])&&t._fake._setRowHoverA.apply(t._fake.obj,[{target:e.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){if(arguments[1])var t=this;else t=this.grid;t._unsetRowHoverA.apply(this,arguments),t._fake._unsetRowHoverA.apply(t._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss)),this._updateTGRState=function(t){t.update&&0!=t.id&&(this.rowsAr[t.id].imgTag&&(this.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),this._fake.rowsAr[t.id]&&this._fake.rowsAr[t.id].imgTag&&(this._fake.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),t.update=!1)},this.copy_row=function(e){var i=e.cloneNode(!0);i._skipInsert=e._skipInsert;var n=t;if(i._attrs={},i._css=e._css,this._ecspn){n=0;for(var s=0;n<i.childNodes.length&&s<t;s+=i.childNodes[n].colSpan||1)n++}for(;i.childNodes.length>n;)i.removeChild(i.childNodes[i.childNodes.length-1]);var o=n;for(s=0;s<o;s++)this.dragAndDropOff&&this.dragger.addDraggableItem(i.childNodes[s],this),i.childNodes[s].style.display=this._fake._hrrar&&this._fake._hrrar[s]?"none":"",i.childNodes[s]._cellIndex=s,i.childNodes[s].combo_value=arguments[0].childNodes[s].combo_value,i.childNodes[s]._clearCell=arguments[0].childNodes[s]._clearCell,i.childNodes[s]._cellType=arguments[0].childNodes[s]._cellType,i.childNodes[s]._brval=arguments[0].childNodes[s]._brval,i.childNodes[s].val=arguments[0].childNodes[s].val,i.childNodes[s]._combo=arguments[0].childNodes[s]._combo,i.childNodes[s]._attrs=arguments[0].childNodes[s]._attrs,i.childNodes[s].chstate=arguments[0].childNodes[s].chstate,e._attrs.style&&(i.childNodes[s].style.cssText+=";"+e._attrs.style),i.childNodes[s].colSpan>1&&(i._childIndexes=arguments[0]._childIndexes);if(this._h2&&this._treeC<t){var l=this._h2.get[arguments[0].idd];i.imgTag=i.childNodes[this._treeC].childNodes[0].childNodes[l.level],i.valTag=i.childNodes[this._treeC].childNodes[0].childNodes[l.level+2]}return i.idd=e.idd,i.grid=this._fake,i};g="_insertRowAt";this._bfs_insertRowAt=this[g],this[g]=function(){var t=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var e=this._fake._insertRowAt.apply(this._fake,arguments);return t._fhd&&(e.parentNode.removeChild(e),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(e)),t._fhd=!1),t},this._bfs_setSizes=this.setSizes,this.setSizes=function(){if(!this._notresize){this._bfs_setSizes(this,arguments),this.sync_headers(),this.sync_scroll()&&this._ahgr&&this.setSizes();var t=this.dontSetSizes?this.entBox.offsetHeight+"px":this.entBox.style.height;this._fake.entBox.style.height=t,this._fake.objBox.style.height=this.objBox.style.height,this._fake.hdrBox.style.height=this.hdrBox.style.height,this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake.setColumnSizes(this._fake.entBox.clientWidth),this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width),this.dontSetSizes||(this.globalBox.style.height=t)}},this.sync_scroll=this._fake.sync_scroll=function(t){var e=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!t)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden",this._fake.objBox.style.overflowX="hidden"}else dhtmlx.$customScroll||(this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll");return e!=this.objBox.style.overflowX},this.sync_headers=this._fake.sync_headers=function(){if(!this.noHeader&&this._fake.hdr.scrollHeight!=this.hdr.offsetHeight&&!this.noHeaderResize){for(var e=1;e<this.hdr.rows.length;e++){for(var i=t;!this.hdr.rows[e].childNodes[i];)i--;var n=Math.min(this.hdr.rows[e].childNodes[i].scrollHeight+2,this.hdr.rows[e].scrollHeight),s=this._fake.hdr.rows[e].scrollHeight;if(n!=s&&(this._fake.hdr.rows[e].style.height=this.hdr.rows[e].style.height=Math.max(n,s)+"px"),window._KHTMLrv){for(var o=0;this._fake._hrrar[o];)o++;this._fake.hdr.rows[e].childNodes[o].style.height=this.hdr.rows[e].childNodes[i].style.height=Math.max(n,s)+"px"}}this._fake.sync_headers}},this._fake._bfs_setSizes=this._fake.setSizes,this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};g="_doOnScroll";this._bfs__doOnScroll=this[g],this[g]=function(){this._bfs__doOnScroll.apply(this,arguments),this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake._doOnScroll.apply(this._fake,arguments)};g="selectAll";this._bfs__selectAll=this[g],this[g]=function(){this._bfs__selectAll.apply(this,arguments),this._bfs__selectAll.apply(this._fake,arguments)};g="doClick";function _(t,e,i,n){for(var s=n.shiftKey?-1:1,o=n.shiftKey?-1:i._cCount,l=!1,r=t+s;r!=o;r+=s)if(!1!==(l=i.smartTabOrder?!i.cells2(e,r).isDisabled()&&r:r)){var a=!i._key_events.k_other;return i.selectCell(e,l,!1,!1,a,!0),n.cancelBubble=!0,n.preventDefault&&n.preventDefault(),!0}}this._bfs_doClick=this[g],this[g]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var e=arguments[0]._cellIndex>=t;if(!arguments[0].parentNode.idd)return;e||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),arguments[0]=this._fake.cells(arguments[0].parentNode.idd,e?0:arguments[0]._cellIndex).cell,e&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),e?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),e?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop}},this._fake._bfs_doClick=this._fake[g],this._fake[g]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var e=arguments[0]._cellIndex<t;if(!arguments[0].parentNode.idd)return;arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,e?t:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),e&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop)}},this.clearSelectionA=this.clearSelection,this.clearSelection=function(t){t&&this._fake.clearSelection(),this.clearSelectionA()},this.moveRowUpA=this.moveRowUp,this.moveRowUp=function(t){this._h2||this._fake.moveRowUp(t),this.moveRowUpA(t),this._h2&&this._fake._h2syncModel()},this.moveRowDownA=this.moveRowDown,this.moveRowDown=function(t){this._h2||this._fake.moveRowDown(t),this.moveRowDownA(t),this._h2&&this._fake._h2syncModel()},this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)},this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)},this.getSortingStateA=this.getSortingState,this.getSortingState=function(){var t=this.getSortingStateA();return 0!=t.length?t:this._fake.getSortingState()},this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState,this.setSortImgState=function(e,i,n,s){this.setSortImgStateA(e,i,n,s),1*i<t?(this._fake.setSortImgStateA(e,i,n,s),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)},this._fake.doColResizeA=this._fake.doColResize,this._fake.doColResize=function(e,i,n,s,o){var l=-1,r=0;return arguments[1]._cellIndex==t-1?(l=this._initalSplR+(e.clientX-s),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||e.clientX-s>0)?(arguments[3]=this._initalSplF||arguments[3],r=this.doColResizeA.apply(this,arguments)):r=this.doColResizeA.apply(this,arguments)):(this.obj.offsetWidth<this.entBox.offsetWidth&&(l=this.obj.offsetWidth),r=this.doColResizeA.apply(this,arguments)),!1!==r&&(this._correctSplit(l),this.resized=this._fake.resized=1),r},this._fake.changeCursorState=function(t){var e=t.target||t.srcElement;if("TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD")),"TD"!=e.tagName||!this._drsclmn||this._drsclmn[e._cellIndex]){var i=(t.layerX||0)+(_isIE||"DIV"!=t.target.tagName?0:e.offsetLeft),n=parseInt(this.getPosition(e,this.hdrBox));e.offsetWidth-(t.offsetX||-1*(n-i))<(_isOpera?20:10)||this.entBox.offsetWidth-(t.offsetX?t.offsetX+e.offsetLeft:i)+this.objBox.scrollLeft-0<(_isOpera?20:10)?e.style.cursor="E-resize":e.style.cursor="default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this._fake.startColResizeA=this._fake.startColResize,this._fake.startColResize=function(t){var e=this.startColResizeA(t);if(this._initalSplR=this.entBox.offsetWidth,this._initalSplF=null,this.entBox.onmousemove){var i=this.entBox.parentNode;if(i._aggrid)return e;i._aggrid=i.grid,i.grid=this,this.entBox.parentNode.onmousemove=this.entBox.onmousemove,this.entBox.onmousemove=null}return e},this._fake.stopColResizeA=this._fake.stopColResize,this._fake.stopColResize=function(t){if(this.entBox.parentNode.onmousemove){var e=this.entBox.parentNode;e.grid=e._aggrid,e._aggrid=null,this.entBox.onmousemove=this.entBox.parentNode.onmousemove,this.entBox.parentNode.onmousemove=null,this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(t)},this.doKeyA=this.doKey,this._fake.doKeyA=this._fake.doKey,this._fake.doKey=this.doKey=function(t){if(!t)return!0;if(this._htkebl)return!0;if((t.target||t.srcElement).value!==window.undefined){var e=t.target||t.srcElement;if(!e.parentNode||-1==e.parentNode.className.indexOf("editable"))return!0}switch(t.keyCode){case 9:var i=this._realfake?this._fake:this;if(!i.callEvent("onTab",[!0]))return!0;if(this.cell){for(var n=this.cell._cellIndex,s=i.getRowIndex(this.cell.parentNode.idd);!_(n,s,i,t);){if((s+=t.shiftKey?-1:1)<0||s>=i.rowsBuffer.length)return;n=t.shiftKey?i._cCount:-1}return}}return this.doKeyA(t)},this.editCellA=this.editCell,this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()},this.deleteRowA=this.deleteRow,this.deleteRow=function(t,e){if(!1===this.deleteRowA(t,e))return!1;this._fake.rowsAr[t]&&this._fake.deleteRow(t)},this.clearAllA=this.clearAll,this.clearAll=function(){this.clearAllA(),this._fake.clearAll()},this.editStopA=this.editStop,this.editStop=function(t){this._fake.editor?this._fake.editStop(t):this.editStopA(t)},this.attachEvent("onAfterSorting",function(e,i,n){e>=t&&this._fake.setSortImgState(!1)}),this._fake.sortField=function(t,e,i){if(this._fake.sortField.call(this._fake,t,e,this._fake.hdr.rows[0].cells[t]),"na"!=this.fldSort[t]&&this._fake.fldSorted){var n=this._fake.getSortingState()[1];this._fake.setSortImgState(!1),this.setSortImgState(!0,arguments[0],n)}},this.sortTreeRowsA=this.sortTreeRows,this._fake.sortTreeRowsA=this._fake.sortTreeRows,this.sortTreeRows=this._fake.sortTreeRows=function(t,e,i,n){if(this._realfake)return this._fake.sortTreeRows(t,e,i,n);this.sortTreeRowsA(t,e,i,n),this._fake._h2syncModel(),this._fake.setSortImgStateA(!1),this._fake.fldSorted=null},this._fake._fillers=[],this._fake.rowsBuffer=this.rowsBuffer,this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer}),this._add_filler_s=this._add_filler,this._add_filler=function(t,e,i,n){var s;(this._fake._fillers||(this._fake._fillers=[]),this._realfake||!n)&&(i&&i.idd?s=this._fake.rowsAr[i.idd]:i&&i.nextSibling?((s={}).nextSibling=this._fake.rowsAr[i.nextSibling.idd],s.parentNode=s.nextSibling.parentNode):this._fake._fillers.length&&(s=this._fake._fillers[this._fake._fillers.length-1][2]),this._fake._fillers.push(this._fake._add_filler(t,e,s)));return this._add_filler_s.apply(this,arguments)},this._add_from_buffer_s=this._add_from_buffer,this._add_from_buffer=function(){var t=this._add_from_buffer_s.apply(this,arguments);return-1!=t&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)),t},this._fake.render_row=function(t){var e=this._fake.render_row(t);return-1==e?-1:e?this.rowsAr[e.idd]=this.rowsAr[e.idd]||this._fake.copy_row(e):null},this._reset_view_s=this._reset_view,this._reset_view=function(){this._fake._reset_view(!0),this._fake._fillers=[],this._reset_view_s()},this.moveColumn_s=this.moveColumn,this.moveColumn=function(e,i){if(i>=t)return this.moveColumn_s(e,i)},this.attachEvent("onCellChanged",function(e,i,n){if(this._split_event&&i<t&&this.rowsAr[e]){var s=this._fake.rowsAr[e];if(!s)return;s=s._childIndexes?s.childNodes[s._childIndexes[i]]:s.childNodes[i];var o=this.rowsAr[e].childNodes[i];o._treeCell&&o.firstChild.lastChild?o.firstChild.lastChild.innerHTML=n:o.innerHTML=s.innerHTML,o._clearCell=!1,o.combo_value=s.combo_value,o.chstate=s.chstate}}),this._fake.combos=this.combos,this.setSizes(),this.rowsBuffer[0]&&this._reset_view(),this.attachEvent("onXLE",function(){this._fake._correctSplit()}),this._fake._correctSplit()},dhtmlXGridObject.prototype._correctSplit=function(t){if(t=t||this.obj.scrollWidth-this.objBox.scrollLeft,(t=Math.min(this.globalBox.offsetWidth,t))>-1){this.entBox.style.width=t+"px",this.objBox.style.width=t+"px";var e=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._fake.entBox.style.left=t+"px",this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-t-(this.quirks?0:2)*e)+"px",this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width),_isIE){var i=_isIE&&!window.xmlHttpRequest;e=this.globalBox.offsetWidth-this.globalBox.clientWidth;this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(i?e:0)-t)+"px"}}},dhtmlXGridObject.prototype._correctRowHeight=function(t,e){if(this.rowsAr[t]&&this._fake.rowsAr[t]){var i=this.rowsAr[t].offsetHeight,n=this._fake.rowsAr[t].offsetHeight,s=Math.max(i,n)-(this.rowsAr[t].delta_fix||0);if(s&&(this.rowsAr[t].style.height=this._fake.rowsAr[t].style.height=Math.round(s+1)+"px",this.rowsAr[t].delta_fix=1,window._KHTMLrv)){for(var o,l=this._fake._cCount;!o&&l>=0;)o=this.rowsAr[t].childNodes[l],l-=1;var r=this._fake.rowsAr[t].firstChild;o&&r&&(o.style.height=r.style.height=s+"px",o.style.boxSizing=r.style.boxSizing="border-box")}}},dhtmlXGridObject.prototype.enableAutoSizeSaving=function(t,e){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(t,e)})},dhtmlXGridObject.prototype.saveOpenStates=function(t,e){t||(t=this.entBox.id);var i=[];this._h2.forEachChild(0,function(t){"minus"==t.state&&i.push(t.id)});var n="gridOpen"+(t||"")+"="+i.join("|")+(e?"; "+e:"");document.cookie=n},dhtmlXGridObject.prototype.loadOpenStates=function(t,e){var i=this.getCookie(t,"gridOpen");if(i){i=i.split("|");for(var n=0;n<i.length;n++){var s=this.getParentId(i[n]);this.getOpenState(s)&&this.openItem(i[n])}}},dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(t,e){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(t,e)})},dhtmlXGridObject.prototype.enableSortingSaving=function(t,e){this.attachEvent("onBeforeSorting",function(){var i=this;return window.setTimeout(function(){i.saveSortingToCookie(t,e)},1),!0})},dhtmlXGridObject.prototype.enableOrderSaving=function(t,e){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(t,e),this.saveSizeToCookie(t,e)})},dhtmlXGridObject.prototype.enableAutoSaving=function(t,e){this.enableOrderSaving(t,e),this.enableAutoSizeSaving(t,e),this.enableSortingSaving(t,e)},dhtmlXGridObject.prototype.saveSizeToCookie=function(t,e){if("px"==this.cellWidthType)var i=this.cellWidthPX;else i=this.cellWidthPC;var n=(this.initCellWidth||[]).join(",");if(this._hrrar)for(var s=0;s<this._hrrar.length;s++)this._hrrar[s]&&(i[s]="");this.setCookie(t,e,0,i.join(",")),this.setCookie(t,e,1,n)},dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(t,e){var i=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar)for(var n=0;n<this._fake._cCount;n++)i[n]=this._fake._hrrar[n]?"1":"";this.setCookie(t,e,4,i.join(",").replace(/display:none;/g,"1"))},dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(t){for(var e=(this._getCookie(t,4)||"").split(","),i=0;i<this._cCount;i++)this.setColumnHidden(i,!!e[i])},dhtmlXGridObject.prototype.saveSortingToCookie=function(t,e){this.setCookie(t,e,2,(this.getSortingState()||[]).join(","))},dhtmlXGridObject.prototype.loadSortingFromCookie=function(t){var e=this._getCookie(t,2);(e=(e||"").split(",")).length>1&&e[0]<this._cCount&&(this.sortRows(e[0],null,e[1]),this.setSortImgState(!0,e[0],e[1]))},dhtmlXGridObject.prototype.saveOrderToCookie=function(t,e){if(!this._c_order){this._c_order=[];for(var i=this._cCount,n=0;n<i;n++)this._c_order[n]=n}this.setCookie(t,e,3,(this._c_order||[]).slice(0,this._cCount).join(",")),this.saveSortingToCookie(t,e)},dhtmlXGridObject.prototype.loadOrderFromCookie=function(t){var e=this._getCookie(t,3);if((e=(e||"").split(",")).length>1&&e.length<=this._cCount)for(var i=0;i<e.length;i++)if(!this._c_order&&e[i]!=i||this._c_order&&e[i]!=this._c_order[i]){var n=e[i];if(this._c_order)for(var s=0;s<this._c_order.length;s++)if(this._c_order[s]==e[i]){n=s;break}this.moveColumn(1*n,i)}},dhtmlXGridObject.prototype.loadSizeFromCookie=function(t){var e;if((e=this._getCookie(t,1))&&(this.initCellWidth=e.split(",")),(e=this._getCookie(t,0))&&e.length){if(e=e.split(","),!this._fake&&this._hrrar)for(var i=0;i<e.length;i++)this._hrrar[i]&&(e[i]=0);"px"==this.cellWidthType?this.cellWidthPX=e:this.cellWidthPC=e}for(i=0;i<e.length;i++)""===e[i]&&(e[i]=this.initCellWidth[i],this.setColumnHidden(i,!0));return this.setSizes(),!0},dhtmlXGridObject.prototype.clearConfigCookie=function(t){t||(t=this.entBox.id);var e="gridSettings"+t+"=||||";document.cookie=e},dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie,dhtmlXGridObject.prototype.setCookie=function(t,e,i,n){t||(t=this.entBox.id);var s=this.getCookie(t);(s=(s||"||||").split("|"))[i]=n;var o="gridSettings"+t+"="+s.join("|").replace(/,/g,"-")+(e?"; "+e:"");document.cookie=o},dhtmlXGridObject.prototype.getCookie=function(t,e){t||(t=this.entBox.id);var i=(t=(e||"gridSettings")+t)+"=";if(document.cookie.length>0){var n=document.cookie.indexOf(i);if(-1!=n){n+=i.length;var s=document.cookie.indexOf(";",n);return-1==s&&(s=document.cookie.length),document.cookie.substring(n,s)}}},dhtmlXGridObject.prototype._getCookie=function(t,e){return(this.getCookie(t)||"||||").replace(/-/g,",").split("|")[e]},dhtmlXGridObject.prototype.enableUndoRedo=function(){var t=this;this.attachEvent("onEditCell",function(){return t._onEditUndoRedo.apply(t,arguments)});this.attachEvent("onCheckbox",function(e,i,n){return t._onEditUndoRedo.apply(t,[2,e,i,n?1:0,n?0:1])}),this._IsUndoRedoEnabled=!0,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype._onEditUndoRedo=function(t,e,i,n,s){if(this._IsUndoRedoEnabled&&2==t&&s!=n){-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&this._UndoRedoData.length>0&&(this._UndoRedoData=[]);var o={old_value:s,new_value:n,row_id:e,cell_index:i};this._UndoRedoData.push(o),this._UndoRedoPos++}return!0},dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var t=this._UndoRedoData[this._UndoRedoPos--],e=this.cells(t.row_id,t.cell_index);"tree"==this.getColType(t.cell_index)?e.setLabel(t.old_value):e.setValue(t.old_value),this.callEvent("onUndo",[t.row_id])},dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var t=this._UndoRedoData[++this._UndoRedoPos];this.cells(t.row_id,t.cell_index).setValue(t.new_value),this.callEvent("onUndo",[t.row_id])},dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)},dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)},dhtmlXGridObject.prototype.enableAccessKeyMap=function(){this._select_ifpossible=function(){this.editor&&this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()},this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this._key_events.k9_0_1.call(this)},k13_0_0:function(){this._key_events.k9_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var t=this._getNextCell(null,1);t&&(this.pagingOn&&this.showRow(t.parentNode.idd),this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0),this._select_ifpossible()},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;var t=this._getNextCell(null,-1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0),this._select_ifpossible()},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var t=this.cells4(this.cell);if(!t.changeState||!1===t.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!1,!1,!0),this._select_ifpossible()},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!1,!1,!0),this._select_ifpossible()},k38_1_0:function(){this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k40_1_0:function(){this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k38_0_1:function(){var t=this.getRowIndex(this.row.idd),e=this._nextRow(t,-1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k40_0_1:function(){var t=this.getRowIndex(this.row.idd),e=this._nextRow(t,1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k38_1_1:function(){for(var t=this.getRowIndex(this.row.idd);t>=0;t--)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!1,!0)},k40_1_1:function(){for(var t=this.getRowIndex(this.row.idd)+1;t<this.rowsCol.length;t++)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!1,!0)},k40_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var t=t=this.getRowIndex(this.row.idd)+1;if(this.rowsBuffer[t]){var e=this._nextRow(t-1,1);this.pagingOn&&e&&this.showRow(e.idd),this._Opera_stop=0,this.selectCell(e,this.cell._cellIndex,!0,!1,!0)}else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}this._still_active=!0},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0,!1,!0),this._select_ifpossible()},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0,!1,!0),this._select_ifpossible()},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var t=t=this.getRowIndex(this.row.idd)+1;if(-1!=t){var e=this._nextRow(t-1,-1);this._Opera_stop=0,this.pagingOn&&e&&this.showRow(e.idd),this.selectCell(e,this.cell._cellIndex,!0,!1,!0)}else this._key_events.k33_0_0.apply(this,[])}this._still_active=!0}}},dhtmlXGridObject.prototype.enableExcelKeyMap=function(){this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this.editStop(),this._key_events.k38_0_0.call(this)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0,this._key_events.k40_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;if(!(this.cell&&this.cell._cellIndex+1>=this._cCount)){var t=this._getNextCell(null,1);t&&this.row==t.parentNode&&(this.selectCell(t.parentNode,t._cellIndex,!0),this._still_active=!0)}},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;if(!this.cell||0!=this.cell._cellIndex){var t=this._getNextCell(null,-1);t&&this.row==t.parentNode&&(this.selectCell(t.parentNode,t._cellIndex,!0),this._still_active=!0)}},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var t=this.cells4(this.cell);if(!t.changeState||!1===t.changeState())return!1},k27_0_0:function(){this.editStop(!0),this._still_active=!0},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!0)},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!0)},k38_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0)},k40_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0)},k38_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var t=this.row.rowIndex,e=this._nextRow(t-1,-1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!0)},k40_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var t=this.row.rowIndex,e=this._nextRow(t-1,1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!0)},k38_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var t=this.row.rowIndex-1;t>=0;t--)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!0)},k40_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var t=this.row.rowIndex;t<this.rowsCol.length;t++)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!0)},k40_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(this.editor)return!1;var e=Math.max(t._r_select||0,this.getRowIndex(this.row.idd)),i=this._nextRow(e,1);if(i)t._r_select=null,this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&t.showRow(i.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0)},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(this.editor)return!1;if(!this.row.idd)return;var e=this.getRowIndex(this.row.idd)+1;if(-1==e||this.pagingOn&&1==e)this._key_events.k33_0_0.apply(this,[]);else{var i=this._nextRow(e-1,-1);this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&i&&t.showRow(i.idd)}}},k_other:function(t){if(this.editor)return!1;if(!t.ctrlKey&&t.keyCode>=40&&(t.keyCode<91||t.keyCode>95&&t.keyCode<111||t.keyCode>187)&&this.cell){var e=this.cells4(this.cell);if(e.isDisabled())return!1;var i=e.getValue();!1!==e.editable&&e.setValue(""),this.editCell(),this.editor?(this.editor.val=i,this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()):e.setValue(i)}}}},eXcell_time.prototype=new eXcell_ed,eXcell_sub_row.prototype=new eXcell,eXcell_sub_row_ajax.prototype=new eXcell_sub_row,eXcell_sub_row_grid.prototype=new eXcell_sub_row,dhtmlXGridObject.prototype._expandMonolite=function(t,e,i){var n=this.parentNode,s=n.parentNode,o=s.grid;(t||window.event)&&(i||s._expanded||o.editStop(),(t||event).cancelBubble=!0);var l=o.getUserData(s.idd,"__sub_row");if(o._sub_row_editor||(o._sub_row_editor=new eXcell_sub_row(n)),l){if(s._expanded&&!e){o._sub_row_editor._setState("plus.gif",n),n._previous_content=s._expanded,o.objBox.removeChild(s._expanded),s._expanded=!1,s.style.height=(s.oldHeight||20)+"px",n.style.height=(s.oldHeight||20)+"px",o._fake&&(o._fake.rowsAr[s.idd].style.height=(s.oldHeight||20)+"px",o._fake.rowsAr[s.idd].firstChild.style.height=(s.oldHeight||20)+"px");for(var r=0;r<s.cells.length;r++)s.cells[r].style.verticalAlign="middle";delete o._flow[s.idd],o._correctMonolite(),s._expanded.ctrl=null}else if(!s._expanded&&!i){var a;if(o._sub_row_editor._setState("minus.gif",n),s.oldHeight=n.offsetHeight-4,n._previous_content)(a=n._previous_content).ctrl=n,o.objBox.appendChild(a),o._detectHeight(a,n,parseInt(a.style.height));else(a=document.createElement("DIV")).ctrl=n,n._sub_row_type?o._sub_row_render[n._sub_row_type](o,a,n,l):a.innerHTML=l,a.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;",a.className="dhx_sub_row",o.objBox.appendChild(a),o._detectHeight(a,n);o._flow||(o.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite():this._correctMonolite()}),o.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),o.attachEvent("onAfterCMove",function(){this._correctMonolite(!0)}),o.attachEvent("onDrop",function(){this._correctMonolite(!0)}),o.attachEvent("onBeforePageChanged",function(){return this._collapsMonolite(),!0}),o.attachEvent("onGroupStateChanged",function(){return this._correctMonolite(),!0}),o.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),o.attachEvent("onUnGroup",function(){this._collapsMonolite()}),o.attachEvent("onPageChanged",function(){this._collapsMonolite()}),o.attachEvent("onXLE",function(){this._collapsMonolite()}),o.attachEvent("onClearAll",function(){for(var t in this._flow)this._flow[t]&&this._flow[t].parentNode&&this._flow[t].parentNode.removeChild(this._flow[t]);this._flow=[]}),o.attachEvent("onEditCell",function(t,e,i){return 2!==t&&this._flow[e]&&"ch"!=this.cellType[i]&&"ra"!=this.cellType[i]&&this._expandMonolite.apply(this._flow[e].ctrl.firstChild,[0,!1,!0]),!0}),o.attachEvent("onCellChanged",function(t,e){this._flow[t]&&(this.cells(t,e).cell.style.verticalAlign="top")}),o._flow=[]),o._flow[s.idd]=a,o._correctMonolite();o._srdh;o.multiLine&&0;for(r=0;r<s.cells.length;r++)s.cells[r].style.verticalAlign="top";if(o._fake){var h=o._fake.rowsAr[s.idd];for(r=0;r<h.cells.length;r++)h.cells[r].style.verticalAlign="top"}s._expanded=a}o._ahgr&&o.setSizes(),o.parentGrid&&o.callEvent("onGridReconstructed",[]),o.callEvent("onSubRowOpen",[s.idd,!!s._expanded])}},dhtmlXGridObject.prototype._sub_row_render={ajax:function(that,d,td,c){d.innerHTML="Loading...",dhx4.ajax.get(c,function(xml){d.innerHTML=xml.xmlDoc.responseText;var z=xml.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g);if(z)for(var i=0;i<z.length;i++)eval(z[i].replace(/<([\/]{0,1})s[^>]*>/g,""));that._detectHeight(d,td),that._correctMonolite(),that.setUserData(td.parentNode.idd,"__sub_row",xml.xmlDoc.responseText),td._sub_row_type=null,that._ahgr&&that.setSizes(),that.callEvent("onSubAjaxLoad",[td.parentNode.idd,xml.xmlDoc.responseText])})},grid:function(t,e,i,n){i._sub_grid=new dhtmlXGridObject(e),t.skin_name&&i._sub_grid.setSkin(t.skin_name),i._sub_grid.parentGrid=t,i._sub_grid.imgURL=t.imgURL,i._sub_grid.iconURL=t.iconURL,i._sub_grid.enableAutoHeight(!0),i._sub_grid._delta_x=i._sub_grid._delta_y=null,i._sub_grid.attachEvent("onGridReconstructed",function(){t._detectHeight(e,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0)),t._correctMonolite(),this.setSizes(),t.parentGrid&&t.callEvent("onGridReconstructed",[])}),t.callEvent("onSubGridCreated",[i._sub_grid,i.parentNode.idd,i._cellIndex,n])?i._sub_grid.load(n,function(){t._detectHeight(e,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(i._sub_grid.ftr?i._sub_grid.ftr.offsetHeight:0)),i._sub_grid.objBox.style.overflow="hidden",t._correctMonolite(),i._sub_row_type=null,t.callEvent("onSubGridLoaded",[i._sub_grid,i.parentNode.idd,i._cellIndex,n])&&t._ahgr&&t.setSizes()}):(i._sub_grid.objBox.style.overflow="hidden",i._sub_row_type=null)}},dhtmlXGridObject.prototype._detectHeight=function(t,e,i){var n=e.offsetLeft+e.offsetWidth;t.style.left=n+"px",t.style.width=Math.max(0,e.parentNode.offsetWidth-n-4)+"px";i=i||t.scrollHeight;t.style.overflow="hidden",t.style.height=i+"px";var s=e.parentNode;if(e.parentNode.style.height=(s.oldHeight||20)+1*i+"px",e.style.height=(s.oldHeight||20)+1*i+"px",this._fake){var o=this._fake.rowsAr[e.parentNode.idd];o.style.height=(s.oldHeight||20)+1*i+"px",o.firstChild.style.height=(s.oldHeight||20)+1*i+"px"}},dhtmlXGridObject.prototype._correctMonolite=function(t){if(!this._in_correction){for(var e in this._in_correction=!0,this._flow)if(this._flow[e]&&"DIV"==this._flow[e].tagName)if(this.rowsAr[e]){if("none"==this.rowsAr[e].style.display){this.cells4(this._flow[e].ctrl).close();continue}if(this._flow[e].style.top=this.rowsAr[e].offsetTop+(this.rowsAr[e].oldHeight||20)+"px",t){var i=this._flow[e].ctrl.offsetLeft+this._flow[e].ctrl.offsetWidth;this._flow[e].style.left=i+"px",this._flow[e].style.width=this.rowsAr[e].offsetWidth-i-4+"px"}}else this._flow[e].ctrl=null,this.objBox.removeChild(this._flow[e]),delete this._flow[e];this._in_correction=!1}},dhtmlXGridObject.prototype._collapsMonolite=function(){for(var t in this._flow)this._flow[t]&&"DIV"==this._flow[t].tagName&&this.rowsAr[t]&&this.cells4(this._flow[t].ctrl).close()},eXcell_ra_str.prototype=new eXcell_ch,eXcell_ra_str.prototype.setValue=function(t){if(this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t){if(this.grid.rowsAr[this.cell.parentNode.idd])for(var e=0;e<this.grid._cCount;e++)if(e!==this.cell._cellIndex){var i=this.grid.cells(this.cell.parentNode.idd,e);if("ra_str"!=(i.cell._cellType||this.grid.cellType[i.cell._cellIndex]))continue;i.getValue()&&i.setValue("0")}t="1",this.cell.chstate="1"}else t="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+t+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)},dhx4.attachEvent("onGridCreated",function(t){window.dhx_globalImgPath||(window.dhx_globalImgPath=t.imgURL),t._col_combos=[];for(var e=0;e<t._cCount;e++)0==t.cellType[e].indexOf("combo")&&(t._col_combos[e]=eXcell_combo.prototype.initCombo.call({grid:t},e));t._loading_handler_set||(t._loading_handler_set=t.attachEvent("onXLE",function(t,e,i,n){eXcell_combo.prototype.fillColumnCombos(this,n),this.detachEvent(this._loading_handler_set),this._loading_handler_set=null}))}),eXcell_combo.prototype=new eXcell,eXcell_combo_v=function(t){var e=new eXcell_combo(t);return e._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class='dhxgrid_combo_icon'/>",e},eXcell_combo.prototype.initCombo=function(t){var e=document.createElement("DIV");e.className="dhxcombo_in_grid_parent";var i=new dhtmlXCombo(e,"combo",0,this.grid.defVal[arguments.length?t:this.cell._cellIndex]);this.grid.defVal[arguments.length?t:this.cell._cellIndex]="";var n=this.grid;return i.DOMelem.onmousedown=i.DOMelem.onclick=function(t){(t=t||event).cancelBubble=!0},i.DOMelem.onselectstart=function(t){return(t=t||event).cancelBubble=!0,!0},i.attachEvent("onKeyPressed",function(t){13!=t&&27!=t||(n.editStop(),n._fake&&n._fake.editStop())}),i},eXcell_combo.prototype.fillColumnCombos=function(t,e){if(e){var i=dhx4.ajax.xmltop("rows",e,-1);if(i&&"DIV"!==i.tagName){t.combo_columns=t.combo_columns||[],columns=dhx4.ajax.xpath("//column",i);for(var n=0;n<columns.length;n++)0==(columns[n].getAttribute("type")||"").indexOf("combo")&&(t.combo_columns[t.combo_columns.length]=n,this.setComboOptions(t._col_combos[n],columns[n],t,n))}}},eXcell_combo.prototype.setComboCValue=function(t,e){if(""!=this._combo_pre){this.cell.offsetHeight&&this.cell.offsetHeight;t="<div style='width:100%;position:relative;height:100%;overflow:hidden;'>"+this._combo_pre+"<span>"+t+"</span></div>"}arguments.length>1?this.setCValue(t,e):this.setCValue(t)},eXcell_combo.prototype.setComboOptions=function(t,e,i,n,s){if(window.dhx4.s2b(e.getAttribute("xmlcontent"))&&!e.getAttribute("source")){options=e.childNodes;for(var o=[],l=0;l<options.length;l++)if("option"==options[l].tagName){var r=options[l].firstChild?options[l].firstChild.data:"";o[o.length]=[options[l].getAttribute("value"),r,options[l].getAttribute("css")||""]}if(t.addOption(o),4==arguments.length)i.forEachRowA(function(e){var s=i.cells(e,n);s.cell._brval||s.cell._cellType||s.cell._cellIndex!=n||(""==s.cell.combo_value?s.setComboCValue("&nbsp;",""):t.getOption(s.cell.combo_value)?s.setComboCValue(t.getOption(s.cell.combo_value).text,s.cell.combo_value):s.setComboCValue(s.cell.combo_value))});else{var a=this.cell?this:i.cells(s,n);e.getAttribute("text")?""==e.getAttribute("text")._dhx_trim()?a.setComboCValue("&nbsp;",""):a.setComboCValue(e.getAttribute("text")):a.cell.combo_value&&""!=a.cell.combo_value._dhx_trim()?t.getOption(a.cell.combo_value)?a.setComboCValue(t.getOption(a.cell.combo_value).text,a.cell.combo_value):a.setComboCValue(a.cell.combo_value):a.setComboCValue("&nbsp;","")}}if(e.getAttribute("source"))if(e.getAttribute("auto")&&window.dhx4.s2b(e.getAttribute("auto"))){if(e.getAttribute("xmlcontent")){a=this.cell?this:i.cells(s,n);e.getAttribute("text")&&a.setComboCValue(e.getAttribute("text"))}else i.forEachRowA(function(t){var e=i.cells(t,n);if(!e.cell._brval&&!e.cell._cellType){var s=e.cell.combo_value.toString();if(-1!=s.indexOf("^")){var o=s.split("^");e.cell.combo_value=o[0],e.setComboCValue(o[1])}}});t.enableFilteringMode(!0,e.getAttribute("source"),window.dhx4.s2b(e.getAttribute("cache")||!0),window.dhx4.s2b(e.getAttribute("sub")||!1))}else{var h=arguments.length;t.load(e.getAttribute("source"),function(){if(4==h)i.forEachRow(function(e){var s=i.cells(e,n);s.cell._brval||s.cell._cellType||(t.getOption(s.cell.combo_value)?s.setComboCValue(t.getOption(s.cell.combo_value).text,s.cell.combo_value):""==(s.cell.combo_value||"").toString()._dhx_trim()?(s.setComboCValue("&nbsp;",""),s.cell._clearCell=!0):s.setComboCValue(s.cell.combo_value))});else{var e=i.cells(s,n);t.getOption(e.cell.combo_value)?e.setComboCValue(t.getOption(e.cell.combo_value).text,e.cell.combo_value):e.setComboCValue(e.cell.combo_value)}})}e.getAttribute("auto")&&window.dhx4.s2b(e.getAttribute("auto"))||(e.getAttribute("editable")&&!window.dhx4.s2b(e.getAttribute("editable"))&&t.readonly(!0),e.getAttribute("filter")&&window.dhx4.s2b(e.getAttribute("filter"))&&t.enableFilteringMode(!0))},eXcell_combo.prototype.getCellCombo=function(){return this.cell._brval?this.cell._brval:(this.cell._brval=this.initCombo(),this.cell._brval)},eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())},dhtmlXGridObject.prototype.getColumnCombo=function(t){return this._col_combos&&this._col_combos[t]?this._col_combos[t]:(this._col_combos||(this._col_combos=[]),this._col_combos[t]=eXcell_combo.prototype.initCombo.call({grid:this},t),this._col_combos[t])},dhtmlXGridObject.prototype.refreshComboColumn=function(t){this.forEachRow(function(e){this.cells(e,t).refreshCell&&this.cells(e,t).refreshCell()})},eXcell_clist.prototype=new eXcell,eXcell_clist.prototype.setValue=function(t){if("object"==typeof t){var e=dhx4.ajax.xpath("./option",t);e.length&&(this.cell._combo=[]);for(var i=0;i<e.length;i++)this.cell._combo.push(e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""===t||t===this.undefined?(this.setCTxtValue(" ",t),this.cell._clearCell=!0):(t=t.replace(/,[ ]*/g,", "),this.setCTxtValue(t),this.cell._clearCell=!1)},dhtmlXGridObject.prototype.registerCList=function(t,e){this.clists||(this.clists=new Array),"object"!=typeof e&&(e=e.split(",")),this.clists[t]=e},eXcell_calck.prototype=new eXcell,eXcell_calck.prototype.setValue=function(t){t&&""!=t.toString()._dhx_trim()||(t="0"),this.setCValue(this.grid._aplNF(t,this.cell._cellIndex),t)},window.dhtmlx||(window.dhtmlx={}),function(){var t=null;function e(e,i){var s=e.callback;n(!1),e.box.parentNode.removeChild(e.box),t=e.box=null,s&&s(i)}function i(i){if(t){var n=(i=i||event).which||event.keyCode;return dhtmlx.message.keyboard&&(13!=n&&32!=n||e(t,!0),27==n&&e(t,!1)),i.preventDefault&&i.preventDefault(),!(i.cancelBubble=!0)}}function n(t){n.cover||(n.cover=document.createElement("DIV"),n.cover.onkeydown=i,n.cover.className="dhx_modal_cover",document.body.appendChild(n.cover));document.body.scrollHeight;n.cover.style.display=t?"inline-block":"none"}function s(t,e){return"<div class='dhtmlx_popup_button' result='"+e+"' ><div>"+t+"</div></div>"}function o(o,l,r){var a=o.tagName?o:function(i,n,o){var l=document.createElement("DIV");l.className=" dhtmlx_modal_box dhtmlx-"+i.type,l.setAttribute("dhxbox",1);var r="";if(i.width&&(l.style.width=i.width),i.height&&(l.style.height=i.height),i.title&&(r+='<div class="dhtmlx_popup_title">'+i.title+"</div>"),r+='<div class="dhtmlx_popup_text"><span>'+(i.content?"":i.text)+'</span></div><div  class="dhtmlx_popup_controls">',n&&(r+=s(i.ok||"OK",!0)),o&&(r+=s(i.cancel||"Cancel",!1)),i.buttons)for(var a=0;a<i.buttons.length;a++)r+=s(i.buttons[a],a);if(r+="</div>",l.innerHTML=r,i.content){var h=i.content;"string"==typeof h&&(h=document.getElementById(h)),"none"==h.style.display&&(h.style.display=""),l.childNodes[i.title?1:0].appendChild(h)}return l.onclick=function(t){var n=(t=t||event).target||t.srcElement;if(n.className||(n=n.parentNode),"dhtmlx_popup_button"==n.className){var s=n.getAttribute("result");e(i,s="true"==s||"false"!=s&&s)}},i.box=l,(n||o)&&(t=i),l}(o,l,r);o.hidden||n(!0),document.body.appendChild(a);var h=o.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-a.offsetWidth)/2)),d=o.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-a.offsetHeight)/2));return"top"==o.position?a.style.top="-3px":a.style.top=d+"px",a.style.left=h+"px",a.onkeydown=i,a.focus(),o.hidden&&dhtmlx.modalbox.hide(a),a}function l(t){return o(t,!0,!1)}function r(t){return o(t,!0,!0)}function a(t){return o(t)}function h(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}document.attachEvent?document.attachEvent("onkeydown",i):document.addEventListener("keydown",i,!0),dhtmlx.alert=function(){var t=h.apply(this,arguments);return t.type=t.type||"confirm",l(t)},dhtmlx.confirm=function(){var t=h.apply(this,arguments);return t.type=t.type||"alert",r(t)},dhtmlx.modalbox=function(){var t=h.apply(this,arguments);return t.type=t.type||"alert",a(t)},dhtmlx.modalbox.hide=function(e){for(;e&&e.getAttribute&&!e.getAttribute("dhxbox");)e=e.parentNode;e&&(e.parentNode.removeChild(e),n(!1),t=null)};var d=dhtmlx.message=function(t,e,i,n){switch((t=function(t,e,i,n){return"object"!=typeof t&&(t={text:t,type:e,expire:i,id:n}),t.id=t.id||d.uid(),t.expire=t.expire||d.expire,t}.apply(this,arguments)).type=t.type||"info",t.type.split("-")[0]){case"alert":return l(t);case"confirm":return r(t);case"modalbox":return a(t);default:return function(t){d.area||(d.area=document.createElement("DIV"),d.area.className="dhtmlx_message_area",d.area.style[d.position]="5px",document.body.appendChild(d.area)),d.hide(t.id);var e=document.createElement("DIV");return e.innerHTML="<div>"+t.text+"</div>",e.className="dhtmlx-info dhtmlx-"+t.type,e.onclick=function(){t&&d.hide(t.id),t=null},"bottom"==d.position&&d.area.firstChild?d.area.insertBefore(e,d.area.firstChild):d.area.appendChild(e),t.expire>0&&(d.timers[t.id]=window.setTimeout(function(){d.hide(t.id)},t.expire)),d.pull[t.id]=e,e=null,t.id}(t)}};d.seed=(new Date).valueOf(),d.uid=function(){return d.seed++},d.expire=4e3,d.keyboard=!0,d.position="top",d.pull={},d.timers={},d.hideAll=function(){for(var t in d.pull)d.hide(t)},d.hide=function(t){var e=d.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",d.timers[t]&&window.clearTimeout(d.timers[t]),delete d.pull[t])}}(),dhtmlXGridObject.prototype.enableDragAndDrop=function(t){"temporary_disabled"==t?(this.dADTempOff=!1,t=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(t),this._drag_validate=!0},dhtmlXGridObject.prototype.setDragBehavior=function(t){switch(this.dadmodec=this.dadmodefix=0,t){case"child":this.dadmode=0,this._sbmod=!1;break;case"sibling":this.dadmode=1,this._sbmod=!1;break;case"sibling-next":this.dadmode=1,this._sbmod=!0;break;case"complex":this.dadmode=2,this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}},dhtmlXGridObject.prototype.enableDragOrder=function(t){this._dndorder=convertStringToBoolean(t)},dhtmlXGridObject.prototype._checkParent=function(t,e){var i=this._h2.get[t.idd].parent;if(i.parent){for(var n=0;n<e.length;n++)if(e[n]==i.id)return!0;return this._checkParent(this.rowsAr[i.id],e)}},dhtmlXGridObject.prototype._createDragNode=function(t,e){if(this.editStop(),window.dhtmlDragAndDrop.dragNode)return null;if(!this.dADTempOff)return null;t.parentObject=new Object,t.parentObject.treeNod=this;var i=this.callEvent("onBeforeDrag",[t.parentNode.idd,t._cellIndex]);if(!i)return null;var n=new Array;n=(n=this.getSelectedId())&&""!=n?n.split(this.delim):[];for(var s=!1,o=0;o<n.length;o++)n[o]==t.parentNode.idd&&(s=!0);if(s||(this.selectRow(this.rowsAr[t.parentNode.idd],!1,e.ctrlKey,!1),e.ctrlKey||(n=[]),n[this.selMultiRows?n.length:0]=t.parentNode.idd),this.isTreeGrid())for(o=n.length-1;o>=0;o--)this._checkParent(this.rowsAr[n[o]],n)&&n.splice(o,1);var l=this;n.length&&this._dndorder&&n.sort(function(t,e){return l.rowsAr[t].rowIndex>l.rowsAr[e].rowIndex?1:-1});var r=this.getFirstParentOfType(_isIE?e.srcElement:e.target,"TD");r&&(this._dndExtra=r._cellIndex),this._dragged=new Array;for(o=0;o<n.length;o++)this.rowsAr[n[o]]&&(this._dragged[this._dragged.length]=this.rowsAr[n[o]],this.rowsAr[n[o]].treeNod=this);t.parentObject.parentNode=t.parentNode;var a=document.createElement("div");return a.innerHTML=!0!==i?i:this.rowToDragElement(t.parentNode.idd),a.style.position="absolute",a.className="dragSpanDiv",a},dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV"),this._sdrgc.innerHTML="&nbsp;",this._sdrgc.className="gridDragLine",this.objBox.appendChild(this._sdrgc)},dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var t=this.tid;t=this.tobj.getParentId(t);)if(this.sid==t)return!1;return!0},dragContext.prototype.close=function(){this.sobj=null,this.tobj=null},dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)},dragContext.prototype.set=function(t,e){return this[t]=e,this},dragContext.prototype.uid=function(t,e){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this},dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)},dragContext.prototype.childs=function(){return"treeGrid"==this.source&&this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null},dragContext.prototype.pid=function(){if(!this.tid)return 0;if(!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var t=this.tobj.rowsAr[this.tid],e=this.tobj._h2.get[t.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&t.nextSibling){var i=this.tobj._h2.get[t.nextSibling.idd].parent.id;if(i==this.tid)return this.tid;if(i!=e)return i}return e}},dragContext.prototype.ind=function(){if(this.tid==window.unknown)return 0;"treeGrid"==this.target&&("child"==this.dropmode?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid)));var t=this.tobj.rowsCol._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var e=this.tobj.rowsAr[this.tid];if(e.nextSibling&&this._h2.get[e.nextSibling.idd].parent.id==this.tid)return t+1}return t+1+("treeGrid"==this.target&&t>=0&&"minus"==this.tobj._h2.get[this.tobj.rowsCol[t].idd].state?this.tobj._getOpenLenght(this.tobj.rowsCol[t].idd,0):0)},dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null},dragContext.prototype.slist=function(){for(var t=new Array,e=0;e<this.sid.length;e++)t[t.length]=this.sid[e]["tree"==this.source?"id":"idd"];return t.join(",")},dhtmlXGridObject.prototype._drag=function(t,e,i,n){if(this._realfake)return this._fake._drag();this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var s=i.parentNode,o=t.parentObject;s.idd||(s.grid=this,this.dadmodefix=0);var l=new dragContext(0,0,0,s.grid.dadmodec?"sibling":"child");o&&o.childNodes?l.set("source","tree").set("sobj",o.treeNod).set("sid",l.sobj._dragged):(o.treeNod.isTreeGrid&&o.treeNod.isTreeGrid()&&l.set("source","treeGrid"),l.set("sobj",o.treeNod).set("sid",l.sobj._dragged)),s.grid.isTreeGrid()?l.set("target","treeGrid"):l.set("dropmode","sibling"),l.set("tobj",s.grid).set("tid",s.idd),2==l.tobj.dadmode&&1==l.tobj.dadmodec&&l.tobj.dadmodefix<0&&(l.tobj.obj.rows[1].idd!=l.tid?l.tid=s.previousSibling.idd:l.tid=0);var r=this.getFirstParentOfType(n,"TD");if(r&&l.set("tExtra",r._cellIndex),r&&l.set("sExtra",l.sobj._dndExtra),l.sobj.dpcpy&&l.set("mode","copy"),l.tobj._realfake&&(l.tobj=l.tobj._fake),l.sobj._realfake&&(l.sobj=l.sobj._fake),l.tobj._clearMove(),o&&o.treeNod&&o.treeNod._nonTrivialRow)o.treeNod._nonTrivialRow(this,l.tid,l.dropmode,o);else{if(l.tobj.dragContext=l,!l.tobj.callEvent("onDrag",[l.slist(),l.tid,l.sobj,l.tobj,l.sExtra,l.tExtra]))return l.tobj.dragContext=null;var a=new Array;if("object"==typeof l.sid){for(var h=l.copy(),d=0;d<l.sid.length;d++)h.set("alfa",!d).set("sid",l.sid[d]["tree"==l.source?"id":"idd"]).valid()&&(h.tobj._dragRoutine(h),"treeGrid"==h.target&&"child"==h.dropmode&&h.tobj.openItem(h.tid),a[a.length]=h.nid,h.set("dropmode","sibling").set("tid",h.nid));h.close()}else l.tobj._dragRoutine(l);l.tobj.laterLink&&l.tobj.laterLink(),l.tobj.callEvent("onDrop",[l.slist(),l.tid,a.join(","),l.sobj,l.tobj,l.sExtra,l.tExtra])}l.tobj.dragContext=null,l.close()},dhtmlXGridObject.prototype._dragRoutine=function(t){if(t.sobj==t.tobj&&"grid"==t.source&&"move"==t.mode&&!this._fake){if(t.sobj._dndProblematic)return;var e=t.sobj.rowsAr[t.sid],i=t.sobj.rowsCol._dhx_find(e);if(t.sobj.rowsCol._dhx_removeAt(t.sobj.rowsCol._dhx_find(e)),t.sobj.rowsBuffer._dhx_removeAt(t.sobj.rowsBuffer._dhx_find(e)),t.sobj.rowsBuffer._dhx_insertAt(t.ind(),e),t.tobj._fake){t.tobj._fake.rowsCol._dhx_removeAt(i);var n=t.tobj._fake.rowsAr[t.sid];n.parentNode.removeChild(n)}return t.sobj._insertRowAt(e,t.ind()),t.nid=t.sid,void t.sobj.callEvent("onGridReconstructed",[])}var s;if(this._h2&&void 0!==t.tid&&"sibling"==t.dropmode&&(this._sbmod||t.tid)?t.alfa&&this._sbmod&&this._h2.get[t.tid].childs.length?(this.openItem(t.tid),s=t.uid().tobj.addRowBefore(t.nid,t.data(),this._h2.get[t.tid].childs[0].id,t.img(),t.childs())):s=t.uid().tobj.addRowAfter(t.nid,t.data(),t.tid,t.img(),t.childs()):s=t.uid().tobj.addRow(t.nid,t.data(),t.ind(),t.pid(),t.img(),t.childs()),"tree"==t.source){this.callEvent("onRowAdded",[t.nid]);var o=t.sobj._globalIdStorageFind(t.sid);if(o.childsCount){for(var l=t.copy().set("tid",t.nid).set("dropmode","grid"==t.target?"sibling":"child"),r=0;r<o.childsCount;r++)t.tobj._dragRoutine(l.set("sid",o.childNodes[r].id)),"move"==t.mode&&r--;l.close()}}else if(t.tobj._copyUserData(t),this.callEvent("onRowAdded",[t.nid]),"treeGrid"==t.source){t.sobj==t.tobj&&(s._xml=t.sobj.rowsAr[t.sid]._xml);var a=t.sobj._h2.get[t.sid];if(a&&a.childs.length){l=t.copy().set("tid",t.nid);"grid"==t.target?l.set("dropmode","sibling"):(l.tobj.openItem(t.tid),l.set("dropmode","child"));var h=a.childs.length;for(r=0;r<h;r++)t.sobj.render_row_tree(null,a.childs[r].id),t.tobj._dragRoutine(l.set("sid",a.childs[r].id)),h!=a.childs.length&&(r--,h=a.childs.length);l.close()}}"move"==t.mode&&(t.sobj["tree"==t.source?"deleteItem":"deleteRow"](t.sid),t.sobj!=t.tobj||t.tobj.rowsAr[t.sid]||(t.tobj.changeRowId(t.nid,t.sid),t.nid=t.sid))},dhtmlXGridObject.prototype.gridToGrid=function(t,e,i){for(var n=new Array,s=0;s<e.hdr.rows[0].cells.length;s++)n[s]=e.cells(t,s).getValue();return n},dhtmlXGridObject.prototype.checkParentLine=function(t,e){return!!(this._h2&&e&&t)&&(t.id==e||this.checkParentLine(t.parent,e))},dhtmlXGridObject.prototype._dragIn=function(t,e,i,n){if(!this.dADTempOff)return 0;var s=this.isTreeGrid();if(this._drag_validate){if(t.parentNode==e.parentNode)return 0;if(s&&this.checkParentLine(this._h2.get[t.parentNode.idd],e.parentNode.idd))return 0}var o=e.parentNode.idd?e.parentNode:e.parentObject;return this.callEvent("onDragIn",[o.idd||o.id,t.parentNode.idd,o.grid||o.treeNod,t.parentNode.grid])?(this._setMove(t,i,n),s&&""!=t.parentNode.expand?(this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3),this._autoOpenId=t.parentNode.idd):this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer),t):this._setMove(t,i,n,!0)},dhtmlXGridObject.prototype._autoOpenItem=function(t,e){e.openItem(e._autoOpenId)},dhtmlXGridObject.prototype._dragOut=function(t){this._clearMove();var e=t.parentNode.parentObject?t.parentObject.id:t.parentNode.idd;this.callEvent("onDragOut",[e]),this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)},dhtmlXGridObject.prototype._setMove=function(t,e,i,n){if(t.parentNode.idd){var s=getAbsoluteTop(t),o=getAbsoluteTop(this.objBox);if(s-o-parseInt(this.objBox.scrollTop)>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),s-o<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),n)return 0;if(2==this.dadmode){var l=i-s+this.objBox.scrollTop+(document.body.scrollTop||document.documentElement.scrollTop)-2-t.offsetHeight/2;Math.abs(l)-t.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=l<0?-1:1):this.dadmodec=0}else this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=s-o+(this.dadmodefix>=0?t.offsetHeight:0)+"px";else if(this._llSelD=t,"TR"==t.parentNode.tagName)for(var r=0;r<t.parentNode.childNodes.length;r++){(l=t.parentNode.childNodes[r])._bgCol=l.style.backgroundColor,l.style.backgroundColor="#FFCCCC"}}},dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var t=0;t<this._llSelD.parentNode.childNodes.length;t++)this._llSelD.parentNode.childNodes[t].style.backgroundColor=this._llSelD._bgCol;this._llSelD=null},dhtmlXGridObject.prototype.rowToDragElement=function(t){return this.cells(t,0).getValue()},dhtmlXGridObject.prototype._copyUserData=function(t){t.tobj.UserData[t.nid]&&t.tobj==t.sobj||(t.tobj.UserData[t.nid]=new Hashtable);var e=t.sobj.UserData[t.sid],i=t.tobj.UserData[t.nid];e&&(i.keys=i.keys.concat(e.keys),i.values=i.values.concat(e.values))},dhtmlXGridObject.prototype.moveRow=function(t,e,i,n){switch(e){case"row_sibling":this.moveRowTo(t,i,"move","sibling",this,n);break;case"up":this.moveRowUp(t);break;case"down":this.moveRowDown(t)}},dhtmlXGridObject.prototype._nonTrivialNode=function(t,e,i,n,s){if(t.callEvent&&!s&&!t.callEvent("onDrag",[n.idd,e.id,i?i.id:null,this,t]))return!1;for(var o=n.idd,l=o;t._idpull[l];)l+=(new Date).getMilliseconds().toString();var r=this.isTreeGrid()?this.getItemImage(o):"";if(i){for(d=0;d<e.childsCount&&e.childNodes[d]!=i;d++);0!=d?i=e.childNodes[d-1]:(st="TOP",i="")}var a=t._attachChildNode(e,l,this.gridToTreeElement(t,l,o),"",r,r,r,"","",i);if(this._h2){var h=this._h2.get[o];if(h.childs.length)for(var d=0;d<h.childs.length;d++)this._nonTrivialNode(t,a,0,this.rowsAr[h.childs[d].id],1),this.dpcpy||d--}this.dpcpy||this.deleteRow(o),t.callEvent&&!s&&t.callEvent("onDrop",[l,e.id,i?i.id:null,this,t])},dhtmlXGridObject.prototype.gridToTreeElement=function(t,e,i){return this.cells(i,0).getValue()},dhtmlXGridObject.prototype.treeToGridElement=function(t,e,i){var n=new Array,s=this.cellType._dhx_find("tree");-1==s&&(s=0);for(var o=0;o<this.getColumnCount();o++)n[n.length]=o!=s?t.getUserData(e,this.getColumnId(o))||"":t.getItemText(e);return n},dhtmlXGridObject.prototype.moveRowTo=function(t,e,i,n,s,o){var l=new dragContext((s||this).isTreeGrid()?"treeGrid":"grid",(o||this).isTreeGrid()?"treeGrid":"grid",i,n||"sibling",t,e,s||this,o||this);return l.tobj._dragRoutine(l),l.close(),l.nid},dhtmlXGridObject.prototype.enableMercyDrag=function(t){this.dpcpy=convertStringToBoolean(t)},dhtmlXGridObject.prototype.loadCSVFile=function(t,e){this.load(t,e,"csv")},dhtmlXGridObject.prototype.enableCSVAutoID=function(t){this._csvAID=convertStringToBoolean(t)},dhtmlXGridObject.prototype.enableCSVHeader=function(t){this._csvHdr=convertStringToBoolean(t)},dhtmlXGridObject.prototype.setCSVDelimiter=function(t){this.csv.cell=t},dhtmlXGridObject.prototype._csvAID=!0,dhtmlXGridObject.prototype.loadCSVString=function(t){this.parse(t,"csv")},dhtmlXGridObject.prototype.serializeToCSV=function(t){this.editStop(),this._mathSerialization?this._agetm="getMathValue":this._strictText||t?this._agetm="getTitle":this._agetm="getValue";var e=[];if(this._csvHdr)for(var i=1;i<this.hdr.rows.length;i++){for(var n=[],s=0;s<this._cCount;s++)this._srClmn&&!this._srClmn[s]||n.push(this.getColumnLabel(s,i-1));e.push(n.join(this.csv.cell))}s=0;for(var o=this.rowsBuffer.length;s<o;s++){var l=this._serializeRowToCVS(null,s);""!=l&&e.push(l)}return e.join(this.csv.row)},dhtmlXGridObject.prototype._serializeRowToCVS=function(t,e,i,n){var s=new Array;t||(t=this.render_row(e),this._fake&&!this._fake.rowsAr[t.idd]&&this._fake.render_row(e)),this._csvAID||(s[s.length]=t.idd),i=i||0,n=n||this._cCount;for(var o=!1,l=i;t.childNodes[i]._cellIndex>l&&i;)i--;for(var r=i;l<n&&t.childNodes[r];r++){var a=t.childNodes[r]._cellIndex;if(!this._srClmn||this._srClmn[a]){for(var h=t.childNodes[r],d=this.cells(t.idd,a);l!=a&&(l++,s.push(""),!(l>=n)););if(l>=n)break;if(l++,d.cell?zxVal=d[this._agetm]():zxVal="",this._chAttr&&d.wasChanged()&&(o=!0),s[s.length]=null===zxVal?"":zxVal,this._ecspn&&h.colSpan&&h.colSpan>1){h=h.colSpan-1;for(var c=0;c<h;c++)s[s.length]="";l++}}else l++}return this._onlChAttr&&!o?"":s.join(this.csv.cell)},dhtmlXGridObject.prototype.toClipBoard=function(t){window.clipboardData?window.clipboardData.setData("Text",t):(new Clipboard).copy(t)},dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()},dhtmlXGridObject.prototype.cellToClipboard=function(t,e){if(!t||!e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);this.toClipBoard(((i.getLabel?i.getLabel():i.getValue())||"").toString())},dhtmlXGridObject.prototype.updateCellFromClipboard=function(t,e){if(!t||!e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);i[i.setImage?"setLabel":"setValue"](this.fromClipBoard())},dhtmlXGridObject.prototype.rowToClipboard=function(t){var e="";if(this._mathSerialization?this._agetm="getMathValue":this._strictText?this._agetm="getTitle":this._agetm="getValue",t)e=this._serializeRowToCVS(this.getRowById(t));else for(var i=0;i<this.selectedRows.length;i++)e&&(e+=this.csv.row),e+=this._serializeRowToCVS(this.selectedRows[i]);this.toClipBoard(e)},dhtmlXGridObject.prototype.updateRowFromClipboard=function(t){var e=this.fromClipBoard();if(e){if(t)var i=this.getRowById(t);else i=this.selectedRows[0];if(i){e=e.split(this.csv.row)[0].split(this.csv.cell),this._csvAID||e.splice(0,1);for(var n=0;n<e.length;n++){var s=this.cells3(i,n);s[s.setImage?"setLabel":"setValue"](e[n])}}}},dhtmlXGridObject.prototype.addRowFromClipboard=function(){var t=this.fromClipBoard();if(t)for(var e=t.split(this.csv.row),i=0;i<e.length;i++)e[i]&&(t=e[i].split(this.csv.cell),this._csvAID?this.addRow(this.getRowsNum()+2,t):(this.rowsAr[t[0]]&&(t[0]=this.uid()),this.addRow(t[0],t.slice(1))))},dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())},dhtmlXGridObject.prototype.gridFromClipboard=function(){var t=this.fromClipBoard();t&&this.loadCSVString(t)},dhtmlXGridObject.prototype.getXLS=function(t){if(!this.xslform){this.xslform=document.createElement("FORM"),this.xslform.action=(t||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform);var e=document.createElement("INPUT");e.type="hidden",e.name="csv",this.xslform.appendChild(e);var i=document.createElement("INPUT");i.type="hidden",i.name="csv_header",this.xslform.appendChild(i)}var n=this.serializeToCSV();this.xslform.childNodes[0].value=n;for(var s=[],o=this._cCount,l=0;l<o;l++)s.push(this.getHeaderCol(l));s=s.join(","),this.xslform.childNodes[1].value=s,this.xslform.submit()},dhtmlXGridObject.prototype.printView=function(t,e){var i="<style>TD {font-family:Arial;text-align:center;padding-left:2px;padding-right:2px};\n td.filter input, td.filter select {display:none};\n </style>",n=null;if(this._fake){n=[].concat(this._hrrar);for(var s=0;s<this._fake._cCount;s++)this._hrrar[s]=null}i+="<base href='"+document.location.href+"'></base>",this.parentGrid||(i+=t||""),i+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var o=Math.max(this.rowsBuffer.length,this.rowsCol.length),l=this._cCount,r=this._printWidth();i+='<tr class="header_row_1">';for(s=0;s<l;s++)if(!this._hrrar||!this._hrrar[s]){for(var a=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(s)]:s],h=a.colSpan||1,d=a.rowSpan||1,c=1;c<h;c++)r[s]+=r[c];i+='<td rowspan="'+d+'" width="'+r[s]+'%" style="background-color:lightgrey;" colspan="'+h+'">'+this.getHeaderCol(s)+"</td>",s+=h-1}i+="</tr>";for(s=2;s<this.hdr.rows.length;s++)if(_isIE){i+="<tr style='background-color:lightgrey' class='header_row_"+s+"'>";var u=this.hdr.rows[s].childNodes;for(c=0;c<u.length;c++)this._hrrar&&this._hrrar[u[c]._cellIndex]||(i+=u[c].outerHTML);i+="</tr>"}else i+="<tr class='header_row_"+s+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[s].innerHTML:"")+this.hdr.rows[s].innerHTML+"</tr>";for(s=0;s<o;s++)if(i+="<tr>",this.rowsCol[s]&&this.rowsCol[s]._cntr)i+=this.rowsCol[s].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[s]||"none"!=this.rowsCol[s].style.display){var f;if(this.rowsCol[s])f=this.rowsCol[s].idd;else{if(!this.rowsBuffer[s])continue;f=this.rowsBuffer[s].idd}for(c=0;c<l;c++)if(!this._hrrar||!this._hrrar[c]){if(this.rowsAr[f]&&"TR"==this.rowsAr[f].tagName){var p=this.cells(f,c);if(p._setState)var m="";else if(p.getContent)m=p.getContent();else if(p.getImage||p.combo)m=p.cell.innerHTML;else m=p.getValue()}else m=this._get_cell_value(this.rowsBuffer[s],c);var g=this.columnColor[c]?"background-color:"+this.columnColor[c]+";":"",_=this.cellAlign[c]?"text-align:"+this.cellAlign[c]+";":"",v=p.getAttribute("colspan");i+='<td style="'+g+_+'" '+(v?'colSpan="'+v+'"':"")+">"+(""===m?"&nbsp;":m)+"</td>",v&&(c+=v-1)}if(i+="</tr>",this.rowsCol[s]&&this.rowsCol[s]._expanded){var b=this.cells4(this.rowsCol[s]._expanded.ctrl);b.getSubGrid?i+='<tr><td colspan="'+l+'">'+b.getSubGrid().printView()+"</td></tr>":i+='<tr><td colspan="'+l+'">'+this.rowsCol[s]._expanded.innerHTML+"</td></tr>"}}if(this.ftr)for(s=1;s<this.ftr.childNodes[0].rows.length;s++)i+="<tr style='background-color:lightgrey'>"+(this._fake&&_isFF?this._fake.ftr.childNodes[0].rows[s].innerHTML:"")+this.ftr.childNodes[0].rows[s].innerHTML+"</tr>";if(i+="</table>",this.parentGrid)return i;i+=e||"";var y=window.open("","_blank");y.document.write(i),y.document.write("<script>window.onerror=function(){return true}<\/script>"),y.document.close(),this._fake&&(this._hrrar=n)},dhtmlXGridObject.prototype._printWidth=function(){for(var t=[],e=0,i=0;i<this._cCount;i++){var n=this.getColWidth(i);t.push(n),e+=n}var s=[],o=0;for(i=0;i<t.length;i++){var l=Math.floor(t[i]/e*100);o+=l,s.push(l)}return s[s.length-1]+=100-o,s},dhtmlXGridObject.prototype.loadObject=function(t){},dhtmlXGridObject.prototype.loadJSONFile=function(t){},dhtmlXGridObject.prototype.serializeToObject=function(){},dhtmlXGridObject.prototype.serializeToJSON=function(){},window.clipboardData||(window.clipboardData={_make:function(){var t=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!t)return null;var e=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!e)return null;e.addDataFlavor("text/unicode");var i=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);return this._p=[t,e,i],!0},setData:function(t,e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(i){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[t,e]),""}if(!this._make())return!1;this._p[2].data=e,this._p[1].setTransferData("text/unicode",this._p[2],2*e.length);var i=Components.interfaces.nsIClipboard;this._p[0].setData(this._p[1],null,i.kGlobalClipboard)},getData:function(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[t]),""}if(!this._make())return!1;this._p[0].getData(this._p[1],this._p[0].kGlobalClipboard);var e=new Object,i=new Object;try{this._p[1].getTransferData("text/unicode",i,e)}catch(t){return""}return i&&(i=i.value.QueryInterface(Components.interfaces.nsISupportsString)),i?i.data.substring(0,e.value/2):""}}),dhtmlXGridCellObject.prototype={getAttribute:function(t){return this.cell._attrs[t]},setAttribute:function(t,e){this.cell._attrs[t]=e},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var t=(this.obj||this.cell).getElementsByTagName("TEXTAREA");return t.length||(t=(this.obj||this.cell).getElementsByTagName("INPUT")),t[0]}},dhtmlXGridCellObject.prototype.setValue=function(t){"number"==typeof t||t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),this.setCValue(t)},dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent},dhtmlXGridCellObject.prototype.setCValue=function(t,e){this.cell.innerHTML=t,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,arguments.length>1?e:t])},dhtmlXGridCellObject.prototype.setCTxtValue=function(t){this.cell.innerHTML="",this.cell.appendChild(document.createTextNode(t)),this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,t])},dhtmlXGridCellObject.prototype.setLabel=function(t){this.cell.innerHTML=t},dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()},eXcell.prototype=new dhtmlXGridCellObject,eXcell_ed.prototype=new eXcell,eXcell_edtxt.prototype=new eXcell_ed,eXcell_edn.prototype=new eXcell_ed,eXcell_edn.prototype.setValue=function(t){if(!t||""==t.toString()._dhx_trim())return this.cell._clearCell=!0,this.setCValue("&nbsp;",0);this.cell._clearCell=!1,this.setCValue(this.grid._aplNF(t,this.cell._cellIndex))},eXcell_ch.prototype=new eXcell,eXcell_ch.prototype.setValue=function(t){this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+t+".gif' onclick='new eXcell_ch(this.parentNode).changeState();(arguments[0]||event).cancelBubble=true;'>",this.cell.chstate)},eXcell_ra.prototype=new eXcell_ch,eXcell_ra.prototype.setValue=function(t){if(this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t){if(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]){var e=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);e.setValue("0"),this.grid.rowsAr[e.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,e.cell.parentNode.idd,e.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell,t="1",this.cell.chstate="1"}else t="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+t+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)},eXcell_txt.prototype=new eXcell,eXcell_txttxt.prototype=new eXcell_txt,eXcell_txt.prototype.setValue=function(t){t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),this.cell._brval=t,this.grid.multiLine?this.setCValue(t.replace(/\n/g,"<br/>"),t):this.setCValue(t,t)},eXcell_co.prototype=new eXcell,eXcell_co.prototype.getText=function(){return this.cell.innerHTML},eXcell_co.prototype.setValue=function(t){if("object"==typeof t){var e=this.grid.xmlLoader.doXPath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""==(t||"").toString()._dhx_trim()&&(t=null),this.cell.combo_value=t,null!==t?this.setCValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t)||t,t):this.setCValue("&nbsp;",t)},eXcell_coro.prototype=new eXcell_co,eXcell_cotxt.prototype=new eXcell_co,eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent},eXcell_cotxt.prototype.setValue=function(t){if("object"==typeof t){var e=this.grid.xmlLoader.doXPath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""==(t||"").toString()._dhx_trim()&&(t=null),null!==t?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t)||t,t):this.setCTxtValue(" ",t),this.cell.combo_value=t},eXcell_corotxt.prototype=new eXcell_cotxt,eXcell_cp.prototype=new eXcell,eXcell_cp.prototype.setValue=function(t){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?cell.offsetHeight-2:16)+";background-color:"+(t||"")+";border:0px;'>&nbsp;</div>",t),this.cell.firstChild._bg=t},eXcell_img.prototype=new eXcell,eXcell_img.prototype.getTitle=function(){return this.cell.tit},eXcell_img.prototype.setValue=function(t){var e=t;if(-1!=t.indexOf("^")){var i=t.split("^");t=i[0],e=this.cell._attrs.title||i[1],i.length>2&&(this.cell.lnk=i[2],i[3]&&(this.cell.trg=i[3])),this.cell.titFl="1"}this.setCValue("<img src='"+this.grid.iconURL+(t||"")._dhx_trim()+"' border='0'>",t),this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"),this.cell.tit=e},eXcell_price.prototype=new eXcell_ed,eXcell_price.prototype.setValue=function(t){isNaN(parseFloat(t))&&(t=this.val||0);var e="green";t<0&&(e="red"),this.setCValue("<span>$</span><span style='padding-right:2px;color:"+e+";'>"+t+"</span>",t)},eXcell_dyn.prototype=new eXcell_ed,eXcell_dyn.prototype.setValue=function(t){if(t&&!isNaN(Number(t))||""!==t&&(t=0),t>0)var e="green",i="dyn_up.gif";else if(0==t)e="black",i="dyn_.gif";else e="red",i="dyn_down.gif";this.setCValue("<div style='position:relative;padding-right:2px;width:100%;overflow:hidden;white-space:nowrap;'><img src='"+this.grid.imgURL+i+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px;width:100%;color:"+e+";'>"+t+"</span></div>",t)},eXcell_ro.prototype=new eXcell,eXcell_ron.prototype=new eXcell,eXcell_ron.prototype.setValue=function(t){if(0===t);else if(!t||""==t.toString()._dhx_trim())return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.setCValue(t?this.grid._aplNF(t,this.cell._cellIndex):"0"),this.cell._clearCell=!1},eXcell_rotxt.prototype=new eXcell,Hashtable.prototype=new dhtmlXGridComboObject,dhtmlXGridObject.prototype.filterBy=function(t,e,i){if(this.isTreeGrid())return this.filterTreeBy(t,e,i);if(this._f_rowsBuffer?i||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(this.dma(!0),"object"==typeof t)for(var n=0;n<e.length;n++)this._filterA(t[n],e[n]);else this._filterA(t,e);this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._filterA=function(t,e){if(""!=e){var i=!0;if("function"==typeof e?i=!1:e=(e||"").toString().toLowerCase(),this.rowsBuffer.length)for(var n=this.rowsBuffer.length-1;n>=0;n--)(i?-1!=this._get_cell_value(this.rowsBuffer[n],t).toString().toLowerCase().indexOf(e):e(this._get_cell_value(this.rowsBuffer[n],t),this.rowsBuffer[n].idd))||this.rowsBuffer.splice(n,1)}},dhtmlXGridObject.prototype.getFilterElement=function(t){if(this.filters){for(var e=0;e<this.filters.length;e++)if(this.filters[e][1]==t)return this.filters[e][0].combo||this.filters[e][0];return null}},dhtmlXGridObject.prototype.collectValues=function(t){var e=this.callEvent("onCollectValues",[t]);if(!0!==e)return e;if(this.isTreeGrid())return this.collectTreeValues(t);this.dma(!0),t=this._m_order?this._m_order[t]:t;var i={},n=[];this._build_m_order();for(var s=this._f_rowsBuffer||this.rowsBuffer,o=0;o<s.length;o++){var l=this._get_cell_value(s[o],t);!l||s[o]._childIndexes&&s[o]._childIndexes[t]==s[o]._childIndexes[t-1]||(i[l]=!0)}this.dma(!1);var r=this.combos[t];for(d in i)!0===i[d]&&n.push(r&&r.get(d)||d);return n.sort()},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var t=0;t<this._c_order.length;t++)this._m_order[this._c_order[t]]=t}},dhtmlXGridObject.prototype.filterByAll=function(){var t=[],e=[];this._build_m_order();for(var i=0;i<this.filters.length;i++){var n=this._m_order?this._m_order[this.filters[i][1]]:this.filters[i][1];e.push(n);var s,o=this.filters[i][0]._filter?this.filters[i][0]._filter():this.filters[i][0].value;"function"!=typeof o&&(s=this.combos[n])&&(o=-1==(n=s.values._dhx_find(o))?o:s.keys[n]),t.push(o)}this.callEvent("onFilterStart",[e,t])&&(this.filterBy(e,t),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]))},dhtmlXGridObject.prototype.makeFilter=function(t,e,i){if(this.filters||(this.filters=[]),"object"!=typeof t&&(t=document.getElementById(t)),t){var n=this;if(t.style.width||(t.style.width="90%"),"SELECT"==t.tagName)this.filters.push([t,e]),this._loadSelectOptins(t,e),t.onchange=function(){n.filterByAll()},_isIE&&(t.style.marginTop="1px"),this.attachEvent("onEditCell",function(i,n,s){return this._build_m_order(),2==i&&this.filters&&(this._m_order?s==this._m_order[e]:s==e)&&this._loadSelectOptins(t,e),!0});else if("INPUT"==t.tagName)this.filters.push([t,e]),t.value="",t.onkeydown=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){t.value!=t.old_value&&(n.filterByAll(),t.old_value=t.value)},500)};else if("DIV"==t.tagName&&"combo"==t.className){this.filters.push([t,e]),t.style.padding="0px",t.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var s=new dhtmlXCombo(t,"_filter","90%");s.filterSelfA=s.filterSelf,s.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(""),this.filterSelfA.apply(this,arguments),this.optionsArr[0].hide(!1)},s.enableFilteringMode(!0),t.combo=s,t.value="",this._loadComboOptins(t,e),s.attachEvent("onChange",function(){t.value=s.getSelectedValue(),n.filterByAll()})}t.parentNode&&(t.parentNode.className+=" filter"),this._filters_ready()}},dhtmlXGridObject.prototype.findCell=function(t,e,i){var n=new Array;if(t=t.toString().toLowerCase(),!this.rowsBuffer.length)return n;for(var s=e||0;s<this._cCount;s++){if(this._h2)this._h2.forEachChild(0,function(e){if(-1!=this._get_cell_value(e.buff,s).toString().toLowerCase().indexOf(t)&&(n.push([e.id,s]),i))return n},this);else for(var o=0;o<this.rowsBuffer.length;o++)if(-1!=this._get_cell_value(this.rowsBuffer[o],s).toString().toLowerCase().indexOf(t)&&(n.push([this.rowsBuffer[o].idd,s]),i))return n;if(void 0!==e)return n}return n},dhtmlXGridObject.prototype.makeSearch=function(t,e){if("object"!=typeof t&&(t=document.getElementById(t)),t){var i=this;"INPUT"==t.tagName&&(t.onkeypress=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){if(""!=t.value){var n=i.findCell(t.value,e,!0);n.length&&(i._h2&&i.openItem(n[0][0]),i.selectCell(i.getRowIndex(n[0][0]),e||0))}},500)}),t.parentNode&&(t.parentNode.className+=" filter")}},dhtmlXGridObject.prototype._loadSelectOptins=function(t,e){var i=this.collectValues(e),n=t.value;t.innerHTML="",t.options[0]=new Option("","");for(var s=this._filter_tr?this._filter_tr[e]:null,o=0;o<i.length;o++)t.options[t.options.length]=new Option(s?s(i[o]):i[o],i[o]);t.value=n},dhtmlXGridObject.prototype.setSelectFilterLabel=function(t,e){this._filter_tr||(this._filter_tr=[]),this._filter_tr[t]=e},dhtmlXGridObject.prototype._loadComboOptins=function(t,e){var i=this.collectValues(e);t.combo.clearAll(),t.combo.render(!1),t.combo.addOption("","&nbsp;");for(var n=0;n<i.length;n++)t.combo.addOption(i[n],i[n]);t.combo.render(!0)},dhtmlXGridObject.prototype.refreshFilters=function(){for(var t=0;t<this.filters.length;t++)switch(this.filters[t][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[t]);break;case"div":this._loadComboOptins.apply(this,this.filters[t])}},dhtmlXGridObject.prototype._filters_ready=function(t,e){this.attachEvent("onXLE",this.refreshFilters),this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null,this.obj.rows.length||(this.filters=[])}),window.dhtmlXCombo&&this.attachEvent("onScroll",dhtmlXCombo.prototype.closeAll),this._filters_ready=function(){}},dhtmlXGridObject.prototype._in_header_text_filter=function(t,e){t.innerHTML="<input type='text' style='width:90%;font-size:8pt;font-family:Tahoma;-moz-user-select:text;'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_filter_inc=function(t,e){t.innerHTML="<input type='text' style='width:90%;font-size:8pt;font-family:Tahoma;-moz-user-select:text;'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e),t.firstChild._filter=function(){return function(e){return 0==e.toString().toLowerCase().indexOf(t.firstChild.value.toLowerCase())}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_select_filter=function(t,e){t.innerHTML="<select style='width:90%;font-size:8pt;font-family:Tahoma;'></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_select_filter_strict=function(t,e){t.innerHTML="<select style='width:90%;font-size:8pt;font-family:Tahoma;'></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e),t.firstChild._filter=function(){return function(e){return""==t.firstChild.value.toLowerCase()||e.toString().toLowerCase()==t.firstChild.value.toLowerCase()}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_combo_filter=function(t,e){t.innerHTML="<div style='width:100%;padding-left:2px;overflow:hidden;font-size:8pt;font-family:Tahoma;-moz-user-select:text;' class='combo'></div>",t.onselectstart=function(){return event.cancelBubble=!0},t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_search=function(t,e){t.innerHTML="<input type='text' style='width:90%;font-size:8pt;font-family:Tahoma;-moz-user-select:text;'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeSearch(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_numeric_filter=function(t,e){this._in_header_text_filter.call(this,t,e),t.firstChild._filter=function(){var t,e=this.value,i="==",n=parseFloat(e.replace("=","")),s=null;if(e)return-1!=e.indexOf("..")?(e=e.split(".."),n=parseFloat(e[0]),s=parseFloat(e[1]),function(t){return t>=n&&t<=s}):((t=e.match(/>|>=|<=|</))&&(i=t[0],n=parseFloat(e.replace(i,""))),Function("v"," if (v "+i+" "+n+" )return true;return false;"))}},dhtmlXGridObject.prototype._in_header_master_checkbox=function(t,e,i){t.innerHTML=i[0]+"<input type='checkbox' />"+i[1];var n=this;t.firstChild.onclick=function(t){n._build_m_order();var i=n._m_order?n._m_order[e]:e,s=this.checked?1:0;n.forEachRow(function(t){var e=this.cells(t,i);e.isCheckbox()&&e.setValue(s)}),(t||event).cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_stat_total=function(t,e,i){this._stat_in_header(t,function(){for(var t=0,i=0;i<this.rowsBuffer.length;i++){var n=parseFloat(this._get_cell_value(this.rowsBuffer[i],e));t+=isNaN(n)?0:n}return this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},e,i,i)},dhtmlXGridObject.prototype._in_header_stat_multi_total=function(t,e,i){var n=i[1].split(":");i[1]="";for(var s=0;s<n.length;s++)n[s]=parseInt(n[s]);var o=[];for(e=0;e<n.length;e++)o[n[e]]=!0;this._stat_in_header(t,function(){for(var t=0,i=0;i<this.rowsBuffer.length;i++){for(var s=1,o=0;o<n.length;o++)s*=parseFloat(this._get_cell_value(this.rowsBuffer[i],n[o]));t+=isNaN(s)?0:s}return this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},o,i,i)},dhtmlXGridObject.prototype._in_header_stat_max=function(t,e,i){this._stat_in_header(t,function(){var t=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var i=0;i<this.rowsBuffer.length;i++)t=Math.max(t,parseFloat(this._get_cell_value(this.rowsBuffer[i],e)));return this._maskArr[e]?this._aplNF(t,e):t},e,i)},dhtmlXGridObject.prototype._in_header_stat_min=function(t,e,i){this._stat_in_header(t,function(){var t=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var i=0;i<this.rowsBuffer.length;i++)t=Math.min(t,parseFloat(this._get_cell_value(this.rowsBuffer[i],e)));return this._maskArr[e]?this._aplNF(t,e):t},e,i)},dhtmlXGridObject.prototype._in_header_stat_average=function(t,e,i){this._stat_in_header(t,function(){var t=0,i=0;if(0==this.getRowsNum())return"&nbsp;";for(var n=0;n<this.rowsBuffer.length;n++){var s=parseFloat(this._get_cell_value(this.rowsBuffer[n],e));t+=isNaN(s)?0:s,i++}return this._maskArr[e]?this._aplNF(t/i,e):Math.round(t/i*100)/100},e,i)},dhtmlXGridObject.prototype._in_header_stat_count=function(t,e,i){this._stat_in_header(t,function(){return this.getRowsNum()},e,i)},dhtmlXGridObject.prototype._stat_in_header=function(t,e,i,n){var s=function(){this.dma(!0),t.innerHTML=(n[0]?n[0]:"")+e.call(this)+(n[1]?n[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var t=0;t<this._stat_events.length;t++)for(var e=0;e<4;e++)this.detachEvent(this._stat_events[t][e]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",s),this.attachEvent("onXLE",s),this.attachEvent("onFilterEnd",s),this.attachEvent("onEditCell",function(t,e,n){return 2==t&&(n==i||i&&i[n])&&s.call(this),!0})]),t.innerHTML=""},dhtmlXGridObject.prototype.insertColumn=function(t,e,i,n,s,o,l,r,a){if((t=parseInt(t))>this._cCount&&(t=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,t-1,[e||"&nbsp;",n||100,i||"ed",o||"left",l||"",s||"na",a||"","",this._cMod,n||100]),this._processAllRows("_addColInRow",t),"object"==typeof e)for(var h=1;h<this.hdr.rows.length;h++)if("#rspan"==e[h-1]){for(var d=h-1,c=!1,u=null;!c;){u=this.hdr.rows[d];for(var f=0;f<u.cells.length;f++)if(u.cells[f]._cellIndex==t){c=f;break}d--}this.hdr.rows[d+1].cells[f].rowSpan=(this.hdr.rows[d].cells[f].rowSpan||1)+1}else this.setHeaderCol(t,e[h-1]||"&nbsp;",h);else this.setHeaderCol(t,e||"&nbsp;");this.hdr.rows[0].cells[t],this._cCount++,this._cMod++,this._master_row=null,this.setSizes()},dhtmlXGridObject.prototype.deleteColumn=function(t){t=parseInt(t),0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),t>=this._cCount||(this._processAllArrays(t,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",t),this._cCount--,this._master_row=null,this.setSizes()))},dhtmlXGridObject.prototype._processAllRows=function(t,e,i){this[t](this.obj.rows[0],e,i,0);for(var n=this.hdr.rows.length,s=0;s<n;s++)this[t](this.hdr.rows[s],e,i,s);if(this.ftr)for(n=this.ftr.firstChild.rows.length,s=0;s<n;s++)this[t](this.ftr.firstChild.rows[s],e,i,s);this.forEachRow(function(n){this.rowsAr[n]&&"TR"==this.rowsAr[n].tagName&&this[t](this.rowsAr[n],e,i,-1)})},dhtmlXGridObject.prototype._processAllArrays=function(t,e,i){var n=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];this.cellWidthPX.length&&n.push("cellWidthPX"),this.cellWidthPC.length&&n.push("cellWidthPC"),this._col_combos&&n.push("_col_combos"),this._mCols&&(n[n.length]="_mCols"),this.columnIds&&(n[n.length]="columnIds"),this._maskArr&&n.push("_maskArr"),this._drsclmW&&n.push("_drsclmW"),this.clists&&n.push("clists"),n.push("combos"),this._customSorts&&n.push("_customSorts"),this._aggregators&&n.push("_aggregators");var s=t<=e;if(!this._c_order){this._c_order=new Array;for(var o=this._cCount,l=0;l<o;l++)this._c_order[l]=l}for(l=0;l<n.length;l++){var r=this[n[l]];if(r){if(s){for(var a=r[t],h=t;h<e;h++)r[h]=r[h+1];r[e]=a}else{for(a=r[t],h=t;h>e+1;h--)r[h]=r[h-1];r[e+1]=a}i&&(r[e+(s?0:1)]=i[l])}}},dhtmlXGridObject.prototype.moveColumn=function(t,e){if(e--,t=parseInt(t),(e=parseInt(e))<t)var i=e+1;else i=e;if(!this.callEvent("onBeforeCMove",[t,i]))return!1;t!=i&&(this.editStop(),this._processAllRows("_moveColInRow",t,e),this._processAllArrays(t,e),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[t,i]))},dhtmlXGridObject.prototype._swapColumns=function(t){for(var e=new Array,i=0;i<this._cCount;i++){var n=t[this._c_order[i]];void 0===n&&(n=""),e[i]=n}return e},dhtmlXGridObject.prototype._moveColInRow=function(t,e,i){var n=t.childNodes[e],s=t.childNodes[i+1];if(n){s?t.insertBefore(n,s):t.appendChild(n);for(var o=0;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=o}},dhtmlXGridObject.prototype._addColInRow=function(t,e,i,n){var s=e;if(t._childIndexes){if(t._childIndexes[e-1]!=t._childIndexes[e]&&t.childNodes[t._childIndexes[e-1]])for(o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;else{for(var o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;t._childIndexes[e]--}s=t._childIndexes[e]}var l=t.childNodes[s],r=document.createElement(n?"TD":"TH");n?r._attrs={}:r.style.width=(parseInt(this.cellWidthPX[e])||"100")+"px",l?t.insertBefore(r,l):t.appendChild(r),this.dragAndDropOff&&t.idd&&this.dragger.addDraggableItem(t.childNodes[s],this);for(o=s+1;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=t.childNodes[o]._cellIndex+1;t.childNodes[s]&&(t.childNodes[s]._cellIndex=t.childNodes[s]._cellIndexS=e),t.idd||void 0!==t.idd?(this.cells3(t,e).setValue(""),r.align=this.cellAlign[e],r.style.verticalAlign=this.cellVAlign[e],r.bgColor=this.columnColor[e]):"TD"==r.tagName&&(!t.idd&&this.forceDivInHeader?r.innerHTML="<div class='hdrcell'>&nbsp;</div>":r.innerHTML="&nbsp;")},dhtmlXGridObject.prototype._deleteColInRow=function(t,e){t._childIndexes&&(e=t._childIndexes[e]);var i=t.childNodes[e];if(i){if(i.colSpan&&i.colSpan>1&&i.parentNode.idd){var n=i.colSpan-1,s=this.cells4(i).getValue();if(this.setColspan(i.parentNode.idd,i._cellIndex,1),n>1){var o=1*i._cellIndex;this.setColspan(i.parentNode.idd,o+1,n),this.cells(i.parentNode.idd,1*i._cellIndex+1).setValue(s),t._childIndexes.splice(o,1);for(var l=o;l<t._childIndexes.length;l++)t._childIndexes[l]-=1}}else if(t._childIndexes){t._childIndexes.splice(e,1);for(l=e;l<t._childIndexes.length;l++)t._childIndexes[l]--}i&&t.removeChild(i);for(l=e;l<t.childNodes.length;l++)t.childNodes[l]._cellIndex=t.childNodes[l]._cellIndexS=t.childNodes[l]._cellIndex-1}},dhtmlXGridObject.prototype.enableColumnMove=function(t,e){this._mCol=convertStringToBoolean(t),void 0!==e&&(this._mCols=e.split(",")),this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)},dhtmlXGridObject.prototype._startColumnMove=function(t){for(var e=(t=t||event).target||t.srcElement,i=e;"TABLE"!=i.tagName;)i=i.parentNode;var n=i.grid;if(n&&(n.setActive(),n._mCol&&2!=t.button))return"default"!=(e=n.getFirstParentOfType(e,"TD")).style.cursor||(n&&!n._colInMove&&(n._mCols&&"true"!=n._mCols[e._cellIndex]||(n._colInMove=e._cellIndex+1)),!0)},dhtmlXGridObject.prototype._onColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;if(e&&e._colInMove){if(e._showHContext&&e._showHContext(!1),"object"!=typeof e._colInMove)(o=document.createElement("DIV"))._aIndex=e._colInMove-1,o._bIndex=null,o.innerHTML=e.getHeaderCol(o._aIndex),o.className="dhx_dragColDiv",o.style.position="absolute",document.body.appendChild(o),e._colInMove=o;var i=[];i[0]=document.body.scrollLeft||document.documentElement.scrollLeft,i[1]=document.body.scrollTop||document.documentElement.scrollTop,e._colInMove.style.left=t.clientX+i[0]+8+"px",e._colInMove.style.top=t.clientY+i[1]+8+"px";for(var n=t.target||t.srcElement;n&&void 0===n._cellIndexS;)n=n.parentNode;if(e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),e._colInMove._oldHe=null,e._colInMove._bIndex=null),n){if(e.hdr.rows[1]._childIndexes)var s=e.hdr.rows[1].cells[e.hdr.rows[1]._childIndexes[n._cellIndexS]];else s=e.hdr.rows[1].cells[n._cellIndexS];var o;(o=t.clientX-(getAbsoluteLeft(s)-e.hdrBox.scrollLeft))/s.offsetWidth>.5?(s.className+=" columnTargetR",e._colInMove._bIndex=n._cellIndexS):(s.className+=" columnTargetL",e._colInMove._bIndex=n._cellIndexS-1),s.offsetLeft<e.objBox.scrollLeft+20&&(e.objBox.scrollLeft=Math.max(0,s.offsetLeft-20)),s.offsetLeft+s.offsetWidth-e.objBox.scrollLeft>e.objBox.offsetWidth-20&&(e.objBox.scrollLeft=Math.min(e.objBox.scrollLeft+s.offsetWidth+20,e.objBox.scrollWidth-e.objBox.offsetWidth)),e._colInMove._oldHe=s}return t.cancelBubble=!0,!1}return!0},dhtmlXGridObject.prototype._stopColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;return e&&e._colInMove&&("object"==typeof e._colInMove&&(e._colInMove.parentNode.removeChild(e._colInMove),null!=e._colInMove._bIndex&&e.moveColumn(e._colInMove._aIndex,e._colInMove._bIndex+1),e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),e._colInMove._oldHe=null,e._colInMove.grid=null),e._colInMove=0),!0},dhtmlx.extend_api("dhtmlXAccordion",{_init:function(t){return[t.parent,t.skin]},icon_path:"setIconsPath",items:"_items",effect:"setEffect",multi_mode:"enableMultiMode"},{_items:function(t){for(var e=[],i=[],n=0;n<t.length;n++){var s=t[n];this.addItem(s.id,s.text),s.img&&this.cells(s.id).setIcon(s.img),s.height&&this.cells(s.id).setHeight(s.height),!0===s.open&&(e[e.length]=s.id),!1===s.open&&(i[i.length]=s.id)}for(var o=0;o<e.length;o++)this.cells(e[o]).open();for(o=0;o<i.length;o++)this.cells(i[o]).close()}}),void 0===window.dhx4&&(window.dhx4={version:"4.6",skin:null,skinDetect:function(t){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(t+"_skin_detect")]||null},readFromCss:function(t,e){var i=document.createElement("DIV");i.className=t,null!=document.body.firstChild?document.body.insertBefore(i,document.body.firstChild):document.body.appendChild(i);var n=i[e||"offsetWidth"];return i.parentNode.removeChild(i),i=null,n},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return"string"==typeof t&&(t=t.toLowerCase()),1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t||"on"==t},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(t){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).top},_aOfs:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}},getOffset:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfs(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&void 0===t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var i in t)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i]}else for(e=[],i=0;i<t.length;i++)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,i){var n=(t="string"==typeof t?document.getElementById(t):t).value.length;if(e=Math.max(Math.min(e,n),0),i=Math.min(i,n),t.setSelectionRange)try{t.setSelectionRange(e,i)}catch(t){}else if(t.createTextRange){var s=t.createTextRange();s.moveStart("character",e),s.moveEnd("character",i-n);try{s.select()}catch(t){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData},_xmlNodeValue:function(t){for(var e="",i=0;i<t.childNodes.length;i++)e+=null!=t.childNodes[i].nodeValue?t.childNodes[i].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(t){return window.dhx4.isIE10&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==t.pointerType||window.dhx4.isEdge&&"mouse"==t.pointerType},_touchOn:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="",t=null},_touchOff:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="none",t=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:void 0!==window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),void 0===window.dhx4.template&&(window.dhx4.trim=function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(t,e,i){return t.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var t=arguments[1],n=window.dhx4.trim(arguments[3]),s=null,o=[e[t]];if(n.length>0){n=n.split(":");for(var l=[],r=0;r<n.length;r++)r>0&&null!=l[l.length-1].match(/\\$/)?l[l.length-1]=l[l.length-1].replace(/\\$/,"")+":"+n[r]:l.push(n[r]);s=l[0];for(r=1;r<l.length;r++)o.push(l[r])}return"string"==typeof s&&"function"==typeof window.dhx4.template[s]?window.dhx4.template[s].apply(window.dhx4.template,o):t.length>0&&void 0!==e[t]?1==i?window.dhx4.trim(e[t]):String(e[t]):""})},window.dhx4.template.date=function(t,e){return null!=t?t instanceof Date?window.dhx4.date2str(t,e):null!=(t=t.toString()).match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(t)),e):t:""},window.dhx4.template.maxlength=function(t,e){return String(t).substr(0,e)},window.dhx4.template.number_format=function(t,e,i,n){var s=window.dhx4.template._parseFmt(e,i,n);return 0==s?t:window.dhx4.template._getFmtValue(t,s)},window.dhx4.template.lowercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toLowerCase()},window.dhx4.template.uppercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toUpperCase()},window.dhx4.template._parseFmt=function(t,e,i){var n=t.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==n||4!=n.length)return!1;var s={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof i?i:".",s_bef:"string"==typeof n[1]?n[1]:"",s_aft:"string"==typeof n[3]?n[3]:""},o=n[2].split(".");null!=o[1]&&(s.d_len=o[1].length);var l=o[0].split(",");return l.length>1&&(s.i_len=l[l.length-1].length),s},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,!1!==fmt.i_len){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&q>0&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(!1!==fmt.d_len){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft,v0}return value}),void 0===window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(t,e,i){if(null!=e&&void 0!==e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&void 0!==i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]),t instanceof Date)var n=function(t){return 1==String(t).length?"0"+String(t):t},s=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return n(t.getDate());case"%j":return t.getDate();case"%D":return i.dayShortName[t.getDay()];case"%l":return i.dayFullName[t.getDay()];case"%m":return n(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return i.monthShortName[t.getMonth()];case"%F":return i.monthFullName[t.getMonth()];case"%y":return n(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return n((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return n(t.getHours());case"%i":return n(t.getMinutes());case"%s":return n(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return t.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var s=t.getTimezoneOffset(),o=Math.abs(Math.floor(s/60)),l=Math.abs(s)-60*o;return(s>0?"-":"+")+n(o)+":"+n(l);default:return e}});return s||String(t)},window.dhx4.str2date=function(t,e,i){null!=e&&void 0!==e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&void 0!==i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]);var n=[],s=[];e=(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&")).replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return s.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return s.push(t),"([a-z-]{1,})";case"%j":case"%n":case"%g":case"%G":return s.push(t),"(\\d{1,2})";case"%Y":return s.push(t),"(\\d{4})";case"%a":return s.push(t),"([a|p]m)";case"%A":return s.push(t),"([A|P]M)";case"%u":return s.push(t),"(\\d{1,6})";case"%P":return s.push(t),"([+-]\\d{1,2}:\\d{1,2})"}return t});var o=new RegExp(e,"i"),l=t.match(o);if(null==l||l.length-1!=s.length)return"Invalid Date";for(var r=1;r<l.length;r++)n.push(l[r]);var a={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},h={},d={};for(r=0;r<s.length;r++)if(void 0!==a[s[r]]){var c=a[s[r]];h[c]||(h[c]=[],d[c]=[]),h[c].push(n[r]),d[c].push(s[r])}n=[],s=[];for(r=1;r<=7;r++)if(null!=h[r])for(var u=0;u<h[r].length;u++)n.push(h[r][u]),s.push(d[r][u]);var f=new Date;f.setDate(1),f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);var p=function(t,e){for(var i=0;i<e.length;i++)if(e[i].toLowerCase()==t)return i;return-1};for(r=0;r<n.length;r++)switch(s[r]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(n[r])||f[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[s[r]]](Number(n[r])+("%m"==s[r]||"%n"==s[r]?-1:0));break;case"%M":case"%F":var m=p(n[r].toLowerCase(),i[{"%M":"monthShortName","%F":"monthFullName"}[s[r]]]);m>=0&&f.setMonth(m);break;case"%y":if(!isNaN(n[r])){var g=Number(n[r]);f.setFullYear(g+(g>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(n[r]))(g=Number(n[r]))<=12&&g>=0&&f.setHours(g+(p("pm",n)>=0?12==g?0:12:12==g?-12:0));break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=n[r])}return f}),void 0===window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(t){if("string"!=typeof t)return t;if(t=t.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var e=(new window.DOMParser).parseFromString(t,"text/xml");else window.ActiveXObject!==window.undefined&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t));return e},xmltop:function(t,e,i){if((void 0===e.status||e.status<400)&&(xml=e.responseXML?e.responseXML||e:dhx4.ajax.parse(e.responseText||e),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(t)[0]}catch(t){}return-1!==i&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),!dhx4.isIE){for(var i,n=[],s=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=s.iterateNext();)n.push(i);return n}try{return e.selectNodes(t)||[]}catch(t){return[]}},query:function(t){dhx4.ajax._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){return this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){return this._call("PUT",t,e,!0,i)},del:function(t,e,i){return this._call("DELETE",t,e,!0,i)},post:function(t,e,i){return 1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window[e],0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,s,o,l){var r=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==n&&(r.onreadystatechange=function(){if(4==r.readyState||1==a&&3==r.readyState){if((200!=r.status||""==r.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}]))return;window.setTimeout(function(){"function"==typeof s&&s.apply(window,[{xmlDoc:r,filePath:e,async:n}]),null!=o&&(void 0!==o.postData?dhx4.ajax.postLong(o.url,o.postData,s):dhx4.ajax.getLong(o.url,s)),s=null,r=null},1)}}),"GET"==t&&(e+=this._dhxr(e)),r.open(t,e,n),null!=l)for(var h in l)r.setRequestHeader(h,l[h]);else"POST"==t||"PUT"==t||"DELETE"==t?r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);return r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(i),1!=n&&(4==r.readyState||1==a&&3==r.readyState)&&(200==r.status&&""!=r.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}])),{xmlDoc:r,filePath:e,async:n}},_dhxr:function(t,e){return 1!=this.cache?(null==t.match(/^[\?\&]$/)&&(t=t.indexOf("?")>=0?"&":"?"),void 0===e&&(e=!0),t+"dhxr"+(new Date).getTime()+(1==e?"=1":"")):""}}),void 0===window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(t,e,i,n,s){if("clear"==s){for(var o in t._dhxdataload)t._dhxdataload[o]=null,delete t._dhxdataload[o];return t._loadData=null,t._dhxdataload=null,t.load=null,t.loadStruct=null,void(t=null)}if(t._dhxdataload={initObj:e,xmlToJson:i,xmlRootTag:n,onBeforeXLS:null},t._loadData=function(t,e,i){2==arguments.length&&(i=e,e=null);var n=null;if(3==arguments.length&&(i=arguments[2]),"string"==typeof t){var s=t.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");if(new RegExp("^<"+this._dhxdataload.xmlRootTag).test(s.replace(/^<\?xml[^\?]*\?>\s*/,""))&&null!=(n=dhx4.ajax.parse(t))&&(n=this[this._dhxdataload.xmlToJson].apply(this,[n])),null!=n||null==s.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==s.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(n=dhx4.s2j(s)),null==n){this.callEvent("onXLS",[]);var o=[];if("function"==typeof this._dhxdataload.onBeforeXLS)if(null!=(s=this._dhxdataload.onBeforeXLS.apply(this,[t]))&&"object"==typeof s&&(null!=s.url&&(t=s.url),null!=s.params))for(var l in s.params)o.push(l+"="+encodeURIComponent(s.params[l]));var r=this,a=function(e){var n=null;null!=(n=(e.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=e.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?r[r._dhxdataload.xmlToJson].apply(r,[e.xmlDoc.responseXML]):dhx4.s2j(e.xmlDoc.responseText))&&r[r._dhxdataload.initObj].apply(r,[n,t]),r.callEvent("onXLE",[]),null!=i&&("function"==typeof i?i.apply(r,[]):"function"==typeof window[i]&&window[i].apply(r,[])),a=i=null,n=e=r=null};return o=o.join("&")+("string"==typeof e?"&"+e:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(t,o,a):"get"==dhx4.ajax.method&&dhx4.ajax.get(t+(o.length>0?(t.indexOf("?")>0?"&":"?")+o:""),a))}}else n="object"==typeof t.documentElement||void 0!==t.tagName&&void 0!==t.getElementsByTagName&&t.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[t]):window.dhx4._copyObj(t);null!=n&&this[this._dhxdataload.initObj].apply(this,[n]),null!=i&&("function"==typeof i?i.apply(this,[]):"function"==typeof window[i]&&window[i].apply(this,[]),i=null)},null!=s){var l={struct:"loadStruct",data:"load"};for(var o in s)1==s[o]&&(t[l[o]]=function(){return this._loadData.apply(this,arguments)})}t=null}),void 0===window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){if("clear"==e)return t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null);t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var i=window.dhx4.newId();return this.dhxevs.data[t][i]=e,i},t.detachEvent=function(t){for(var e in this.dhxevs.data){var i=0;for(var n in this.dhxevs.data[e])n==t?(this.dhxevs.data[e][n]=null,delete this.dhxevs.data[e][n]):i++;0==i&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var i=!0;for(var n in this.dhxevs.data[t])i=this.dhxevs.data[t][n].apply(this,e)&&i;return i},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},t=null},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return!!t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)},isValidSSN:function(t){return!!t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)},isValidSIN:function(t){return!!t.toString().match(/^\d{9}$/)}},dhtmlxValidation=new dhtmlxValidation),void 0===window.dhtmlx&&(window.dhtmlx={extend:function(t,e){for(var i in e)t[i]||(t[i]=e[i]);return t},extend_api:function(t,e,i){var n=window[t];n&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var i=n.apply(this,e._init?e._init(t):arguments);for(var s in dhtmlx)e[s]&&this[e[s]](dhtmlx[s]);for(var s in t)e[s]?this[e[s]](t[s]):0===s.indexOf("on")&&this.attachEvent(s,t[s])}else i=n.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=n.prototype,i&&dhtmlx.extend(window[t].prototype,i))},url:function(t){return-1!=t.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){if(!t&&!window.event||2!=(t||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault)&&(t.preventDefault(),!1))},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var i=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var n=document.createElement("Div");n.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=n.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),i.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)s=t.srcElement;else var s=t.target;dragger.checkLanding(s,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var s=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*s.split("_")[0],n+=1*s.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var i=dragger.lastLanding;dragger.lastLanding=null,i&&i.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,i,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),void 0===window.dhtmlxEvent)function dhtmlxEvent(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function dhtmlXMenuObject(t,e){var i=this;if(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"dhx_skyblue",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",arrow_ff_fix:navigator.userAgent.indexOf("MSIE")>=0&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24},tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]},"object"==typeof t&&null!=t&&void 0===t.tagName){for(var n in null==t.icons_path&&null==t.icon_path||(this.conf.icons_path=t.icons_path||t.icon_path),null!=t.skin&&(this.conf.skin=t.skin),t.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:t.visible_area.x1,x2:t.visible_area.x2,y1:t.visible_area.y1,y2:t.visible_area.y2}),{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1})null!=t[n]&&(this.conf.autoload[n]=t[n]);t=t.parent}if(null==t)this.base=document.body;else{var s="string"==typeof t?document.getElementById(t):t;null!=s?(this.base=s,this.base.id||(this.base.id="menuBaseId_"+(new Date).getTime()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1}):this.base=document.body}for(var n in this.idPrefix="",this.topId="dhxWebMenuTopId",this.idPull={},this.itemPull={},this.userData={},this.radio={},this.setSkin=function(t){var e=this.conf.skin;switch(this.conf.skin=t,this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2,this.conf.tl_rmarg=1,this.conf.tl_ofsleft=1;break;case"dhx_terrace":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}for(var i in this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+e+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle"),this.idPull)this.idPull[i].className=String(this.idPull[i].className).replace(e,this.conf.skin)},this.setSkin(this.conf.skin),this._addSubItemToSelected=function(t,e){for(var i=!0,n=0;n<this.conf.selected_sub.length;n++)this.conf.selected_sub[n][0]==t&&this.conf.selected_sub[n][1]==e&&(i=!1);return 1==i&&this.conf.selected_sub.push(new Array(t,e)),i},this._removeSubItemFromSelected=function(t,e){for(var i=new Array,n=!1,s=0;s<this.conf.selected_sub.length;s++)this.conf.selected_sub[s][0]==t&&this.conf.selected_sub[s][1]==e?n=!0:i[i.length]=this.conf.selected_sub[s];return 1==n&&(this.conf.selected_sub=i),n},this._getSubItemToDeselectByPolygon=function(t){for(var e=new Array,i=0;i<this.conf.selected_sub.length;i++)if(this.conf.selected_sub[i][1]==t){e[e.length]=this.conf.selected_sub[i][0],e=e.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[i][0]));for(var n=!0,s=0;s<this.conf.opened_poly.length;s++)this.conf.opened_poly[s]==this.conf.selected_sub[i][0]&&(n=!1);1==n&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[i][0]),this.conf.selected_sub[i][0]=-1,this.conf.selected_sub[i][1]=-1}return e},this._hidePolygon=function(t){if(null!=this.idPull["polygon_"+t]){if(null!=this.idPull["polygon_"+t]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+t]._zId),void 0!==this._menuEffect&&!1!==this._menuEffect)this._hidePolygonEffect("polygon_"+t);else{if("none"==this.idPull["polygon_"+t].style.display)return;this.idPull["polygon_"+t].style.display="none",null!=this.idPull["arrowup_"+t]&&(this.idPull["arrowup_"+t].style.display="none"),null!=this.idPull["arrowdown_"+t]&&(this.idPull["arrowdown_"+t].style.display="none"),this._updateItemComplexState(t,!0,!1),window.dhx4.isIE6&&null!=this.idPull["polygon_"+t+"_ie6cover"]&&(this.idPull["polygon_"+t+"_ie6cover"].style.display="none")}(t=String(t).replace(this.idPrefix,""))==this.topId&&(t=null),this.callEvent("onHide",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!0)}},this._showPolygon=function(t,e){var i=this._countVisiblePolygonItems(t);if(0!=i){var n="polygon_"+t;if(null!=this.idPull[n]&&null!=this.idPull[t]){if(this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&!this.idPull[t]._mouseOver&&e==this.conf.dir_toplv)return;this.conf.fixed_pos||this._autoDetectVisibleArea();var s=null,o=null;if(null==this.idPull[n]._zId&&(this.idPull[n]._zId=window.dhx4.newId()),this.idPull[n]._zInd=window.dhx4.zim.reserve(this.idPull[n]._zId),this.idPull[n].style.visibility="hidden",this.idPull[n].style.left="0px",this.idPull[n].style.top="0px",this.idPull[n].style.display="",this.idPull[n].style.zIndex=this.idPull[n]._zInd,this.conf.auto_overflow)if(this.idPull[n].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-this.conf.v.y1){var l=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-2*this.conf.of_ah[this.conf.skin])/this.conf.of_ih[this.conf.skin]),1);this.conf.overflow_limit=l}else this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+t]&&this._removeUpArrow(String(t).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+t]&&this._removeDownArrow(String(t).replace(this.idPrefix,""));if(this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(null==this.idPull["arrowup_"+t]&&this._addUpArrow(String(t).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+t]&&this._addDownArrow(String(t).replace(this.idPrefix,"")),(s=this.idPull["arrowup_"+t]).style.display="none",(o=this.idPull["arrowdown_"+t]).style.display="none"),this.conf.overflow_limit>0&&this.conf.overflow_limit<i?(this.idPull[n].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px",s.style.width=o.style.width=this.idPull[n].childNodes[1].style.width=this.idPull[n].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[n].childNodes[1].scrollTop=0,s.style.display="",s.offsetHeight,o.style.display="",o.offsetHeight):(this.idPull[n].childNodes[1].style.height="",this.idPull[n].childNodes[1].style.width=""),null!=this.itemPull[t])this.itemPull[t].parent;else if(this.conf.context)this.idPull[this.idPrefix+this.topId];var r=null!=this.idPull[t].tagName?window.dhx4.absLeft(this.idPull[t]):this.idPull[t][0],a=null!=this.idPull[t].tagName?window.dhx4.absTop(this.idPull[t]):this.idPull[t][1],h=null!=this.idPull[t].tagName?this.idPull[t].offsetWidth:0,d=null!=this.idPull[t].tagName?this.idPull[t].offsetHeight:0,c=0,u=0,f=this.idPull[n].offsetWidth,p=this.idPull[n].offsetHeight;if("bottom"==e&&(c=this.conf.rtl?r+(null!=h?h:0)-f:"right"==this.conf.align?r+h-f:r-1+(e==this.conf.dir_toplv?this.conf.tl_rmarg:0),u=a-1+d+this.conf.tl_botmarg),"right"==e&&(c=r+h-1,u=a+2),"left"==e&&(c=r-this.idPull[n].offsetWidth+2,u=a+2),"top"==e&&(c=r-1,u=a-p+2),this.conf.fixed_pos)var m=65536,g=65536;else{m=null!=this.conf.v.x2?this.conf.v.x2:0,g=null!=this.conf.v.y2?this.conf.v.y2:0;0==m&&(window.innerWidth?(m=window.innerWidth,g=window.innerHeight):(m=document.body.offsetWidth,g=document.body.scrollHeight))}if(c+f>m&&!this.conf.rtl&&(c=r-f+2),c<this.conf.v.x1&&this.conf.rtl&&(c=r+h-2),c<0&&(c=0),u+p>g&&null!=this.conf.v.y2&&(u=Math.max(a+d-p+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==t&&null!=o&&(u-=2),null==this.itemPull[t]||this.conf.context||this.itemPull[t].parent==this.idPrefix+this.topId&&(u-=this.base.offsetHeight)),this.idPull[n].style.left=c+"px",this.idPull[n].style.top=u+"px",void 0!==this._menuEffect&&!1!==this._menuEffect)this._showPolygonEffect(n);else if(this.idPull[n].style.visibility="",this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(this.idPull[n].childNodes[1].scrollTop=0,this._checkArrowsState(t)),window.dhx4.isIE6){var _=n+"_ie6cover";if(null==this.idPull[_]){var v=document.createElement("IFRAME");v.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,v.frameBorder=0,v.setAttribute("src","javascript:false;"),document.body.insertBefore(v,document.body.firstChild),this.idPull[_]=v}this.idPull[_].style.left=c+"px",this.idPull[_].style.top=u+"px",this.idPull[_].style.width=this.idPull[n].offsetWidth+"px",this.idPull[_].style.height=this.idPull[n].offsetHeight+"px",this.idPull[_].style.zIndex=this.idPull[n].style.zIndex-1,this.idPull[_].style.display=""}(t=String(t).replace(this.idPrefix,""))==this.topId&&(t=null),this.callEvent("onShow",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!1)}}},this._redistribSubLevelSelection=function(t,e){for(;this.conf.opened_poly.length>0;)this.conf.opened_poly.pop();var i=this._getSubItemToDeselectByPolygon(e);this._removeSubItemFromSelected(-1,-1);for(var n=0;n<i.length;n++)null!=this.idPull[i[n]]&&i[n]!=t&&"enabled"==this.itemPull[i[n]].state&&(this.idPull[i[n]].className="sub_item");for(n=0;n<this.conf.opened_poly.length;n++)this.conf.opened_poly[n]!=e&&this._hidePolygon(this.conf.opened_poly[n]);if("enabled"==this.itemPull[t].state){if(this.idPull[t].className="sub_item_selected",this.itemPull[t].complex&&this.conf.dload&&"no"==this.itemPull[t].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(t,!0),this.itemPull[t].loaded="get";var s=t.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in t.params[this.conf.dload_pid]=s,this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)}(this.itemPull[t].complex||this.conf.dload&&"yes"==this.itemPull[t].loaded)&&this.itemPull[t].complex&&null!=this.idPull["polygon_"+t]&&(this._updateItemComplexState(t,!0,!0),this._showPolygon(t,this.conf.dir_sublv)),this._addSubItemToSelected(t,e),this.conf.selected=t}},this._doOnClick=function(t,e,i){if(this.conf.last_click=t,null!=this.itemPull[this.idPrefix+t].href_link&&"enabled"==this.itemPull[this.idPrefix+t].state){var n=document.createElement("FORM"),s=String(this.itemPull[this.idPrefix+t].href_link).split("?");if(n.action=s[0],null!=s[1])for(var o=String(s[1]).split("&"),l=0;l<o.length;l++){var r=String(o[l]).split("="),a=document.createElement("INPUT");a.type="hidden",a.name=r[0]||"",a.value=r[1]||"",n.appendChild(a)}return null!=this.itemPull[this.idPrefix+t].href_target&&(n.target=this.itemPull[this.idPrefix+t].href_target),n.style.display="none",document.body.appendChild(n),n.submit(),void(null!=n&&(document.body.removeChild(n),n=null))}if("c"!=e.charAt(0)&&"d"!=e.charAt(1)&&"s"!=e.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[t,this.conf.ctx_zoneid,i]);else if("d"==e.charAt(1)||"win"==this.conf.mode&&"t"==e.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}},this._doOnTouchMenu=function(t){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[t]))},this._searchMenuNode=function(t,e){for(var i=new Array,n=0;n<e.length;n++)if("object"==typeof e[n]){5==e[n].length&&"object"!=typeof e[n][0]&&e[n][0].replace(this.idPrefix,"")==t&&0==n&&(i=e);var s=this._searchMenuNode(t,e[n]);s.length>0&&(i=s)}return i},this._getMenuNodes=function(t){var e=new Array;for(var i in this.itemPull)this.itemPull[i].parent==t&&(e[e.length]=i);return e},this._genStr=function(t){for(var e="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<t;n++)e+=i.charAt(Math.round(Math.random()*(i.length-1)));return e},this.getItemType=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:this.itemPull[t].type},this.forEachItem=function(t){for(var e in this.itemPull)t(String(e).replace(this.idPrefix,""))},this._clearAndHide=function(){for(i.conf.selected=-1,i.conf.last_click=-1;i.conf.opened_poly.length>0;)i.conf.opened_poly.pop();for(var t=0;t<i.conf.selected_sub.length;t++){var e=i.conf.selected_sub[t][0];null!=i.idPull[e]&&"enabled"==i.itemPull[e].state&&("sub_item_selected"==i.idPull[e].className&&(i.idPull[e].className="sub_item"),i.idPull[e].className=="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected"&&(null!=i.itemPull[e].cssNormal?i.idPull[e].className=i.itemPull[e].cssNormal:i.idPull[e].className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal")),i._hidePolygon(e)}i.conf.is_touched=!1,i.conf.context&&i.conf.ctx_hideall&&i._hidePolygon(i.idPrefix+i.topId)},this._showSubLevelItem=function(t,e){null!=document.getElementById("arrow_"+this.idPrefix+t)&&(document.getElementById("arrow_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById("image_"+this.idPrefix+t)&&(document.getElementById("image_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById(this.idPrefix+t)&&(document.getElementById(this.idPrefix+t).style.display=e?"":"none")},this._hideSubLevelItem=function(t){this._showSubLevelItem(t,!0)},this.idPrefix=this._genStr(12)+"_",this._bodyClick=function(t){2==(t=t||event).button||window.dhx4.isOpera&&1==t.ctrlKey||(i.conf.context?i.conf.ctx_autohide&&(!window.dhx4.isOpera||i._isContextMenuVisible()&&window.dhx4.isOpera)&&i._hideContextMenu():i._clearAndHide&&i._clearAndHide())},this._bodyContext=function(t){t=t||event;var e=String((t.srcElement||t.target).className);if(-1==e.search("dhtmlxMenu")||-1==e.search("SubLevelArea")){for(var n=!0,s=t.target||t.srcElement;null!=s;)null!=s.id&&i.isContextZone(s.id)&&(n=!1),s==document.body&&(n=!1),s=s.parentNode;n&&i.hideContextMenu()}},void 0!==window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)),this.unload=function(){window.dhx4._eventable(this,"clear"),dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(t){}if(this.conf.live_id=null,"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.conf.context)for(var t in this.conf.ctx_zones)this.removeContextZone(t);for(var t in null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null),null!=this.base&&(this.conf.context||(this.base.className=""),this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null),this)this[t]=null;i=null},dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this,window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0}),window.dhx4._eventable(this),1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu(),null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload),{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[n]&&("function"==typeof this.conf.autoload[n]?this.attachEvent(n,this.conf.autoload[n]):"function"==typeof window[this.conf.autoload[n]]&&this.attachEvent(n,window[this.conf.autoload[n]]));for(var n in null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text),null!=this.conf.autoload.align&&this.setAlign(this.conf.autoload.align),null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode),null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow),this.conf.autoload)this.conf.autoload[n]=null,delete this.conf.autoload[n];return this.conf.autoload=null,this}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}if(null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),void 0===dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){var t,e,i,n;function s(){if(e){var i=document.createEvent("HTMLEvents");i.initEvent("dblclick",!0,!0),e.dispatchEvent(i),t=e=null}}dhtmlxEvent(document.body,"touchstart",function(o){e=o.touches[0].target,i=o.touches[0].clientX,n=o.touches[0].clientY,t=window.setTimeout(s,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(s){t&&(Math.abs(s.touches[0].clientX-i)>50||Math.abs(s.touches[0].clientY-n)>50)&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent(document.body,"touchend",function(i){t&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent.initTouch=function(){}}),dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))},dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(t){var e=0;for(var i in this.itemPull){var n=this.itemPull[i].parent,s=this.itemPull[i].type;null!=this.idPull[i]&&(n!=t||"item"!=s&&"radio"!=s&&"checkbox"!=s||"none"==this.idPull[i].style.display||e++)}return e},dhtmlXMenuObject.prototype._redefineComplexState=function(t){if(this.idPrefix+this.topId!=t&&null!=this.idPull["polygon_"+t]&&null!=this.idPull[t]){var e=this._countVisiblePolygonItems(t);e>0&&!this.itemPull[t].complex&&this._updateItemComplexState(t,!0,!1),0==e&&this.itemPull[t].complex&&this._updateItemComplexState(t,!1,!1)}},dhtmlXMenuObject.prototype._updateItemComplexState=function(t,e,i){if(this.conf.context||"TopLevel"!=this._getItemLevelType(t.replace(this.idPrefix,""))){if(null!=this.idPull[t]&&null!=this.itemPull[t]&&(this.itemPull[t].complex=e,t!=this.idPrefix+this.topId)){var n=null,s=this.idPull[t].childNodes[this.conf.rtl?0:2];if(s.childNodes[0]&&0===String(s.childNodes[0].className).search("complex_arrow")&&(n=s.childNodes[0]),this.itemPull[t].complex){if(null==n){for((n=document.createElement("DIV")).className="complex_arrow",n.id="arrow_"+t;s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(n)}this.conf.dload&&"get"==this.itemPull[t].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=n.className&&(n.className="complex_arrow_loading"):n.className="complex_arrow"}else this.itemPull[t].complex||null==n||(s.removeChild(n),null!=this.itemPull[t].hotkey_backup&&this.setHotKey&&this.setHotKey(t.replace(this.idPrefix,""),this.itemPull[t].hotkey_backup))}}else this.itemPull[t].complex=e},dhtmlXMenuObject.prototype._getItemLevelType=function(t){return this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"},dhtmlXMenuObject.prototype.setIconsPath=function(t){this.conf.icons_path=t},dhtmlXMenuObject.prototype._updateItemImage=function(t,e){t=this.idPrefix+t;var i=this.itemPull[t].type;if("checkbox"!=i&&"radio"!=i){var n=this.itemPull[t].parent==this.idPrefix+this.topId&&!this.conf.context,s=null;if(n)for(var o=0;o<this.idPull[t].childNodes.length;o++)try{"dhtmlxMenu_TopLevel_Item_Icon"==this.idPull[t].childNodes[o].className&&(s=this.idPull[t].childNodes[o])}catch(t){}else{try{s=this.idPull[t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(t){}null!=s&&void 0!==s.className&&"sub_icon"==s.className||(s=null)}var l=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(l.length>0)if(null!=s)s.src=this.conf.icons_path+l;else if(n){(s=document.createElement("IMG")).className="dhtmlxMenu_TopLevel_Item_Icon",s.src=this.conf.icons_path+l,s.border="0",s.id="image_"+t,!this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(s,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(s)}else{(s=document.createElement("IMG")).className="sub_icon",s.src=this.conf.icons_path+l,s.border="0",s.id="image_"+t;for(var r=this.idPull[t].childNodes[this.conf.rtl?2:0];r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(s)}else if(null!=s){var a=s.parentNode;a.removeChild(s),a.innerHTML="&nbsp;",a=s=null}}},dhtmlXMenuObject.prototype._getAllParents=function(t){var e=new Array;for(var i in this.itemPull)if(this.itemPull[i].parent==t&&(e[e.length]=this.itemPull[i].id,this.itemPull[i].complex))for(var n=this._getAllParents(this.itemPull[i].id),s=0;s<n.length;s++)e[e.length]=n[s];return e},dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var t=window.dhx4.screenDim();this.conf.v.x1=t.left,this.conf.v.x2=t.right,this.conf.v.y1=t.top,this.conf.v.y2=t.bottom}},dhtmlXMenuObject.prototype.getItemPosition=function(t){t=this.idPrefix+t;var e=-1;if(null==this.itemPull[t])return e;for(var i=this.itemPull[t].parent,n=null!=this.idPull["polygon_"+i]?this.idPull["polygon_"+i].tbd:this.cont,s=0;s<n.childNodes.length;s++)n.childNodes[s]!=this.idPull["separator_"+t]&&n.childNodes[s]!=this.idPull[t]||(e=s);return e},dhtmlXMenuObject.prototype.setItemPosition=function(t,e){if(t=this.idPrefix+t,null!=this.idPull[t]){var i=this.itemPull[t].parent==this.idPrefix+this.topId,n=this.idPull[t],s=this.getItemPosition(t.replace(this.idPrefix,"")),o=this.itemPull[t].parent,l=null!=this.idPull["polygon_"+o]?this.idPull["polygon_"+o].tbd:this.cont;l.removeChild(l.childNodes[s]),e<0&&(e=0),i&&e<1&&(e=1),e<l.childNodes.length?l.insertBefore(n,l.childNodes[e]):l.appendChild(n)}},dhtmlXMenuObject.prototype.getParentId=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:(null!=this.itemPull[t].parent?this.itemPull[t].parent:this.topId).replace(this.idPrefix,"")},dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()},dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0),this._isInited=!1,this.idPrefix=this._genStr(12)+"_",this.itemPull={}},void 0===dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={}),dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(t,e){var i=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var n=0;n<i.length;n++)i[n]!=t&&this._hidePolygon(i[n]),null!=this.idPull[i[n]]&&i[n]!=t&&(this.idPull[i[n]].className=this.idPull[i[n]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+t].state&&(this.idPull[this.idPrefix+t].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+t,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?t:this.conf.selected:t,this.itemPull[this.idPrefix+t].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+t,this.conf.dir_toplv))},dhtmlXMenuObject.prototype._initTopLevelMenu=function(){if(this.conf.dir_toplv="bottom",this.conf.dir_sublv=this.conf.rtl?"left":"right",this.conf.context)this.idPull[this.idPrefix+this.topId]=new Array(0,0),this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var t=this._getMenuNodes(this.idPrefix+this.topId),e=0;e<t.length;e++)"item"==this.itemPull[t[e]].type&&this._renderToplevelItem(t[e],null),"separator"==this.itemPull[t[e]].type&&this._renderSeparator(t[e],null)},dhtmlXMenuObject.prototype._renderToplevelItem=function(t,e){var i=this,n=document.createElement("DIV");if(n.id=t,"enabled"==this.itemPull[t].state&&null!=this.itemPull[t].cssNormal?n.className=this.itemPull[t].cssNormal:n.className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[t].state?"Normal":"Disabled"),""!=this.itemPull[t].title){var s=document.createElement("DIV");s.className="top_level_text",s.innerHTML=this.itemPull[t].title,n.appendChild(s)}if(this.itemPull[t].tip.length>0&&(n.title=this.itemPull[t].tip),""!=this.itemPull[t].imgen||""!=this.itemPull[t].imgdis){var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(o){var l=document.createElement("IMG");l.border="0",l.id="image_"+t,l.src=this.conf.icons_path+o,l.className="dhtmlxMenu_TopLevel_Item_Icon",n.childNodes.length>0&&!this.conf.rtl?n.insertBefore(l,n.childNodes[0]):n.appendChild(l)}}n.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},n.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont)),null!=e&&(++e<0&&(e=0),e>this.cont.childNodes.length-1&&(e=null)),null!=e?this.cont.insertBefore(n,this.cont.childNodes[e]):this.cont.appendChild(n),this.idPull[n.id]=n,this.itemPull[t].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[t].id,this.itemPull[t].id),n.onmouseover=function(){"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler);var t=i._getSubItemToDeselectByPolygon("parent");i._removeSubItemFromSelected(-1,-1);for(var e=0;e<t.length;e++)t[e]!=this.id&&i._hidePolygon(t[e]),null!=i.idPull[t[e]]&&t[e]!=this.id&&(null!=i.itemPull[t[e]].cssNormal?i.idPull[t[e]].className=i.itemPull[t[e]].cssNormal:("sub_item_selected"==i.idPull[t[e]].className&&(i.idPull[t[e]].className="sub_item"),i.idPull[t[e]].className=i.idPull[t[e]].className.replace(/Selected/g,"Normal")));if("enabled"==i.itemPull[this.id].state){if(this.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected",i._addSubItemToSelected(this.id,"parent"),i.conf.selected="win"==i.conf.mode?-1!=i.conf.selected?this.id:i.conf.selected:this.id,i.conf.dload){if("no"==i.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime(),i.itemPull[this.id].loaded="get";var n=this.id.replace(i.idPrefix,"");i._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in t.params[this.conf.dload_pid]=n,this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},i.loadStruct(i.conf.dload_url)}i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!0)}if((!i.conf.dload||i.conf.dload&&(!i.itemPull[this.id].loaded||"yes"==i.itemPull[this.id].loaded))&&i.itemPull[this.id].complex&&-1!=i.conf.selected)if(i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context){this._mouseOver=!0;var s=this.id;this._menuOpenTM=window.setTimeout(function(){i._showPolygon(s,i.conf.dir_toplv)},i.conf.top_tmtime)}else i._showPolygon(this.id,i.conf.dir_toplv)}i._doOnTouchMenu(this.id.replace(i.idPrefix,""))},n.onmouseout=function(){i.itemPull[this.id].complex&&-1!=i.conf.selected||"enabled"!=i.itemPull[this.id].state||(null!=i.itemPull[this.id].cssNormal?n.className=i.itemPull[this.id].cssNormal:n.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal"),"web"==i.conf.mode&&(window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i._clearAndHide()},i.conf.tm_sec,"JavaScript")),i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))},n.onclick=function(t){if("web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),"web"==i.conf.mode||"disabled"!=i.itemPull[this.id].state){if((t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,"win"==i.conf.mode&&i.itemPull[this.id].complex){if(i.conf.selected==this.id){i.conf.selected=-1;var e=!1}else{i.conf.selected=this.id;e=!0}e?i._showPolygon(this.id,i.conf.dir_toplv):i._hidePolygon(this.id)}var n=i.itemPull[this.id].complex?"c":"-",s="enabled"!=i.itemPull[this.id].state?"d":"-",o={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};return i._doOnClick(this.id.replace(i.idPrefix,""),n+s+"t",o),!1}},"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addSubMenuPolygon=function(t,e){this._renderSublevelPolygon(t,e);var i=this._getMenuNodes(e);for(n=0;n<i.length;n++)"separator"==this.itemPull[i[n]].type?this._renderSeparator(i[n],null):this._renderSublevelItem(i[n],null);if(t==e);else;for(var n=0;n<i.length;n++)this.itemPull[i[n]].complex&&this._addSubMenuPolygon(t,this.itemPull[i[n]].id)},dhtmlXMenuObject.prototype._renderSublevelPolygon=function(t,e){var i=document.createElement("DIV");i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":""),i.dir="ltr",i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1},i.id="polygon_"+e,i.onclick=function(t){(t=t||event).cancelBubble=!0},i.style.display="none",document.body.insertBefore(i,document.body.firstChild),i.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var n=document.createElement("TABLE");n.className="dhtmlxMebu_SubLevelArea_Tbl",n.cellSpacing=0,n.cellPadding=0,n.border=0;var s=document.createElement("TBODY");return n.appendChild(s),i.childNodes[1].appendChild(n),i.tbl=n,i.tbd=s,this.idPull[i.id]=i,null!=this.sxDacProc&&(this.idPull["sxDac_"+e]=new this.sxDacProc(i,i.className),window.dhx4.isIE?(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCycles))),i},dhtmlXMenuObject.prototype._renderSublevelItem=function(t,e){var i=this,n=document.createElement("TR");n.className="enabled"==this.itemPull[t].state?"sub_item":"sub_item_dis";var s=document.createElement("TD");s.className="sub_item_icon";var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(""!=o){var l,r=this.itemPull[t].type;if("checkbox"==r||"radio"==r)(l=document.createElement("DIV")).id="image_"+this.itemPull[t].id,l.className="sub_icon "+o,s.appendChild(l);if("checkbox"!=r&&"radio"!=r)(l=document.createElement("IMG")).id="image_"+this.itemPull[t].id,l.className="sub_icon",l.src=this.conf.icons_path+o,s.appendChild(l)}else s.innerHTML="&nbsp;";var a=document.createElement("TD");if(a.className="sub_item_text",""!=this.itemPull[t].title){var h=document.createElement("DIV");h.className="sub_item_text",h.innerHTML=this.itemPull[t].title,a.appendChild(h)}else a.innerHTML="&nbsp;";var d=document.createElement("TD");if(d.className="sub_item_hk",this.itemPull[t].complex){var c=document.createElement("DIV");c.className="complex_arrow",c.id="arrow_"+this.itemPull[t].id,d.appendChild(c)}else if(this.itemPull[t].hotkey.length>0&&!this.itemPull[t].complex){var u=document.createElement("DIV");u.className="sub_item_hk",u.innerHTML=this.itemPull[t].hotkey,d.appendChild(u)}else d.innerHTML="&nbsp;";n.appendChild(this.conf.rtl?d:s),n.appendChild(a),n.appendChild(this.conf.rtl?s:d),n.id=this.itemPull[t].id,n.parent=this.itemPull[t].parent,this.itemPull[t].tip.length>0&&(n.title=this.itemPull[t].tip),n.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},n.onmouseover=function(t){i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),this._visible||i._redistribSubLevelSelection(this.id,this.parent),this._visible=!0},n.onmouseout=function(){"web"==i.conf.mode&&(i.conf.tm_handler&&window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i&&i._clearAndHide&&i._clearAndHide()},i.conf.tm_sec,"JavaScript"));var t=this;i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),i.conf.hide_tm[this.id]=window.setTimeout(function(){t._visible=!1},50)},n.onclick=function(t){if(i.checkEvent("onClick")||!i.itemPull[this.id].complex){(t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,tc=i.itemPull[this.id].complex?"c":"-",td="enabled"==i.itemPull[this.id].state?"-":"d";var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};switch(i.itemPull[this.id].type){case"checkbox":i._checkboxOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"radio":i._radioOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"item":i._doOnClick(this.id.replace(i.idPrefix,""),tc+td+"n",e)}return!1}};var f=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(++e<0&&(e=0),e>f.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=f.tbd.childNodes[e]?f.tbd.insertBefore(n,f.tbd.childNodes[e]):f.tbd.appendChild(n),this.idPull[n.id]=n},dhtmlXMenuObject.prototype._renderSeparator=function(t,e){var i=this.conf.context?"SubLevelArea":this.itemPull[t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=i||!this.conf.context){var n=this;if("TopLevel"!=i){var s=document.createElement("TR");s.className="sub_sep";var o=document.createElement("TD");o.colSpan="3",s.appendChild(o)}var l=document.createElement("DIV");if(l.id="separator_"+t,l.className="TopLevel"==i?"top_sep":"sub_sep",l.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},l.onclick=function(t){(t=t||event).cancelBubble=!0;var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};n._doOnClick(this.id.replace("separator_"+n.idPrefix,""),"--s",e)},"TopLevel"==i){if(null!=e)++e<0&&(e=0),null!=this.cont.childNodes[e]?this.cont.insertBefore(l,this.cont.childNodes[e]):this.cont.appendChild(l);else{var r=this.cont.childNodes[this.cont.childNodes.length-1];-1==String(r).search("TopLevel_Text")?this.cont.appendChild(l):this.cont.insertBefore(l,r)}this.idPull[l.id]=l}else{var a=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(++e<0&&(e=0),e>a.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=a.tbd.childNodes[e]?a.tbd.insertBefore(s,a.tbd.childNodes[e]):a.tbd.appendChild(s),o.appendChild(l),this.idPull[l.id]=s}}},dhtmlXMenuObject.prototype.addNewSeparator=function(t,e){e=this.idPrefix+(null!=e?e:this._genStr(24));var i=this.idPrefix+this.getParentId(t);this._addItemIntoGlobalStrorage(e,i,"","separator",!1,"",""),this._renderSeparator(e,this.getItemPosition(t))},dhtmlXMenuObject.prototype._initObj=function(t,e,i){t instanceof Array||(null!=(i=t.parentId)&&0!==String(i).indexOf(this.idPrefix)&&(i=this.idPrefix+String(i)),t=t.items);for(var n=0;n<t.length;n++){void 0!==t[n].id&&null!=t[n].id||(t[n].id=this._genStr(24)),null==t[n].text&&(t[n].text=""),0!==String(t[n].id).indexOf(this.idPrefix)&&(t[n].id=this.idPrefix+String(t[n].id));var s={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var o in s)void 0===t[n][o]&&(t[n][o]=s[o]);if(""==t[n].imgen&&null!=t[n].img&&(t[n].imgen=t[n].img),""==t[n].imgdis&&null!=t[n].img_disabled&&(t[n].imgdis=t[n].img_disabled),null==t[n].title&&null!=t[n].text&&(t[n].title=t[n].text),null!=t[n].href&&(null!=t[n].href.link&&(t[n].href_link=t[n].href.link),null!=t[n].href.target&&(t[n].href_target=t[n].href.target)),null!=t[n].userdata)for(var o in t[n].userdata)this.userData[t[n].id+"_"+o]=t[n].userdata[o];void 0!==t[n].enabled&&0==window.dhx4.s2b(t[n].enabled)?t[n].state="disabled":void 0!==t[n].disabled&&1==window.dhx4.s2b(t[n].disabled)&&(t[n].state="disabled"),void 0===t[n].parent&&(t[n].parent=null!=i?i:this.idPrefix+this.topId),"checkbox"==t[n].type&&(t[n].checked=window.dhx4.s2b(t[n].checked),t[n].imgen=t[n].imgdis="chbx_"+(t[n].checked?"1":"0")),"radio"==t[n].type&&(t[n].checked=window.dhx4.s2b(t[n].checked),t[n].imgen=t[n].imgdis="rdbt_"+(t[n].checked?"1":"0"),void 0!==t[n].group&&null!=t[n].group||(t[n].group=this._genStr(24)),null==this.radio[t[n].group]&&(this.radio[t[n].group]=[]),this.radio[t[n].group].push(t[n].id)),this.itemPull[t[n].id]=t[n],null!=t[n].items&&t[n].items.length>0?(this.itemPull[t[n].id].complex=!0,this._initObj(t[n].items,!0,t[n].id)):this.conf.dload&&1==t[n].complex&&(this.itemPull[t[n].id].loaded="no"),this.itemPull[t[n].id].items=null}if(!0!==e)if(1==this.conf.dload)if(null==i)this._initTopLevelMenu();else{if(this._addSubMenuPolygon(i,i),this.conf.selected==i){var l=this.itemPull[i].parent==this.idPrefix+this.topId,r=l&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv,a=!1;if(l&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context){var h=this.idPull[i];if(1==h._mouseOver){var d=this.conf.top_tmtime-((new Date).getTime()-h._dynLoadTM);if(d>1){var c=i,u=this;h._menuOpenTM=window.setTimeout(function(){u._showPolygon(c,r),u=c=null},d),a=!0}}}a||this._showPolygon(i,r)}this.itemPull[i].loaded="yes",1==this.conf.dload_icon&&this._updateLoaderIcon(i,!1)}else this._init()},dhtmlXMenuObject.prototype._xmlToJson=function(t,e){var i=[];if(null==e){var n=t.getElementsByTagName(this.conf.tags.root);if(null==n||null!=n&&0==n.length)return{items:[]};n=n[0]}else n=t;null!=n.getAttribute("parentId")&&(e=this.idPrefix+n.getAttribute("parentId"));for(var s=0;s<n.childNodes.length;s++)if(void 0!==n.childNodes[s].tagName&&String(n.childNodes[s].tagName).toLowerCase()==this.conf.tags.item){var o=n.childNodes[s],l={id:this.idPrefix+(o.getAttribute("id")||this._genStr(24)),title:o.getAttribute("text")||"",imgen:o.getAttribute("img")||"",imgdis:o.getAttribute("imgdis")||"",tip:"",hotkey:"",type:o.getAttribute("type")||"item"};if(null!=o.getAttribute("cssNormal")&&(l.cssNormal=o.getAttribute("cssNormal")),"checkbox"==l.type&&(l.checked=o.getAttribute("checked")),"radio"==l.type&&(l.checked=o.getAttribute("checked"),l.group=o.getAttribute("group")),l.state="enabled",null!=o.getAttribute("enabled")&&0==window.dhx4.s2b(o.getAttribute("enabled"))?l.state="disabled":null!=o.getAttribute("disabled")&&1==window.dhx4.s2b(o.getAttribute("disabled"))&&(l.state="disabled"),l.parent=null!=e?e:this.idPrefix+this.topId,this.conf.dload)l.complex=null!=o.getAttribute("complex"),l.complex&&(l.loaded="no");else{var r=this._xmlToJson(o,l.id);l.items=r.items,l.complex=l.items.length>0}for(var a=0;a<o.childNodes.length;a++)if(void 0!==o.childNodes[a].tagName){var h=String(o.childNodes[a].tagName||"").toLowerCase();if(h==this.conf.tags.userdata){var d=o.childNodes[a];null!=d.getAttribute("name")&&(this.userData[l.id+"_"+d.getAttribute("name")]=null!=d.firstChild&&null!=d.firstChild.nodeValue?d.firstChild.nodeValue:"")}h==this.conf.tags.text_ext&&(l.title=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.tooltip&&(l.tip=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.hotkey&&(l.hotkey=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.href&&"item"==l.type&&(l.href_link=o.childNodes[a].firstChild.nodeValue,null!=o.childNodes[a].getAttribute("target")&&(l.href_target=o.childNodes[a].getAttribute("target")))}i.push(l)}return o={parentId:e,items:i}},dhtmlXMenuObject.prototype.enableDynamicLoading=function(t,e){this.conf.dload=!0,this.conf.dload_url=t,this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"&",this.conf.dload_icon=e,this._init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(t,e){if(null!=this.idPull[t]&&!(String(this.idPull[t].className).search("TopLevel_Item")>=0)){var i=this.conf.rtl?0:2;if(this.idPull[t].childNodes[i]&&this.idPull[t].childNodes[i].childNodes[0]){var n=this.idPull[t].childNodes[i].childNodes[0];0===String(n.className).search("complex_arrow")&&(n.className="complex_arrow"+(e?"_loading":""))}}},dhtmlXMenuObject.prototype.addNewSibling=function(t,e,i,n,s,o){var l=this.idPrefix+(null!=e?e:this._genStr(24)),r=this.idPrefix+(null!=t?this.getParentId(t):this.topId);this._addItemIntoGlobalStrorage(l,r,i,"item",n,s,o),r!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(l,this.getItemPosition(t)):this._renderToplevelItem(l,this.getItemPosition(t))},dhtmlXMenuObject.prototype.addNewChild=function(t,e,i,n,s,o,l){if(null==t){if(!this.conf.context)return this.addNewSibling(t,i,n,s,o,l),void(null!=e&&this.setItemPosition(i,e));t=this.topId}i=this.idPrefix+(null!=i?i:this._genStr(24)),this.setHotKey&&this.setHotKey(t,""),t=this.idPrefix+t,this._addItemIntoGlobalStrorage(i,t,n,"item",s,o,l),null==this.idPull["polygon_"+t]&&this._renderSublevelPolygon(t,t),this._renderSublevelItem(i,e-1),this._redefineComplexState(t)},dhtmlXMenuObject.prototype.removeItem=function(t,e,i){e||(t=this.idPrefix+t);var n=null;if(t!=this.idPrefix+this.topId){if(null==this.itemPull[t])return;this.idPull["polygon_"+t]&&this.idPull["polygon_"+t]._tmShow&&window.clearTimeout(this.idPull["polygon_"+t]._tmShow);var s=this.itemPull[t].type;if("separator"==s){var o=this.idPull["separator_"+t];this.itemPull[t].parent==this.idPrefix+this.topId?(o.onclick=null,o.onselectstart=null,o.id=null,o.parentNode.removeChild(o)):(o.childNodes[0].childNodes[0].onclick=null,o.childNodes[0].childNodes[0].onselectstart=null,o.childNodes[0].childNodes[0].id=null,o.childNodes[0].removeChild(o.childNodes[0].childNodes[0]),o.removeChild(o.childNodes[0]),o.parentNode.removeChild(o)),this.idPull["separator_"+t]=null,this.itemPull[t]=null,delete this.idPull["separator_"+t],delete this.itemPull[t],o=null}else{for(n=this.itemPull[t].parent,(o=this.idPull[t]).onclick=null,o.oncontextmenu=null,o.onmouseover=null,o.onmouseout=null,o.onselectstart=null,o.id=null;o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.parentNode.removeChild(o),this.idPull[t]=null,this.itemPull[t]=null,delete this.idPull[t],delete this.itemPull[t],o=null}s=null}for(var l in this.itemPull)this.itemPull[l].parent==t&&this.removeItem(l,!0,!0);var r=new Array(t);null==n||i||null!=this.idPull["polygon_"+n]&&0==this.idPull["polygon_"+n].tbd.childNodes.length&&(r.push(n),this._updateItemComplexState(n,!1,!1));for(var a=0;a<r.length;a++)if(this.idPull["polygon_"+r[a]]){var h=this.idPull["polygon_"+r[a]];if(h.onclick=null,h.oncontextmenu=null,h.tbl.removeChild(h.tbd),h.tbd=null,h.childNodes[1].removeChild(h.tbl),h.tbl=null,h.id=null,h.parentNode.removeChild(h),h=null,window.dhx4.isIE6){var d="polygon_"+r[a]+"_ie6cover";null!=this.idPull[d]&&(document.body.removeChild(this.idPull[d]),delete this.idPull[d])}null!=this.idPull["arrowup_"+t]&&this._removeArrow&&this._removeArrow("arrowup_"+t),null!=this.idPull["arrowdown_"+t]&&this._removeArrow&&this._removeArrow("arrowdown_"+t),this.idPull["polygon_"+r[a]]=null,delete this.idPull["polygon_"+r[a]]}r=null,"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(t,e,i,n,s,o,l){var r={id:t,title:i,imgen:null!=o?o:"",imgdis:null!=l?l:"",type:n,state:1==s?"disabled":"enabled",parent:e,complex:!1,hotkey:"",tip:""};this.itemPull[r.id]=r},dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0,1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1),null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)},dhtmlXMenuObject.prototype.addContextZone=function(t){if(t==document.body){t="document.body."+this.idPrefix;var e=document.body}else if("string"==typeof t)e=document.getElementById(t);else e=t;var i=!1;for(var n in this.conf.ctx_zones)i=i||n==t||this.conf.ctx_zones[n]==e;if(1==i)return!1;this.conf.ctx_zones[t]=e;var s=this;window.dhx4.isOpera?(this.operaContext=function(t){s._doOnContextMenuOpera(t,s)},e.addEventListener("mouseup",this.operaContext,!1)):(null==e.oncontextmenu||e._oldContextMenuHandler||(e._oldContextMenuHandler=e.oncontextmenu),e.oncontextmenu=function(t){for(var e in dhtmlXMenuObject.prototype.liveInst)e!=s.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[e].context&&dhtmlXMenuObject.prototype.liveInst[e]._hideContextMenu();return(t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,s._doOnContextBeforeCall(t,this),!1})},dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(t,e){for(var i in dhtmlXMenuObject.prototype.liveInst)i!=e.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[i].context&&dhtmlXMenuObject.prototype.liveInst[i]._hideContextMenu();return t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,0==t.button&&1==t.ctrlKey&&e._doOnContextBeforeCall(t,this),!1},dhtmlXMenuObject.prototype.removeContextZone=function(t){if(!this.isContextZone(t))return!1;t==document.body&&(t="document.body."+this.idPrefix);var e=this.conf.ctx_zones[t];window.dhx4.isOpera?e.removeEventListener("mouseup",this.operaContext,!1):(e.oncontextmenu=null!=e._oldContextMenuHandler?e._oldContextMenuHandler:null,e._oldContextMenuHandler=null);try{this.conf.ctx_zones[t]=null,delete this.conf.ctx_zones[t]}catch(t){}return!0},dhtmlXMenuObject.prototype.isContextZone=function(t){if(t==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var e=!1;return null!=this.conf.ctx_zones[t]&&this.conf.ctx_zones[t]==document.getElementById(t)&&(e=!0),e},dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null!=this.idPull["polygon_"+this.idPrefix+this.topId]&&""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display},dhtmlXMenuObject.prototype._showContextMenu=function(t,e,i){if(this._clearAndHide(),null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;window.clearTimeout(this.conf.tm_handler),this.idPull[this.idPrefix+this.topId]=new Array(t,e),this._showPolygon(this.idPrefix+this.topId,"bottom"),this.callEvent("onContextMenu",[i])},dhtmlXMenuObject.prototype._hideContextMenu=function(){if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;this._clearAndHide(),this._hidePolygon(this.idPrefix+this.topId)},dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(t,e){if(this.conf.ctx_zoneid=e.id,this._clearAndHide(),this._hideContextMenu(),1==window.dhx4.isChrome||1==window.dhx4.isEdge||1==window.dhx4.isOpera||1==window.dhx4.isIE11||1==window.dhx4.isIE9)var i=window.dhx4.absLeft(t.currentTarget)+t.offsetX,n=window.dhx4.absTop(t.currentTarget)+t.offsetY;else if(1==window.dhx4.isIE6||1==window.dhx4.isIE7||1==window.dhx4.isIE)i=window.dhx4.absLeft(t.srcElement)+t.x||0,n=window.dhx4.absTop(t.srcElement)+t.y||0;else{var s=t.srcElement||t.target,o=window.dhx4.isIE||window.dhx4.isKHTML?t.offsetX:t.layerX,l=window.dhx4.isIE||window.dhx4.isKHTML?t.offsetY:t.layerY;i=window.dhx4.absLeft(s)+o,n=window.dhx4.absTop(s)+l}this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[e.id,t])&&this.conf.ctx_autoshow&&(this._showContextMenu(i,n,e.id),this.callEvent("onAfterContextMenu",[e.id,t])):this.conf.ctx_autoshow&&(this._showContextMenu(i,n,e.id),this.callEvent("onAfterContextMenu",[e.id]))},dhtmlXMenuObject.prototype.showContextMenu=function(t,e){this._showContextMenu(t,e,!1)},dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()},dhtmlXMenuObject.prototype.setAutoShowMode=function(t){this.conf.ctx_autoshow=1==t},dhtmlXMenuObject.prototype.setAutoHideMode=function(t){this.conf.ctx_autohide=1==t},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(t){this.conf.ctx_hideall=1==t},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall},dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var t in this.itemPull)if(this.itemPull[t].parent==this.idPrefix+this.topId&&null!=this.idPull[t]){var e=!1,i=!1;for(var n in this.idPull[t].parentNode.firstChild==this.idPull[t]&&(e=!0),this.idPull[t].parentNode.lastChild==this.idPull[t]&&(i=!0),this.itemPull)"separator"==this.itemPull[n].type&&this.itemPull[n].parent==this.idPrefix+this.topId&&(this.idPull[t].nextSibling==this.idPull["separator_"+n]&&(i=!0),this.idPull[t].previousSibling==this.idPull["separator_"+n]&&(e=!0));this.idPull[t].style.borderLeftWidth=e?"1px":"0px",this.idPull[t].style.borderTopLeftRadius=this.idPull[t].style.borderBottomLeftRadius=e?"3px":"0px",this.idPull[t].style.borderTopRightRadius=this.idPull[t].style.borderBottomRightRadius=i?"3px":"0px",this.idPull[t]._bl=e,this.idPull[t]._br=i}},dhtmlXMenuObject.prototype._improveTerraceButton=function(t,e){e?(this.idPull[t].style.borderBottomLeftRadius=this.idPull[t]._bl?"3px":"0px",this.idPull[t].style.borderBottomRightRadius=this.idPull[t]._br?"3px":"0px"):(this.idPull[t].style.borderBottomLeftRadius="0px",this.idPull[t].style.borderBottomRightRadius="0px")},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_menu=function(t,e,i,n,s){return void 0!==s?t=s:((t=document.createElement("DIV")).className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV"))),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),this.conf.ofs_nodes.t.menu=!0,this._updateIdx(),t},dhtmlXCellObject.prototype.attachMenu=function(t){if(!this.dataNodes.menu)return this.callEvent("_onBeforeContentAttach",["menu"]),void 0===t&&(t={}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(t),this._adjustCont(this._idd),t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataNodes.menu},dhtmlXCellObject.prototype.detachMenu=function(){this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu}),dhtmlXMenuObject.prototype.setItemEnabled=function(t){this._changeItemState(t,"enabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.setItemDisabled=function(t){this._changeItemState(t,"disabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.isItemEnabled=function(t){return null!=this.itemPull[this.idPrefix+t]&&"enabled"==this.itemPull[this.idPrefix+t].state},dhtmlXMenuObject.prototype._changeItemState=function(t,e,i){var n=this.idPrefix+t;return null!=this.itemPull[n]&&null!=this.idPull[n]&&this.itemPull[n].state!=e&&(this.itemPull[n].state=e,this.itemPull[n].parent!=this.idPrefix+this.topId||this.conf.context?this.idPull[n].className="sub_item"+("enabled"==this.itemPull[n].state?"":"_dis"):this.idPull[n].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[n].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+t,this.itemPull[this.idPrefix+t].complex,!1),this._updateItemImage(t,i),this.idPrefix+this.conf.last_click==n&&"TopLevel"!=i&&this._redistribSubLevelSelection(n,this.itemPull[n].parent),"TopLevel"==i&&this.conf.context),!1},dhtmlXMenuObject.prototype.getItemText=function(t){return null!=this.itemPull[this.idPrefix+t]?this.itemPull[this.idPrefix+t].title:""},dhtmlXMenuObject.prototype.setItemText=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t])if(this._clearAndHide(),this.itemPull[t].title=e,this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context){for(i=null,n=0;n<this.idPull[t].childNodes[1].childNodes.length;n++)"sub_item_text"==String(this.idPull[t].childNodes[1].childNodes[n].className||"")&&(i=this.idPull[t].childNodes[1].childNodes[n]);""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?i&&(i.parentNode.removeChild(i),i=null,this.idPull[t].childNodes[1].innerHTML="&nbsp;"):(i||((i=document.createElement("DIV")).className="sub_item_text",this.idPull[t].childNodes[1].innerHTML="",this.idPull[t].childNodes[1].appendChild(i)),i.innerHTML=this.itemPull[t].title)}else{for(var i=null,n=0;n<this.idPull[t].childNodes.length;n++)try{"top_level_text"==this.idPull[t].childNodes[n].className&&(i=this.idPull[t].childNodes[n])}catch(t){}""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?null!=i&&i.parentNode.removeChild(i):(i||((i=document.createElement("DIV")).className="top_level_text",this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(i,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(i)),i.innerHTML=this.itemPull[t].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(t,e,i){var n=this.conf.tags.item;this.conf.tags.item="div";var s="string"==typeof t?document.getElementById(t):t,o=this._xmlToJson(s,this.idPrefix+this.topId);this._initObj(o),this.conf.tags.item=n,e&&s.parentNode.removeChild(s),s=objOd=null,null!=onload&&("function"==typeof i?i():"function"==typeof window[i]&&window[i]())},dhtmlXMenuObject.prototype.hideItem=function(t){this._changeItemVisible(t,!1)},dhtmlXMenuObject.prototype.showItem=function(t){this._changeItemVisible(t,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(t){var e=null;return null!=this.idPull[this.idPrefix+t]&&(e="none"==this.idPull[this.idPrefix+t].style.display),e},dhtmlXMenuObject.prototype._changeItemVisible=function(t,e){var i=this.idPrefix+t;null!=this.itemPull[i]&&("separator"==this.itemPull[i].type&&(i="separator_"+i),null!=this.idPull[i]&&(this.idPull[i].style.display=e?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+t].parent)))},dhtmlXMenuObject.prototype.setUserData=function(t,e,i){this.userData[this.idPrefix+t+"_"+e]=i},dhtmlXMenuObject.prototype.getUserData=function(t,e){return null!=this.userData[this.idPrefix+t+"_"+e]?this.userData[this.idPrefix+t+"_"+e]:null},dhtmlXMenuObject.prototype.setOpenMode=function(t){this.conf.mode="win"==t?"win":"web"},dhtmlXMenuObject.prototype.setWebModeTimeout=function(t){this.conf.tm_sec=isNaN(t)?400:t},dhtmlXMenuObject.prototype.getItemImage=function(t){var e=new Array(null,null);return t=this.idPrefix+t,"item"==this.itemPull[t].type&&(e[0]=this.itemPull[t].imgen,e[1]=this.itemPull[t].imgdis),e},dhtmlXMenuObject.prototype.setItemImage=function(t,e,i){"item"==this.itemPull[this.idPrefix+t].type&&(this.itemPull[this.idPrefix+t].imgen=e,this.itemPull[this.idPrefix+t].imgdis=i,this._updateItemImage(t,this._getItemLevelType(t)))},dhtmlXMenuObject.prototype.clearItemImage=function(t){this.setItemImage(t,"","")},dhtmlXMenuObject.prototype.setVisibleArea=function(t,e,i,n){this.conf.v_enabled=!0,this.conf.v.x1=t,this.conf.v.x2=e,this.conf.v.y1=i,this.conf.v.y2=n},dhtmlXMenuObject.prototype.setTooltip=function(t,e){t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.idPull[t].title=e.length>0?e:null,this.itemPull[t].tip=e)},dhtmlXMenuObject.prototype.getTooltip=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].tip},dhtmlXMenuObject.prototype.setTopText=function(t){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=t)},dhtmlXMenuObject.prototype.setAlign=function(t){this.conf.align!=t&&("left"!=t&&"right"!=t||(this.conf.align=t,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left"))))},dhtmlXMenuObject.prototype.setHref=function(t,e,i){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].href_link=e,null!=i&&(this.itemPull[this.idPrefix+t].href_target=i))},dhtmlXMenuObject.prototype.clearHref=function(t){null!=this.itemPull[this.idPrefix+t]&&(delete this.itemPull[this.idPrefix+t].href_link,delete this.itemPull[this.idPrefix+t].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(t){for(var e=new Array(t);this.getParentId(t)!=this.topId;)t=this.getParentId(t),e[e.length]=t;return e.reverse()},dhtmlXMenuObject.prototype._getCheckboxState=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(t,e){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].checked=e)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(t){if(null!=this.idPull[this.idPrefix+t]){this.itemPull[this.idPrefix+t].imgen="chbx_"+(this._getCheckboxState(t)?"1":"0"),this.itemPull[this.idPrefix+t].imgdis=this.itemPull[this.idPrefix+t].imgen;try{this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+t].imgen}catch(t){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t]){var n=this._getCheckboxState(t);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[t,n,this.conf.ctx_zoneid,i])&&this.setCheckboxState(t,!n):this.setCheckboxState(t,!n),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.setCheckboxState=function(t,e){this._setCheckboxState(t,e),this._updateCheckboxImage(t)},dhtmlXMenuObject.prototype.getCheckboxState=function(t){return this._getCheckboxState(t)},dhtmlXMenuObject.prototype.addCheckbox=function(t,e,i,n,s,o,l){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var r="chbx_"+(o?"1":"0"),a=r;if("sibling"==t){var h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,this._renderSublevelItem(h,this.getItemPosition(e))}else{h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+e;this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,null==this.idPull["polygon_"+d]&&this._renderSublevelPolygon(d,d),this._renderSublevelItem(h,i-1),this._redefineComplexState(d)}},dhtmlXMenuObject.prototype.setHotKey=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[t].complex){var i=this.itemPull[t].type;if("item"==i||"checkbox"==i||"radio"==i){var n=null;try{"sub_item_hk"==this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(n=this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(t){}if(0==e.length)this.itemPull[t].hotkey_backup=this.itemPull[t].hotkey,this.itemPull[t].hotkey="",null!=n&&n.parentNode.removeChild(n);else{if(this.itemPull[t].hotkey=e,this.itemPull[t].hotkey_backup=null,null==n){(n=document.createElement("DIV")).className="sub_item_hk";for(var s=this.idPull[t].childNodes[this.conf.rtl?0:2];s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(n)}n.innerHTML=e}}}},dhtmlXMenuObject.prototype.getHotKey=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].hotkey},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(t){for(var e=this._getSubItemToDeselectByPolygon(t),i=0;i<this.conf.opened_poly.length;i++)this.conf.opened_poly[i]!=t&&this._hidePolygon(this.conf.opened_poly[i]);for(i=0;i<e.length;i++)null!=this.idPull[e[i]]&&"enabled"==this.itemPull[e[i]].state&&(this.idPull[e[i]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(t){var e=this.idPull["polygon_"+t].childNodes[1],i=this.idPull["arrowup_"+t],n=this.idPull["arrowdown_"+t];0==e.scrollTop?i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(i.over?"_Over":""),e.scrollTop+e.offsetHeight<e.scrollHeight?n.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(n.over?"_Over":""):n.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled",e=i=n=null},dhtmlXMenuObject.prototype._addUpArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowup_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp",i.over=!1,i.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,e._canScrollUp=!0,e._doScrollUp(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollUp=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(e.conf.of_utm))},i.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var n=this.idPull["polygon_"+this.idPrefix+t];n.childNodes[0].appendChild(i),this.idPull[i.id]=i,n=i=null},dhtmlXMenuObject.prototype._addDownArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowdown_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown",i.over=!1,i.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,e._canScrollDown=!0,e._doScrollDown(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollDown=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(e.conf.of_dtm))},i.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var n=this.idPull["polygon_"+this.idPrefix+t];n.childNodes[2].appendChild(i),this.idPull[i.id]=i,n=i=null},dhtmlXMenuObject.prototype._removeUpArrow=function(t){var e="arrowup_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeDownArrow=function(t){var e="arrowdown_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeArrow=function(t){var e=this.idPull[t];e.onselectstart=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onclick=null,e.parentNode&&e.parentNode.removeChild(e),e=null,this.idPull[t]=null;try{delete this.idPull[t]}catch(t){}},dhtmlXMenuObject.prototype._isArrowExists=function(t){return null!=this.idPull["arrowup_"+t]&&null!=this.idPull["arrowdown_"+t]},dhtmlXMenuObject.prototype._doScrollUp=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollUp&&i.scrollTop>0){var n=!1,s=i.scrollTop-this.conf.of_ustep;if(s<0&&(n=!0,s=0),i.scrollTop=s,n)e=!0;else{var o=this;this.conf.of_utm=window.setTimeout(function(){o._doScrollUp(t,!1),o=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._doScrollDown=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollDown&&i.scrollTop+i.offsetHeight<=i.scrollHeight){var n=!1,s=i.scrollTop+this.conf.of_dstep;if(s+i.offsetHeight>=i.scrollHeight&&(n=!0,s=i.scrollHeight-i.offsetHeight),i.scrollTop=s,n)e=!0;else{var o=this;this.conf.of_dtm=window.setTimeout(function(){o._doScrollDown(t,!1),o=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._countPolygonItems=function(t){var e=0;for(var i in this.itemPull){var n=this.itemPull[i].parent,s=this.itemPull[i].type;n!=this.idPrefix+t||"item"!=s&&"radio"!=s&&"checkbox"!=s||e++}return e},dhtmlXMenuObject.prototype.setOverflowHeight=function(t){if("auto"===t)return this.conf.overflow_limit=0,void(this.conf.auto_overflow=!0);if(!(0==this.conf.overflow_limit&&t<=0))if(this._clearAndHide(),this.conf.overflow_limit>=0&&t>0)this.conf.overflow_limit=t;else if(this.conf.overflow_limit>0&&t<=0){for(var e in this.itemPull)if(this._isArrowExists(e)){var i=String(e).replace(this.idPrefix,"");this._removeUpArrow(i),this._removeDownArrow(i),this.idPull["polygon_"+e].childNodes[1].style.height=""}this.conf.overflow_limit=0}else;},dhtmlXMenuObject.prototype._getRadioImgObj=function(t){try{var e=this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(t){e=null}return e},dhtmlXMenuObject.prototype._setRadioState=function(t,e){var i=this._getRadioImgObj(t);if(null!=i){var n=this.itemPull[this.idPrefix+t];n.checked=e,n.imgen="rdbt_"+(n.checked?"1":"0"),n.imgdis=n.imgen,i.className="sub_icon "+n.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t].group){var n=this.itemPull[this.idPrefix+t].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[n,this.getRadioChecked(n),t,this.conf.ctx_zoneid,i])&&this.setRadioChecked(n,t):this.setRadioChecked(n,t),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.getRadioChecked=function(t){for(var e=null,i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,""),s=this._getRadioImgObj(n);if(null!=s)null!=s.className.match(/rdbt_1$/gi)&&(e=n)}return e},dhtmlXMenuObject.prototype.setRadioChecked=function(t,e){if(null!=this.radio[t])for(var i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,"");this._setRadioState(n,n==e)}},dhtmlXMenuObject.prototype.addRadioButton=function(t,e,i,n,s,o,l,r){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var a=this.idPrefix+(null!=n?n:this._genStr(24)),h="rdbt_"+(l?"1":"0"),d=h;if("sibling"==t){var c=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),this._renderSublevelItem(a,this.getItemPosition(e))}else{c=this.idPrefix+e;this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),null==this.idPull["polygon_"+c]&&this._renderSublevelPolygon(c,c),this._renderSublevelItem(a,i-1),this._redefineComplexState(c)}var u=null!=o?o:this._genStr(24);this.itemPull[a].group=u,null==this.radio[u]&&(this.radio[u]=new Array),this.radio[u][this.radio[u].length]=a,1==l&&this.setRadioChecked(u,String(a).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>"},dhtmlXMenuObject.prototype._readLevel=function(t){var e="";for(var i in this.itemPull)if(this.itemPull[i].parent==t){var n="",s="",o="",l=String(this.itemPull[i].id).replace(this.idPrefix,""),r="",a=""!=this.itemPull[i].title?' text="'+this.itemPull[i].title+'"':"",h="";"item"==this.itemPull[i].type&&(""!=this.itemPull[i].imgen&&(n=' img="'+this.itemPull[i].imgen+'"'),""!=this.itemPull[i].imgdis&&(s=' imgdis="'+this.itemPull[i].imgdis+'"'),""!=this.itemPull[i].hotkey&&(o="<hotkey>"+this.itemPull[i].hotkey+"</hotkey>")),"separator"==this.itemPull[i].type?r=' type="separator"':"disabled"==this.itemPull[i].state&&(h=' enabled="false"'),"checkbox"==this.itemPull[i].type&&(r=' type="checkbox"'+(this.itemPull[i].checked?' checked="true"':"")),"radio"==this.itemPull[i].type&&(r=' type="radio" group="'+this.itemPull[i].group+'" '+(this.itemPull[i].checked?' checked="true"':"")),e+="<item id='"+l+"'"+a+r+n+s+h+">",e+=o,this.itemPull[i].complex&&(e+=this._readLevel(i)),e+="</item>"}return e},dhtmlXMenuObject.prototype.enableEffect=function(t,e,i){for(var n in this._menuEffect=("opacity"==t||"slide"==t||"slide+"==t)&&t,this._pOpStyleIE=navigator.userAgent.search(/MSIE\s[678]\.0/gi)>=0,this.idPull)0===n.search(/polygon/)&&(this._pOpacityApply(n,this._pOpStyleIE?100:1),this.idPull[n].style.height="");this._pOpMax=(void 0===e?100:e)/(this._pOpStyleIE?1:100),this._pOpStyleName=this._pOpStyleIE?"filter":"opacity",this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#",this._pSlSteps=this._pOpStyleIE?10:20,this._pSlTMTimeMax=i||50},dhtmlXMenuObject.prototype._showPolygonEffect=function(t){this._pShowHide(t,!0)},dhtmlXMenuObject.prototype._hidePolygonEffect=function(t){this._pShowHide(t,!1)},dhtmlXMenuObject.prototype._pOpacityApply=function(t,e){this.idPull[t].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",e||this.idPull[t]._op)},dhtmlXMenuObject.prototype._pShowHide=function(t,e){if(this.idPull){if(null!=this.idPull[t]._tmShow){if(this.idPull[t]._step_h>0&&1==e||this.idPull[t]._step_h<0&&0==e)return;window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._tmShow=null,this.idPull[t]._max_h=null}if(0!=e||"hidden"!=this.idPull[t].style.visibility&&"none"!=this.idPull[t].style.display){if(1==e&&"none"==this.idPull[t].style.display&&(this.idPull[t].style.visibility="hidden",this.idPull[t].style.display=""),null==this.idPull[t]._max_h){if(this.idPull[t]._max_h=parseInt(this.idPull[t].offsetHeight),this.idPull[t]._h=1==e?0:this.idPull[t]._max_h,this.idPull[t]._step_h=Math.round(this.idPull[t]._max_h/this._pSlSteps)*(1==e?1:-1),0==this.idPull[t]._step_h)return;this.idPull[t]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps),"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[t].op_tm=this.idPull[t]._step_tm,this.idPull[t].op_step=this._pOpMax/this._pSlSteps*(1==e?1:-1),this._pOpStyleIE&&(this.idPull[t].op_step=Math.round(this.idPull[t].op_step)),this.idPull[t]._op=1==e?0:this._pOpMax,this._pOpacityApply(t)):(this.idPull[t]._op=this._pOpStyleIE?100:1,this._pOpacityApply(t)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height="0px"),this.idPull[t].style.visibility="visible"}this._pEffectSet(t,this.idPull[t]._h+this.idPull[t]._step_h)}}},dhtmlXMenuObject.prototype._pEffectSet=function(t,e){if(this.idPull)if(this.idPull[t]._tmShow&&window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._h=Math.max(0,Math.min(e,this.idPull[t]._max_h)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=this.idPull[t]._h+"px"),e+=this.idPull[t]._step_h,"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[t]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[t]._op+this.idPull[t].op_step)),this._pOpacityApply(t)),this.idPull[t]._step_h>0&&e<=this.idPull[t]._max_h||this.idPull[t]._step_h<0&&e>=0){var i=this;this.idPull[t]._tmShow=window.setTimeout(function(){i._pEffectSet(t,e)},this.idPull[t]._step_tm)}else 0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=""),this.idPull[t]._step_h<0&&(this.idPull[t].style.visibility="hidden"),"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[t]._op=this.idPull[t]._step_h<0?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(t)),this.idPull[t]._tmShow=null,this.idPull[t]._h=null,this.idPull[t]._max_h=null,this.idPull[t]._step_tm=null},dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT",dhtmlXMenuObject.prototype.setItemEnabled=function(t){this._changeItemState(t,"enabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.setItemDisabled=function(t){this._changeItemState(t,"disabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.isItemEnabled=function(t){return null!=this.itemPull[this.idPrefix+t]&&"enabled"==this.itemPull[this.idPrefix+t].state},dhtmlXMenuObject.prototype._changeItemState=function(t,e,i){var n=this.idPrefix+t;return null!=this.itemPull[n]&&null!=this.idPull[n]&&this.itemPull[n].state!=e&&(this.itemPull[n].state=e,this.itemPull[n].parent!=this.idPrefix+this.topId||this.context?this.idPull[n].className="sub_item"+("enabled"==this.itemPull[n].state?"":"_dis"):this.idPull[n].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[n].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+t,this.itemPull[this.idPrefix+t].complex,!1),this._updateItemImage(t,i),this.idPrefix+this.menuLastClicked==n&&"TopLevel"!=i&&this._redistribSubLevelSelection(n,this.itemPull[n].parent),"TopLevel"==i&&this.context),!1},dhtmlXMenuObject.prototype.getItemText=function(t){return null!=this.itemPull[this.idPrefix+t]?this.itemPull[this.idPrefix+t].title:""},dhtmlXMenuObject.prototype.setItemText=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t])if(this._clearAndHide(),this.itemPull[t].title=e,this.itemPull[t].parent!=this.idPrefix+this.topId||this.context){for(i=null,n=0;n<this.idPull[t].childNodes[1].childNodes.length;n++)"sub_item_text"==String(this.idPull[t].childNodes[1].childNodes[n].className||"")&&(i=this.idPull[t].childNodes[1].childNodes[n]);""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?i&&(i.parentNode.removeChild(i),i=null,this.idPull[t].childNodes[1].innerHTML="&nbsp;"):(i||((i=document.createElement("DIV")).className="sub_item_text",this.idPull[t].childNodes[1].innerHTML="",this.idPull[t].childNodes[1].appendChild(i)),i.innerHTML=this.itemPull[t].title)}else{for(var i=null,n=0;n<this.idPull[t].childNodes.length;n++)try{"top_level_text"==this.idPull[t].childNodes[n].className&&(i=this.idPull[t].childNodes[n])}catch(t){}""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?null!=i&&i.parentNode.removeChild(i):(i||((i=document.createElement("DIV")).className="top_level_text",this._rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(i,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(i)),i.innerHTML=this.itemPull[t].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(t,e,i){this.itemTagName="DIV","string"==typeof t&&(t=document.getElementById(t)),this._buildMenu(t,null),this.init(),e&&t.parentNode.removeChild(t),null!=i&&i()},dhtmlXMenuObject.prototype.hideItem=function(t){this._changeItemVisible(t,!1)},dhtmlXMenuObject.prototype.showItem=function(t){this._changeItemVisible(t,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(t){var e=null;return null!=this.idPull[this.idPrefix+t]&&(e="none"==this.idPull[this.idPrefix+t].style.display),e},dhtmlXMenuObject.prototype._changeItemVisible=function(t,e){itemId=this.idPrefix+t,null!=this.itemPull[itemId]&&("separator"==this.itemPull[itemId].type&&(itemId="separator_"+itemId),null!=this.idPull[itemId]&&(this.idPull[itemId].style.display=e?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+t].parent)))},dhtmlXMenuObject.prototype.setUserData=function(t,e,i){this.userData[this.idPrefix+t+"_"+e]=i},dhtmlXMenuObject.prototype.getUserData=function(t,e){return null!=this.userData[this.idPrefix+t+"_"+e]?this.userData[this.idPrefix+t+"_"+e]:null},dhtmlXMenuObject.prototype.setOpenMode=function(t){"win"==t||"web"==t?this.menuMode=t:this.menuMode},dhtmlXMenuObject.prototype.setWebModeTimeout=function(t){this.menuTimeoutMsec=isNaN(t)?400:t},dhtmlXMenuObject.prototype.enableDynamicLoading=function(t,e){this.dLoad=!0,this.dLoadUrl=t,this.dLoadSign=-1==String(this.dLoadUrl).search(/\?/)?"?":"&",this.loaderIcon=e,this.init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(t,e){if(null!=this.idPull[t]&&!(String(this.idPull[t].className).search("TopLevel_Item")>=0)){var i=this._rtl?0:2;if(this.idPull[t].childNodes[i]&&this.idPull[t].childNodes[i].childNodes[0]){var n=this.idPull[t].childNodes[i].childNodes[0];0===String(n.className).search("complex_arrow")&&(n.className="complex_arrow"+(e?"_loading":""))}}},dhtmlXMenuObject.prototype.getItemImage=function(t){var e=new Array(null,null);return t=this.idPrefix+t,"item"==this.itemPull[t].type&&(e[0]=this.itemPull[t].imgen,e[1]=this.itemPull[t].imgdis),e},dhtmlXMenuObject.prototype.setItemImage=function(t,e,i){"item"==this.itemPull[this.idPrefix+t].type&&(this.itemPull[this.idPrefix+t].imgen=e,this.itemPull[this.idPrefix+t].imgdis=i,this._updateItemImage(t,this._getItemLevelType(t)))},dhtmlXMenuObject.prototype.clearItemImage=function(t){this.setItemImage(t,"","")},dhtmlXMenuObject.prototype.setAutoShowMode=function(t){this.contextAutoShow=1==t},dhtmlXMenuObject.prototype.setAutoHideMode=function(t){this.contextAutoHide=1==t},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(t){this.contextHideAllMode=1==t},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode},dhtmlXMenuObject.prototype.setVisibleArea=function(t,e,i,n){this._isVisibleArea=!0,this.menuX1=t,this.menuX2=e,this.menuY1=i,this.menuY2=n},dhtmlXMenuObject.prototype.setTooltip=function(t,e){t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.idPull[t].title=e.length>0?e:null,this.itemPull[t].tip=e)},dhtmlXMenuObject.prototype.getTooltip=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].tip},dhtmlXMenuObject.prototype.setHotKey=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.itemPull[t].parent!=this.idPrefix+this.topId||this.context)&&!this.itemPull[t].complex&&"item"==this.itemPull[t].type){var i=null;try{"sub_item_hk"==this.idPull[t].childNodes[this._rtl?0:2].childNodes[0].className&&(i=this.idPull[t].childNodes[this._rtl?0:2].childNodes[0])}catch(t){}if(0==e.length)this.itemPull[t].hotkey_backup=this.itemPull[t].hotkey,this.itemPull[t].hotkey="",null!=i&&i.parentNode.removeChild(i);else{if(this.itemPull[t].hotkey=e,this.itemPull[t].hotkey_backup=null,null==i){(i=document.createElement("DIV")).className="sub_item_hk";for(var n=this.idPull[t].childNodes[this._rtl?0:2];n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.appendChild(i)}i.innerHTML=e}}},dhtmlXMenuObject.prototype.getHotKey=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].hotkey},dhtmlXMenuObject.prototype.setItemSelected=function(t){if(null==this.itemPull[this.idPrefix+t])return null},dhtmlXMenuObject.prototype.setTopText=function(t){this.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":"left"==this._align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=t)},dhtmlXMenuObject.prototype.setAlign=function(t){this._align!=t&&("left"!=t&&"right"!=t||(this._align=t,this.cont&&(this.cont.className="right"==this._align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this._align?"right":"left"))))},dhtmlXMenuObject.prototype.setHref=function(t,e,i){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].href_link=e,null!=i&&(this.itemPull[this.idPrefix+t].href_target=i))},dhtmlXMenuObject.prototype.clearHref=function(t){null!=this.itemPull[this.idPrefix+t]&&(delete this.itemPull[this.idPrefix+t].href_link,delete this.itemPull[this.idPrefix+t].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(t){for(var e=new Array(t);this.getParentId(t)!=this.topId;)t=this.getParentId(t),e[e.length]=t;return e.reverse()},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(t){for(var e=this._getSubItemToDeselectByPolygon(t),i=0;i<this._openedPolygons.length;i++)this._openedPolygons[i]!=t&&this._hidePolygon(this._openedPolygons[i]);for(i=0;i<e.length;i++)null!=this.idPull[e[i]]&&"enabled"==this.itemPull[e[i]].state&&(this.idPull[e[i]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(t){var e=this.idPull["polygon_"+t],i=this.idPull["arrowup_"+t],n=this.idPull["arrowdown_"+t];0==e.scrollTop?i.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled":i.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(i.over?"_Over":""),e.scrollTop+e.offsetHeight<e.scrollHeight?n.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(n.over?"_Over":""):n.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled"},dhtmlXMenuObject.prototype._addUpArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowup_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp",i.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>",i.style.display="none",i.over=!1,i.onselectstart=function(t){return(t=t||event).returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).returnValue=!1,!1},i.onmouseover=function(){"web"==e.menuMode&&window.clearTimeout(e.menuTimeoutHandler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,e._canScrollUp=!0,e._doScrollUp(this.pId,!0))},i.onmouseout=function(){"web"==e.menuMode&&(window.clearTimeout(e.menuTimeoutHandler),e.menuTimeoutHandler=window.setTimeout(function(){e._clearAndHide()},e.menuTimeoutMsec,"JavaScript")),this.over=!1,e._canScrollUp=!1,this.className!="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(e._scrollUpTM))},i.onclick=function(t){return(t=t||event).returnValue=!1,t.cancelBubble=!0,!1},document.body.insertBefore(i,document.body.firstChild),this.idPull[i.id]=i},dhtmlXMenuObject.prototype._addDownArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowdown_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown",i.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>",i.style.display="none",i.over=!1,i.onselectstart=function(t){return(t=t||event).returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).returnValue=!1,!1},i.onmouseover=function(){"web"==e.menuMode&&window.clearTimeout(e.menuTimeoutHandler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,e._canScrollDown=!0,e._doScrollDown(this.pId,!0))},i.onmouseout=function(){"web"==e.menuMode&&(window.clearTimeout(e.menuTimeoutHandler),e.menuTimeoutHandler=window.setTimeout(function(){e._clearAndHide()},e.menuTimeoutMsec,"JavaScript")),this.over=!1,e._canScrollDown=!1,this.className!="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(e._scrollDownTM))},i.onclick=function(t){return(t=t||event).returnValue=!1,t.cancelBubble=!0,!1},document.body.insertBefore(i,document.body.firstChild),this.idPull[i.id]=i},dhtmlXMenuObject.prototype._removeUpArrow=function(t){var e="arrowup_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeDownArrow=function(t){var e="arrowdown_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeArrow=function(t){var e=this.idPull[t];e.onselectstart=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onclick=null,e.parentNode&&e.parentNode.removeChild(e),e=null,this.idPull[t]=null;try{delete this.idPull[t]}catch(t){}},dhtmlXMenuObject.prototype._isArrowExists=function(t){return null!=this.idPull["arrowup_"+t]&&null!=this.idPull["arrowdown_"+t]},dhtmlXMenuObject.prototype._doScrollUp=function(t,e){var i=this.idPull["polygon_"+t];if(this._canScrollUp&&i.scrollTop>0){var n=!1,s=i.scrollTop-this._scrollUpTMStep;if(s<0&&(n=!0,s=0),i.scrollTop=s,!n){var o=this;this._scrollUpTM=window.setTimeout(function(){o._doScrollUp(t,!1)},this._scrollUpTMTime)}}else this._canScrollUp=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._doScrollDown=function(t,e){var i=this.idPull["polygon_"+t];if(this._canScrollDown&&i.scrollTop+i.offsetHeight<=i.scrollHeight){var n=!1,s=i.scrollTop+this._scrollDownTMStep;if(s+i.offsetHeight>i.scollHeight&&(n=!0,s=i.scollHeight-i.offsetHeight),i.scrollTop=s,!n){var o=this;this._scrollDownTM=window.setTimeout(function(){o._doScrollDown(t,!1)},this._scrollDownTMTime)}}else this._canScrollDown,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._countPolygonItems=function(t){var e=0;for(var i in this.itemPull){var n=this.itemPull[i].parent,s=this.itemPull[i].type;n!=this.idPrefix+t||"item"!=s&&"radio"!=s&&"checkbox"!=s||e++}return e},dhtmlXMenuObject.prototype.setOverflowHeight=function(t){if(!(0==this.limit&&t<=0))if(this._clearAndHide(),this.limit>=0&&t>0)this.limit=t;else if(this.limit>0&&t<=0){for(var e in this.itemPull)if(this._isArrowExists(e)){var i=String(e).replace(this.idPrefix,"");this._removeUpArrow(i),this._removeDownArrow(i),this.idPull["polygon_"+e].style.height=""}this.limit=0}else;},dhtmlXMenuObject.prototype._getRadioImgObj=function(t){try{var e=this.idPull[this.idPrefix+t].childNodes[this._rtl?2:0].childNodes[0]}catch(t){e=null}return e},dhtmlXMenuObject.prototype._setRadioState=function(t,e){var i=this._getRadioImgObj(t);if(null!=i){var n=this.itemPull[this.idPrefix+t];n.checked=e,n.imgen="rdbt_"+(n.checked?"1":"0"),n.imgdis=n.imgen,i.className="sub_icon "+n.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t].group){var n=this.itemPull[this.idPrefix+t].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[n,this.getRadioChecked(n),t,this.contextMenuZoneId,i])&&this.setRadioChecked(n,t):this.setRadioChecked(n,t),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.getRadioChecked=function(t){for(var e=null,i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,""),s=this._getRadioImgObj(n);if(null!=s)null!=s.className.match(/rdbt_1$/gi)&&(e=n)}return e},dhtmlXMenuObject.prototype.setRadioChecked=function(t,e){if(null!=this.radio[t])for(var i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,"");this._setRadioState(n,n==e)}},dhtmlXMenuObject.prototype.addRadioButton=function(t,e,i,n,s,o,l,r){if(this.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var a=this.idPrefix+(null!=n?n:this._genStr(24)),h="rdbt_"+(l?"1":"0"),d=h;if("sibling"==t){var c=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),this._renderSublevelItem(a,this.getItemPosition(e))}else{c=this.idPrefix+e;this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),null==this.idPull["polygon_"+c]&&this._renderSublevelPolygon(c,c),this._renderSublevelItem(a,i-1),this._redefineComplexState(c)}var u=null!=o?o:this._genStr(24);this.itemPull[a].group=u,null==this.radio[u]&&(this.radio[u]=new Array),this.radio[u][this.radio[u].length]=a,1==l&&this.setRadioChecked(u,String(a).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype._getCheckboxState=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(t,e){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].checked=e)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(t){if(null!=this.idPull[this.idPrefix+t]){this.itemPull[this.idPrefix+t].imgen="chbx_"+(this._getCheckboxState(t)?"1":"0"),this.itemPull[this.idPrefix+t].imgdis=this.itemPull[this.idPrefix+t].imgen;try{this.idPull[this.idPrefix+t].childNodes[this._rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+t].imgen}catch(t){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t]){var n=this._getCheckboxState(t);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[t,n,this.contextMenuZoneId,i])&&this.setCheckboxState(t,!n):this.setCheckboxState(t,!n),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.setCheckboxState=function(t,e){this._setCheckboxState(t,e),this._updateCheckboxImage(t)},dhtmlXMenuObject.prototype.getCheckboxState=function(t){return this._getCheckboxState(t)},dhtmlXMenuObject.prototype.addCheckbox=function(t,e,i,n,s,o,l){if(this.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var r="chbx_"+(o?"1":"0"),a=r;if("sibling"==t){var h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,this._renderSublevelItem(h,this.getItemPosition(e))}else{h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+e;this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,null==this.idPull["polygon_"+d]&&this._renderSublevelPolygon(d,d),this._renderSublevelItem(h,i-1),this._redefineComplexState(d)}},dhtmlXMenuObject.prototype._readLevel=function(t){var e="";for(var i in this.itemPull)if(this.itemPull[i].parent==t){var n="",s="",o="",l=String(this.itemPull[i].id).replace(this.idPrefix,""),r="",a=""!=this.itemPull[i].title?' text="'+this.itemPull[i].title+'"':"",h="";"item"==this.itemPull[i].type&&(""!=this.itemPull[i].imgen&&(n=' img="'+this.itemPull[i].imgen+'"'),""!=this.itemPull[i].imgdis&&(s=' imgdis="'+this.itemPull[i].imgdis+'"'),""!=this.itemPull[i].hotkey&&(o="<hotkey>"+this.itemPull[i].hotkey+"</hotkey>")),"separator"==this.itemPull[i].type?r=' type="separator"':"disabled"==this.itemPull[i].state&&(h=' enabled="false"'),"checkbox"==this.itemPull[i].type&&(r=' type="checkbox"'+(this.itemPull[i].checked?' checked="true"':"")),"radio"==this.itemPull[i].type&&(r=' type="radio" group="'+this.itemPull[i].group+'" '+(this.itemPull[i].checked?' checked="true"':"")),e+="<item id='"+l+"'"+a+r+n+s+h+">",e+=o,this.itemPull[i].complex&&(e+=this._readLevel(i)),e+="</item>"}return e},dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>"},void 0===window.dhx&&(window.dhx=window.dhx4={version:"5.0",skin:null,skinDetect:function(t){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[this.readFromCss(t+"_skin_detect")]||null},readFromCss:function(t,e,i){var n=document.createElement("DIV");n.className=t,null!=document.body.firstChild?document.body.insertBefore(n,document.body.firstChild):document.body.appendChild(n),"string"==typeof i&&(n.innerHTML=i);var s=n[e||"offsetWidth"];return n.parentNode.removeChild(n),n=null,s},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return"string"==typeof t&&(t=t.toLowerCase()),1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t||"on"==t},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(t){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).top},_aOfs:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}},getOffset:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfs(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&void 0===t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var i in t)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i]}else for(e=[],i=0;i<t.length;i++)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,i){var n=(t="string"==typeof t?document.getElementById(t):t).value.length;if(e=Math.max(Math.min(e,n),0),i=Math.min(i,n),t.setSelectionRange)try{t.setSelectionRange(e,i)}catch(t){}else if(t.createTextRange){var s=t.createTextRange();s.moveStart("character",e),s.moveEnd("character",i-n);try{s.select()}catch(t){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData},_xmlNodeValue:function(t){for(var e="",i=0;i<t.childNodes.length;i++)e+=null!=t.childNodes[i].nodeValue?t.childNodes[i].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(t){return window.dhx4.isIE10&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==t.pointerType||window.dhx4.isEdge&&"mouse"==t.pointerType},_touchOn:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="",t=null},_touchOff:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="none",t=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:void 0!==window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),void 0===window.dhx4.template&&(window.dhx4.trim=function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(t,e,i){return t.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var t=arguments[1],n=window.dhx4.trim(arguments[3]),s=null,o=[e[t]];if(n.length>0){n=n.split(":");for(var l=[],r=0;r<n.length;r++)r>0&&null!=l[l.length-1].match(/\\$/)?l[l.length-1]=l[l.length-1].replace(/\\$/,"")+":"+n[r]:l.push(n[r]);s=l[0];for(r=1;r<l.length;r++)o.push(l[r])}return"string"==typeof s&&"function"==typeof window.dhx4.template[s]?window.dhx4.template[s].apply(window.dhx4.template,o):t.length>0&&void 0!==e[t]?1==i?window.dhx4.trim(e[t]):String(e[t]):""})},window.dhx4.template.date=function(t,e){return null!=t?t instanceof Date?window.dhx4.date2str(t,e):null!=(t=t.toString()).match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(t)),e):t:""},window.dhx4.template.maxlength=function(t,e){return String(t).substr(0,e)},window.dhx4.template.number_format=function(t,e,i,n){var s=window.dhx4.template._parseFmt(e,i,n);return 0==s?t:window.dhx4.template._getFmtValue(t,s)},window.dhx4.template.lowercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toLowerCase()},window.dhx4.template.uppercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toUpperCase()},window.dhx4.template._parseFmt=function(t,e,i){var n=t.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==n||4!=n.length)return!1;var s={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof i?i:".",s_bef:"string"==typeof n[1]?n[1]:"",s_aft:"string"==typeof n[3]?n[3]:""},o=n[2].split(".");null!=o[1]&&(s.d_len=o[1].length);var l=o[0].split(",");return l.length>1&&(s.i_len=l[l.length-1].length),s},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,!1!==fmt.i_len){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&q>0&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(!1!==fmt.d_len){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft,v0}return value}),void 0===window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(t,e,i){if(null!=e&&void 0!==e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&void 0!==i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]),t instanceof Date)var n=function(t){return 1==String(t).length?"0"+String(t):t},s=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return n(t.getDate());case"%j":return t.getDate();case"%D":return i.dayShortName[t.getDay()];case"%l":return i.dayFullName[t.getDay()];case"%m":return n(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return i.monthShortName[t.getMonth()];case"%F":return i.monthFullName[t.getMonth()];case"%y":return n(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return n((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return n(t.getHours());case"%i":return n(t.getMinutes());case"%s":return n(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return t.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var s=t.getTimezoneOffset(),o=Math.abs(Math.floor(s/60)),l=Math.abs(s)-60*o;return(s>0?"-":"+")+n(o)+":"+n(l);default:return e}});return s||String(t)},window.dhx4.str2date=function(t,e,i){null!=e&&void 0!==e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&void 0!==i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]);var n=[],s=[];e=(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&")).replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return s.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return s.push(t),"([a-z-]{1,})";case"%j":case"%n":case"%g":case"%G":return s.push(t),"(\\d{1,2})";case"%Y":return s.push(t),"(\\d{4})";case"%a":return s.push(t),"([a|p]m)";case"%A":return s.push(t),"([A|P]M)";case"%u":return s.push(t),"(\\d{1,6})";case"%P":return s.push(t),"([+-]\\d{1,2}:\\d{1,2})"}return t});var o=new RegExp(e,"i"),l=t.match(o);if(null==l||l.length-1!=s.length)return"Invalid Date";for(var r=1;r<l.length;r++)n.push(l[r]);var a={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},h={},d={};for(r=0;r<s.length;r++)if(void 0!==a[s[r]]){var c=a[s[r]];h[c]||(h[c]=[],d[c]=[]),h[c].push(n[r]),d[c].push(s[r])}n=[],s=[];for(r=1;r<=7;r++)if(null!=h[r])for(var u=0;u<h[r].length;u++)n.push(h[r][u]),s.push(d[r][u]);var f=new Date;f.setDate(1),f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);var p=function(t,e){for(var i=0;i<e.length;i++)if(e[i].toLowerCase()==t)return i;return-1};for(r=0;r<n.length;r++)switch(s[r]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(n[r])||f[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[s[r]]](Number(n[r])+("%m"==s[r]||"%n"==s[r]?-1:0));break;case"%M":case"%F":var m=p(n[r].toLowerCase(),i[{"%M":"monthShortName","%F":"monthFullName"}[s[r]]]);m>=0&&f.setMonth(m);break;case"%y":if(!isNaN(n[r])){var g=Number(n[r]);f.setFullYear(g+(g>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(n[r]))(g=Number(n[r]))<=12&&g>=0&&f.setHours(g+(p("pm",n)>=0?12==g?0:12:12==g?-12:0));break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=n[r])}return f}),void 0===window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(t){if("string"!=typeof t)return t;if(t=t.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var e=(new window.DOMParser).parseFromString(t,"text/xml");else window.ActiveXObject!==window.undefined&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t));return e},xmltop:function(t,e,i){if((void 0===e.status||e.status<400)&&(xml=e.responseXML?e.responseXML||e:dhx4.ajax.parse(e.responseText||e),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(t)[0]}catch(t){}return-1!==i&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),!dhx4.isIE){for(var i,n=[],s=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=s.iterateNext();)n.push(i);return n}try{return e.selectNodes(t)||[]}catch(t){return[]}},query:function(t){dhx4.ajax._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){return this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){return this._call("PUT",t,e,!0,i)},del:function(t,e,i){return this._call("DELETE",t,e,!0,i)},post:function(t,e,i){return 1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window[e],0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,s,o,l){var r=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==n&&(r.onreadystatechange=function(){if(4==r.readyState||1==a&&3==r.readyState){if((200!=r.status||""==r.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}]))return;window.setTimeout(function(){"function"==typeof s&&s.apply(window,[{xmlDoc:r,filePath:e,async:n}]),null!=o&&(void 0!==o.postData?dhx4.ajax.postLong(o.url,o.postData,s):dhx4.ajax.getLong(o.url,s)),s=null,r=null},1)}}),"GET"==t&&(e+=this._dhxr(e)),r.open(t,e,n),null!=l)for(var h in l)r.setRequestHeader(h,l[h]);else"POST"==t||"PUT"==t||"DELETE"==t?r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);return r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(i),1!=n&&(4==r.readyState||1==a&&3==r.readyState)&&(200==r.status&&""!=r.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}])),{xmlDoc:r,filePath:e,async:n}},_dhxr:function(t,e){return 1!=this.cache?(null==t.match(/^[\?\&]$/)&&(t=t.indexOf("?")>=0?"&":"?"),void 0===e&&(e=!0),t+"dhxr"+(new Date).getTime()+(1==e?"=1":"")):""}}),void 0===window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(t,e,i,n,s){if("clear"==s){for(var o in t._dhxdataload)t._dhxdataload[o]=null,delete t._dhxdataload[o];return t._loadData=null,t._dhxdataload=null,t.load=null,t.loadStruct=null,void(t=null)}if(t._dhxdataload={initObj:e,xmlToJson:i,xmlRootTag:n,onBeforeXLS:null},t._loadData=function(t,e,i){2==arguments.length&&(i=e,e=null);var n=null;if(3==arguments.length&&(i=arguments[2]),"string"==typeof t){var s=t.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");if(new RegExp("^<"+this._dhxdataload.xmlRootTag).test(s.replace(/^<\?xml[^\?]*\?>\s*/,""))&&null!=(n=dhx4.ajax.parse(t))&&(n=this[this._dhxdataload.xmlToJson].apply(this,[n])),null!=n||null==s.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==s.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(n=dhx4.s2j(s)),null==n){this.callEvent("onXLS",[]);var o=[];if("function"==typeof this._dhxdataload.onBeforeXLS)if(null!=(s=this._dhxdataload.onBeforeXLS.apply(this,[t]))&&"object"==typeof s&&(null!=s.url&&(t=s.url),null!=s.params))for(var l in s.params)o.push(l+"="+encodeURIComponent(s.params[l]));var r=this,a=function(e){var n=null;null!=(n=(e.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=e.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?r[r._dhxdataload.xmlToJson].apply(r,[e.xmlDoc.responseXML]):dhx4.s2j(e.xmlDoc.responseText))&&r[r._dhxdataload.initObj].apply(r,[n,t]),r.callEvent("onXLE",[]),null!=i&&("function"==typeof i?i.apply(r,[]):"function"==typeof window[i]&&window[i].apply(r,[])),a=i=null,n=e=r=null};return o=o.join("&")+("string"==typeof e?"&"+e:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(t,o,a):"get"==dhx4.ajax.method&&dhx4.ajax.get(t+(o.length>0?(t.indexOf("?")>0?"&":"?")+o:""),a))}}else n="object"==typeof t.documentElement||void 0!==t.tagName&&void 0!==t.getElementsByTagName&&t.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[t]):window.dhx4._copyObj(t);null!=n&&this[this._dhxdataload.initObj].apply(this,[n]),null!=i&&("function"==typeof i?i.apply(this,[]):"function"==typeof window[i]&&window[i].apply(this,[]),i=null)},null!=s){var l={struct:"loadStruct",data:"load"};for(var o in s)1==s[o]&&(t[l[o]]=function(){return this._loadData.apply(this,arguments)})}t=null}),void 0===window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){if("clear"==e)return t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null);t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var i=window.dhx4.newId();return this.dhxevs.data[t][i]=e,i},t.detachEvent=function(t){for(var e in this.dhxevs.data){var i=0;for(var n in this.dhxevs.data[e])n==t?(this.dhxevs.data[e][n]=null,delete this.dhxevs.data[e][n]):i++;0==i&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var i=!0;for(var n in this.dhxevs.data[t])i=this.dhxevs.data[t][n].apply(this,e)&&i;return i},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},t=null},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return!!t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)},isValidSSN:function(t){return!!t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)},isValidSIN:function(t){return!!t.toString().match(/^\d{9}$/)}},dhtmlxValidation=new dhtmlxValidation),void 0===window.dhtmlx&&(window.dhtmlx={extend:function(t,e){for(var i in e)t[i]||(t[i]=e[i]);return t},extend_api:function(t,e,i){var n=window[t];n&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var i=n.apply(this,e._init?e._init(t):arguments);for(var s in dhtmlx)e[s]&&this[e[s]](dhtmlx[s]);for(var s in t)e[s]?this[e[s]](t[s]):0===s.indexOf("on")&&this.attachEvent(s,t[s])}else i=n.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=n.prototype,i&&dhtmlx.extend(window[t].prototype,i))},url:function(t){return-1!=t.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){if(!t&&!window.event||2!=(t||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault)&&(t.preventDefault(),!1))},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var i=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var n=document.createElement("Div");n.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=n.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),i.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)s=t.srcElement;else var s=t.target;dragger.checkLanding(s,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var s=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*s.split("_")[0],n+=1*s.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var i=dragger.lastLanding;dragger.lastLanding=null,i&&i.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,i,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),void 0===window.dhtmlxEvent)function dhtmlxEvent(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function dhtmlXCellObject(t,e){this.cell=document.createElement("DIV"),this.cell.className="dhx_cell"+(e||""),this._idd=t,this._isCell=!0,this.conf={borders:!0,idx:{},css:e||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}},this.dataNodes={},this.views={};var i=document.createElement("DIV");return i.className="dhx_cell_cont"+this.conf.css,this.cell.appendChild(i),i=null,this._updateIdx=function(){for(var t in this.conf.idx)this.conf.idx[t]=null,delete this.conf.idx[t];for(var e=0;e<this.cell.childNodes.length;e++){var i=this.cell.childNodes[e].className;for(var t in this.conf.idx_data){var n=new RegExp(this.conf.idx_data[t]);null!=i.match(n)&&(this.conf.idx[t]=e)}}this.callEvent("_onIdxUpdated",[])},this._adjustAttached=function(){for(var t in this.dataNodes)null!=this.dataNodes[t]&&"function"==typeof this.dataNodes[t].setSizes&&this.dataNodes[t].setSizes();if(null!=this.dataObj&&"function"==typeof this.dataObj.setSizes){if("layout"==this.dataType&&"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst())return void this.dataObj.setSizes();this.dataObj.setSizes.apply(this.dataObj,arguments)}},this._setSize=function(t,e,i,n,s,o,l,r){null==this.conf.size&&(this.conf.size={}),null==r&&(r={});var a={left:"x",top:"y",width:"w",height:"h"};for(var h in this.conf.size.x=t,this.conf.size.y=e,this.conf.size.w=Math.max(i,0),this.conf.size.h=Math.max(n,0),a){var d=r[h]||h;this.cell.style[d]=this.conf.size[a[h]]+"px"}this.callEvent("_onSetSize",[]),!0!==o?this._adjustCont(s,l):this._adjustAttached(s),this._adjustProgress()},this._adjustCont=function(t,e){var i=this.cell.childNodes[this.conf.idx.cont];if("function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&1==this.conf.collapsed)return i.style.left=i.style.top="0px",i.style.width=i.style.height="200px",void(i=null);var n=0;for(var s in this.conf.ofs_nodes.t){n+="func"==(l=this.conf.ofs_nodes.t[s])?this[s]():1==l?this.cell.childNodes[this.conf.idx[s]].offsetHeight:0}var o=0;for(var s in this.conf.ofs_nodes.b){var l;o+="func"==(l=this.conf.ofs_nodes.b[s])?this[s]():1==l?this.cell.childNodes[this.conf.idx[s]].offsetHeight:0}i.style.left="0px",i.style.top=n+"px",null==this.conf.cells_cont&&(this.conf.cells_cont={},i.style.width=this.cell.offsetWidth+"px",i.style.height=Math.max(this.cell.offsetHeight-n-o,0)+"px",this.conf.cells_cont.w=parseInt(i.style.width)-i.offsetWidth,this.conf.cells_cont.h=parseInt(i.style.height)-i.offsetHeight),i.style.left="0px",i.style.top=n+"px",i.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px",i.style.height=Math.max(this.conf.size.h-n-o+this.conf.cells_cont.h,0)+"px",i=null,this._adjustAttached(t),"expand"==e&&"editor"==this.dataType&&null!=this.dataObj&&this.dataObj._prepareContent(!0)},this._mtbUpdBorder=function(){for(var t=["menu","toolbar","ribbon"],e=0;e<t.length;e++)if(null!=this.conf.idx[t[e]]){var i=this.cell.childNodes[this.conf.idx[t[e]]],n="dhx_cell_"+t[e]+"_no_borders",s="dhx_cell_"+t[e]+"_def";i.className=i.className.replace(new RegExp(this.conf.borders?n:s),this.conf.borders?s:n),i=null}},this._resetSizeState=function(){this.conf.cells_cont=null},this.conf.view="def",this.conf.views_loaded={},this.conf.views_loaded[this.conf.view]=!0,this._viewSave=function(t){this.views[t]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};for(var e=this.cell.childNodes[this.conf.idx.cont];e.childNodes.length>0;)this.views[t].cellCont.push(e.firstChild),e.removeChild(e.firstChild);for(var i in e=null,this.dataType=null,this.dataObj=null,this.conf.url_data=null,this.dataNodes){for(var n in this.conf.ofs_nodes)void 0!==this.conf.ofs_nodes[n][i]&&(this.views[t].ofs_nodes[n][i]=this.conf.ofs_nodes[n][i],this.conf.ofs_nodes[n][i]=null,delete this.conf.ofs_nodes[n][i]);this.views[t].dataNodesCont[i]=this.cell.childNodes[this.conf.idx[i]],this.cell.removeChild(this.cell.childNodes[this.conf.idx[i]]),this.views[t].dataNodes[i]=this.dataNodes[i],this.dataNodes[i]=null,delete this.dataNodes[i],this._updateIdx()}this.callEvent("_onViewSave",[t])},this._viewRestore=function(t){if(null!=this.views[t]){this.dataObj=this.views[t].dataObj,this.dataType=this.views[t].dataType,this.conf.url_data=this.views[t].url_data;for(var e=0;e<this.views[t].cellCont.length;e++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[t].cellCont[e]);for(var i in this.views[t].dataNodes)this.dataNodes[i]=this.views[t].dataNodes[i],"menu"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),"toolbar"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.cont]),"ribbon"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.cont]),"sb"==i&&this.cell.appendChild(this.views[t].dataNodesCont[i]),this._updateIdx();for(var i in this.views[t].ofs_nodes)for(var n in this.views[t].ofs_nodes[i])this.conf.ofs_nodes[i][n]=this.views[t].ofs_nodes[i][n];this.conf.borders!=this.views[t].borders&&this[this.views[t].borders?"_showBorders":"_hideBorders"](!0),"url"==this.dataType&&null!=this.conf.url_data&&0==this.conf.url_data.ajax&&null!=this.conf.url_data.post_data&&this.reloadURL(),this.callEvent("_onViewRestore",[t]),this._viewDelete(t)}},this._viewDelete=function(t){if(null!=this.views[t]){for(var e in this.views[t].borders=null,this.views[t].ofs_nodes){for(var i in this.views[t].ofs_nodes[e])this.views[t].ofs_nodes[e][i]=null;this.views[t].ofs_nodes[e]=null}this.views[t].dataType=null,this.views[t].dataObj=null,this.views[t].url_data=null;for(var n=0;n<this.views[t].cellCont.length;n++)this.views[t].cellCont[n]=null;for(var e in this.views[t].cellCont=null,this.views[t].dataNodes)this.views[t].dataNodes[e]=null,this.views[t].dataNodesCont[e]=null;this.views[t].dataNodes=this.views[t].dataNodesCont=null,this.views[t]=null,delete this.views[t]}},window.dhx4._eventable(this),this._updateIdx(),this}function dhtmlXCellTop(t,e){if(0!=arguments.length&&void 0!==t){var i=this;if(this.dataNodes={},this.conf.ofs={t:0,b:0,l:0,r:0},this.conf.ofs_nodes={t:{},b:{}},this.conf.progress=!1,this.conf.fs_mode=!1,this.conf.fs_tm=null,this.conf.fs_resize=!1,t==document.body){if(this.conf.fs_mode=!0,this.base=t,this.base==document.body){var n={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=null!=n[this.conf.skin]?n[this.conf.skin]:n.dhx_skyblue}}else this.base="string"==typeof t?document.getElementById(t):t;if(this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin,this.cont=document.createElement("DIV"),this.cont.className=this.conf.css+"_cont",this.base.appendChild(this.cont),null!=e)this.setOffsets(e,!1);else if(null!=this.base._ofs){this.setOffsets(this.base._ofs,!1),this.base._ofs=null;try{delete this.base._ofs}catch(t){}}this._adjustCont=function(){var t=this.conf.ofs.t;for(var e in this.conf.ofs_nodes.t)t+=1==this.conf.ofs_nodes.t[e]?this.dataNodes[e].offsetHeight:0;var i=this.conf.ofs.b;for(var e in this.conf.ofs_nodes.b)i+=1==this.conf.ofs_nodes.b[e]?this.dataNodes[e].offsetHeight:0;this.cont.style.left=this.conf.ofs.l+"px",this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.cont.style.top=t+"px",this.cont.style.height=this.base.clientHeight-t-i+"px"},this._setBaseSkin=function(t){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+t)},this._initFSResize=function(){1!=this.conf.fs_resize&&(this._doOnResizeStart=function(){window.clearTimeout(i.conf.fs_tm),i.conf.fs_tm=window.setTimeout(i._doOnResizeEnd,200)},this._doOnResizeEnd=function(){i.setSizes()},"function"==typeof window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fs_resize=!0)},1==this.conf.fs_mode&&this._initFSResize(),this._unloadTop=function(){this._mtbUnload(),this.detachHeader(),this.detachFooter(),1==this.conf.fs_mode&&("function"==typeof window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart)),this.base.removeChild(this.cont);var t=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(t,""),this.cont=this.base=null,i=null},t=null}}function dhtmlXRibbon(t){var e,i,n=this;this.conf={type:"ribbon",icons_path:t&&t.icons_path?t.icons_path:"",icons_css:t&&"awesome"==t.iconsset,arrows_mode:t&&t.arrows_mode?t.arrows_mode:null,skin:"dhx_skyblue"},this._eventHandlers={},this._base=null,this._items={},this._tabbar=null,this.childIds=[],"string"==typeof t?i=t:t&&t.tagName?i=t:t&&t.parent&&(t.parent.tagName||"string"==typeof t.parent)&&(i=t.parent),this._doOnHighlight0=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable)return(!n.items[s.type]||"function"!=typeof n.items[s.type].mouseover||1==n.items[s.type].mouseover(s,n,t))&&void(/dhxrb_highlight0/.test(i.className)||(i.className+=" dhxrb_highlight0"))},this._doOffHighlight0=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable){if(n.items[s.type]&&"function"==typeof n.items[s.type].mouseout&&1!=n.items[s.type].mouseout(s,n,t))return!1;/dhxrb_highlight1/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight1/,"")),/dhxrb_highlight0/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight0/,""))}},this._doOnHighlight1=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable){if(n.callEvent("_showPopup",[s.id]),n.items[s.type]&&"function"==typeof n.items[s.type].mousedown&&1!=n.items[s.type].mousedown(s,n,t))return!1;/dhxrb_highlight1/.test(i.className)||(i.className+=" dhxrb_highlight1")}},this._doOffHighlight1=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable)return(!n.items[s.type]||"function"!=typeof n.items[s.type].mouseup||1==n.items[s.type].mouseup(s,n,t))&&void(/dhxrb_highlight1/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight1/,"")))},this._doOnClick=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].click&&n.items[s.type].click(s,n,t)},this._doOnFocus=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||(n.callEvent("_showPopup",[s.id]),n.items[s.type]&&"function"==typeof n.items[s.type].focus&&n.items[s.type].focus(s,n,t))},this._doOnBlur=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].blur&&n.items[s.type].blur(s,n,t)},this._doOnChange=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].change&&n.items[s.type].change(s,n,t)},this._doOnKeydown=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].keydown&&n.items[s.type].keydown(s,n,t)},this._tabCustomApi={enable:function(t,e){var i=null;if(1!=(e=e||!1)){i=n._items[this._idd];for(var s=0;s<i.childIds.length;s++)n.enable(i.childIds[s])}return n._tabOriginalApi.enable.apply(this,[t])},disable:function(t,e){var i=null;if(0!=e){i=n._items[this._idd];for(var s=0;s<i.childIds.length;s++)n.disable(i.childIds[s])}return n._tabOriginalApi.disable.apply(this,[t])},close:function(t){var e=n._items[this._idd];for(var i in n._removeTab(e),n._tabOriginalApi.close.apply(this,[t]),n._tabOriginalApi)this[i]=null}},this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return n.callEvent("onSelect",arguments)}),this._tabbar.attachEvent("onTabClick",function(){return n.callEvent("onTabClick",arguments)}),this._tabbar.attachEvent("onTabClose",function(){return n.callEvent("onTabClose",arguments)})},"string"==typeof i?this._base=document.getElementById(i):i&&i.tagName?this._base=i:(this._base=document.createElement("div"),this._base._dhx_remove=!0,document.body.firstChild?document.body.insertBefore(this._base,document.body.firstChild):document.body.appendChild(this._base)),e=dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"material","object"==typeof t&&t.skin&&(e=t.skin),this.setSkin(e),dhx4._eventable(this),dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:!0}),this.attachEvent("_onHeightChanged",function(){this.conf.inited=!0}),this._base.className+=" dhxrb_without_tabbar",this._base.innerHTML="<div class='dhxrb_background_area'></div>",null!=t&&(t.json?this.loadStruct(t.json,t.onload):t.xml?this.loadStruct(t.xml,t.onload):this._renderData(t)),this.unload=function(){for(var t=[],e=0;e<this.childIds.length;e++)t.push(this.childIds[e]);dhx4._enableDataLoading(this,null,null,null,"clear"),dhx4._eventable(this,"clear");for(e=0;e<t.length;e++)"tab"==this._items[t[e]].type?this.tabs(t[e]).close(!1):this.removeItem(t[e]);for(var i in this._tabbar&&(this._tabbar.unload(),this._tabbar=null),this._base.innerHTML="",this._base._dhx_remove?this._base.parentNode.removeChild(this._base):this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/gi,""),this)this[i]=null;n=null}}function dhtmlXTabBar(t,e){var i=this;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"material",css:"dhxtabbar",lastActive:null,closeButton:!1,align:"left",tabsMode:"bottom"==e?"bottom":"top",tabsContCss:"",contZone:!0,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:!1,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9],material:[44,14]}},"material"==this.conf.skin&&(this.conf.arwMode="auto");var n,s=navigator.userAgent;s.indexOf("Safari")>=0&&(s.indexOf("5.1.7")>=0||null!=s.match(/7[\.\d]* mobile/gi)&&null!=s.match(/AppleWebKit/gi))&&(this.conf.tabsContCss=" safari_517_fix"),null!=t&&"object"==typeof t&&void 0===t.tagName?(n=t.parent,void 0!==t.skin&&(this.conf.skin=t.skin),void 0!==t.mode&&(this.conf.tabsMode="bottom"==t.mode?"bottom":"top"),void 0!==t.align&&(this.conf.align="right"==t.align?"right":"left"),void 0!==t.close_button&&(this.conf.closeButton=window.dhx4.s2b(t.close_button)),void 0!==t.content_zone&&(this.conf.contZone=window.dhx4.s2b(t.content_zone)),void 0!==t.xml&&(this.conf.autoload.xml=t.xml),void 0!==t.json&&(this.conf.autoload.xml=t.json),void 0!==t.tabs&&(this.conf.autoload.tabs=t.tabs),void 0!==t.onload&&(this.conf.autoload.onload=t.onload),void 0!==t.arrows_mode&&(this.conf.autoload.arrows_mode=t.arrows_mode)):n=t,window.dhtmlXCellTop.apply(this,[n,t.offsets]),null!=this.base._ofs&&null!=this.base._ofs.t&&(this.conf.tabsTop=this.base._ofs.t),this.tabsMode=document.createElement("DIV"),this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.cont.appendChild(this.tabsMode),this.tabsArea=document.createElement("DIV"),this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>",this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto",this.tabsMode.appendChild(this.tabsArea),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",this.tabsArea.childNodes[0].onclick=function(){"left"==i.conf.align?i._moveTabs(1):i._moveTabs(-1)},this.tabsArea.childNodes[2].onclick=function(){"left"==i.conf.align?i._moveTabs(-1):i._moveTabs(1)},this._onTabsAreaClick=function(t){return this._callMainEvent("onTabClose",[t])},this.tabsArea.onclick=function(t){for(var e=(t=t||event).target||t.srcElement;null!=e;){if(void 0!==e._tabCloseId){if(!0!==i._onTabsAreaClick(e._tabCloseId))return;i.t[e._tabCloseId].conf.remove=!0,i._hideTab(e._tabCloseId),e=null}else void 0!==e._tabId&&(i._doOnClick(e._tabId),e=null);null!=e&&(e=e.parentNode)==this&&(e=null)}},this.tabsArea.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this._doOnClick=function(t){this.callEvent("onTabClick",[t,this.conf.lastActive]),this.t[t].conf.enabled&&this._setTabActive(t)},this.t={},this.addTab=function(t,e,i,n,s,o){o=void 0===o?1==this.conf.closeButton:window.dhx4.s2b(o),s=window.dhx4.s2b(s);var l=document.createElement("DIV");l.className="dhxtabbar_tab",l.innerHTML="<div class='dhxtabbar_tab_text"+(o?" dhxtabbar_tab_text_close":"")+"'>"+e+"</div>"+(o?"<div class='dhxtabbar_tab_close'></div>":""),l._tabId=t,o&&(l.childNodes[1]._tabCloseId=t);var r=this.tabsArea.childNodes[1].firstChild;null!=n&&n+1>0&&n+1<r.childNodes.length?r.insertBefore(l,r.childNodes[n+1]):r.appendChild(l);var a=!1;void 0===i||null==i||"*"==i?(i=this._getLabelWidth(e,o),a=!0):i=parseInt(i),l.style.width=i+"px";var h=new dhtmlXTabBarCell(t,this);this.tabsMode.appendChild(h.cell),this.t[t]={tab:l,cell:h,conf:{text:e,visible:!0,active:!1,enabled:!0,close:o,width:i,autowidth:a}},r=h=null,s?this._setTabActive(t):this._adjustCell(t),1!=this.conf.initSeq&&"auto"==this.conf.arwMode&&this.setSizes()},this.setSizes=function(){this._adjustCont(),null==this.conf.tabsAreaOfs&&(this.tabsArea.style.width=this.cont.offsetWidth+"px",this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth),this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px",this._adjustCell(this.conf.lastActive),this._adjustTabs(!0),this.callEvent("_onSetSizes",[])},this._adjustCell=function(t){if(this.conf.contZone&&null!=t){var e=("top"==this.conf.tabsMode?this.tabsArea.offsetHeight:0)+this.conf.tabsTop,i=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop,n=this.t[t].cell.dataType;"dhx_skyblue"!=this.conf.skin||"layout"!=n&&"tabbar"!=n&&"acc"!=n||("top"==this.conf.tabsMode&&(e-=1),i+=1),t!=this.conf.lastActive&&(e=-5e3,this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.zIndex=0),this.t[t].cell._setSize(0,e,this.cont.offsetWidth,i)}},this.setTabsMode=function(t){this.conf.tabsMode="bottom"==t?"bottom":"top",this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto",this.setSizes()},this._tabCss=function(t,e){var i=this.t[t].conf.active,n=!this.t[t].conf.enabled;return"dhxtabbar_tab"+(!this.t[t].conf.visible?" dhxtabbar_tab_hidden":i||n?" dhxtabbar_tab"+(i?"_actv":"")+(n?"_dis":""):"")},this._getLabelWidth=function(t,e){null==this.tabsTextTest&&(this.tabsTextTest=document.createElement("SPAN"),this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin),document.body.appendChild(this.tabsTextTest),this.tabsTextTest.innerHTML=t;var i=this.tabsTextTest.offsetWidth;return window.dhx4.isIE&&0==i&&(i=this.tabsTextTest.offsetWidth),i+=this.conf.tabsWidth[this.conf.skin][0],1==e&&(i+=this.conf.tabsWidth[this.conf.skin][1]),document.body.removeChild(this.tabsTextTest),i},this._adjustTabs=function(t){1!=this._checkArrows()&&1!=t||(this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px",this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+2*this.conf.tabsOfs+"px");var e=this.tabsArea.childNodes[1];if(e.offsetWidth<5)e=null;else{for(var i=parseInt(e.childNodes[0].style[this.conf.align]),n=null,s=0;s<e.childNodes[0].childNodes.length;s++){var o=e.childNodes[0].childNodes[s]._tabId;if(null!=o&&this.t[o].conf.visible){var l=this.t[o].tab.offsetWidth-this.conf.tabsOfs;this.t[o].conf.active&&(i<0||e.offsetWidth<l?n={d:1,id:o}:i+l>e.offsetWidth&&(n={d:-1,id:o})),i+=l}}null!=n?this._moveTabs(n.d,n.id):e.offsetWidth>i+1&&(e.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(e.childNodes[0].style[this.conf.align])+(e.offsetWidth-i))+"px"),e=n=null}},this._moveTabs=function(t,e){for(var i=this.tabsArea.childNodes[1].childNodes[0],n=0,s=[],o=null,l=0;l<i.childNodes.length;l++){var r=i.childNodes[l]._tabId;null!=r&&this.t[r].conf.visible&&(s.push({id:r,w:this.t[r].tab.offsetWidth-this.conf.tabsOfs,ind:n}),r==e&&(o=n),n++)}var a=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]),h=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs,d=null,c=null;for(l=0;l<s.length;l++)s[l].x=a,null==d&&a>=0&&a+s[l].w>0&&(d=s[l]),a<h&&a+s[l].w<=h&&(c=s[l]),a+=s[l].w;if(null!=o)var u=s[o];else{u=null;t>0?null==d?s.length>0&&(u=s[s.length-1]):d.ind>0&&s.length>=d.ind&&(u=s[d.ind-1]):null==c?s.length>0&&(u=s[0]):s.length>c.ind&&(u=s[c.ind+1])}null!=u&&(i.style[this.conf.align]=t>0?a<h?Math.min(0,parseInt(i.style[this.conf.align])+(h-a))+"px":parseInt(i.style[this.conf.align])-u.x+"px":parseInt(i.style[this.conf.align])-u.x+h-u.w+"px"),i=u=s=null},this._getNextVisible=function(t,e){return this._getNearVisible(t,e,"next")},this._getPrevVisible=function(t,e){return this._getNearVisible(t,e,"previous")},this._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},this._getNearVisible=function(t,e,i){if("first"==i){var n=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];i="next"}else{if(null==t||null==this.t[t])return e?this._getFirstVisible():null;n=this.t[t].tab[i+"Sibling"]}for(var s=null;null!=n&&null==s;){var o=n._tabId;null!=o&&null==s&&this.t[o].conf.visible?s=o:n=n[i+"Sibling"]}return n=null,s},this._showTab=function(t,e){if(null!=this.t[t]){if(1==this.t[t].conf.transActv){if("show"==this.t[t].conf.transMode)return}else if(1==this.t[t].conf.visible)return;!1!==this.conf.transProp?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="show",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=e?t:null,this.t[t].conf.transEv||(this.t[t].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[t].conf.transEv=!0),this.t[t].conf.visible=!0,this.t[t].tab.className=this._tabCss(t),this.t[t].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[t].tab.style.width=this.t[t].conf.width+"px",this.t[t].tab.clientWidth>=this.t[t].conf.width&&(this.t[t].tab.style.visibility="visible")):(this.t[t].conf.visible=!0,this.t[t].tab.style.display="",e||this.t[t].conf.active?(this.t[t].conf.active=!1,this._setTabActive(t)):this._adjustTabs())}},this._hideTab=function(t,e){if(null!=this.t[t]){if(1==this.t[t].conf.transActv){if("hide"==this.t[t].conf.transMode)return}else if(1!=this.t[t].conf.visible)return;var n=!1;this.conf.lastActive==t&&(this.conf.lastActive=null,this.t[t].conf.active=!1,this.t[t].tab.className=this._tabCss(t),n=!0);var s=this._getPrevVisible(t),o=this._getNextVisible(t),l=1==n&&!1!==e?(1==e?null:e)||o||s:null;!1!==this.conf.transProp?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="hide",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=l,this.t[t].conf.visible=!1,this.t[t].conf.transEv||(this.t[t].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[t].conf.transEv=!0),this.t[t].tab.style.visibility="hidden",this.t[t].tab.className=i._tabCss(t),this.t[t].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[t].tab.style.width="0px"):(this.t[t].tab.style.display="none",this.t[t].conf.visible=!1,this.conf.contZone&&(this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.top="-5000px"),null!=l&&this._setTabActive(l),this._adjustTabs(),this.t[t].conf.remove&&this._removeTab(t))}},this._isTabVisible=function(t){return 1==this.t[t].conf.visible},this._doOnTrEnd=function(){var t=this._tabId;if(null!=i.t[t]){var e=i.t[t],n=e.conf.transActvId;"hide"==e.conf.transMode?e.conf.remove?i._removeTab(t):(e.tab.style[e.conf.transProp]="",i.conf.contZone&&(e.cell.cell.style.visibility="hidden",e.cell.cell.style.top="-5000px"),e.conf.transActv=!1):"show"==e.conf.transMode&&(e.tab.style[e.conf.transProp]="",e.tab.style.visibility="visible",e.conf.transMode=null,e.conf.transActv=!1),null!=n?i._setTabActive(n):i._adjustTabs(),e=null}},this.enableTabCloseButton=function(t){this.conf.closeButton=window.dhx4.s2b(t)},this.unload=function(){for(var t in this.conf.unloading=!0,this.clearAll(),this.t=null,null!=this.tabsTextTest&&(this.tabsTextTest.parentNode&&this.tabsTextTest.parentNode.removeChild(this.tabsTextTest),this.tabsTextTest=null),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.tabsArea.childNodes[0].onclick=null,this.tabsArea.childNodes[2].onclick=null,this.tabsArea.onclick=null,this.tabsArea.onselectstart=null,this.tabsArea.parentNode.removeChild(this.tabsArea),this.tabsArea=null,this.tabsMode.parentNode.removeChild(this.tabsMode),this.tabsMode=null,this._unloadTop(),window.dhx4._eventable(this,"clear"),this)this[t]=null;i=null},this.enableContentZone=function(t){this.conf.contZone=1==t},this.setSkin=function(t){for(var e in this._setBaseSkin(t),this.conf.skin=t,null!=this.tabsTextTest&&(this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin),this.t)this.t[e].cell._resetSizeState(),1==this.t[e].conf.autowidth&&(this.t[e].conf.width=this._getLabelWidth(this.t[e].conf.text,this.t[e].conf.close),this.t[e].conf.visible&&(this.t[e].tab.style.width=this.t[e].conf.width+"px"));this.conf.tabsAreaOfs=null,this._fixTabsOfs(),this.setSizes()},this.setAlign=function(t){(t="left"==t?"left":"right")!=this.conf.align?(!1!==this.conf.transProp&&(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="",this.conf.align=t,this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",!1!==this.conf.transProp&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos)):this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},this._initObj=function(t){this.conf.initSeq=!0,this.clearAll();var e=!1;if(null!=t.settings&&(null!=t.settings.skin&&this.setSkin(t.settings.skin),null!=t.settings.close_button?this.enableTabCloseButton(window.dhx4.s2b(t.settings.close_button)):null!=t.settings.closeButton&&this.enableTabCloseButton(window.dhx4.s2b(t.settings.closeButton)),null!=t.settings.align&&this.setAlign(t.settings.align),"ajax"==t.settings.hrefmode&&(e=!0),"ajax-html"==t.settings.hrefmode&&(e=!0,this.conf.url_demand=!0)),null!=t.tabs)for(var i=0;i<t.tabs.length;i++){var n=t.tabs[i];void 0===n.id&&(n.id=window.dhx4.newId()),isNaN(parseInt(n.width))?n.width=null:n.width=parseInt(n.width),this.addTab(n.id,n.text||n.label||"",n.width,n.index,window.dhx4.s2b(n.selected)||window.dhx4.s2b(n.active),n.close),null!=n.content?this.cells(n.id).attachHTMLString(n.content):null!=n.href&&(1==this.conf.url_demand?this.conf.urls[n.id]={href:n.href,ajax:e}:this.cells(n.id).attachURL(n.href,e)),void 0!==n.enabled&&0==window.dhx4.s2b(n.enabled)?this.tabs(n.id).disable():void 0!==n.disabled&&1==window.dhx4.s2b(n.disabled)&&this.tabs(n.id).disable()}this.conf.initSeq=!1,"auto"==this.conf.arwMode&&this.setSizes(),1==this.conf.url_demand&&this._loadURLOnDemand(this.conf.lastActive)},this._xmlToObj=function(t){var e={settings:{},tabs:[]},i=t.getElementsByTagName("tabbar")[0];if(null!=i){for(var n in{skin:1,align:1,closeButton:1,hrefmode:1})null!=i.getAttribute(n)&&(e.settings[n]=i.getAttribute(n));for(var s=i.getElementsByTagName("tab"),o=0;o<s.length;o++){var l={text:s[o].firstChild.nodeValue||""};for(var n in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1})null!=s[o].getAttribute(n)&&(l[n]=s[o].getAttribute(n));var r=s[o].getElementsByTagName("content")[0];if(null!=r){l.content="";for(var a=0;a<r.childNodes.length;a++)l.content+=r.childNodes[a].nodeValue||""}e.tabs.push(l)}}return e},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:!0});var o=window.dhx4.transDetect();return this.conf.transProp=o.transProp,this.conf.transEv=o.transEv,this.conf.transValueWidth="width "+this.conf.transSpeed,o=null,!1!==this.conf.transProp&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos),this._callMainEvent=function(t,e){return this.callEvent(t,e)},window.dhx4._eventable(this),null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml?this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload):null!=this.conf.autoload.tabs&&this.loadStruct({tabs:this.conf.autoload.tabs},this.conf.autoload.onload),null!=this.conf.autoload.arrows_mode&&this.setArrowsMode(this.conf.autoload.arrows_mode),this._fixTabsOfs(),this.setSizes(),this}function dhtmlXTabBarInitFromHTML(){for(var z=document.getElementsByTagName("div"),i=0;i<z.length;i++)if(-1!=z[i].className.indexOf("dhtmlxTabBar")){var conf={settings:{},tabs:[]},n=z[i],id=n.id;n.className="";for(var k=new Array,j=0;j<n.childNodes.length;j++)n.childNodes[j].tagName&&"!"!=n.childNodes[j].tagName&&(k[k.length]=n.childNodes[j]);var skin=n.getAttribute("skin");null!=skin&&(conf.settings.skin=skin);var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w,acs=n.getAttribute("onbeforeinit"),acs&&eval(acs),align=n.getAttribute("align"),align&&(conf.settings.align=align);for(var cont={},j=0;j<k.length;j++){var m=k[j],tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")},href=m.getAttribute("href");cont[m.id]=href?{href:href}:{cont:m},conf.tabs.push(tab)}for(var a in w.loadStruct(conf),cont)cont[a].href?(w.cells(a).attachURL(cont[a].href),cont[a].href=null):(w.cells(a).attachObject(cont[a].cont),"none"==cont[a].cont.style.display&&(cont[a].cont.style.display=""),cont[a].cont=null),cont[a]=null;var selId=n.getAttribute("select");if(null!=selId)w.tabs(selId).setActive();else if(null==w.getActiveTab()){var v=w._getFirstVisible();null!=v&&w.cells(v).setActive()}acs=n.getAttribute("oninit"),acs&&eval(acs)}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}function _createMC(t,e,i){jQuery("#"+e).html(""),jQuery("#"+e).mediacenter(t);var n="";switch(t.mode){case 1:n=jQuery("#"+e).mediacenter("translate","TIT_MCE");break;case 3:n=jQuery("#"+e).mediacenter("translate","TIT_MBR")}2!=t.mode&&(jQuery.widget("ui.dialog",jQuery.ui.dialog,{_allowInteraction:function(t){return 0!=jQuery(t.target).parents("#CatEditDlg").length||0!=jQuery(t.target).parents("#MCMetaEditDlg").length||0!=jQuery(t.target).parents("#FilterDlg").length||0!=jQuery(t.target).parents("#MCMetadataDlg").length||this._super(t)}}),jQuery("#"+i).dialog({title:n,autoOpen:!0,width:1200,modal:!0,closeOnEscape:!1,resizable:!1,close:function(t){jQuery("#"+e).mediacenter("option","active",!1),jQuery(".mediacenter").mediacenter("pausePlayback"),IMC._OnMCClose("medienbrowser",mrCancel,"",""),jQuery("#movie_name").remove(),jQuery("#"+e).html(""),jQuery("#"+i).dialog("destroy")}}),jQuery(".ui-dialog-titlebar-close").attr("title",jQuery("#"+e).mediacenter("translate","BTN_CLOSE")).css("background-image","bilder/df_close.png").css("background-position","0px 0px"),jQuery(".ui-front").css("z-index",mazZ=maxZ+1),jQuery("#"+i).find("#"+e).length)}function _showMediaCenterDialog(t){jQuery("#"+t).dialog("open")}function _hideMediaCenterDialog(t){jQuery("#"+t).dialog("close")}function _getMediaCenterHandle(t){IMCHandle=jQuery("#"+t)}function _getActiveMediaCenterHandle(t){IMCHandle=jQuery("."+t)}function closeUploader(){jQuery(".files").empty()}function eXcell_linkStyle(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(t){0!=t?this.setCValue("<div class='mc-link-style'>"+t+"</div>"):this.setCValue(t)}}function eXcell_linkStyle2(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(t){0!=t?this.setCValue("<div class='mc-link-style2'>"+t+"</div>"):this.setCValue(t)}}null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),void 0===dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){var t,e,i,n;function s(){if(e){var i=document.createEvent("HTMLEvents");i.initEvent("dblclick",!0,!0),e.dispatchEvent(i),t=e=null}}dhtmlxEvent(document.body,"touchstart",function(o){e=o.touches[0].target,i=o.touches[0].clientX,n=o.touches[0].clientY,t=window.setTimeout(s,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(s){t&&(Math.abs(s.touches[0].clientX-i)>50||Math.abs(s.touches[0].clientY-n)>50)&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent(document.body,"touchend",function(i){t&&(window.clearTimeout(t),t=e=!1)}),dhtmlxEvent.initTouch=function(){}}),dhtmlXCellObject.prototype.showView=function(t){if(this.conf.view==t)return!1;this._viewSave(this.conf.view),this._viewRestore(t),this._updateIdx(),this._adjustCont(),this.conf.view=t;var e=void 0===this.conf.views_loaded[this.conf.view];return this.conf.views_loaded[this.conf.view]=!0,e},dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view},dhtmlXCellObject.prototype.unloadView=function(t){if(t==this.conf.view){var e=this.conf.unloading;return this.conf.unloading=!0,"function"==typeof this.detachMenu&&this.detachMenu(),"function"==typeof this.detachToolbar&&this.detachToolbar(),"function"==typeof this.detachRibbon&&this.detachRibbon(),this.detachStatusBar(),this._detachObject(null,!0),this.conf.unloading=e,void(this.conf.unloading||this._adjustCont(this._idd))}if(null!=this.views[t]){var i=this.views[t];for(var n in i.dataNodes)"function"==typeof i.dataNodes[n].unload&&i.dataNodes[n].unload(),i.dataNodes[n]=null,i.dataNodesCont[n]=null;"url"==i.dataType?null!=i.cellCont&&"null"!=i.cellCont[0]&&this._detachURLEvents(i.cellCont[0]):null!=i.dataObj&&("function"==typeof i.dataObj.unload?i.dataObj.unload():"function"==typeof i.dataObj.destructor&&i.dataObj.destructor(),i.dataObj=null),i=null,this._viewDelete(t),void 0!==this.conf.views_loaded[t]&&delete this.conf.views_loaded[t]}},dhtmlXCellObject.prototype.getId=function(){return this._idd},dhtmlXCellObject.prototype.progressOn=function(){if(1!=this.conf.progress){this.conf.progress=!0;var t=document.createElement("DIV");t.className=this.conf.idx_data.pr1;var e=document.createElement("DIV");"material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)?(e.className=this.conf.idx_data.pr3,e.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'):e.className=this.conf.idx_data.pr2,null!=this.conf.idx.cover?this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cover]):this.cell.appendChild(e),this.cell.insertBefore(t,e),t=e=null,this._updateIdx(),this._adjustProgress()}},dhtmlXCellObject.prototype.progressOff=function(){if(1==this.conf.progress){for(var t in{pr3:3,pr2:2,pr1:1}){var e=this.cell.childNodes[this.conf.idx[t]];null!=e&&e.parentNode.removeChild(e),e=null}this.conf.progress=!1,this._updateIdx()}},dhtmlXCellObject.prototype._adjustProgress=function(){if(null!=this.conf.idx.pr1){this.conf.pr||(this.conf.pr={});var t=this.cell.childNodes[this.conf.idx.pr1],e=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];this.conf.pr.ofs||(e.style.width=t.offsetWidth+"px",e.style.height=t.offsetHeight+"px",this.conf.pr.ofs={w:e.offsetWidth-e.clientWidth,h:e.offsetHeight-e.clientHeight}),e.style.width=t.offsetWidth-this.conf.pr.ofs.w+"px",e.style.height=t.offsetHeight-this.conf.pr.ofs.h+"px",t=e=null}},dhtmlXCellObject.prototype._showCellCover=function(){if(1!=this.conf.cover){this.conf.cover=!0;var t=document.createElement("DIV");t.className=this.conf.idx_data.cover,this.cell.appendChild(t),t=null,this._updateIdx()}},dhtmlXCellObject.prototype._hideCellCover=function(){1==this.conf.cover&&(this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]),this._updateIdx(),this.conf.cover=!1)},dhtmlXCellObject.prototype._showBorders=function(t){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),!0!==t&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._hideBorders=function(t){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),!0!==t&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth},dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight},dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"},dhtmlXCellObject.prototype._unload=function(){for(var t in this.conf.unloading=!0,this.callEvent("_onCellUnload",[]),this.progressOff(),this.unloadView(this.conf.view),this.dataNodes=null,this.cell.parentNode.removeChild(this.cell),this.cell=null,window.dhx4._eventable(this,"clear"),this.views)this.unloadView(t);for(var t in this.conf=null,this)this[t]=null},dhtmlXCellObject.prototype.attachObject=function(t,e){if(!window.dhx4.s2b(e)||"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||(e=!1),"string"==typeof t&&(t=document.getElementById(t)),t.parentNode!=this.cell.childNodes[this.conf.idx.cont]){if(e){t.style.display="";var i=t.offsetWidth,n=t.offsetHeight}this._attachObject(t),this.dataType="obj",t.style.display="",t=null,e&&this._adjustByCont(i,n)}else t=null},dhtmlXCellObject.prototype.appendObject=function(t){"string"==typeof t&&(t=document.getElementById(t)),t.parentNode!=this.cell.childNodes[this.conf.idx.cont]?(this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0),this._attachObject(t,null,null,!0),this.dataType="obj",t.style.display="",t=null):t=null},dhtmlXCellObject.prototype.detachObject=function(t,e){this._detachObject(null,t,e)},dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb},dhtmlXCellObject.prototype.getAttachedObject=function(){return"obj"==this.dataType||"url"==this.dataType||"url-ajax"==this.dataType?this.cell.childNodes[this.conf.idx.cont].firstChild:this.dataObj},dhtmlXCellObject.prototype.attachURL=function(t,e,i){1==i&&(i={});var n=void 0!==i&&0!=i&&null!=i;if(null==this.conf.url_data&&(this.conf.url_data={}),this.conf.url_data.url=t,this.conf.url_data.ajax=1==e,this.conf.url_data.post_data=1==i?{}:i||null,null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(t){}this.conf.url_data.xml_doc.xmlDoc=null,this.conf.url_data.xml_doc=null}if(1==e){var s=this;if(n){var o="";for(var l in i)o+="&"+encodeURIComponent(l)+"="+encodeURIComponent(i[l]);this.conf.url_data.xml_doc=dhx4.ajax.post(t,o,function(t){null!=s.attachHTMLString&&"string"==typeof t.xmlDoc.responseText&&(s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+t.xmlDoc.responseText+"</div>"),"function"==typeof s._doOnFrameContentLoaded&&s._doOnFrameContentLoaded(),s.dataType="url-ajax"),s=t=null})}else this.conf.url_data.xml_doc=dhx4.ajax.get(t,function(t){null!=s.attachHTMLString&&"string"==typeof t.xmlDoc.responseText&&(s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+t.xmlDoc.responseText+"</div>"),"function"==typeof s._doOnFrameContentLoaded&&s._doOnFrameContentLoaded(),s.dataType="url-ajax"),s=t=null})}else{if("url"==this.dataType)var r=this.getFrame();else(r=document.createElement("IFRAME")).frameBorder=0,r.border=0,r.style.width="100%",r.style.height="100%",r.style.position="relative",this._attachObject(r),this.dataType="url",this._attachURLEvents();if(n){var a=void 0===this.conf.url_data.post_ifr;this.conf.url_data.post_ifr=!0,a&&this._attachURLEvents(),r.src="about:blank"}else r.src=t+window.dhx4.ajax._dhxr(t);r=null}r=null},dhtmlXCellObject.prototype.reloadURL=function(){"url"!=this.dataType&&"url-ajax"!=this.dataType||null!=this.conf.url_data&&this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)},dhtmlXCellObject.prototype.attachHTMLString=function(t){this._attachObject(null,null,t);for(var e=t.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],i=0;i<e.length;i++){var n=e[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");n&&(window.execScript?window.execScript(n):window.eval(n))}},dhtmlXCellObject.prototype.attachScheduler=function(t,e,i,n){n=n||window.scheduler;var s=!1;i&&((o=document.getElementById(i))&&(s=!0));if(!s){var o,l=i||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';(o=document.createElement("DIV")).id="dhxSchedObj_"+(new Date).getTime(),o.style.width="100%",o.style.height="100%",o.style.position="relative",o.style.overflow="hidden",o.className="dhx_cal_container",o.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+l+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}return this._attachObject(o),this.dataType="scheduler",this.dataObj=n,this.dataObj.setSizes=function(){this.update_view()},n.init(o.id,t,e),o=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachMap=function(t){var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),t||(t={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}),this.dataType="maps",this.dataObj=new google.maps.Map(e,t),this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")},e=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype._createNode_sb=function(t,e,i,n,s){if(void 0!==s)t=s;else{var o=e||{},l="string"==typeof o.text&&o.text.length>0?o.text:"&nbsp;",r="number"==typeof o.height&&o.height;(t=document.createElement("DIV")).className="dhx_cell_statusbar_def",t.innerHTML="<div class='"+(1==o.paging?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+l+"</div>",0!=r&&(t.firstChild.style.height=t.firstChild.style.lineHeight=r+"px")}return null!=this.conf.idx.pr1?this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.pr1]):this.cell.appendChild(t),this.conf.ofs_nodes.b.sb=!0,this._updateIdx(),this._adjustCont(this._idd),t},dhtmlXCellObject.prototype.attachStatusBar=function(t){if(!this.dataNodes.sb)return null!=t&&1==window.dhx4.s2b(t.paging)&&(t.height=null),"dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",t),this.dataNodes.sb.setText=function(t){this.childNodes[0].innerHTML=t},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sb.onselectstart=function(t){return!1},this.dataNodes.sb},dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&("dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))},dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")},dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")},dhtmlXCellObject.prototype._mtbShowHide=function(t,e){this.dataNodes[t]&&(this.cell.childNodes[this.conf.idx[t]].style.display=e,this._adjustCont())},dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return"url"!=this.dataType?null:this.cell.childNodes[this.conf.idx.cont].firstChild},dhtmlXCellObject.prototype._attachURLEvents=function(){if("url"==this.dataType){var t=this,e=this._idd,i=this.cell.childNodes[this.conf.idx.cont].firstChild;"function"!=typeof this._doOnFrameMouseDown&&(this._doOnFrameMouseDown=function(i){t.callEvent("_onContentMouseDown",[e,i||event])}),"function"==typeof window.addEventListener?i.onload=function(){try{"function"==typeof t._doOnFrameMouseDown&&this.contentWindow.document.body.addEventListener("mousedown",t._doOnFrameMouseDown,!1)}catch(t){}try{"function"==typeof t._doOnFrameContentLoaded&&t._doOnFrameContentLoaded()}catch(t){}}:i.onreadystatechange=function(e){if("complete"==this.readyState){try{"function"==typeof t._doOnFrameMouseDown&&this.contentWindow.document.body.attachEvent("onmousedown",t._doOnFrameMouseDown)}catch(t){}try{"function"==typeof t._doOnFrameContentLoaded&&t._doOnFrameContentLoaded()}catch(t){}}}}},dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(1==this.conf.url_data.post_ifr){var t=this.getFrame().contentWindow.document,e=t.createElement("FORM");e.method="POST",e.action=this.conf.url_data.url,t.body.appendChild(e);var i={};for(var n in 1!=window.dhx4.ajax.cache&&(i["dhxr"+(new Date).getTime()]="1"),this.conf.url_data.post_data)i[n]=this.conf.url_data.post_data[n];for(var n in i){var s=t.createElement("INPUT");s.type="hidden",s.name=n,s.value=i[n],e.appendChild(s),s=null}this.conf.url_data.post_ifr=!1,e.submit()}else this.callEvent("_onContentLoaded",[this._idd])},dhtmlXCellObject.prototype._detachURLEvents=function(t){if(null==t){if("url"!=this.dataType)return;t=this.cell.childNodes[this.conf.idx.cont].firstChild}if("function"==typeof window.addEventListener){t.onload=null;try{t.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(t){}}else{t.onreadystatechange=null;try{t.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(t){}}t=null},dhtmlXCellObject.prototype._attachObject=function(t,e,i,n,s){if("string"==typeof t&&1=={menu:1,toolbar:1,ribbon:1,sb:1}[t])return this["_createNode_"+t].apply(this,arguments);1!=n&&this._detachObject(null,!0,null),"string"==typeof i?this.cell.childNodes[this.conf.idx.cont].innerHTML=i:this.cell.childNodes[this.conf.idx.cont].appendChild(t),t=null},dhtmlXCellObject.prototype._detachObject=function(t,e,i){if(this.callEvent("_onBeforeContentDetach",[]),"menu"==t||"toolbar"==t||"ribbon"==t||"sb"==t)return(n=this.cell.childNodes[this.conf.idx[t]]).parentNode.removeChild(n),n=null,this.conf.ofs_nodes["sb"==t?"b":"t"][t]=!1,this._updateIdx(),void(this.conf.unloading||this._adjustCont(this._idd));if(1==e?i=!1:void 0===i?i=document.body:"string"==typeof i&&(i=document.getElementById(i)),!1===i){if(1==this.conf.unloading&&null!=String(this.dataType).match(/ajax/)&&null!=this.conf.url_data&&null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(t){}this.conf.url_data.xml_doc.xmlDoc=null,this.conf.url_data.xml_doc=null}"url"==this.dataType?this._detachURLEvents():null!=this.dataObj&&("function"==typeof this.dataObj.unload?this.dataObj.unload():"function"==typeof this.dataObj.destructor&&this.dataObj.destructor())}for(var n=this.cell.childNodes[this.conf.idx.cont];n.childNodes.length>0;)!1===i?n.removeChild(n.lastChild):(n.firstChild.style.display="none",i.appendChild(n.firstChild));this.conf.append_mode&&(n.style.overflow="",this.conf.append_mode=!1);var s="tabbar"==this.dataType;this.dataObj=null,this.dataType=null,i=n=null,1!=this.conf.unloading&&s&&(this.showHeader(!0),this._showBorders())},dhtmlXCellObject.prototype._attachFromCell=function(t){this.detachObject(!0);var e="layout";for(var i in"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(e="window"),"function"==typeof window.dhtmlXWindowsCell&&t instanceof window.dhtmlXWindowsCell&&1==t.wins.w[t._idd].conf.parked&&t.wins._winCellSetOpacity(t._idd,"open",!1),"function"==typeof window.dhtmlXAccordionCell&&t instanceof window.dhtmlXAccordionCell&&0==t.conf.opened&&t._cellSetOpacity("open",!1),t.dataNodes)this._attachObject(i,null,null,null,t.cell.childNodes[t.conf.idx[i]]),this.dataNodes[i]=t.dataNodes[i],t.dataNodes[i]=null,t.conf.ofs_nodes["sb"==i?"b":"t"][i]=!1,t._updateIdx();if(this._mtbUpdBorder(),null!=t.dataType&&null!=t.dataObj){for(this.dataType=t.dataType,this.dataObj=t.dataObj;t.cell.childNodes[t.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(t.cell.childNodes[t.conf.idx.cont].firstChild);t.dataType=null,t.dataObj=null,"grid"==this.dataType&&("window"==e&&"dhx_skyblue"==this.conf.skin?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else for(;t.cell.childNodes[t.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(t.cell.childNodes[t.conf.idx.cont].firstChild);for(var i in this.conf.view=t.conf.view,t.conf.view="def",t.views)this.views[i]=t.views[i],t.views[i]=null,delete t.views[i];t._updateIdx(),t._adjustCont(),this._updateIdx(),this._adjustCont(),1==t.conf.progress?(t.progressOff(),this.progressOn()):this.progressOff(),"window"==e&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)},dhtmlXCellTop.prototype.setOffsets=function(t,e){var i=!1;for(var n in t){var s=n.charAt(0);void 0===this.conf.ofs[s]||isNaN(t[n])||(this.conf.ofs[s]=parseInt(t[n]),i=!0)}!1!==e&&"function"==typeof this.setSizes&&1==i&&this.setSizes()},dhtmlXCellTop.prototype.attachMenu=function(t){if(null==this.dataNodes.menu)return this.dataNodes.menuObj=document.createElement("DIV"),this.dataNodes.menuObj.className="dhxcelltop_menu",this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont),"object"==typeof t&&null!=t||(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.menuObj,this.dataNodes.menu=new dhtmlXMenuObject(t),this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.menuObj.style.display&&(null==this.conf.ofs_menu&&(this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}),this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(null!=this.dataNodes.haObj?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px")}),this.conf.ofs_nodes.t.menuObj=!0,this.setSizes(),t.parnt=null,t=null,this.dataNodes.menu},dhtmlXCellTop.prototype.detachMenu=function(){null!=this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachToolbar=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.dataNodes.toolbarObj=document.createElement("DIV"),this.dataNodes.toolbarObj.className="dhxcelltop_toolbar",this.base.insertBefore(this.dataNodes.toolbarObj,this.cont),this.dataNodes.toolbarObj.appendChild(document.createElement("DIV")),"object"==typeof t&&null!=t||(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.toolbarObj.firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(t),this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.toolbarObj.style.display&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()}),this.conf.ofs_nodes.t.toolbarObj=!0,this.setSizes(),t.parnt=null,t=null,this.dataNodes.toolbar},dhtmlXCellTop.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachRibbon=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.ribbonObj=document.createElement("DIV"),this.dataNodes.ribbonObj.className="dhxcelltop_ribbon",this.base.insertBefore(this.dataNodes.ribbonObj,this.cont),this.dataNodes.ribbonObj.appendChild(document.createElement("DIV")),"object"==typeof t&&null!=t||(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.ribbonObj.firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(t),this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.ribbonObj.style.display&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())}),this.conf.ofs_nodes.t.ribbonObj=!0;var e=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){e.setSizes()}),this.setSizes(),t.parnt=null,t=null,this.dataNodes.ribbon}},dhtmlXCellTop.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachStatusBar=function(t){if(!this.dataNodes.sbObj)return void 0===t&&(t={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxcelltop_statusbar",null!=this.cont.nextSibling?this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling):this.base.appendChild(this.dataNodes.sbObj),this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+("string"==typeof t.text&&t.text.length>0?t.text:"&nbsp;")+"</div>","number"==typeof t.height&&(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=t.height+"px"),this.dataNodes.sbObj.setText=function(t){this.childNodes[0].innerHTML=t},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(t){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.sbObj.style.display&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=(null!=this.dataNodes.faObj?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj},dhtmlXCellTop.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")},dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")},dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")},dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")},dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")},dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")},dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")},dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")},dhtmlXCellTop.prototype._mtbShowHide=function(t,e){null!=this.dataNodes[t]&&(this.dataNodes[t].style.display=e,this.setSizes())},dhtmlXCellTop.prototype._mtbUnload=function(t,e){this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachRibbon()},dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu},dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar},dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon},dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj},dhtmlXCellTop.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var t=document.createElement("DIV");t.className="dhxcelltop_progress",this.base.appendChild(t);var e=document.createElement("DIV");if("material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge))e.className="dhxcelltop_progress_svg",e.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>';else(e=document.createElement("DIV")).className="dhxcelltop_progress_img";this.base.appendChild(e),t=e=null}},dhtmlXCellTop.prototype.progressOff=function(){if(this.conf.progress){for(var t={dhxcelltop_progress:!0,dhxcelltop_progress_img:!0,dhxcelltop_progress_svg:!0},e=0;e<this.base.childNodes.length;e++)void 0!==this.base.childNodes[e].className&&1==t[this.base.childNodes[e].className]&&(t[this.base.childNodes[e].className]=this.base.childNodes[e]);for(var i in t)1!=t[i]&&this.base.removeChild(t[i]),t[i]=null;this.conf.progress=!1,t=null}},dhtmlXCellTop.prototype.attachHeader=function(t,e){null==this.dataNodes.haObj&&("object"!=typeof t&&(t=document.getElementById(t)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxcelltop_hdr",this.dataNodes.haObj.style.height=(e||t.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont),this.dataNodes.haObj.appendChild(t),t.style.visibility="visible",t=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px",this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px",this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())},dhtmlXCellTop.prototype.detachHeader=function(){if(this.dataNodes.haObj){for(;this.dataNodes.haObj.childNodes.length>0;)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj),this.dataNodes.haObj=null,this.detachEvent(this.dataNodes.haEv),this.dataNodes.haEv=null,this.conf.ofs_nodes.t.haObj=!1,delete this.dataNodes.haEv,delete this.dataNodes.haObj,this.conf.unloading||this.setSizes()}},dhtmlXCellTop.prototype.attachFooter=function(t,e){if(null==this.dataNodes.faObj){"object"!=typeof t&&(t=document.getElementById(t)),this.dataNodes.faObj=document.createElement("DIV"),this.dataNodes.faObj.className="dhxcelltop_ftr",this.dataNodes.faObj.style.height=(e||t.offsetHeight)+"px";var i=this.dataNodes.sbObj||this.cont;this.base.lastChild==i?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,i.nextSibling),this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px",this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px",this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.dataNodes.faObj.appendChild(t),t.style.visibility="visible",i=t=null,this.conf.ofs_nodes.b.faObj=!0,this.setSizes()}},dhtmlXCellTop.prototype.detachFooter=function(){if(this.dataNodes.faObj){for(;this.dataNodes.faObj.childNodes.length>0;)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj),this.dataNodes.faObj=null,this.detachEvent(this.dataNodes.faEv),this.dataNodes.faEv=null,this.conf.ofs_nodes.b.faObj=!1,delete this.dataNodes.faEv,delete this.dataNodes.faObj,this.conf.unloading||this.setSizes()}},dhtmlXRibbon.prototype.setSizes=function(){null!=this._tabbar&&"function"==typeof this.setSizes&&this._tabbar.setSizes()},dhtmlXRibbon.prototype._renderData=function(t){var e=this._base.firstChild;null!=t&&(this.conf.icons_path=t.icons_path||this.conf.icons_path,this.conf.icons_css="awesome"==t.iconset,t.tabs instanceof Array?(this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,""),e.className="dhxrb_with_tabbar",this._tabbar=new dhtmlXTabBar(e),this._attachEventTabbar(),this._tabbar.setSkin(this.conf.skin),null!=this.conf.arrows_mode&&this._tabbar.setArrowsMode(this.conf.arrows_mode),this.childIds=this._appendTabs(t.tabs)):t.items instanceof Array&&(/\s?dhxrb_without_tabbar/i.test(this._base.className)||(this._base.className+=" dhxrb_without_tabbar"),/\s?dhxrb_background_area/i.test(e.className)&&(e.className="dhxrb_background_area"),e.innerHTML="<div class='dhxrb_g_area'></div>",this.childIds=this._appendBlocks(t.items,e.firstChild)),this.callEvent("_onHeightChanged",[]))},dhtmlXRibbon.prototype._xmlToJson=function(t){var e=t.lastChild||null,i={},n=[];return e&&"ribbon"==e.tagName&&(n=this._convertXmlNodeListIntoObject(e.childNodes)),n[0]&&n[0].type&&"block"==n[0].type.toLowerCase()?i.items=n:i.tabs=n,i},dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(t){var e,i,n,s=[];for(i=t.length,e=0;e<i;e++)(n=this._covertXmlNodeToObject(t[e]))&&s.push(n);return s},dhtmlXRibbon.prototype._covertXmlNodeToObject=function(t){if(!t||!t.tagName||"item"!=t.tagName.toLowerCase()&&"tab"!=t.tagName.toLowerCase())return null;var e,i,n=t.attributes,s={};for(i=n.length,e=0;e<i;e++)switch(n[e].name){case"isbig":s.isbig=dhx4.s2b(n[e].value);break;case"state":s.state=dhx4.s2b(n[e].value);break;default:s[n[e].name]=n[e].value}return t.childNodes.length&&("buttonCombo"==t.getAttribute("type")||"buttonSelect"==t.getAttribute("type")?s.data=t:"tab"==t.tagName.toLowerCase()?s.items=this._convertXmlNodeListIntoObject(t.childNodes):s.list=this._convertXmlNodeListIntoObject(t.childNodes)),s},dhtmlXRibbon.prototype._appendTabs=function(t){var e,i,n,s=[];for(i=t.length,e=0;e<i;e++)n=this._addTab(t[e]),t[e].items instanceof Array&&(n.childIds=this._appendBlocks(t[e].items,n.base,n)),s.push(n.id);return s},dhtmlXRibbon.prototype._addTab=function(t){var e,i={conf:{active:!1,text:"",width:null,position:null,disable:!1},base:document.createElement("div"),type:"tab",childIds:[]};for(e in t)"items"!=e&&(i.conf[e]=t[e]);for(t.id?i.id=t.id:i.id=dhx4.newId();this._items[i.id];)i.id=dhx4.newId();return this._tabbar.addTab(i.id,i.conf.text,i.conf.width,i.conf.position,i.conf.active),i.base.className="dhxrb_g_area",i.base._dhx_ribbonId=i.id,this.tabs(i.id).attachObject(i.base),this._changeApiForTab(this.tabs(i.id)),this._items[i.id]=i,i},dhtmlXRibbon.prototype._changeApiForTab=function(t){var e;for(e in this._tabOriginalApi)this._tabOriginalApi[e]=this._tabOriginalApi[e]||t[e],t[e]=this._tabCustomApi[e]},dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null},dhtmlXRibbon.prototype._appendBlocks=function(t,e,i){var n,s,o,l,r,a,h=[];for(i=i||null,s=t.length,n=0;n<s;n++)if("object"==typeof t[n]&&"block"==t[n].type){if(o=this._addBlock(t[n],e),t[n].list&&t[n].list instanceof Array)for(r=(l=t[n].list).length,a=0;a<r;a++)this._addItem(o.id,null,null,l[a]);null!=i&&(o.parentId=i.id),o.conf.disable&&this.disable(o.id),h.push(o.id)}return h},dhtmlXRibbon.prototype._addBlock=function(t,e){var i,n;for(n in i={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:!1},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")},t)"list"!=n&&"type"!=n&&"id"!=n&&(i.conf[n]=t[n]);for(t.id?i.id=t.id:i.id=dhx4.newId();this._items[i.id];)i.id=dhx4.newId();return i.base.className="dhxrb_block_base",e.appendChild(i.base),i.contForItems.className="dhxrb_block_items",i.contForText.className="dhxrb_block_label",i.base.appendChild(i.contForItems),i.conf.text&&(i.contForText.innerHTML=i.conf.text,"top"==i.conf.text_pos?i.base.insertBefore(i.contForText,i.contForItems):i.base.appendChild(i.contForText)),i.base._dhx_ribbonId=i.id,this._items[i.id]=i,i},dhtmlXRibbon.prototype._addItem=function(t,e,i,n){var s,o,l,r=this._items[t],a=null,h=this;if("newLevel"!=n.type&&!this.items[n.type])return null;if("newLevel"==n.type?this._addNewLevel(r):"group"==r.type?((s=document.createElement("div")).className="dhxrb_in_group",r.base.appendChild(s)):n.isbig?((s=document.createElement("div")).className="dhxrb_big_button",r.contForItems.appendChild(s)):(o=this._getContainerForSmallItem(r),(s=document.createElement("div")).className="rows"==r.conf.mode?"dhxrb_in_row":"dhxrb_3rows_button",o.appendChild(s)),s){for(var d in this._attachEventForItem(s),l={icons_path:n.icons_path||this.conf.icons_path,icons_css:this.conf.icons_css,skin:this.conf.skin},n)l[d]=n[d];for(l.id||(l.id=dhx4.newId());this._items[l.id];)l.id=dhx4.newId();a=this.items[l.type]&&this.items[l.type].render?this.items[l.type].render(s,l):null}return null!=a&&(this._items[a.id]=a,a.parentId=r.id,r.childIds.push(a.id),s._dhx_ribbonId=a.id,l.onclick&&"function"==typeof l.onclick&&(this._eventHandlers[a.id]=this._eventHandlers[a.id]||{},this._eventHandlers[a.id].onclick=l.onclick),a.callEvent=function(){h.callEvent.apply(h,arguments)},a._callHandler=function(){h._callHandler.apply(h,arguments)},this.items[l.type]&&"function"==typeof this.items[l.type].callAfterInit&&this.items[l.type].callAfterInit.apply(this,[a])),a},dhtmlXRibbon.prototype._callHandler=function(t,e){this._eventHandlers[t]&&this._eventHandlers[t].onclick&&this._eventHandlers[t].onclick.apply(this,e)},dhtmlXRibbon.prototype.items={},dhtmlXRibbon.prototype.items.button={render:function(t,e){var i,n;for(i in n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:e.skin,icons_css:e.icons_css}},e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);if(1==n.conf.icons_css)var s="<i class='"+n.conf.icons_path+(n.conf.img||"")+"'></i>";else s="<img class='dhxrb_image"+(n.conf.img?"'":" dhxrb_invisible'")+" src='"+(n.conf.img?n.conf.icons_path+n.conf.img:"")+"' />";return t.innerHTML=s+"<div class='dhxrb_label_button'>"+n.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n},getText:function(t){return t.conf.text},setText:function(t,e){var i=t.base.childNodes[1];t.conf.text=e,i.innerHTML=e},setImage:function(t,e){t.conf.img=e,0==t.conf.disable&&(t.base.childNodes[0][t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.img)},setImageDis:function(t,e){t.conf.imgdis=e,1==t.conf.disable&&(t.base.childNodes[0][t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.imgdis)},mousedown:function(t,e,i){return!0},click:function(t,e,i){return 0==i.button&&(e._callHandler(t.id,[t.id]),t.callEvent("onClick",[t.id]),!1)},disable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return t.conf.imgdis&&(e[t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.imgdis,/\s?dhxrb_invisible/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_invisible/i,""))),/\s?dhxrb_disable_text_style/i.test(i.className)||(i.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return t.conf.img?e[t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.img:/\s?dhxrb_invisible/i.test(e.className)||(e.className+=" dhxrb_invisible"),/\s?dhxrb_disable_text_style/i.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}},dhtmlXRibbon.prototype.items.buttonTwoState={click:function(t,e,i){return!1},afterRender:function(t){t.conf.state&&this.setState(t,t.conf.state)},mouseover:function(t){return/dhxrb_highlight0/.test(t.base.className)||(t.base.className+=" dhxrb_highlight0"),!1},mouseout:function(t){return/dhxrb_highlight0/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight0/,"")),!1},mousedown:function(t,e,i){return e._callHandler(t.id,[t.id,!t.conf.state]),this.setState(t,!t.conf.state,!0),!1},mouseup:function(t){return!1},setState:function(t,e,i){i=i||!1,(e=dhx4.s2b(e))?/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1"):/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,"")),t.conf.state=e,i&&t.callEvent("onStateChange",[t.id,t.conf.state])},getState:function(t){return 1==t.conf.state}},dhtmlXRibbon.prototype.items.buttonSegment={click:function(t,e,i){return!1},mousedown:function(t,e,i){return this.setState(t,e,!0),!1},callAfterInit:function(t){(t.conf.state||null==dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(t,this))&&(t.conf.state&&(t.conf.state=!1),dhtmlXRibbon.prototype.items.buttonSegment.setState(t,this,!1))},afterRender:function(){},setState:function(t,e,i){i=i||!1;var n=null;0==dhx4.s2b(t.conf.state)&&(null!=(n=this._getSelectedNeighbor(t,e))&&this._unSelect(n),/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1"),t.conf.state=!0,i&&(e._callHandler(t.id,[t.id,n?n.id:null]),e.callEvent("onStateChange",[t.id,n?n.id:null])))},remove:function(t,e){var i,n=dhx4.s2b(t.conf.state),s=null,o=0,l=e._items[t.parentId];if(n){for(;l.childIds[o]&&null==s;)"buttonSegment"==(i=e._items[l.childIds[o]]).type&&i!=t&&(s=i),o++;s&&this.setState(s,e)}},_unSelect:function(t){dhx4.s2b(t.conf.state)&&(/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,"")),t.conf.state=!1)},_getSelectedNeighbor:function(t,e){var i,n,s,o=e._items[t.parentId],l=null;for(n=o.childIds.length,i=0;i<n;i++)if("buttonSegment"==(s=e._items[o.childIds[i]]).type&&s.conf.state){l=s;break}return l}},dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:!1,afterRender:function(t){var e=t.base.childNodes[1];e.innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>",t.menu=null,this.itemCollection.push(t),this._attachEventToWindow(),e=null},setText:function(t,e){var i=t.base.childNodes[1].lastChild;t.conf.text=e,t.base.childNodes[1].innerHTML=e,t.base.childNodes[1].appendChild(i)},setOptionText:function(t,e,i){null!=t.menu?t.menu.setItemText(e,i):this._loopThroughItems(t.conf.items,e,i,!1)},getOptionText:function(t,e){return null!=t.menu?t.menu.getItemText(e):this._loopThroughItems(t.conf.items,e,null,!0)},_loopThroughItems:function(t,e,i,n){for(var s=0;s<t.length;s++){if(t[s].id==e)return 1!=n?(t[s].text=i,!0):t[s].text;if(null!=t[s].items){var o=this._loopThroughItems(t[s].items,e,i,n);if(null!=o)return o}}return null},_attachEventToWindow:function(){0==this._isAttachedEventInWindow&&("function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._hideAllMenus,!1):document.body.attachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!0)},_detachEventFromWindow:function(){"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._hideAllMenus,!1):document.body.detachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!1},_hideAllMenus:function(t){for(var e=(t=t||event).target||t.srcElement,i=!0;null!=e&&1==i;)null!=e.className&&/SubLevelArea_Polygon/i.test(e.className)?i=!1:e=e.parentNode;if(0!=i){var n=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var s in n){var o=n[s];o.menu instanceof dhtmlXMenuObject&&(o._skipHiding?o._skipHiding=!1:dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(o))}}},mousedown:function(t,e,i){return t._skipHiding=!0,this.showMenu(t),!1},mouseup:function(t){return!1},click:function(){},setState:function(){},showMenu:function(t){var e=dhx4.absLeft(t.base),i=dhx4.absTop(t.base)+t.base.offsetHeight;t.menu instanceof dhtmlXMenuObject?t.menu.showContextMenu(e,i):(t.menu=new dhtmlXMenuObject({parent:t.base,icons_path:t.conf.icons_path,context:!0,items:t.conf.items,skin:t.conf.skin}),t.conf.data&&(t.menu.loadStruct(t.conf.data),delete t.conf.data),t.menu.setAutoHideMode(!1),t.menu.attachEvent("onHide",function(e){null==e&&dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(t)}),t.menu.attachEvent("onShow",function(e){null==e&&dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(t)}),t.menu.attachEvent("onClick",function(e){t.callEvent("onClick",[e,t.id])}),t.base.oncontextmenu=function(){return!1},dhtmlXRibbon.prototype.items.buttonSelect.showMenu(t))},hideMenu:function(t){t.menu instanceof dhtmlXMenuObject&&t.menu.hideContextMenu()},remove:function(t){var e;t.menu instanceof dhtmlXMenuObject&&(t.menu.unload(),t.menu=null),t.base.oncontextmenu=null,-1!=(e=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,t))&&dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(e,1),0==dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length&&this._detachEventFromWindow()},setSkin:function(t,e){t.menu instanceof dhtmlXMenuObject&&t.menu.setSkin(e)},_doOnHideMenu:function(t){t._skipHiding?t._skipHiding=!1:/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,""))},_doOnShowMenu:function(t){/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1")}},dhtmlXRibbon.prototype.items.group={render:function(t,e){var i,n;for(i in n={base:t,id:e.id,type:e.type,conf:{disable:!1,skin:e.skin},childIds:[]},t.className="dhxrb_group",e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);return n},callAfterInit:function(t){this._detachEventFromItem(t.base);var e,i,n,s,o=t.conf.list;for(i=o?o.length:0,e=0;e<i;e++)null!=(n=this._addItem(t.id,null,null,o[e]))&&(!(s=n.base.childNodes[1])||s.innerHTML||/\s?dhxrb_label_hide/i.test(s.className)||(s.className+=" dhxrb_label_hide"));dhtmlXRibbon.prototype.items.group.normalize(t),t.conf.disable&&this.disable(t.id),o=void 0},normalize:function(t){for(var e,i,n=t.base.children,s=n.length,o=!1,l=0,r=0;r<s;r++)if(/dhxrb_separator_group/i.test(n[r].className)||!/dhxrb_item_hide/i.test(n[r].className)){if(Math.ceil((r-l)/2)-Math.floor((r-l)/2)==0){if(/dhxrb_separator_group/i.test(n[r].className)){n[r].parentNode.removeChild(n[r]),o=!0;break}}else if(!/dhxrb_separator_group/i.test(n[r].className)){(e=document.createElement("div")).className="dhxrb_separator_groupp",t.base.insertBefore(e,n[r]),o=!0;break}}else l++;o?this.normalize(t):(i=t.base.lastChild)&&/dhxrb_separator_group/i.test(i.className)&&i.parentNode.removeChild(i)},hideChild:function(t,e){var i=dhtmlXRibbon.prototype._indexOf(t.base.children,e.base);if(0==i)i++;else{if(-1==i)return;i--}var n=t.base.children[i];n&&/dhxrb_separator_group/i.test(n.className)&&n.parentNode.removeChild(n)},showChild:function(t){this.normalize(t)}},dhtmlXRibbon.prototype.items.input={render:function(t,e){var i,n;for(i in n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:e.skin,value:""}},e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);return t.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+n.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n.conf.width&&this.setWidth(n,n.conf.width),n.conf.value&&this.setValue(n,n.conf.value),n},callAfterInit:function(t){var e=t.base.childNodes[0];this._detachEventFromItem(t.base),this._attachEventsToInput(e)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(t){var e=t.base.childNodes[0];t.conf.value=e.value},keydown:function(t,e,i){if(13==i.keyCode){var n=t.base.childNodes[0];t.conf.value=n.value,e.callEvent("onEnter",[t.id,t.conf.value])}},remove:function(t,e){var i=t.base.childNodes[0];e._detachEventsFromInput(i)},getValue:function(t){var e,i=t.base.childNodes[0];return e=i.value,i=void 0,e},setValue:function(t,e){t.base.childNodes[0].value=e,t.conf.value=e},setWidth:function(t,e){t.base.childNodes[0].style.width=parseInt(e)+"px"},disable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return e.disabled=!0,/\s?dhxrb_disable_text_style/i.test(i.className)||(i.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return e.disabled=!1,/\s?dhxrb_disable_text_style/i.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},getInput:function(t){return t.base.childNodes[0]}},dhtmlXRibbon.prototype.getInput=function(t){var e=this._items[t];return null==e||"input"!=e.type?null:this.items[e.type].getInput(e)},dhtmlXRibbon.prototype.items.checkbox={render:function(t,e){var i,n;for(i in n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",disable:!1,checked:!1}},e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);return t.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+n.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(n),n.conf.checked&&this.check(n),n},callAfterInit:function(t){t.conf.disable&&this.disable(t.id)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(t){return!1},mouseup:function(t){return!1},click:function(t,e,i){if(0!=i.button)return!1;"checkbox"==t.type&&(t.conf.checked?this.uncheck(t,!0):this.check(t,!0))},check:function(t,e){e=e||!1,"checkbox"==t.type&&(t.conf.checked=!0,/\s?dhxrb_checked/i.test(t.base.className)||(t.base.className+=" dhxrb_checked"),e&&t.callEvent("onCheck",[t.id,t.conf.checked]))},uncheck:function(t,e){e=e||!1,"checkbox"==t.type&&(t.conf.checked=!1,/\s?dhxrb_checked/i.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_checked/i,"")),e&&t.callEvent("onCheck",[t.id,t.conf.checked]))},isChecked:function(t){return"checkbox"==t.type&&1==t.conf.checked},disable:function(t){return!0},enable:function(t){return!0}},dhtmlXRibbon.prototype.items.text={render:function(t,e){var i={base:t,id:e.id,type:e.type,conf:{text:""}};for(var n in e)"id"!=n&&"type"!=n&&(i.conf[n]=e[n]);return t.innerHTML="<div class='dhxrb_item_text'>"+i.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(i),i},callAfterInit:function(t){this._detachEventFromItem(t.base)},getText:function(t){return t.conf.text},setText:function(t,e){t.conf.text=e,t.base.firstChild.innerHTML=t.conf.text}},dhtmlXRibbon.prototype.items.buttonCombo={render:function(t,e){var i,n,s={};for(i in n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:"right",width:140,skin:e.skin,callEvent:!0,mode:e.comboType,image_path:e.comboImagePath,default_image:e.comboDefaultImage,default_image_dis:e.comboDefaultImageDis}},e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);for(i in n.conf)"text"!=i&&"text_pos"!=i&&"disable"!=i&&"data"!=i&&(s[i]=n.conf[i]);return n.base.className+=" dhxrb_buttoncombo_cont",n.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+n.conf.text+"</div>",s.parent=n.base.firstChild,n.combo=new dhtmlXCombo(s),n.combo.setSkin(s.skin),n.combo.attachEvent("onChange",function(t,e){n._callHandler(n.id,[t,e]),1==n.conf.callEvent&&n.callEvent("onSelectOption",[n.id,t,e]),n.conf.callEvent=!0}),n.conf.data&&(n.combo.load(n.conf.data),delete n.conf.data),"function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n},callAfterInit:function(t){this._detachEventFromItem(t.base)},disable:function(t){var e=t.base.lastChild;return t.combo instanceof dhtmlXCombo&&t.combo.disable(),/\s?dhxrb_disable_text_style/i.test(e.className)||(e.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.lastChild;return t.combo instanceof dhtmlXCombo&&t.combo.enable(),/\s?dhxrb_disable_text_style/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(t){t.combo instanceof dhtmlXCombo&&(t.combo.unload(),t.combo=null)},getValue:function(t){var e=null;return t.combo instanceof dhtmlXCombo&&(e=t.combo.getSelectedValue()),e},setValue:function(t,e,i){t.combo instanceof dhtmlXCombo&&(t.conf.callEvent=i,t.combo.setComboValue(e),t.conf.callEvent=!0)},setSkin:function(t,e){t.combo instanceof dhtmlXCombo&&t.combo.setSkin(e)}},dhtmlXRibbon.prototype.items.slider={render:function(t,e){var i,n,s={};for(i in n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:"right",size:150,vertical:!1,min:0,max:99,value:0,step:1,margin:10,disabled:!1,enableTooltip:!1}},e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);for(i in n.conf)"text"!=i&&"text_pos"!=i&&"isbig"!=i&&(s[i]=n.conf[i]);return n.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+n.conf.text+"</div>",s.parent=n.base.firstChild.firstChild,n.slider=new dhtmlXSlider(s),"function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n.slider.attachEvent("onChange",function(t){n._callHandler(n.id,[t]),n.callEvent("onValueChange",[n.id,t])}),n},callAfterInit:function(t){this._detachEventFromItem(t.base)},setSkin:function(t,e){t.slider instanceof dhtmlXSlider&&t.slider.setSkin(e)},disable:function(t){var e=t.base.childNodes[1];return t.slider instanceof dhtmlXSlider&&t.slider.disable(),/\s?dhxrb_disable_text_style/i.test(e.className)||(e.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[1];return t.slider instanceof dhtmlXSlider&&t.slider.enable(),/\s?dhxrb_disable_text_style/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(t){t.slider instanceof dhtmlXSlider&&(t.slider.unload(),t.slider=null)},getValue:function(t){var e=null;return t.slider instanceof dhtmlXSlider&&(e=t.slider.getValue()),e},setValue:function(t,e){t.slider instanceof dhtmlXSlider&&t.slider.setValue(e)}},dhtmlXRibbon.prototype.items._extends=function(t,e){var i;for(i in e)t[i]=t[i]||e[i];return t},dhtmlXRibbon.prototype._addNewLevel=function(t){var e,i;"rows"==t.conf.mode?(e=t.contForItems.lastChild)&&/dhxrb_block_rows/i.test(e.className)&&e.childNodes.length<3?((i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i)):((e=document.createElement("div")).className="dhxrb_block_rows",t.contForItems.appendChild(e),(i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i)):((i=document.createElement("div")).className="dhxrb_3rows_block",t.contForItems.appendChild(i))},dhtmlXRibbon.prototype._attachEventForItem=function(t){"function"==typeof window.addEventListener?(t.addEventListener("mouseover",this._doOnHighlight0,!1),t.addEventListener("mouseout",this._doOffHighlight0,!1),t.addEventListener("mousedown",this._doOnHighlight1,!1),t.addEventListener("mouseup",this._doOffHighlight1,!1),t.addEventListener("click",this._doOnClick,!1)):(t.attachEvent("onmouseover",this._doOnHighlight0),t.attachEvent("onmouseout",this._doOffHighlight0),t.attachEvent("onmousedown",this._doOnHighlight1),t.attachEvent("onmouseup",this._doOffHighlight1),t.attachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._detachEventFromItem=function(t){"function"==typeof window.addEventListener?(t.removeEventListener("mouseover",this._doOnHighlight0,!1),t.removeEventListener("mouseout",this._doOffHighlight0,!1),t.removeEventListener("mousedown",this._doOnHighlight1,!1),t.removeEventListener("mouseup",this._doOffHighlight1,!1),t.removeEventListener("click",this._doOnClick,!1)):(t.detachEvent("onmouseover",this._doOnHighlight0),t.detachEvent("onmouseout",this._doOffHighlight0),t.detachEvent("onmousedown",this._doOnHighlight1),t.detachEvent("onmouseup",this._doOffHighlight1),t.detachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._attachEventsToInput=function(t){"function"==typeof window.addEventListener?(t.addEventListener("focus",this._doOnFocus,!1),t.addEventListener("blur",this._doOnBlur,!1),t.addEventListener("change",this._doOnChange,!1),t.addEventListener("keydown",this._doOnKeydown,!1)):(t.attachEvent("onfocus",this._doOnFocus),t.attachEvent("onblur",this._doOnBlur),t.attachEvent("onchange",this._doOnChange),t.attachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._detachEventsFromInput=function(t){"function"==typeof window.addEventListener?(t.removeEventListener("focus",this._doOnFocus,!1),t.removeEventListener("blur",this._doOnBlur,!1),t.removeEventListener("change",this._doOnChange,!1),t.removeEventListener("keydown",this._doOnKeydown,!1)):(t.detachEvent("onfocus",this._doOnFocus),t.detachEvent("onblur",this._doOnBlur),t.detachEvent("onchange",this._doOnChange),t.detachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._getContainerForSmallItem=function(t){var e=t.contForItems.lastChild,i=null;return"rows"==t.conf.mode?e&&/\s?dhxrb_block_rows/i.test(e.className)?(i=e.lastChild)||((i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i)):((e=document.createElement("div")).className="dhxrb_block_rows",t.contForItems.appendChild(e),(i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i)):e&&/dhxrb_3rows_block/i.test(e.className)&&e.childNodes.length<3?i=e:((i=document.createElement("div")).className="dhxrb_3rows_block",t.contForItems.appendChild(i)),i},dhtmlXRibbon.prototype._findItemByNode=function(t){for(;t&&!t._dhx_ribbonId;)t=t.parentNode;return t},dhtmlXRibbon.prototype._indexOf=function(t,e){var i,n;for(n=t.length,i=0;i<n;i++)if(t[i]==e)return i;return-1},dhtmlXRibbon.prototype._removeItem=function(t){var e,i,n=this._items[t.parentId];"group"!=t.type?(delete this._items[t.id],e=t.base.parentNode,this._detachEventFromItem(t.base),e.removeChild(t.base),"block"==n.type?e!=n.contForItems&&0==e.childNodes.length&&e.parentNode.removeChild(e):"group"==n.type&&dhtmlXRibbon.prototype.items.group.normalize(n),-1!=(i=this._indexOf(n.childIds,t.id))&&n.childIds.splice(i,1),this.items[t.type]&&"function"==typeof this.items[t.type].remove&&this.items[t.type].remove(t,this)):this._removeGroup(t)},dhtmlXRibbon.prototype._removeGroup=function(t){for(var e,i=[],n=this._items[t.parentId],s=t.base.parentNode,o=0;o<t.childIds.length;o++)i.push(this._items[t.childIds[o]]);for(o=0;o<i.length;o++)this._removeItem(i[o]);delete this._items[t.id],t.base.parentNode&&s.removeChild(t.base),0==s.childNodes.length&&s.parentNode.removeChild(s),-1!=(e=this._indexOf(n.childIds,t.id))&&n.childIds.splice(e,1),this.items[t.type]&&"function"==typeof this.items[t.type].remove&&this.items[t.type].remove(t)},dhtmlXRibbon.prototype._removeBlock=function(t){for(var e,i,n=[],s=0;s<t.childIds.length;s++)n.push(this._items[t.childIds[s]]);for(s=0;s<n.length;s++)this._removeItem(n[s]);delete this._items[t.id],t.base.parentNode.removeChild(t.base),i=t.parentId?this._items[t.parentId]:this,-1!=(e=this._indexOf(i.childIds,t.id))&&i.childIds.splice(e,1)},dhtmlXRibbon.prototype._removeTab=function(t,e){for(var i,n=[],s=0;s<t.childIds.length;s++)n.push(this._items[t.childIds[s]]);for(s=0;s<n.length;s++)this._removeBlock(n[s]);delete this._items[t.id],-1!=(i=this._indexOf(this.childIds,t.id))&&this.childIds.splice(i,1)},dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0},dhtmlXRibbon.prototype._setSkinForItems=function(t){var e,i;for(e in this._items)(i=this._items[e]).conf.skin=t,dhtmlXRibbon.prototype.items[i.type]&&"function"==typeof dhtmlXRibbon.prototype.items[i.type].setSkin&&dhtmlXRibbon.prototype.items[i.type].setSkin(i,t);i=void 0,e=void 0},dhtmlXRibbon.prototype._setBlockText=function(t,e){t.conf.text=e,t.contForText.innerHTML=e,!e&&0!=e&&t.contForText.parentNode?t.contForText.parentNode.removeChild(t.contForText):t.contForText.parentNode||("top"==t.conf.text_pos?t.base.insertBefore(t.contForText,t.contForItems):t.base.appendChild(t.contForText))},dhtmlXRibbon.prototype.hide=function(t){var e=this._items[t];if((!this.items[e.type]||"function"!=typeof this.items[e.type].hide||1==this.items[e.type].hide(e))&&"tab"!=e.type){/\s?dhxrb_item_hide/i.test(e.base.className)||(e.base.className+=" dhxrb_item_hide");var i=this._items[e.parentId];i&&this.items[i.type]&&"function"==typeof this.items[i.type].hideChild&&this.items[i.type].hideChild(i,e)}},dhtmlXRibbon.prototype.show=function(t){var e=this._items[t];if((!this.items[e.type]||"function"!=typeof this.items[e.type].show||1==this.items[e.type].show(e))&&"tab"!=e.type){/\s?dhxrb_item_hide/i.test(e.base.className)&&(e.base.className=e.base.className.replace(/\s?dhxrb_item_hide/i,""));var i=this._items[e.parentId];i&&this.items[i.type]&&"function"==typeof this.items[i.type].showChild&&this.items[i.type].showChild(i,e)}},dhtmlXRibbon.prototype.check=function(t,e){e=dhx4.s2b(e);var i=this._items[t];i&&!i.conf.checked&&"function"==typeof this.items[i.type].check&&(this.items[i.type].check(i),e&&this.callEvent("onCheck",[i.id,i.conf.checked]))},dhtmlXRibbon.prototype.uncheck=function(t,e){e=dhx4.s2b(e);var i=this._items[t];i&&i.conf.checked&&"function"==typeof this.items[i.type].uncheck&&(this.items[i.type].uncheck(i),e&&this.callEvent("onCheck",[i.id,i.conf.checked]))},dhtmlXRibbon.prototype.isChecked=function(t){var e=this._items[t];if(e&&"function"==typeof this.items[e.type].isChecked)return this.items[e.type].isChecked(e)},dhtmlXRibbon.prototype.disable=function(t,e){var i=this._items[t];if((!this.items[i.type]||"function"!=typeof this.items[i.type].disable||1==this.items[i.type].disable(i))&&"tab"!=i.type){if("block"==i.type||"group"==i.type)for(var n=0;n<i.childIds.length;n++)this.disable(i.childIds[n]);/\s?dhxrb_item_disable/i.test(i.base.className)||(i.base.className+=" dhxrb_item_disable"),null!=i.base.className.match(/dhxrb_highlight/gi)&&("buttonTwoState"==i.type?i.base.className=i.base.className.replace(/\s*dhxrb_highlight0/gi,""):i.base.className=i.base.className.replace(/\s*dhxrb_highlight\d/gi,"")),i.conf.disable=!0}},dhtmlXRibbon.prototype.enable=function(t,e){var i=this._items[t];if((!this.items[i.type]||"function"!=typeof this.items[i.type].enable||1==this.items[i.type].enable(i))&&"tab"!=i.type){if("block"==i.type||"group"==i.type)for(q=0;q<i.childIds.length;q++)this.enable(i.childIds[q]);/\s?dhxrb_item_disable/i.test(i.base.className)&&(i.base.className=i.base.className.replace(/\s?dhxrb_item_disable/i,"")),i.conf.disable=!1}},dhtmlXRibbon.prototype.isEnabled=function(t){var e=this._items[t];return this.items[e.type]&&"function"==typeof this.items[e.type].isEnabled?this.items[e.type].isEnabled(e):"tab"==e.type?void 0:1!=e.conf.disable},dhtmlXRibbon.prototype.isVisible=function(t){var e=this._items[t];return this.items[e.type]&&"function"==typeof this.items[e.type].isVisible?this.items[e.type].isVisible(e):"tab"==e.type?void 0:!/\s?dhxrb_item_hide/i.test(e.base.className)},dhtmlXRibbon.prototype.setItemState=function(t,e,i){e=dhx4.s2b(e),i=dhx4.s2b(i);var n=this._items[t];if(n&&"function"==typeof this.items[n.type].setState)switch(n.type){case"buttonSegment":this.items[n.type].setState(n,this,i);break;default:this.items[n.type].setState(n,e,i)}},dhtmlXRibbon.prototype.getItemState=function(t){var e=this._items[t];if(e&&"function"==typeof this.items[e.type].getState)switch(e.type){case"buttonTwoState":case"buttonSegment":return this.items[e.type].getState(e)}return null},dhtmlXRibbon.prototype.setIconPath=function(t){this.conf.icons_path=t},dhtmlXRibbon.prototype.setIconset=function(t){this.conf.icons_css="awesome"==t},dhtmlXRibbon.prototype.removeItem=function(t){var e=this._items[t];if(null!=e)switch(e.type){case"tab":break;case"block":this._removeBlock(e);break;case"group":this._removeGroup(e);break;default:this._removeItem(e)}},dhtmlXRibbon.prototype.setSkin=function(t){if(t="string"==typeof t?t.toLowerCase():"",1==this._skinCollection[t]){var e,i,n=-1,s="dhtmlxribbon";if((e=this._base.className.match(/\S\w+/gi))instanceof Array){for(i in this._skinCollection){if(-1!=n)break;n=this._indexOf(e,s+"_"+i)}n=-1==n?e.length:n}else e=[],n=0;e[n]=s+"_"+t,this._base.className=e.join(" "),this.conf.skin=t,null!=this._tabbar&&this._tabbar.setSkin(t),this._setSkinForItems(t)}},dhtmlXRibbon.prototype.tabs=function(t){return this._tabbar instanceof dhtmlXTabBar?this._tabbar.tabs(t):void 0},dhtmlXRibbon.prototype.getItemType=function(t){var e=this._items[t];return e?e.type:void 0},dhtmlXRibbon.prototype.getValue=function(t){var e=this._items[t],i=void 0;return e&&this.items[e.type]&&"function"==typeof this.items[e.type].getValue&&(i=this.items[e.type].getValue(e)),i},dhtmlXRibbon.prototype.setValue=function(t,e,i){var n=this._items[t];i=!1!==i,n&&this.items[n.type]&&"function"==typeof this.items[n.type].setValue&&this.items[n.type].setValue(n,e,i)},dhtmlXRibbon.prototype.getItemText=function(t){var e=this._items[t];return e?"tab"==e.type?this.tabs(e.id).getText():"block"==e.type?this.items.button.getText(e):this.items[e.type]&&"function"==typeof this.items[e.type].getText?this.items[e.type].getText(e):null:null},dhtmlXRibbon.prototype.setItemText=function(t,e){var i=this._items[t];i&&("tab"==i.type?this.tabs(i.id).setText(e):"block"==i.type?this._setBlockText(i,e):this.items[i.type]&&"function"==typeof this.items[i.type].setText&&this.items[i.type].setText(i,e))},dhtmlXRibbon.prototype.setItemOptionText=function(t,e,i){var n=this._items[t];"buttonSelect"==n.type&&this.items[n.type].setOptionText(n,e,i)},dhtmlXRibbon.prototype.getItemOptionText=function(t,e){var i=this._items[t];return"buttonSelect"==i.type?this.items[i.type].getOptionText(i,e):null},dhtmlXRibbon.prototype.setItemImage=function(t,e){var i=this._items[t];null!=i&&null!=this.items[i.type]&&"function"==typeof this.items[i.type].setImage&&this.items[i.type].setImage(i,e)},dhtmlXRibbon.prototype.setItemImageDis=function(t,e){var i=this._items[t];null!=i&&null!=this.items[i.type]&&"function"==typeof this.items[i.type].setImageDis&&this.items[i.type].setImageDis(i,e)},dhtmlXRibbon.prototype.getCombo=function(t){var e=this._items[t];return null!=e&&"buttonCombo"==e.type?e.combo:null},function(){var t=dhtmlXRibbon.prototype.items;t.buttonTwoState=t._extends(t.buttonTwoState,t.button),t.buttonSelect=t._extends(t.buttonSelect,t.buttonTwoState),t.buttonSegment=t._extends(t.buttonSegment,t.buttonTwoState)}(),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_ribbon=function(t,e,i,n,s){return void 0!==s?t=s:((t=document.createElement("DIV")).className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV"))),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.ribbon=!0,this._updateIdx(),this._adjustCont(this._idd),t},dhtmlXCellObject.prototype.attachRibbon=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.callEvent("_onBeforeContentAttach",["ribbon"]),void 0===t&&(t={}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("ribbon").firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(t);var e=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){e._adjustCont(e._idd)}),this._adjustCont(),t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataNodes.ribbon}},dhtmlXCellObject.prototype.detachRibbon=function(){this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,delete this.dataNodes.ribbon,this._detachObject("ribbon"))},dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")},dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")},dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon}),dhtmlXTabBar.prototype=new dhtmlXCellTop,dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs={dhx_skyblue:1,dhx_web:0,dhx_terrace:1,material:0}[this.conf.skin]},dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(t){return this.t[t]?this.t[t].cell:null},dhtmlXTabBar.prototype.getAllTabs=function(){var t=[];for(var e in this.t)t.push(e);return t},dhtmlXTabBar.prototype._setTabActive=function(t,e){this.t[t]&&!this.t[t].conf.active&&(void 0===e&&(e=!0),1==e&&!0!==this.callEvent("onSelect",[t,this.conf.lastActive])||(this.setTabInActive(),this.t[t].conf.active=!0,this.conf.contZone&&(this.t[t].cell.cell.style.visibility="visible",this.t[t].cell.cell.style.top="0px",this.t[t].cell.cell.style.zIndex=1),this.t[t].tab.className=this._tabCss(t),this.conf.lastActive=t,this.setSizes(),1==this.conf.url_demand&&this._loadURLOnDemand(t)))},dhtmlXTabBar.prototype.setTabInActive=function(){null!=this.conf.lastActive&&this.t[this.conf.lastActive]&&(this.t[this.conf.lastActive].conf.active=!1,this.conf.contZone&&(this.t[this.conf.lastActive].cell.cell.style.visibility="hidden",this.t[this.conf.lastActive].cell.cell.style.top="-5000px",this.t[this.conf.lastActive].cell.cell.style.zIndex=0),this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive),this.conf.lastActive=null)},dhtmlXTabBar.prototype._isTabActive=function(t){return t==this.conf.lastActive&&null!=this.conf.lastActive},dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive},dhtmlXTabBar.prototype.goToNextTab=function(){var t=this._getNextVisible(this.conf.lastActive,!0);null!=t&&this._setTabActive(t)},dhtmlXTabBar.prototype.goToPrevTab=function(){var t=this._getPrevVisible(this.conf.lastActive,!0);null!=t&&this._setTabActive(t)},dhtmlXTabBar.prototype._enableTab=function(t,e){this.t[t]&&!this.t[t].conf.enabled&&(this.t[t].conf.enabled=!0,this.t[t].tab.className=this._tabCss(t),1==e&&this._setTabActive(t))},dhtmlXTabBar.prototype._disableTab=function(t,e){this.t[t]&&this.t[t].conf.enabled&&(this.t[t].conf.enabled=!1,this.t[t].tab.className=this._tabCss(t),!1!==e&&this.conf.lastActive==t&&(1==e&&(e=this._getNextVisible(t)||this._getPrevVisible(t)),this._setTabActive(e)))},dhtmlXTabBar.prototype._isTabEnabled=function(t){return null!=this.t[t]&&1==this.t[t].conf.enabled},dhtmlXTabBar.prototype._setTabText=function(t,e,i){if(this.t[t]){var n=!1;void 0!==i&&null!=i||(i=this._getLabelWidth(e,this.t[t].conf.close),n=!0),this.t[t].tab.style.width=i+"px",this.t[t].tab.childNodes[0].innerHTML=e,this.t[t].conf.text=e,this.t[t].conf.width=i,this.t[t].conf.autowidth=n}},dhtmlXTabBar.prototype._getTabText=function(t){return this.t[t]?this.t[t].conf.text:null},dhtmlXTabBar.prototype._removeTab=function(t,e,i){if(this.t[t]){if(1!=i&&1!=this.t[t].conf.remove)return this.t[t].conf.remove=!0,void this._hideTab(t,e);void 0===e&&(e=!0);var n=this._getNextVisible(t),s=this._getPrevVisible(t);for(var o in 1==this.t[t].conf.transEv&&(this.t[t].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[t].conf.transEv=!1),this.t[t].conf)this.t[t].conf[o]=null;if(this.t[t].conf=null,delete this.t[t].conf,this.t[t].cell._unload(),this.t[t].cell=null,this.t[t].tab.parentNode.removeChild(this.t[t].tab),this.t[t].tab=null,this.t[t]=null,delete this.t[t],this.conf.urls[t]=null,delete this.conf.urls[t],this.conf.lastActive==t){if(this.conf.lastActive=null,0!=e){var l=1==e?n||s||this._getFirstVisible():e;null!=l&&this._setTabActive(l)}}else 1!=i&&this._adjustTabs()}},dhtmlXTabBar.prototype.clearAll=function(){for(var t in this.t)this._removeTab(t,!1,!0);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},dhtmlXTabBar.prototype.moveTab=function(t,e){if(this.t[t]&&!(e<0)){e+=1;var i=this.tabsArea.childNodes[1].firstChild;i.childNodes[e]!=this.t[t].tab&&(i.removeChild(this.t[t].tab),e>=i.childNodes.length?i.appendChild(this.t[t].tab):i.insertBefore(this.t[t].tab,i.childNodes[e])),i=null}},dhtmlXTabBar.prototype._getIndex=function(t){for(var e=-1,i=this.tabsArea.childNodes[1].firstChild,n=1;n<i.childNodes.length;n++)i.childNodes[n]._tabId==t&&(e=n-1);return i=null,e},dhtmlXTabBar.prototype.getNumberOfTabs=function(t){var e=0;for(var i in this.t)e+=1!=t?1:1==this.t[i].conf.visible?1:0;return e},dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(t){for(var e in this.t)t.apply(window,[this.t[e].cell])},dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()},dhtmlXTabBar.prototype.setArrowsMode=function(t){null!=(t={auto:"auto",always:"always"}[String(t)])&&t!=this.conf.mode&&(this.conf.arwMode=t,"always"==t&&(this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left",this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"),this.setSizes())},dhtmlXTabBar.prototype._checkArrows=function(){var t=!1;if("auto"==this.conf.arwMode){var e=0;for(var i in this.t)e+=this.t[i].tab.offsetWidth;var n=this.tabsArea.childNodes[0],s=this.tabsArea.childNodes[2];e>this.cont.offsetWidth?n.className.search(/dhxtabbar_tabs_ar_hidden/)>=0&&(n.className=n.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),s.className=s.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),t=!0):n.className.search(/dhxtabbar_tabs_ar_hidden/)<1&&(n.className+=" dhxtabbar_tabs_ar_hidden",s.className+=" dhxtabbar_tabs_ar_hidden",t=!0),n=s=null}return t},dhtmlXTabBar.prototype._loadURLOnDemand=function(t){null!=t&&null!=this.conf.urls[t]&&(this.cells(t).attachURL(this.conf.urls[t].href,this.conf.urls[t].ajax),this.conf.urls[t]=null)},window.dhtmlXTabBarCell=function(t,e){for(var i in dhtmlXCellObject.apply(this,[t,"_tabbar"]),this.tabbar=e,this.conf.skin=this.tabbar.conf.skin,this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"},this._tabbarCall=function(t){return function(){for(var e=[this._idd],i=0;i<arguments.length;i++)e.push(arguments[i]);return this.tabbar[t].apply(this.tabbar,e)}},this.conf.tabbar_funcs)"function"!=typeof this[i]&&(this[i]=this._tabbarCall(this.conf.tabbar_funcs[i]));this.attachEvent("_onCellUnload",function(){for(var t in this.tabbar=null,this.conf.tabbar_funcs)this[t]=null,this.conf.tabbar_funcs[t]=null;this.conf.tabbar_funcs=null}),this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments),this.tabbar._callMainEvent("onTabContentLoaded",arguments)}),this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)}),this.attachEvent("_onBeforeContentAttach",function(t){"sidebar"==t&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders()})},window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject,dhtmlXCellObject.prototype.attachTabbar=function(t){this.callEvent("_onBeforeContentAttach",["tabbar"]),"string"==typeof t?t={mode:t}:"object"==typeof t&&null!=t||(t={});var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden","function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&("material"==this.conf.skin?e._ofs={t:-1,r:-1,b:-1,l:-1}:e._ofs={t:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&("dhx_skyblue"==this.conf.skin&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),"material"==this.conf.skin&&(e._ofs={t:8,r:8,b:8,l:8})),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(e._ofs={l:-1},"dhx_web"==this.conf.skin&&1==this.sidebar.conf.autohide&&(e._ofs.l=0),"dhx_terrace"==this.conf.skin&&(1==this.sidebar.conf.autohide&&(e._ofs.l=0),1==this.sidebar.conf.header&&(e._ofs.t=-1))),"function"==typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),this._attachObject(e),t.skin=this.conf.skin,t.parent=e,this.dataType="tabbar",this.dataObj=new dhtmlXTabBar(t),t.parent=e=null,t=null,this.callEvent("_onContentAttach",[]),this.dataObj},"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.attachEvent("onload",dhtmlXTabBarInitFromHTML),function(t){var e,i,n,s,o,l,r,a,h,d,c,u,f,p,m,g,_,v,b,y,w,x,C,S,k,I,N,T,P,D,O,M,E,j,A,L,H,B=(e=65,i={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},n=function(e,i){var n=A(e);t(i).data("colorpicker").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},s=function(e,i){t(i).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},o=function(e,i){t(i).data("colorpicker").fields.eq(0).val(L(e)).end()},l=function(e,i){t(i).data("colorpicker").selector.css("backgroundColor","#"+L({h:e.h,s:100,b:100})),t(i).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},r=function(e,i){t(i).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},a=function(e,i){t(i).data("colorpicker").currentColor.css("backgroundColor","#"+L(e))},h=function(e,i){t(i).data("colorpicker").newColor.css("backgroundColor","#"+L(e))},d=function(i){var n=i.charCode||i.keyCode||-1;if(n>e&&n<=90||32==n)return!1;!0===t(this).parent().parent().data("colorpicker").livePreview&&c.apply(this)},c=function(e){var i,a=t(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?a.data("colorpicker").color=i=E(M(this.value)):this.parentNode.className.indexOf("_hsb")>0?a.data("colorpicker").color=i=D({h:parseInt(a.data("colorpicker").fields.eq(4).val(),10),s:parseInt(a.data("colorpicker").fields.eq(5).val(),10),b:parseInt(a.data("colorpicker").fields.eq(6).val(),10)}):a.data("colorpicker").color=i=j(O({r:parseInt(a.data("colorpicker").fields.eq(1).val(),10),g:parseInt(a.data("colorpicker").fields.eq(2).val(),10),b:parseInt(a.data("colorpicker").fields.eq(3).val(),10)})),e&&(n(i,a.get(0)),o(i,a.get(0)),s(i,a.get(0))),l(i,a.get(0)),r(i,a.get(0)),h(i,a.get(0)),a.data("colorpicker").onChange.apply(a,[i,L(i),A(i)])},u=function(e){t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")},f=function(){e=this.parentNode.className.indexOf("_hex")>0?70:65,t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),t(this).parent().addClass("colorpicker_focus")},p=function(e){var i=t(this).parent().find("input").focus(),n={el:t(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:i,val:parseInt(i.val(),10),preview:t(this).parent().parent().data("colorpicker").livePreview};t(document).bind("mouseup",n,g),t(document).bind("mousedown",n,m),t(document).bind("mousemove",n,m)},m=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val+t.pageY-t.data.y,10)))),t.data.preview&&c.apply(t.data.field.get(0),[!0]),!1},g=function(e){return c.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),t(document).unbind("mouseup",g),t(document).unbind("mousedown",m),t(document).unbind("mousemove",m),!1},_=function(e){var i={cal:t(this).parent(),y:t(this).offset().top};i.preview=i.cal.data("colorpicker").livePreview,t(document).bind("mouseup",i,b),t(document).bind("mousedown",i,v),t(document).bind("mousemove",i,v)},v=function(t){return c.apply(t.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-t.data.y)))/150,10)).get(0),[t.data.preview]),!1},b=function(e){return n(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),o(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),t(document).unbind("mouseup",b),t(document).unbind("mousedown",v),t(document).unbind("mousemove",v),!1},y=function(e){var i={cal:t(this).parent(),pos:t(this).offset()};i.preview=i.cal.data("colorpicker").livePreview,t(document).bind("mouseup",i,x),t(document).bind("mousedown",i,w),t(document).bind("mousemove",i,w)},w=function(t){return c.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]),!1},x=function(e){return n(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),o(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),t(document).unbind("mouseup",x),t(document).unbind("mousedown",w),t(document).unbind("mousemove",w),!1},C=function(e){t(this).addClass("colorpicker_focus")},S=function(e){t(this).removeClass("colorpicker_focus")},k=function(e){var i=t(this).parent(),n=i.data("colorpicker").color;i.data("colorpicker").origColor=n,a(n,i.get(0)),i.data("colorpicker").onSubmit(n,L(n),A(n),i.data("colorpicker").el)},I=function(e){var i=t("#"+t(this).data("colorpickerId"));i.data("colorpicker").onBeforeShow.apply(this,[i.get(0)]);var n=t(this).offset(),s=P(),o=n.top+this.offsetHeight,l=n.left;return o+176>s.t+s.h&&(o-=this.offsetHeight+176),l+356>s.l+s.w&&(l-=356),i.css({left:l+"px",top:o+"px"}),0!=i.data("colorpicker").onShow.apply(this,[i.get(0)])&&i.show(),t(document).bind("mousedown",{cal:i},N),!1},N=function(e){T(e.data.cal.get(0),e.target,e.data.cal.get(0))||(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t(document).unbind("mousedown",N))},T=function(t,e,i){if(t==e)return!0;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var n=e.parentNode;n&&n!=i;){if(n==t)return!0;n=n.parentNode}return!1},P=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}},D=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},O=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},M=function(t){var e=6-t.length;if(e>0){for(var i=[],n=0;n<e;n++)i.push("0");i.push(t),t=i.join("")}return t},E=function(t){return j(function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}(t))},j=function(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),s=n-i;return e.b=n,e.s=0!=n?255*s/n:0,0!=e.s?t.r==n?e.h=(t.g-t.b)/s:t.g==n?e.h=2+(t.b-t.r)/s:e.h=4+(t.r-t.g)/s:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},A=function(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),s=Math.round(255*t.b/100);if(0==n)e.r=e.g=e.b=s;else{var o=s,l=(255-n)*s/255,r=i%60*(o-l)/60;360==i&&(i=0),i<60?(e.r=o,e.b=l,e.g=l+r):i<120?(e.g=o,e.b=l,e.r=o-r):i<180?(e.g=o,e.r=l,e.b=l+r):i<240?(e.b=o,e.r=l,e.g=o-r):i<300?(e.b=o,e.g=l,e.r=l+r):i<360?(e.r=o,e.g=l,e.b=o-r):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},L=function(e){return i=A(e),n=[i.r.toString(16),i.g.toString(16),i.b.toString(16)],t.each(n,function(t,e){1==e.length&&(n[t]="0"+e)}),n.join("");var i,n},H=function(){var e=t(this).parent(),i=e.data("colorpicker").origColor;e.data("colorpicker").color=i,n(i,e.get(0)),o(i,e.get(0)),s(i,e.get(0)),l(i,e.get(0)),r(i,e.get(0)),h(i,e.get(0)),e.data("colorpicker").onChange.apply(e,[i,L(i),A(i)])},{init:function(e){if("string"==typeof(e=t.extend({},i,e||{})).color)e.color=E(e.color);else if(void 0!=e.color.r&&void 0!=e.color.g&&void 0!=e.color.b)e.color=j(e.color);else{if(void 0==e.color.h||void 0==e.color.s||void 0==e.color.b)return this;e.color=D(e.color)}return this.each(function(){if(!t(this).data("colorpickerId")){var i=t.extend({},e);i.origColor=e.color;var m="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colorpickerId",m);var g=t('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",m);i.flat?g.appendTo(this).show():g.appendTo(document.body),i.fields=g.find("input").bind("keyup",d).bind("change",c).bind("blur",u).bind("focus",f),g.find("span").bind("mousedown",p).end().find(">div.colorpicker_current_color").bind("click",H),i.selector=g.find("div.colorpicker_color").bind("mousedown",y),i.selectorIndic=i.selector.find("div div"),i.el=this,i.hue=g.find("div.colorpicker_hue div"),g.find("div.colorpicker_hue").bind("mousedown",_),i.newColor=g.find("div.colorpicker_new_color"),i.currentColor=g.find("div.colorpicker_current_color"),g.data("colorpicker",i),g.find("div.colorpicker_submit").bind("mouseenter",C).bind("mouseleave",S).bind("click",k),n(i.color,g.get(0)),s(i.color,g.get(0)),o(i.color,g.get(0)),r(i.color,g.get(0)),l(i.color,g.get(0)),a(i.color,g.get(0)),h(i.color,g.get(0)),i.flat?g.css({position:"relative",display:"block"}):t(this).bind(i.eventName,I)}})},showPicker:function(){return this.each(function(){t(this).data("colorpickerId")&&I.apply(this)})},hidePicker:function(){return this.each(function(){t(this).data("colorpickerId")&&t("#"+t(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=E(e);else if(void 0!=e.r&&void 0!=e.g&&void 0!=e.b)e=j(e);else{if(void 0==e.h||void 0==e.s||void 0==e.b)return this;e=D(e)}return this.each(function(){if(t(this).data("colorpickerId")){var i=t("#"+t(this).data("colorpickerId"));i.data("colorpicker").color=e,i.data("colorpicker").origColor=e,n(e,i.get(0)),s(e,i.get(0)),o(e,i.get(0)),r(e,i.get(0)),l(e,i.get(0)),a(e,i.get(0)),h(e,i.get(0))}})}});t.fn.extend({ColorPicker:B.init,ColorPickerHide:B.hidePicker,ColorPickerShow:B.showPicker,ColorPickerSetColor:B.setColor})}(jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.CodeMirror=e()}(this,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,i=/gecko\/\d/i.test(t),n=/MSIE \d/.test(t),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),l=n||s||o,r=l&&(n?document.documentMode||6:+(o||s)[1]),a=!o&&/WebKit\//.test(t),h=a&&/Qt\/\d+\.\d+/.test(t),d=!o&&/Chrome\//.test(t),c=/Opera\//.test(t),u=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),m=!o&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),g=/Android/.test(t),_=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),v=m||/Mac/.test(e),b=/\bCrOS\b/.test(t),y=/win/i.test(e),w=c&&t.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(c=!1,a=!0);var x=v&&(h||c&&(null==w||w<12.11)),C=i||l&&r>=9;function S(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var k,I=function(t,e){var i=t.className,n=S(e).exec(i);if(n){var s=i.slice(n.index+n[0].length);t.className=i.slice(0,n.index)+(s?n[1]+s:"")}};function N(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function T(t,e){return N(t).appendChild(e)}function P(t,e,i,n){var s=document.createElement(t);if(i&&(s.className=i),n&&(s.style.cssText=n),"string"==typeof e)s.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)s.appendChild(e[o]);return s}function D(t,e,i,n){var s=P(t,e,i,n);return s.setAttribute("role","presentation"),s}function O(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function M(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function E(t,e){var i=t.className;S(e).test(i)||(t.className+=(i?" ":"")+e)}function j(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)i[n]&&!S(i[n]).test(e)&&(e+=" "+i[n]);return e}k=document.createRange?function(t,e,i,n){var s=document.createRange();return s.setEnd(n||t,i),s.setStart(t,e),s}:function(t,e,i){var n=document.body.createTextRange();try{n.moveToElementText(t.parentNode)}catch(t){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n};var A=function(t){t.select()};function L(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function H(t,e,i){for(var n in e||(e={}),t)!t.hasOwnProperty(n)||!1===i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e}function B(t,e,i,n,s){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=n||0,l=s||0;;){var r=t.indexOf("\t",o);if(r<0||r>=e)return l+(e-o);l+=r-o,l+=i-l%i,o=r+1}}m?A=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:l&&(A=function(t){try{t.select()}catch(t){}});var R=function(){this.id=null};function F(t,e){for(var i=0;i<t.length;++i)if(t[i]==e)return i;return-1}R.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var X=30,z={toString:function(){return"CodeMirror.Pass"}},V={scroll:!1},W={origin:"*mouse"},G={origin:"+move"};function U(t,e,i){for(var n=0,s=0;;){var o=t.indexOf("\t",n);-1==o&&(o=t.length);var l=o-n;if(o==t.length||s+l>=e)return n+Math.min(l,e-s);if(s+=o-n,n=o+1,(s+=i-s%i)>=e)return n}}var $=[""];function q(t){for(;$.length<=t;)$.push(Y($)+" ");return $[t]}function Y(t){return t[t.length-1]}function K(t,e){for(var i=[],n=0;n<t.length;n++)i[n]=e(t[n],n);return i}function Q(){}function J(t,e){var i;return Object.create?i=Object.create(t):(Q.prototype=t,i=new Q),e&&H(e,i),i}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tt(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Z.test(t))}function et(t,e){return e?!!(e.source.indexOf("\\w")>-1&&tt(t))||e.test(t):tt(t)}function it(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function st(t){return t.charCodeAt(0)>=768&&nt.test(t)}function ot(t,e,i){for(;(i<0?e>0:e<t.length)&&st(t.charAt(e));)e+=i;return e}function lt(t,e,i){for(var n=e>i?-1:1;;){if(e==i)return e;var s=(e+i)/2,o=n<0?Math.ceil(s):Math.floor(s);if(o==e)return t(o)?e:i;t(o)?i=o:e=o+n}}function rt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var i=t;!i.lines;)for(var n=0;;++n){var s=i.children[n],o=s.chunkSize();if(e<o){i=s;break}e-=o}return i.lines[e]}function at(t,e,i){var n=[],s=e.line;return t.iter(e.line,i.line+1,function(t){var o=t.text;s==i.line&&(o=o.slice(0,i.ch)),s==e.line&&(o=o.slice(e.ch)),n.push(o),++s}),n}function ht(t,e,i){var n=[];return t.iter(e,i,function(t){n.push(t.text)}),n}function dt(t,e){var i=e-t.height;if(i)for(var n=t;n;n=n.parent)n.height+=i}function ct(t){if(null==t.parent)return null;for(var e=t.parent,i=F(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var s=0;n.children[s]!=e;++s)i+=n.children[s].chunkSize();return i+e.first}function ut(t,e){var i=t.first;t:do{for(var n=0;n<t.children.length;++n){var s=t.children[n],o=s.height;if(e<o){t=s;continue t}e-=o,i+=s.chunkSize()}return i}while(!t.lines);for(var l=0;l<t.lines.length;++l){var r=t.lines[l].height;if(e<r)break;e-=r}return i+l}function ft(t,e){return e>=t.first&&e<t.first+t.size}function pt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function mt(t,e,i){if(void 0===i&&(i=null),!(this instanceof mt))return new mt(t,e,i);this.line=t,this.ch=e,this.sticky=i}function gt(t,e){return t.line-e.line||t.ch-e.ch}function _t(t,e){return t.sticky==e.sticky&&0==gt(t,e)}function vt(t){return mt(t.line,t.ch)}function bt(t,e){return gt(t,e)<0?e:t}function yt(t,e){return gt(t,e)<0?t:e}function wt(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function xt(t,e){if(e.line<t.first)return mt(t.first,0);var i=t.first+t.size-1;return e.line>i?mt(i,rt(t,i).text.length):function(t,e){var i=t.ch;return null==i||i>e?mt(t.line,e):i<0?mt(t.line,0):t}(e,rt(t,e.line).text.length)}function Ct(t,e){for(var i=[],n=0;n<e.length;n++)i[n]=xt(t,e[n]);return i}var St=!1,kt=!1;function It(t,e,i){this.marker=t,this.from=e,this.to=i}function Nt(t,e){if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n.marker==e)return n}}function Tt(t,e){for(var i,n=0;n<t.length;++n)t[n]!=e&&(i||(i=[])).push(t[n]);return i}function Pt(t,e){if(e.full)return null;var i=ft(t,e.from.line)&&rt(t,e.from.line).markedSpans,n=ft(t,e.to.line)&&rt(t,e.to.line).markedSpans;if(!i&&!n)return null;var s=e.from.ch,o=e.to.ch,l=0==gt(e.from,e.to),r=function(t,e,i){var n;if(t)for(var s=0;s<t.length;++s){var o=t[s],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==l.type&&(!i||!o.marker.insertLeft)){var r=null==o.to||(l.inclusiveRight?o.to>=e:o.to>e);(n||(n=[])).push(new It(l,o.from,r?null:o.to))}}return n}(i,s,l),a=function(t,e,i){var n;if(t)for(var s=0;s<t.length;++s){var o=t[s],l=o.marker;if(null==o.to||(l.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==l.type&&(!i||o.marker.insertLeft)){var r=null==o.from||(l.inclusiveLeft?o.from<=e:o.from<e);(n||(n=[])).push(new It(l,r?null:o.from-e,null==o.to?null:o.to-e))}}return n}(n,o,l),h=1==e.text.length,d=Y(e.text).length+(h?s:0);if(r)for(var c=0;c<r.length;++c){var u=r[c];if(null==u.to){var f=Nt(a,u.marker);f?h&&(u.to=null==f.to?null:f.to+d):u.to=s}}if(a)for(var p=0;p<a.length;++p){var m=a[p];if(null!=m.to&&(m.to+=d),null==m.from)Nt(r,m.marker)||(m.from=d,h&&(r||(r=[])).push(m));else m.from+=d,h&&(r||(r=[])).push(m)}r&&(r=Dt(r)),a&&a!=r&&(a=Dt(a));var g=[r];if(!h){var _,v=e.text.length-2;if(v>0&&r)for(var b=0;b<r.length;++b)null==r[b].to&&(_||(_=[])).push(new It(r[b].marker,null,null));for(var y=0;y<v;++y)g.push(_);g.push(a)}return g}function Dt(t){for(var e=0;e<t.length;++e){var i=t[e];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Ot(t){var e=t.markedSpans;if(e){for(var i=0;i<e.length;++i)e[i].marker.detachLine(t);t.markedSpans=null}}function Mt(t,e){if(e){for(var i=0;i<e.length;++i)e[i].marker.attachLine(t);t.markedSpans=e}}function Et(t){return t.inclusiveLeft?-1:0}function jt(t){return t.inclusiveRight?1:0}function At(t,e){var i=t.lines.length-e.lines.length;if(0!=i)return i;var n=t.find(),s=e.find(),o=gt(n.from,s.from)||Et(t)-Et(e);if(o)return-o;var l=gt(n.to,s.to)||jt(t)-jt(e);return l||e.id-t.id}function Lt(t,e){var i,n=kt&&t.markedSpans;if(n)for(var s=void 0,o=0;o<n.length;++o)(s=n[o]).marker.collapsed&&null==(e?s.from:s.to)&&(!i||At(i,s.marker)<0)&&(i=s.marker);return i}function Ht(t){return Lt(t,!0)}function Bt(t){return Lt(t,!1)}function Rt(t,e,i,n,s){var o=rt(t,e),l=kt&&o.markedSpans;if(l)for(var r=0;r<l.length;++r){var a=l[r];if(a.marker.collapsed){var h=a.marker.find(0),d=gt(h.from,i)||Et(a.marker)-Et(s),c=gt(h.to,n)||jt(a.marker)-jt(s);if(!(d>=0&&c<=0||d<=0&&c>=0)&&(d<=0&&(a.marker.inclusiveRight&&s.inclusiveLeft?gt(h.to,i)>=0:gt(h.to,i)>0)||d>=0&&(a.marker.inclusiveRight&&s.inclusiveLeft?gt(h.from,n)<=0:gt(h.from,n)<0)))return!0}}}function Ft(t){for(var e;e=Ht(t);)t=e.find(-1,!0).line;return t}function Xt(t,e){var i=rt(t,e),n=Ft(i);return i==n?e:ct(n)}function zt(t,e){if(e>t.lastLine())return e;var i,n=rt(t,e);if(!Vt(t,n))return e;for(;i=Bt(n);)n=i.find(1,!0).line;return ct(n)+1}function Vt(t,e){var i=kt&&e.markedSpans;if(i)for(var n=void 0,s=0;s<i.length;++s)if((n=i[s]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Wt(t,e,n))return!0}}function Wt(t,e,i){if(null==i.to){var n=i.marker.find(1,!0);return Wt(t,n.line,Nt(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==e.text.length)return!0;for(var s=void 0,o=0;o<e.markedSpans.length;++o)if((s=e.markedSpans[o]).marker.collapsed&&!s.marker.widgetNode&&s.from==i.to&&(null==s.to||s.to!=i.from)&&(s.marker.inclusiveLeft||i.marker.inclusiveRight)&&Wt(t,e,s))return!0}function Gt(t){for(var e=0,i=(t=Ft(t)).parent,n=0;n<i.lines.length;++n){var s=i.lines[n];if(s==t)break;e+=s.height}for(var o=i.parent;o;o=(i=o).parent)for(var l=0;l<o.children.length;++l){var r=o.children[l];if(r==i)break;e+=r.height}return e}function Ut(t){if(0==t.height)return 0;for(var e,i=t.text.length,n=t;e=Ht(n);){var s=e.find(0,!0);n=s.from.line,i+=s.from.ch-s.to.ch}for(n=t;e=Bt(n);){var o=e.find(0,!0);i-=n.text.length-o.from.ch,i+=(n=o.to.line).text.length-o.to.ch}return i}function $t(t){var e=t.display,i=t.doc;e.maxLine=rt(i,i.first),e.maxLineLength=Ut(e.maxLine),e.maxLineChanged=!0,i.iter(function(t){var i=Ut(t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}var qt=null;function Yt(t,e,i){var n;qt=null;for(var s=0;s<t.length;++s){var o=t[s];if(o.from<e&&o.to>e)return s;o.to==e&&(o.from!=o.to&&"before"==i?n=s:qt=s),o.from==e&&(o.from!=o.to&&"before"!=i?n=s:qt=s)}return null!=n?n:qt}var Kt=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",e="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,l=/[1n]/;function r(t,e,i){this.level=t,this.from=e,this.to=i}return function(a,h){var d="ltr"==h?"L":"R";if(0==a.length||"ltr"==h&&!i.test(a))return!1;for(var c,u=a.length,f=[],p=0;p<u;++p)f.push((c=a.charCodeAt(p))<=247?t.charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1785?e.charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L");for(var m=0,g=d;m<u;++m){var _=f[m];"m"==_?f[m]=g:g=_}for(var v=0,b=d;v<u;++v){var y=f[v];"1"==y&&"r"==b?f[v]="n":s.test(y)&&(b=y,"r"==y&&(f[v]="R"))}for(var w=1,x=f[0];w<u-1;++w){var C=f[w];"+"==C&&"1"==x&&"1"==f[w+1]?f[w]="1":","!=C||x!=f[w+1]||"1"!=x&&"n"!=x||(f[w]=x),x=C}for(var S=0;S<u;++S){var k=f[S];if(","==k)f[S]="N";else if("%"==k){var I=void 0;for(I=S+1;I<u&&"%"==f[I];++I);for(var N=S&&"!"==f[S-1]||I<u&&"1"==f[I]?"1":"N",T=S;T<I;++T)f[T]=N;S=I-1}}for(var P=0,D=d;P<u;++P){var O=f[P];"L"==D&&"1"==O?f[P]="L":s.test(O)&&(D=O)}for(var M=0;M<u;++M)if(n.test(f[M])){var E=void 0;for(E=M+1;E<u&&n.test(f[E]);++E);for(var j="L"==(M?f[M-1]:d),A=j==("L"==(E<u?f[E]:d))?j?"L":"R":d,L=M;L<E;++L)f[L]=A;M=E-1}for(var H,B=[],R=0;R<u;)if(o.test(f[R])){var F=R;for(++R;R<u&&o.test(f[R]);++R);B.push(new r(0,F,R))}else{var X=R,z=B.length;for(++R;R<u&&"L"!=f[R];++R);for(var V=X;V<R;)if(l.test(f[V])){X<V&&B.splice(z,0,new r(1,X,V));var W=V;for(++V;V<R&&l.test(f[V]);++V);B.splice(z,0,new r(2,W,V)),X=V}else++V;X<R&&B.splice(z,0,new r(1,X,R))}return"ltr"==h&&(1==B[0].level&&(H=a.match(/^\s+/))&&(B[0].from=H[0].length,B.unshift(new r(0,0,H[0].length))),1==Y(B).level&&(H=a.match(/\s+$/))&&(Y(B).to-=H[0].length,B.push(new r(0,u-H[0].length,u)))),"rtl"==h?B.reverse():B}}();function Qt(t,e){var i=t.order;return null==i&&(i=t.order=Kt(t.text,e)),i}var Jt=[],Zt=function(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var n=t._handlers||(t._handlers={});n[e]=(n[e]||Jt).concat(i)}};function te(t,e){return t._handlers&&t._handlers[e]||Jt}function ee(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else{var n=t._handlers,s=n&&n[e];if(s){var o=F(s,i);o>-1&&(n[e]=s.slice(0,o).concat(s.slice(o+1)))}}}function ie(t,e){var i=te(t,e);if(i.length)for(var n=Array.prototype.slice.call(arguments,2),s=0;s<i.length;++s)i[s].apply(null,n)}function ne(t,e,i){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),ie(t,i||e.type,t,e),he(e)||e.codemirrorIgnore}function se(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var i=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)-1==F(i,e[n])&&i.push(e[n])}function oe(t,e){return te(t,e).length>0}function le(t){t.prototype.on=function(t,e){Zt(this,t,e)},t.prototype.off=function(t,e){ee(this,t,e)}}function re(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function ae(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function he(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function de(t){re(t),ae(t)}function ce(t){return t.target||t.srcElement}function ue(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),v&&t.ctrlKey&&1==e&&(e=3),e}var fe,pe,me=function(){if(l&&r<9)return!1;var t=P("div");return"draggable"in t||"dragDrop"in t}();function ge(t){if(null==fe){var e=P("span","");T(t,P("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(fe=e.offsetWidth<=1&&e.offsetHeight>2&&!(l&&r<8))}var i=fe?P("span",""):P("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function _e(t){if(null!=pe)return pe;var e=T(t,document.createTextNode("AA")),i=k(e,0,1).getBoundingClientRect(),n=k(e,1,2).getBoundingClientRect();return N(t),!(!i||i.left==i.right)&&(pe=n.right-i.right<3)}var ve,be=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],n=t.length;e<=n;){var s=t.indexOf("\n",e);-1==s&&(s=t.length);var o=t.slice(e,"\r"==t.charAt(s-1)?s-1:s),l=o.indexOf("\r");-1!=l?(i.push(o.slice(0,l)),e+=l+1):(i.push(o),e=s+1)}return i}:function(t){return t.split(/\r\n?|\n/)},ye=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},we="oncopy"in(ve=P("div"))||(ve.setAttribute("oncopy","return;"),"function"==typeof ve.oncopy),xe=null;var Ce={},Se={};function ke(t){if("string"==typeof t&&Se.hasOwnProperty(t))t=Se[t];else if(t&&"string"==typeof t.name&&Se.hasOwnProperty(t.name)){var e=Se[t.name];"string"==typeof e&&(e={name:e}),(t=J(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return ke("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return ke("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Ie(t,e){e=ke(e);var i=Ce[e.name];if(!i)return Ie(t,"text/plain");var n=i(t,e);if(Ne.hasOwnProperty(e.name)){var s=Ne[e.name];for(var o in s)s.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=s[o])}if(n.name=e.name,e.helperType&&(n.helperType=e.helperType),e.modeProps)for(var l in e.modeProps)n[l]=e.modeProps[l];return n}var Ne={};function Te(t,e){H(e,Ne.hasOwnProperty(t)?Ne[t]:Ne[t]={})}function Pe(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var i={};for(var n in e){var s=e[n];s instanceof Array&&(s=s.concat([])),i[n]=s}return i}function De(t,e){for(var i;t.innerMode&&(i=t.innerMode(e))&&i.mode!=t;)e=i.state,t=i.mode;return i||{mode:t,state:e}}function Oe(t,e,i){return!t.startState||t.startState(e,i)}var Me=function(t,e,i){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Me.prototype.eol=function(){return this.pos>=this.string.length},Me.prototype.sol=function(){return this.pos==this.lineStart},Me.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Me.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Me.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Me.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Me.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Me.prototype.skipToEnd=function(){this.pos=this.string.length},Me.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Me.prototype.backUp=function(t){this.pos-=t},Me.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=B(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Me.prototype.indentation=function(){return B(this.string,null,this.tabSize)-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Me.prototype.match=function(t,e,i){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}var s=function(t){return i?t.toLowerCase():t};if(s(this.string.substr(this.pos,t.length))==s(t))return!1!==e&&(this.pos+=t.length),!0},Me.prototype.current=function(){return this.string.slice(this.start,this.pos)},Me.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Me.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Me.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var Ee=function(t,e){this.state=t,this.lookAhead=e},je=function(t,e,i,n){this.state=e,this.doc=t,this.line=i,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function Ae(t,e,i,n){var s=[t.state.modeGen],o={};We(t,e.text,t.doc.mode,i,function(t,e){return s.push(t,e)},o,n);for(var l=i.state,r=function(n){i.baseTokens=s;var r=t.state.overlays[n],a=1,h=0;i.state=!0,We(t,e.text,r.mode,i,function(t,e){for(var i=a;h<t;){var n=s[a];n>t&&s.splice(a,1,t,s[a+1],n),a+=2,h=Math.min(t,n)}if(e)if(r.opaque)s.splice(i,a-i,t,"overlay "+e),a=i+2;else for(;i<a;i+=2){var o=s[i+1];s[i+1]=(o?o+" ":"")+"overlay "+e}},o),i.state=l,i.baseTokens=null,i.baseTokenPos=1},a=0;a<t.state.overlays.length;++a)r(a);return{styles:s,classes:o.bgClass||o.textClass?o:null}}function Le(t,e,i){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=He(t,ct(e)),s=e.text.length>t.options.maxHighlightLength&&Pe(t.doc.mode,n.state),o=Ae(t,e,n);s&&(n.state=s),e.stateAfter=n.save(!s),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),i===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function He(t,e,i){var n=t.doc,s=t.display;if(!n.mode.startState)return new je(n,!0,e);var o=function(t,e,i){for(var n,s,o=t.doc,l=i?-1:e-(t.doc.mode.innerMode?1e3:100),r=e;r>l;--r){if(r<=o.first)return o.first;var a=rt(o,r-1),h=a.stateAfter;if(h&&(!i||r+(h instanceof Ee?h.lookAhead:0)<=o.modeFrontier))return r;var d=B(a.text,null,t.options.tabSize);(null==s||n>d)&&(s=r-1,n=d)}return s}(t,e,i),l=o>n.first&&rt(n,o-1).stateAfter,r=l?je.fromSaved(n,l,o):new je(n,Oe(n.mode),o);return n.iter(o,e,function(i){Be(t,i.text,r);var n=r.line;i.stateAfter=n==e-1||n%5==0||n>=s.viewFrom&&n<s.viewTo?r.save():null,r.nextLine()}),i&&(n.modeFrontier=r.line),r}function Be(t,e,i,n){var s=t.doc.mode,o=new Me(e,t.options.tabSize,i);for(o.start=o.pos=n||0,""==e&&Re(s,i.state);!o.eol();)Fe(s,o,i.state),o.start=o.pos}function Re(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var i=De(t,e);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Fe(t,e,i,n){for(var s=0;s<10;s++){n&&(n[0]=De(t,i).mode);var o=t.token(e,i);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}je.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},je.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},je.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},je.fromSaved=function(t,e,i){return e instanceof Ee?new je(t,Pe(t.mode,e.state),i,e.lookAhead):new je(t,Pe(t.mode,e),i)},je.prototype.save=function(t){var e=!1!==t?Pe(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ee(e,this.maxLookAhead):e};var Xe=function(t,e,i){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=i};function ze(t,e,i,n){var s,o,l=t.doc,r=l.mode,a=rt(l,(e=xt(l,e)).line),h=He(t,e.line,i),d=new Me(a.text,t.options.tabSize,h);for(n&&(o=[]);(n||d.pos<e.ch)&&!d.eol();)d.start=d.pos,s=Fe(r,d,h.state),n&&o.push(new Xe(d,s,Pe(l.mode,h.state)));return n?o:new Xe(d,s,h.state)}function Ve(t,e){if(t)for(;;){var i=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;t=t.slice(0,i.index)+t.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==e[n]?e[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+i[2])}return t}function We(t,e,i,n,s,o,l){var r=i.flattenSpans;null==r&&(r=t.options.flattenSpans);var a,h=0,d=null,c=new Me(e,t.options.tabSize,n),u=t.options.addModeClass&&[null];for(""==e&&Ve(Re(i,n.state),o);!c.eol();){if(c.pos>t.options.maxHighlightLength?(r=!1,l&&Be(t,e,n,c.pos),c.pos=e.length,a=null):a=Ve(Fe(i,c,n.state,u),o),u){var f=u[0].name;f&&(a="m-"+(a?f+" "+a:f))}if(!r||d!=a){for(;h<c.start;)s(h=Math.min(c.start,h+5e3),d);d=a}c.start=c.pos}for(;h<c.pos;){var p=Math.min(c.pos,h+5e3);s(p,d),h=p}}var Ge=function(t,e,i){this.text=t,Mt(this,e),this.height=i?i(this):1};function Ue(t){t.parent=null,Ot(t)}Ge.prototype.lineNo=function(){return ct(this)},le(Ge);var $e={},qe={};function Ye(t,e){if(!t||/^\s*$/.test(t))return null;var i=e.addModeClass?qe:$e;return i[t]||(i[t]=t.replace(/\S+/g,"cm-$&"))}function Ke(t,e){var i=D("span",null,null,a?"padding-right: .1px":null),n={pre:D("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:(l||a)&&t.getOption("lineWrapping")};e.measure={};for(var s=0;s<=(e.rest?e.rest.length:0);s++){var o=s?e.rest[s-1]:e.line,r=void 0;n.pos=0,n.addToken=Je,_e(t.display.measure)&&(r=Qt(o,t.doc.direction))&&(n.addToken=Ze(n.addToken,r)),n.map=[],ei(o,n,Le(t,o,e!=t.display.externalMeasured&&ct(o))),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=j(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=j(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(ge(t.display.measure))),0==s?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(a){var h=n.content.lastChild;(/\bcm-tab\b/.test(h.className)||h.querySelector&&h.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return ie(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=j(n.pre.className,n.textClass||"")),n}function Qe(t){var e=P("span","","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Je(t,e,i,n,s,o,a){if(e){var h,d=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var i=e,n="",s=0;s<t.length;s++){var o=t.charAt(s);" "!=o||!i||s!=t.length-1&&32!=t.charCodeAt(s+1)||(o=""),n+=o,i=" "==o}return n}(e,t.trailingSpace):e,c=t.cm.state.specialChars,u=!1;if(c.test(e)){h=document.createDocumentFragment();for(var f=0;;){c.lastIndex=f;var p=c.exec(e),m=p?p.index-f:e.length-f;if(m){var g=document.createTextNode(d.slice(f,f+m));l&&r<9?h.appendChild(P("span",[g])):h.appendChild(g),t.map.push(t.pos,t.pos+m,g),t.col+=m,t.pos+=m}if(!p)break;f+=m+1;var _=void 0;if("\t"==p[0]){var v=t.cm.options.tabSize,b=v-t.col%v;(_=h.appendChild(P("span",q(b),"cm-tab"))).setAttribute("role","presentation"),_.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?((_=h.appendChild(P("span","\r"==p[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((_=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),l&&r<9?h.appendChild(P("span",[_])):h.appendChild(_),t.col+=1);t.map.push(t.pos,t.pos+1,_),t.pos++}}else t.col+=e.length,h=document.createTextNode(d),t.map.push(t.pos,t.pos+e.length,h),l&&r<9&&(u=!0),t.pos+=e.length;if(t.trailingSpace=32==d.charCodeAt(e.length-1),i||n||s||u||a){var y=i||"";n&&(y+=n),s&&(y+=s);var w=P("span",[h],y,a);return o&&(w.title=o),t.content.appendChild(w)}t.content.appendChild(h)}}function Ze(t,e){return function(i,n,s,o,l,r,a){s=s?s+" cm-force-border":"cm-force-border";for(var h=i.pos,d=h+n.length;;){for(var c=void 0,u=0;u<e.length&&!((c=e[u]).to>h&&c.from<=h);u++);if(c.to>=d)return t(i,n,s,o,l,r,a);t(i,n.slice(0,c.to-h),s,o,null,r,a),o=null,n=n.slice(c.to-h),h=c.to}}}function ti(t,e,i,n){var s=!n&&i.widgetNode;s&&t.map.push(t.pos,t.pos+e,s),!n&&t.cm.display.input.needsContentAttribute&&(s||(s=t.content.appendChild(document.createElement("span"))),s.setAttribute("cm-marker",i.id)),s&&(t.cm.display.input.setUneditable(s),t.content.appendChild(s)),t.pos+=e,t.trailingSpace=!1}function ei(t,e,i){var n=t.markedSpans,s=t.text,o=0;if(n)for(var l,r,a,h,d,c,u,f=s.length,p=0,m=1,g="",_=0;;){if(_==p){a=h=d=c=r="",u=null,_=1/0;for(var v=[],b=void 0,y=0;y<n.length;++y){var w=n[y],x=w.marker;"bookmark"==x.type&&w.from==p&&x.widgetNode?v.push(x):w.from<=p&&(null==w.to||w.to>p||x.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&_>w.to&&(_=w.to,h=""),x.className&&(a+=" "+x.className),x.css&&(r=(r?r+";":"")+x.css),x.startStyle&&w.from==p&&(d+=" "+x.startStyle),x.endStyle&&w.to==_&&(b||(b=[])).push(x.endStyle,w.to),x.title&&!c&&(c=x.title),x.collapsed&&(!u||At(u.marker,x)<0)&&(u=w)):w.from>p&&_>w.from&&(_=w.from)}if(b)for(var C=0;C<b.length;C+=2)b[C+1]==_&&(h+=" "+b[C]);if(!u||u.from==p)for(var S=0;S<v.length;++S)ti(e,0,v[S]);if(u&&(u.from||0)==p){if(ti(e,(null==u.to?f+1:u.to)-p,u.marker,null==u.from),null==u.to)return;u.to==p&&(u=!1)}}if(p>=f)break;for(var k=Math.min(f,_);;){if(g){var I=p+g.length;if(!u){var N=I>k?g.slice(0,k-p):g;e.addToken(e,N,l?l+a:a,d,p+N.length==_?h:"",c,r)}if(I>=k){g=g.slice(k-p),p=k;break}p=I,d=""}g=s.slice(o,o=i[m++]),l=Ye(i[m++],e.cm.options)}}else for(var T=1;T<i.length;T+=2)e.addToken(e,s.slice(o,o=i[T]),Ye(i[T+1],e.cm.options))}function ii(t,e,i){this.line=e,this.rest=function(t){for(var e,i;e=Bt(t);)t=e.find(1,!0).line,(i||(i=[])).push(t);return i}(e),this.size=this.rest?ct(Y(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Vt(t,e)}function ni(t,e,i){for(var n,s=[],o=e;o<i;o=n){var l=new ii(t.doc,rt(t.doc,o),o);n=o+l.size,s.push(l)}return s}var si=null;var oi=null;function li(t,e){var i=te(t,e);if(i.length){var n,s=Array.prototype.slice.call(arguments,2);si?n=si.delayedCallbacks:oi?n=oi:(n=oi=[],setTimeout(ri,0));for(var o=function(t){n.push(function(){return i[t].apply(null,s)})},l=0;l<i.length;++l)o(l)}}function ri(){var t=oi;oi=null;for(var e=0;e<t.length;++e)t[e]()}function ai(t,e,i,n){for(var s=0;s<e.changes.length;s++){var o=e.changes[s];"text"==o?ci(t,e):"gutter"==o?fi(t,e,i,n):"class"==o?ui(t,e):"widget"==o&&pi(t,e,n)}e.changes=null}function hi(t){return t.node==t.text&&(t.node=P("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),l&&r<8&&(t.node.style.zIndex=2)),t.node}function di(t,e){var i=t.display.externalMeasured;return i&&i.line==e.line?(t.display.externalMeasured=null,e.measure=i.measure,i.built):Ke(t,e)}function ci(t,e){var i=e.text.className,n=di(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,ui(t,e)):i&&(e.text.className=i)}function ui(t,e){!function(t,e){var i=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),e.background)i?e.background.className=i:(e.background.parentNode.removeChild(e.background),e.background=null);else if(i){var n=hi(e);e.background=n.insertBefore(P("div",null,i),n.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?hi(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var i=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=i||""}function fi(t,e,i,n){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var s=hi(e);e.gutterBackground=P("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),s.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var l=hi(e),r=e.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(t.display.input.setUneditable(r),l.insertBefore(r,e.text),e.line.gutterClass&&(r.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=r.appendChild(P("div",pt(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<t.options.gutters.length;++a){var h=t.options.gutters[a],d=o.hasOwnProperty(h)&&o[h];d&&r.appendChild(P("div",[d],"CodeMirror-gutter-elt","left: "+n.gutterLeft[h]+"px; width: "+n.gutterWidth[h]+"px"))}}}function pi(t,e,i){e.alignable&&(e.alignable=null);for(var n=e.node.firstChild,s=void 0;n;n=s)s=n.nextSibling,"CodeMirror-linewidget"==n.className&&e.node.removeChild(n);gi(t,e,i)}function mi(t,e,i,n){var s=di(t,e);return e.text=e.node=s.pre,s.bgClass&&(e.bgClass=s.bgClass),s.textClass&&(e.textClass=s.textClass),ui(t,e),fi(t,e,i,n),gi(t,e,n),e.node}function gi(t,e,i){if(_i(t,e.line,e,i,!0),e.rest)for(var n=0;n<e.rest.length;n++)_i(t,e.rest[n],e,i,!1)}function _i(t,e,i,n,s){if(e.widgets)for(var o=hi(i),l=0,r=e.widgets;l<r.length;++l){var a=r[l],h=P("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),vi(a,h,i,n),t.display.input.setUneditable(h),s&&a.above?o.insertBefore(h,i.gutter||i.text):o.appendChild(h),li(a,"redraw")}}function vi(t,e,i,n){if(t.noHScroll){(i.alignable||(i.alignable=[])).push(e);var s=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(s-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=s+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function bi(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!O(document.body,t.node)){var i="position: relative;";t.coverGutter&&(i+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(i+="width: "+e.display.wrapper.clientWidth+"px;"),T(e.display.measure,P("div",[t.node],null,i))}return t.height=t.node.parentNode.offsetHeight}function yi(t,e){for(var i=ce(e);i!=t.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==t.sizer&&i!=t.mover)return!0}function wi(t){return t.lineSpace.offsetTop}function xi(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Ci(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=T(t.measure,P("pre","x")),i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function Si(t){return X-t.display.nativeBarWidth}function ki(t){return t.display.scroller.clientWidth-Si(t)-t.display.barWidth}function Ii(t){return t.display.scroller.clientHeight-Si(t)-t.display.barHeight}function Ni(t,e,i){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var s=0;s<t.rest.length;s++)if(ct(t.rest[s])>i)return{map:t.measure.maps[s],cache:t.measure.caches[s],before:!0}}function Ti(t,e,i,n){return Oi(t,Di(t,e),i,n)}function Pi(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[rn(t,e)];var i=t.display.externalMeasured;return i&&e>=i.lineN&&e<i.lineN+i.size?i:void 0}function Di(t,e){var i=ct(e),n=Pi(t,i);n&&!n.text?n=null:n&&n.changes&&(ai(t,n,i,en(t)),t.curOp.forceUpdate=!0),n||(n=function(t,e){var i=ct(e=Ft(e)),n=t.display.externalMeasured=new ii(t.doc,e,i);n.lineN=i;var s=n.built=Ke(t,n);return n.text=s.pre,T(t.display.lineMeasure,s.pre),n}(t,e));var s=Ni(n,e,i);return{line:e,view:n,rect:null,map:s.map,cache:s.cache,before:s.before,hasHeights:!1}}function Oi(t,e,i,n,s){e.before&&(i=-1);var o,a=i+(n||"");return e.cache.hasOwnProperty(a)?o=e.cache[a]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(!function(t,e,i){var n=t.options.lineWrapping,s=n&&ki(t);if(!e.measure.heights||n&&e.measure.width!=s){var o=e.measure.heights=[];if(n){e.measure.width=s;for(var l=e.text.firstChild.getClientRects(),r=0;r<l.length-1;r++){var a=l[r],h=l[r+1];Math.abs(a.bottom-h.bottom)>2&&o.push((a.bottom+h.top)/2-i.top)}}o.push(i.bottom-i.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,i,n){var s,o=ji(e.map,i,n),a=o.node,h=o.start,d=o.end,c=o.collapse;if(3==a.nodeType){for(var u=0;u<4;u++){for(;h&&st(e.line.text.charAt(o.coverStart+h));)--h;for(;o.coverStart+d<o.coverEnd&&st(e.line.text.charAt(o.coverStart+d));)++d;if((s=l&&r<9&&0==h&&d==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():Ai(k(a,h,d).getClientRects(),n)).left||s.right||0==h)break;d=h,h-=1,c="right"}l&&r<11&&(s=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=xe)return xe;var e=T(t,P("span","x")),i=e.getBoundingClientRect(),n=k(e,0,1).getBoundingClientRect();return xe=Math.abs(i.left-n.left)>1}(t))return e;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*i,right:e.right*i,top:e.top*n,bottom:e.bottom*n}}(t.display.measure,s))}else{var f;h>0&&(c=n="right"),s=t.options.lineWrapping&&(f=a.getClientRects()).length>1?f["right"==n?f.length-1:0]:a.getBoundingClientRect()}if(l&&r<9&&!h&&(!s||!s.left&&!s.right)){var p=a.parentNode.getClientRects()[0];s=p?{left:p.left,right:p.left+tn(t.display),top:p.top,bottom:p.bottom}:Ei}for(var m=s.top-e.rect.top,g=s.bottom-e.rect.top,_=(m+g)/2,v=e.view.measure.heights,b=0;b<v.length-1&&!(_<v[b]);b++);var y=b?v[b-1]:0,w=v[b],x={left:("right"==c?s.right:s.left)-e.rect.left,right:("left"==c?s.left:s.right)-e.rect.left,top:y,bottom:w};s.left||s.right||(x.bogus=!0);t.options.singleCursorHeightPerLine||(x.rtop=m,x.rbottom=g);return x}(t,e,i,n)).bogus||(e.cache[a]=o)),{left:o.left,right:o.right,top:s?o.rtop:o.top,bottom:s?o.rbottom:o.bottom}}var Mi,Ei={left:0,right:0,top:0,bottom:0};function ji(t,e,i){for(var n,s,o,l,r,a,h=0;h<t.length;h+=3)if(r=t[h],a=t[h+1],e<r?(s=0,o=1,l="left"):e<a?o=(s=e-r)+1:(h==t.length-3||e==a&&t[h+3]>e)&&(s=(o=a-r)-1,e>=a&&(l="right")),null!=s){if(n=t[h+2],r==a&&i==(n.insertLeft?"left":"right")&&(l=i),"left"==i&&0==s)for(;h&&t[h-2]==t[h-3]&&t[h-1].insertLeft;)n=t[2+(h-=3)],l="left";if("right"==i&&s==a-r)for(;h<t.length-3&&t[h+3]==t[h+4]&&!t[h+5].insertLeft;)n=t[(h+=3)+2],l="right";break}return{node:n,start:s,end:o,collapse:l,coverStart:r,coverEnd:a}}function Ai(t,e){var i=Ei;if("left"==e)for(var n=0;n<t.length&&(i=t[n]).left==i.right;n++);else for(var s=t.length-1;s>=0&&(i=t[s]).left==i.right;s--);return i}function Li(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Hi(t){t.display.externalMeasure=null,N(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Li(t.display.view[e])}function Bi(t){Hi(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Ri(){return d&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Fi(){return d&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Xi(t){var e=0;if(t.widgets)for(var i=0;i<t.widgets.length;++i)t.widgets[i].above&&(e+=bi(t.widgets[i]));return e}function zi(t,e,i,n,s){if(!s){var o=Xi(e);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var l=Gt(e);if("local"==n?l+=wi(t.display):l-=t.display.viewOffset,"page"==n||"window"==n){var r=t.display.lineSpace.getBoundingClientRect();l+=r.top+("window"==n?0:Fi());var a=r.left+("window"==n?0:Ri());i.left+=a,i.right+=a}return i.top+=l,i.bottom+=l,i}function Vi(t,e,i){if("div"==i)return e;var n=e.left,s=e.top;if("page"==i)n-=Ri(),s-=Fi();else if("local"==i||!i){var o=t.display.sizer.getBoundingClientRect();n+=o.left,s+=o.top}var l=t.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:s-l.top}}function Wi(t,e,i,n,s){return n||(n=rt(t.doc,e.line)),zi(t,n,Ti(t,n,e.ch,s),i)}function Gi(t,e,i,n,s,o){function l(e,l){var r=Oi(t,s,e,l?"right":"left",o);return l?r.left=r.right:r.right=r.left,zi(t,n,r,i)}n=n||rt(t.doc,e.line),s||(s=Di(t,n));var r=Qt(n,t.doc.direction),a=e.ch,h=e.sticky;if(a>=n.text.length?(a=n.text.length,h="before"):a<=0&&(a=0,h="after"),!r)return l("before"==h?a-1:a,"before"==h);function d(t,e,i){var n=1==r[e].level;return l(i?t-1:t,n!=i)}var c=Yt(r,a,h),u=qt,f=d(a,c,"before"==h);return null!=u&&(f.other=d(a,u,"before"!=h)),f}function Ui(t,e){var i=0;e=xt(t.doc,e),t.options.lineWrapping||(i=tn(t.display)*e.ch);var n=rt(t.doc,e.line),s=Gt(n)+wi(t.display);return{left:i,right:i,top:s,bottom:s+n.height}}function $i(t,e,i,n,s){var o=mt(t,e,i);return o.xRel=s,n&&(o.outside=!0),o}function qi(t,e,i){var n=t.doc;if((i+=t.display.viewOffset)<0)return $i(n.first,0,null,!0,-1);var s=ut(n,i),o=n.first+n.size-1;if(s>o)return $i(n.first+n.size-1,rt(n,o).text.length,null,!0,1);e<0&&(e=0);for(var l=rt(n,s);;){var r=Ji(t,l,s,e,i),a=Bt(l),h=a&&a.find(0,!0);if(!a||!(r.ch>h.from.ch||r.ch==h.from.ch&&r.xRel>0))return r;s=ct(l=h.to.line)}}function Yi(t,e,i,n){n-=Xi(e);var s=e.text.length,o=lt(function(e){return Oi(t,i,e-1).bottom<=n},s,0);return{begin:o,end:s=lt(function(e){return Oi(t,i,e).top>n},o,s)}}function Ki(t,e,i,n){return i||(i=Di(t,e)),Yi(t,e,i,zi(t,e,Oi(t,i,n),"line").top)}function Qi(t,e,i,n){return!(t.bottom<=i)&&(t.top>i||(n?t.left:t.right)>e)}function Ji(t,e,i,n,s){s-=Gt(e);var o=Di(t,e),l=Xi(e),r=0,a=e.text.length,h=!0,d=Qt(e,t.doc.direction);if(d){var c=(t.options.lineWrapping?function(t,e,i,n,s,o,l){var r=Yi(t,e,n,l),a=r.begin,h=r.end;/\s/.test(e.text.charAt(h-1))&&h--;for(var d=null,c=null,u=0;u<s.length;u++){var f=s[u];if(!(f.from>=h||f.to<=a)){var p=1!=f.level,m=Oi(t,n,p?Math.min(h,f.to)-1:Math.max(a,f.from)).right,g=m<o?o-m+1e9:m-o;(!d||c>g)&&(d=f,c=g)}}d||(d=s[s.length-1]);d.from<a&&(d={from:a,to:d.to,level:d.level});d.to>h&&(d={from:d.from,to:h,level:d.level});return d}:function(t,e,i,n,s,o,l){var r=lt(function(r){var a=s[r],h=1!=a.level;return Qi(Gi(t,mt(i,h?a.to:a.from,h?"before":"after"),"line",e,n),o,l,!0)},0,s.length-1),a=s[r];if(r>0){var h=1!=a.level,d=Gi(t,mt(i,h?a.from:a.to,h?"after":"before"),"line",e,n);Qi(d,o,l,!0)&&d.top>l&&(a=s[r-1])}return a})(t,e,i,o,d,n,s);r=(h=1!=c.level)?c.from:c.to-1,a=h?c.to:c.from-1}var u,f,p=null,m=null,g=lt(function(e){var i=Oi(t,o,e);return i.top+=l,i.bottom+=l,!!Qi(i,n,s,!1)&&(i.top<=s&&i.left<=n&&(p=e,m=i),!0)},r,a),_=!1;if(m){var v=n-m.left<m.right-n,b=v==h;g=p+(b?0:1),f=b?"after":"before",u=v?m.left:m.right}else{h||g!=a&&g!=r||g++,f=0==g?"after":g==e.text.length?"before":Oi(t,o,g-(h?1:0)).bottom+l<=s==h?"after":"before";var y=Gi(t,mt(i,g,f),"line",e,o);u=y.left,_=s<y.top||s>=y.bottom}return $i(i,g=ot(e.text,g,1),f,_,n-u)}function Zi(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Mi){Mi=P("pre");for(var e=0;e<49;++e)Mi.appendChild(document.createTextNode("x")),Mi.appendChild(P("br"));Mi.appendChild(document.createTextNode("x"))}T(t.measure,Mi);var i=Mi.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),N(t.measure),i||1}function tn(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=P("span","xxxxxxxxxx"),i=P("pre",[e]);T(t.measure,i);var n=e.getBoundingClientRect(),s=(n.right-n.left)/10;return s>2&&(t.cachedCharWidth=s),s||10}function en(t){for(var e=t.display,i={},n={},s=e.gutters.clientLeft,o=e.gutters.firstChild,l=0;o;o=o.nextSibling,++l)i[t.options.gutters[l]]=o.offsetLeft+o.clientLeft+s,n[t.options.gutters[l]]=o.clientWidth;return{fixedPos:nn(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function nn(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function sn(t){var e=Zi(t.display),i=t.options.lineWrapping,n=i&&Math.max(5,t.display.scroller.clientWidth/tn(t.display)-3);return function(s){if(Vt(t.doc,s))return 0;var o=0;if(s.widgets)for(var l=0;l<s.widgets.length;l++)s.widgets[l].height&&(o+=s.widgets[l].height);return i?o+(Math.ceil(s.text.length/n)||1)*e:o+e}}function on(t){var e=t.doc,i=sn(t);e.iter(function(t){var e=i(t);e!=t.height&&dt(t,e)})}function ln(t,e,i,n){var s=t.display;if(!i&&"true"==ce(e).getAttribute("cm-not-content"))return null;var o,l,r=s.lineSpace.getBoundingClientRect();try{o=e.clientX-r.left,l=e.clientY-r.top}catch(e){return null}var a,h=qi(t,o,l);if(n&&1==h.xRel&&(a=rt(t.doc,h.line).text).length==h.ch){var d=B(a,a.length,t.options.tabSize)-a.length;h=mt(h.line,Math.max(0,Math.round((o-Ci(t.display).left)/tn(t.display))-d))}return h}function rn(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var i=t.display.view,n=0;n<i.length;n++)if((e-=i[n].size)<0)return n}function an(t){t.display.input.showSelection(t.display.input.prepareSelection())}function hn(t,e){void 0===e&&(e=!0);for(var i=t.doc,n={},s=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<i.sel.ranges.length;l++)if(e||l!=i.sel.primIndex){var r=i.sel.ranges[l];if(!(r.from().line>=t.display.viewTo||r.to().line<t.display.viewFrom)){var a=r.empty();(a||t.options.showCursorWhenSelecting)&&dn(t,r.head,s),a||un(t,r,o)}}return n}function dn(t,e,i){var n=Gi(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),s=i.appendChild(P("div","","CodeMirror-cursor"));if(s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var o=i.appendChild(P("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function cn(t,e){return t.top-e.top||t.left-e.left}function un(t,e,i){var n=t.display,s=t.doc,o=document.createDocumentFragment(),l=Ci(t.display),r=l.left,a=Math.max(n.sizerWidth,ki(t)-n.sizer.offsetLeft)-l.right,h="ltr"==s.direction;function d(t,e,i,n){e<0&&(e=0),e=Math.round(e),n=Math.round(n),o.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==i?a-t:i)+"px;\n                             height: "+(n-e)+"px"))}function c(e,i,n){var o,l,c=rt(s,e),u=c.text.length;function f(i,n){return Wi(t,mt(e,i),"div",c,n)}function p(e,i,n){var s=Ki(t,c,null,e),o="ltr"==i==("after"==n)?"left":"right";return f("after"==n?s.begin:s.end-(/\s/.test(c.text.charAt(s.end-1))?2:1),o)[o]}var m=Qt(c,s.direction);return function(t,e,i,n){if(!t)return n(e,i,"ltr",0);for(var s=!1,o=0;o<t.length;++o){var l=t[o];(l.from<i&&l.to>e||e==i&&l.to==e)&&(n(Math.max(l.from,e),Math.min(l.to,i),1==l.level?"rtl":"ltr",o),s=!0)}s||n(e,i,"ltr")}(m,i||0,null==n?u:n,function(t,e,s,c){var g="ltr"==s,_=f(t,g?"left":"right"),v=f(e-1,g?"right":"left"),b=null==i&&0==t,y=null==n&&e==u,w=0==c,x=!m||c==m.length-1;if(v.top-_.top<=3){var C=(h?y:b)&&x,S=(h?b:y)&&w?r:(g?_:v).left,k=C?a:(g?v:_).right;d(S,_.top,k-S,_.bottom)}else{var I,N,T,P;g?(I=h&&b&&w?r:_.left,N=h?a:p(t,s,"before"),T=h?r:p(e,s,"after"),P=h&&y&&x?a:v.right):(I=h?p(t,s,"before"):r,N=!h&&b&&w?a:_.right,T=!h&&y&&x?r:v.left,P=h?p(e,s,"after"):a),d(I,_.top,N-I,_.bottom),_.bottom<v.top&&d(r,_.bottom,null,v.top),d(T,v.top,P-T,v.bottom)}(!o||cn(_,o)<0)&&(o=_),cn(v,o)<0&&(o=v),(!l||cn(_,l)<0)&&(l=_),cn(v,l)<0&&(l=v)}),{start:o,end:l}}var u=e.from(),f=e.to();if(u.line==f.line)c(u.line,u.ch,f.ch);else{var p=rt(s,u.line),m=rt(s,f.line),g=Ft(p)==Ft(m),_=c(u.line,u.ch,g?p.text.length+1:null).end,v=c(f.line,g?0:null,f.ch).start;g&&(_.top<v.top-2?(d(_.right,_.top,null,_.bottom),d(r,v.top,v.left,v.bottom)):d(_.right,_.top,v.left-_.right,_.bottom)),_.bottom<v.top&&d(r,_.bottom,null,v.top)}i.appendChild(o)}function fn(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(i=!i)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function pn(t){t.state.focused||(t.display.input.focus(),gn(t))}function mn(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,_n(t))},100)}function gn(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(ie(t,"focus",t,e),t.state.focused=!0,E(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),a&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),fn(t))}function _n(t,e){t.state.delayingBlurEvent||(t.state.focused&&(ie(t,"blur",t,e),t.state.focused=!1,I(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function vn(t){for(var e=t.display,i=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var s=e.view[n],o=void 0;if(!s.hidden){if(l&&r<8){var a=s.node.offsetTop+s.node.offsetHeight;o=a-i,i=a}else{var h=s.node.getBoundingClientRect();o=h.bottom-h.top}var d=s.line.height-o;if(o<2&&(o=Zi(e)),(d>.005||d<-.005)&&(dt(s.line,o),bn(s.line),s.rest))for(var c=0;c<s.rest.length;c++)bn(s.rest[c])}}}function bn(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var i=t.widgets[e],n=i.node.parentNode;n&&(i.height=n.offsetHeight)}}function yn(t,e,i){var n=i&&null!=i.top?Math.max(0,i.top):t.scroller.scrollTop;n=Math.floor(n-wi(t));var s=i&&null!=i.bottom?i.bottom:n+t.wrapper.clientHeight,o=ut(e,n),l=ut(e,s);if(i&&i.ensure){var r=i.ensure.from.line,a=i.ensure.to.line;r<o?(o=r,l=ut(e,Gt(rt(e,r))+t.wrapper.clientHeight)):Math.min(a,e.lastLine())>=l&&(o=ut(e,Gt(rt(e,a))-t.wrapper.clientHeight),l=a)}return{from:o,to:Math.max(l,o+1)}}function wn(t){var e=t.display,i=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=nn(e)-e.scroller.scrollLeft+t.doc.scrollLeft,s=e.gutters.offsetWidth,o=n+"px",l=0;l<i.length;l++)if(!i[l].hidden){t.options.fixedGutter&&(i[l].gutter&&(i[l].gutter.style.left=o),i[l].gutterBackground&&(i[l].gutterBackground.style.left=o));var r=i[l].alignable;if(r)for(var a=0;a<r.length;a++)r[a].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=n+s+"px")}}function xn(t){if(!t.options.lineNumbers)return!1;var e=t.doc,i=pt(t.options,e.first+e.size-1),n=t.display;if(i.length!=n.lineNumChars){var s=n.measure.appendChild(P("div",[P("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=s.firstChild.offsetWidth,l=s.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l)+1,n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",rs(t),!0}return!1}function Cn(t,e){var i=t.display,n=Zi(t.display);e.top<0&&(e.top=0);var s=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:i.scroller.scrollTop,o=Ii(t),l={};e.bottom-e.top>o&&(e.bottom=e.top+o);var r=t.doc.height+xi(i),a=e.top<n,h=e.bottom>r-n;if(e.top<s)l.scrollTop=a?0:e.top;else if(e.bottom>s+o){var d=Math.min(e.top,(h?r:e.bottom)-o);d!=s&&(l.scrollTop=d)}var c=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:i.scroller.scrollLeft,u=ki(t)-(t.options.fixedGutter?i.gutters.offsetWidth:0),f=e.right-e.left>u;return f&&(e.right=e.left+u),e.left<10?l.scrollLeft=0:e.left<c?l.scrollLeft=Math.max(0,e.left-(f?0:10)):e.right>u+c-3&&(l.scrollLeft=e.right+(f?0:10)-u),l}function Sn(t,e){null!=e&&(Nn(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function kn(t){Nn(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function In(t,e,i){null==e&&null==i||Nn(t),null!=e&&(t.curOp.scrollLeft=e),null!=i&&(t.curOp.scrollTop=i)}function Nn(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Tn(t,Ui(t,e.from),Ui(t,e.to),e.margin))}function Tn(t,e,i,n){var s=Cn(t,{left:Math.min(e.left,i.left),top:Math.min(e.top,i.top)-n,right:Math.max(e.right,i.right),bottom:Math.max(e.bottom,i.bottom)+n});In(t,s.scrollLeft,s.scrollTop)}function Pn(t,e){Math.abs(t.doc.scrollTop-e)<2||(i||ls(t,{top:e}),Dn(t,e,!0),i&&ls(t),es(t,100))}function Dn(t,e,i){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||i)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function On(t,e,i,n){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(i?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!n||(t.doc.scrollLeft=e,wn(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Mn(t){var e=t.display,i=e.gutters.offsetWidth,n=Math.round(t.doc.height+xi(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+Si(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:i}}var En=function(t,e,i){this.cm=i;var n=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),s=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(n),t(s),Zt(n,"scroll",function(){n.clientHeight&&e(n.scrollTop,"vertical")}),Zt(s,"scroll",function(){s.clientWidth&&e(s.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,l&&r<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};En.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,i=t.scrollHeight>t.clientHeight+1,n=t.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=e?n+"px":"0";var s=t.viewHeight-(e?n:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+s)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=i?n+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(i?n:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?n:0,bottom:e?n:0}},En.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},En.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},En.prototype.zeroWidthHack=function(){var t=v&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new R,this.disableVert=new R},En.prototype.enableZeroWidthBar=function(t,e,i){t.style.pointerEvents="auto",e.set(1e3,function n(){var s=t.getBoundingClientRect();("vert"==i?document.elementFromPoint(s.right-1,(s.top+s.bottom)/2):document.elementFromPoint((s.right+s.left)/2,s.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,n)})},En.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var jn=function(){};function An(t,e){e||(e=Mn(t));var i=t.display.barWidth,n=t.display.barHeight;Ln(t,e);for(var s=0;s<4&&i!=t.display.barWidth||n!=t.display.barHeight;s++)i!=t.display.barWidth&&t.options.lineWrapping&&vn(t),Ln(t,Mn(t)),i=t.display.barWidth,n=t.display.barHeight}function Ln(t,e){var i=t.display,n=i.scrollbars.update(e);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",i.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=e.gutterWidth+"px"):i.gutterFiller.style.display=""}jn.prototype.update=function(){return{bottom:0,right:0}},jn.prototype.setScrollLeft=function(){},jn.prototype.setScrollTop=function(){},jn.prototype.clear=function(){};var Hn={native:En,null:jn};function Bn(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&I(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Hn[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Zt(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,i){"horizontal"==i?On(t,e):Pn(t,e)},t),t.display.scrollbars.addClass&&E(t.display.wrapper,t.display.scrollbars.addClass)}var Rn=0;function Fn(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rn},e=t.curOp,si?si.ops.push(e):e.ownsGroup=si={ops:[e],delayedCallbacks:[]}}function Xn(t){!function(t,e){var i=t.ownsGroup;if(i)try{!function(t){var e=t.delayedCallbacks,i=0;do{for(;i<e.length;i++)e[i].call(null);for(var n=0;n<t.ops.length;n++){var s=t.ops[n];if(s.cursorActivityHandlers)for(;s.cursorActivityCalled<s.cursorActivityHandlers.length;)s.cursorActivityHandlers[s.cursorActivityCalled++].call(null,s.cm)}}while(i<e.length)}(i)}finally{si=null,e(i)}}(t.curOp,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,i=0;i<e.length;i++)zn(e[i]);for(var n=0;n<e.length;n++)(s=e[n]).updatedDisplay=s.mustUpdate&&ss(s.cm,s.update);var s;for(var o=0;o<e.length;o++)Vn(e[o]);for(var l=0;l<e.length;l++)Wn(e[l]);for(var r=0;r<e.length;r++)Gn(e[r])}(t)})}function zn(t){var e=t.cm,i=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Si(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Si(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&$t(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<i.viewFrom||t.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new ns(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Vn(t){var e=t.cm,i=e.display;t.updatedDisplay&&vn(e),t.barMeasure=Mn(e),i.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Ti(e,i.maxLine,i.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+t.adjustWidthTo+Si(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+t.adjustWidthTo-ki(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=i.input.prepareSelection())}function Wn(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&On(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var i=t.focus&&t.focus==M();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,i),(t.updatedDisplay||t.startHeight!=e.doc.height)&&An(e,t.barMeasure),t.updatedDisplay&&as(e,t.barMeasure),t.selectionChanged&&fn(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),i&&pn(t.cm)}function Gn(t){var e=t.cm,i=e.display,n=e.doc;(t.updatedDisplay&&os(e,t.update),null==i.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=t.scrollTop&&Dn(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&On(e,t.scrollLeft,!0,!0),t.scrollToPos)&&function(t,e){if(!ne(t,"scrollCursorIntoView")){var i=t.display,n=i.sizer.getBoundingClientRect(),s=null;if(e.top+n.top<0?s=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null!=s&&!p){var o=P("div","",null,"position: absolute;\n                         top: "+(e.top-i.viewOffset-wi(t.display))+"px;\n                         height: "+(e.bottom-e.top+Si(t)+i.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(s),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,i,n){var s;null==n&&(n=0),t.options.lineWrapping||e!=i||(i="before"==(e=e.ch?mt(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?mt(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var l=!1,r=Gi(t,e),a=i&&i!=e?Gi(t,i):r,h=Cn(t,s={left:Math.min(r.left,a.left),top:Math.min(r.top,a.top)-n,right:Math.max(r.left,a.left),bottom:Math.max(r.bottom,a.bottom)+n}),d=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=h.scrollTop&&(Pn(t,h.scrollTop),Math.abs(t.doc.scrollTop-d)>1&&(l=!0)),null!=h.scrollLeft&&(On(t,h.scrollLeft),Math.abs(t.doc.scrollLeft-c)>1&&(l=!0)),!l)break}return s}(e,xt(n,t.scrollToPos.from),xt(n,t.scrollToPos.to),t.scrollToPos.margin));var s=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(s)for(var l=0;l<s.length;++l)s[l].lines.length||ie(s[l],"hide");if(o)for(var r=0;r<o.length;++r)o[r].lines.length&&ie(o[r],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&ie(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Un(t,e){if(t.curOp)return e();Fn(t);try{return e()}finally{Xn(t)}}function $n(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Fn(t);try{return e.apply(t,arguments)}finally{Xn(t)}}}function qn(t){return function(){if(this.curOp)return t.apply(this,arguments);Fn(this);try{return t.apply(this,arguments)}finally{Xn(this)}}}function Yn(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Fn(e);try{return t.apply(this,arguments)}finally{Xn(e)}}}function Kn(t,e,i,n){null==e&&(e=t.doc.first),null==i&&(i=t.doc.first+t.doc.size),n||(n=0);var s=t.display;if(n&&i<s.viewTo&&(null==s.updateLineNumbers||s.updateLineNumbers>e)&&(s.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=s.viewTo)kt&&Xt(t.doc,e)<s.viewTo&&Jn(t);else if(i<=s.viewFrom)kt&&zt(t.doc,i+n)>s.viewFrom?Jn(t):(s.viewFrom+=n,s.viewTo+=n);else if(e<=s.viewFrom&&i>=s.viewTo)Jn(t);else if(e<=s.viewFrom){var o=Zn(t,i,i+n,1);o?(s.view=s.view.slice(o.index),s.viewFrom=o.lineN,s.viewTo+=n):Jn(t)}else if(i>=s.viewTo){var l=Zn(t,e,e,-1);l?(s.view=s.view.slice(0,l.index),s.viewTo=l.lineN):Jn(t)}else{var r=Zn(t,e,e,-1),a=Zn(t,i,i+n,1);r&&a?(s.view=s.view.slice(0,r.index).concat(ni(t,r.lineN,a.lineN)).concat(s.view.slice(a.index)),s.viewTo+=n):Jn(t)}var h=s.externalMeasured;h&&(i<h.lineN?h.lineN+=n:e<h.lineN+h.size&&(s.externalMeasured=null))}function Qn(t,e,i){t.curOp.viewChanged=!0;var n=t.display,s=t.display.externalMeasured;if(s&&e>=s.lineN&&e<s.lineN+s.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var o=n.view[rn(t,e)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==F(l,i)&&l.push(i)}}}function Jn(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Zn(t,e,i,n){var s,o=rn(t,e),l=t.display.view;if(!kt||i==t.doc.first+t.doc.size)return{index:o,lineN:i};for(var r=t.display.viewFrom,a=0;a<o;a++)r+=l[a].size;if(r!=e){if(n>0){if(o==l.length-1)return null;s=r+l[o].size-e,o++}else s=r-e;e+=s,i+=s}for(;Xt(t.doc,i)!=i;){if(o==(n<0?0:l.length-1))return null;i+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:i}}function ts(t){for(var e=t.display.view,i=0,n=0;n<e.length;n++){var s=e[n];s.hidden||s.node&&!s.changes||++i}return i}function es(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,L(is,t))}function is(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var i=+new Date+t.options.workTime,n=He(t,e.highlightFrontier),s=[];e.iter(n.line,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(n.line>=t.display.viewFrom){var l=o.styles,r=o.text.length>t.options.maxHighlightLength?Pe(e.mode,n.state):null,a=Ae(t,o,n,!0);r&&(n.state=r),o.styles=a.styles;var h=o.styleClasses,d=a.classes;d?o.styleClasses=d:h&&(o.styleClasses=null);for(var c=!l||l.length!=o.styles.length||h!=d&&(!h||!d||h.bgClass!=d.bgClass||h.textClass!=d.textClass),u=0;!c&&u<l.length;++u)c=l[u]!=o.styles[u];c&&s.push(n.line),o.stateAfter=n.save(),n.nextLine()}else o.text.length<=t.options.maxHighlightLength&&Be(t,o.text,n),o.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>i)return es(t,t.options.workDelay),!0}),e.highlightFrontier=n.line,e.modeFrontier=Math.max(e.modeFrontier,n.line),s.length&&Un(t,function(){for(var e=0;e<s.length;e++)Qn(t,s[e],"text")})}}var ns=function(t,e,i){var n=t.display;this.viewport=e,this.visible=yn(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=ki(t),this.force=i,this.dims=en(t),this.events=[]};function ss(t,e){var i=t.display,n=t.doc;if(e.editorIsHidden)return Jn(t),!1;if(!e.force&&e.visible.from>=i.viewFrom&&e.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==ts(t))return!1;xn(t)&&(Jn(t),e.dims=en(t));var s=n.first+n.size,o=Math.max(e.visible.from-t.options.viewportMargin,n.first),l=Math.min(s,e.visible.to+t.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>l&&i.viewTo-l<20&&(l=Math.min(s,i.viewTo)),kt&&(o=Xt(t.doc,o),l=zt(t.doc,l));var r=o!=i.viewFrom||l!=i.viewTo||i.lastWrapHeight!=e.wrapperHeight||i.lastWrapWidth!=e.wrapperWidth;!function(t,e,i){var n=t.display;0==n.view.length||e>=n.viewTo||i<=n.viewFrom?(n.view=ni(t,e,i),n.viewFrom=e):(n.viewFrom>e?n.view=ni(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(rn(t,e))),n.viewFrom=e,n.viewTo<i?n.view=n.view.concat(ni(t,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,rn(t,i)))),n.viewTo=i}(t,o,l),i.viewOffset=Gt(rt(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var h=ts(t);if(!r&&0==h&&!e.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var d=function(t){if(t.hasFocus())return null;var e=M();if(!e||!O(t.display.lineDiv,e))return null;var i={activeElt:e};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&O(t.display.lineDiv,n.anchorNode)&&(i.anchorNode=n.anchorNode,i.anchorOffset=n.anchorOffset,i.focusNode=n.focusNode,i.focusOffset=n.focusOffset)}return i}(t);return h>4&&(i.lineDiv.style.display="none"),function(t,e,i){var n=t.display,s=t.options.lineNumbers,o=n.lineDiv,l=o.firstChild;function r(e){var i=e.nextSibling;return a&&v&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),i}for(var h=n.view,d=n.viewFrom,c=0;c<h.length;c++){var u=h[c];if(u.hidden);else if(u.node&&u.node.parentNode==o){for(;l!=u.node;)l=r(l);var f=s&&null!=e&&e<=d&&u.lineNumber;u.changes&&(F(u.changes,"gutter")>-1&&(f=!1),ai(t,u,d,i)),f&&(N(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(pt(t.options,d)))),l=u.node.nextSibling}else{var p=mi(t,u,d,i);o.insertBefore(p,l)}d+=u.size}for(;l;)l=r(l)}(t,i.updateLineNumbers,e.dims),h>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(t){if(t&&t.activeElt&&t.activeElt!=M()&&(t.activeElt.focus(),t.anchorNode&&O(document.body,t.anchorNode)&&O(document.body,t.focusNode))){var e=window.getSelection(),i=document.createRange();i.setEnd(t.anchorNode,t.anchorOffset),i.collapse(!1),e.removeAllRanges(),e.addRange(i),e.extend(t.focusNode,t.focusOffset)}}(d),N(i.cursorDiv),N(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,r&&(i.lastWrapHeight=e.wrapperHeight,i.lastWrapWidth=e.wrapperWidth,es(t,400)),i.updateLineNumbers=null,!0}function os(t,e){for(var i=e.viewport,n=!0;(n&&t.options.lineWrapping&&e.oldDisplayWidth!=ki(t)||(i&&null!=i.top&&(i={top:Math.min(t.doc.height+xi(t.display)-Ii(t),i.top)}),e.visible=yn(t.display,t.doc,i),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&ss(t,e);n=!1){vn(t);var s=Mn(t);an(t),An(t,s),as(t,s),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ls(t,e){var i=new ns(t,e);if(ss(t,i)){vn(t),os(t,i);var n=Mn(t);an(t),An(t,n),as(t,n),i.finish()}}function rs(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function as(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Si(t)+"px"}function hs(t){var e=t.display.gutters,i=t.options.gutters;N(e);for(var n=0;n<i.length;++n){var s=i[n],o=e.appendChild(P("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none",rs(t)}function ds(t){var e=F(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}ns.prototype.signal=function(t,e){oe(t,e)&&this.events.push(arguments)},ns.prototype.finish=function(){for(var t=0;t<this.events.length;t++)ie.apply(null,this.events[t])};var cs=0,us=null;function fs(t){var e=t.wheelDeltaX,i=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==i&&t.detail&&t.axis==t.VERTICAL_AXIS?i=t.detail:null==i&&(i=t.wheelDelta),{x:e,y:i}}function ps(t){var e=fs(t);return e.x*=us,e.y*=us,e}function ms(t,e){var n=fs(e),s=n.x,o=n.y,l=t.display,r=l.scroller,h=r.scrollWidth>r.clientWidth,d=r.scrollHeight>r.clientHeight;if(s&&h||o&&d){if(o&&v&&a)t:for(var u=e.target,f=l.view;u!=r;u=u.parentNode)for(var p=0;p<f.length;p++)if(f[p].node==u){t.display.currentWheelTarget=u;break t}if(s&&!i&&!c&&null!=us)return o&&d&&Pn(t,Math.max(0,r.scrollTop+o*us)),On(t,Math.max(0,r.scrollLeft+s*us)),(!o||o&&d)&&re(e),void(l.wheelStartX=null);if(o&&null!=us){var m=o*us,g=t.doc.scrollTop,_=g+l.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):_=Math.min(t.doc.height,_+m+50),ls(t,{top:g,bottom:_})}cs<20&&(null==l.wheelStartX?(l.wheelStartX=r.scrollLeft,l.wheelStartY=r.scrollTop,l.wheelDX=s,l.wheelDY=o,setTimeout(function(){if(null!=l.wheelStartX){var t=r.scrollLeft-l.wheelStartX,e=r.scrollTop-l.wheelStartY,i=e&&l.wheelDY&&e/l.wheelDY||t&&l.wheelDX&&t/l.wheelDX;l.wheelStartX=l.wheelStartY=null,i&&(us=(us*cs+i)/(cs+1),++cs)}},200)):(l.wheelDX+=s,l.wheelDY+=o))}}l?us=-.53:i?us=15:d?us=-.7:u&&(us=-1/3);var gs=function(t,e){this.ranges=t,this.primIndex=e};gs.prototype.primary=function(){return this.ranges[this.primIndex]},gs.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var i=this.ranges[e],n=t.ranges[e];if(!_t(i.anchor,n.anchor)||!_t(i.head,n.head))return!1}return!0},gs.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new _s(vt(this.ranges[e].anchor),vt(this.ranges[e].head));return new gs(t,this.primIndex)},gs.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},gs.prototype.contains=function(t,e){e||(e=t);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(gt(e,n.from())>=0&&gt(t,n.to())<=0)return i}return-1};var _s=function(t,e){this.anchor=t,this.head=e};function vs(t,e){var i=t[e];t.sort(function(t,e){return gt(t.from(),e.from())}),e=F(t,i);for(var n=1;n<t.length;n++){var s=t[n],o=t[n-1];if(gt(o.to(),s.from())>=0){var l=yt(o.from(),s.from()),r=bt(o.to(),s.to()),a=o.empty()?s.from()==s.head:o.from()==o.head;n<=e&&--e,t.splice(--n,2,new _s(a?r:l,a?l:r))}}return new gs(t,e)}function bs(t,e){return new gs([new _s(t,e||t)],0)}function ys(t){return t.text?mt(t.from.line+t.text.length-1,Y(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function ws(t,e){if(gt(t,e.from)<0)return t;if(gt(t,e.to)<=0)return ys(e);var i=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=ys(e).ch-e.to.ch),mt(i,n)}function xs(t,e){for(var i=[],n=0;n<t.sel.ranges.length;n++){var s=t.sel.ranges[n];i.push(new _s(ws(s.anchor,e),ws(s.head,e)))}return vs(i,t.sel.primIndex)}function Cs(t,e,i){return t.line==e.line?mt(i.line,t.ch-e.ch+i.ch):mt(i.line+(t.line-e.line),t.ch)}function Ss(t){t.doc.mode=Ie(t.options,t.doc.modeOption),ks(t)}function ks(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,es(t,100),t.state.modeGen++,t.curOp&&Kn(t)}function Is(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Y(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Ns(t,e,i,n){function s(t){return i?i[t]:null}function o(t,i,s){!function(t,e,i,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Ot(t),Mt(t,i);var s=n?n(t):1;s!=t.height&&dt(t,s)}(t,i,s,n),li(t,"change",t,e)}function l(t,e){for(var i=[],o=t;o<e;++o)i.push(new Ge(h[o],s(o),n));return i}var r=e.from,a=e.to,h=e.text,d=rt(t,r.line),c=rt(t,a.line),u=Y(h),f=s(h.length-1),p=a.line-r.line;if(e.full)t.insert(0,l(0,h.length)),t.remove(h.length,t.size-h.length);else if(Is(t,e)){var m=l(0,h.length-1);o(c,c.text,f),p&&t.remove(r.line,p),m.length&&t.insert(r.line,m)}else if(d==c)if(1==h.length)o(d,d.text.slice(0,r.ch)+u+d.text.slice(a.ch),f);else{var g=l(1,h.length-1);g.push(new Ge(u+d.text.slice(a.ch),f,n)),o(d,d.text.slice(0,r.ch)+h[0],s(0)),t.insert(r.line+1,g)}else if(1==h.length)o(d,d.text.slice(0,r.ch)+h[0]+c.text.slice(a.ch),s(0)),t.remove(r.line+1,p);else{o(d,d.text.slice(0,r.ch)+h[0],s(0)),o(c,u+c.text.slice(a.ch),f);var _=l(1,h.length-1);p>1&&t.remove(r.line+1,p-1),t.insert(r.line+1,_)}li(t,"change",t,e)}function Ts(t,e,i){!function t(n,s,o){if(n.linked)for(var l=0;l<n.linked.length;++l){var r=n.linked[l];if(r.doc!=s){var a=o&&r.sharedHist;i&&!a||(e(r.doc,a),t(r.doc,n,a))}}}(t,null,!0)}function Ps(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,on(t),Ss(t),Ds(t),t.options.lineWrapping||$t(t),t.options.mode=e.modeOption,Kn(t)}function Ds(t){("rtl"==t.doc.direction?E:I)(t.display.lineDiv,"CodeMirror-rtl")}function Os(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Ms(t,e){var i={from:vt(e.from),to:ys(e),text:at(t,e.from,e.to)};return Hs(t,i,e.from.line,e.to.line+1),Ts(t,function(t){return Hs(t,i,e.from.line,e.to.line+1)},!0),i}function Es(t){for(;t.length;){if(!Y(t).ranges)break;t.pop()}}function js(t,e,i,n){var s=t.history;s.undone.length=0;var o,l,r=+new Date;if((s.lastOp==n||s.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&s.lastModTime>r-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Es(t.done),Y(t.done)):t.done.length&&!Y(t.done).ranges?Y(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Y(t.done)):void 0}(s,s.lastOp==n)))l=Y(o.changes),0==gt(e.from,e.to)&&0==gt(e.from,l.to)?l.to=ys(e):o.changes.push(Ms(t,e));else{var a=Y(s.done);for(a&&a.ranges||Ls(t.sel,s.done),o={changes:[Ms(t,e)],generation:s.generation},s.done.push(o);s.done.length>s.undoDepth;)s.done.shift(),s.done[0].ranges||s.done.shift()}s.done.push(i),s.generation=++s.maxGeneration,s.lastModTime=s.lastSelTime=r,s.lastOp=s.lastSelOp=n,s.lastOrigin=s.lastSelOrigin=e.origin,l||ie(t,"historyAdded")}function As(t,e,i,n){var s=t.history,o=n&&n.origin;i==s.lastSelOp||o&&s.lastSelOrigin==o&&(s.lastModTime==s.lastSelTime&&s.lastOrigin==o||function(t,e,i,n){var s=e.charAt(0);return"*"==s||"+"==s&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,Y(s.done),e))?s.done[s.done.length-1]=e:Ls(e,s.done),s.lastSelTime=+new Date,s.lastSelOrigin=o,s.lastSelOp=i,n&&!1!==n.clearRedo&&Es(s.undone)}function Ls(t,e){var i=Y(e);i&&i.ranges&&i.equals(t)||e.push(t)}function Hs(t,e,i,n){var s=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,i),Math.min(t.first+t.size,n),function(i){i.markedSpans&&((s||(s=e["spans_"+t.id]={}))[o]=i.markedSpans),++o})}function Bs(t){if(!t)return null;for(var e,i=0;i<t.length;++i)t[i].marker.explicitlyCleared?e||(e=t.slice(0,i)):e&&e.push(t[i]);return e?e.length?e:null:t}function Rs(t,e){var i=function(t,e){var i=e["spans_"+t.id];if(!i)return null;for(var n=[],s=0;s<e.text.length;++s)n.push(Bs(i[s]));return n}(t,e),n=Pt(t,e);if(!i)return n;if(!n)return i;for(var s=0;s<i.length;++s){var o=i[s],l=n[s];if(o&&l)t:for(var r=0;r<l.length;++r){for(var a=l[r],h=0;h<o.length;++h)if(o[h].marker==a.marker)continue t;o.push(a)}else l&&(i[s]=l)}return i}function Fs(t,e,i){for(var n=[],s=0;s<t.length;++s){var o=t[s];if(o.ranges)n.push(i?gs.prototype.deepCopy.call(o):o);else{var l=o.changes,r=[];n.push({changes:r});for(var a=0;a<l.length;++a){var h=l[a],d=void 0;if(r.push({from:h.from,to:h.to,text:h.text}),e)for(var c in h)(d=c.match(/^spans_(\d+)$/))&&F(e,Number(d[1]))>-1&&(Y(r)[c]=h[c],delete h[c])}}}return n}function Xs(t,e,i,n){if(n){var s=t.anchor;if(i){var o=gt(e,s)<0;o!=gt(i,s)<0?(s=e,e=i):o!=gt(e,i)<0&&(e=i)}return new _s(s,e)}return new _s(i||e,e)}function zs(t,e,i,n,s){null==s&&(s=t.cm&&(t.cm.display.shift||t.extend)),$s(t,new gs([Xs(t.sel.primary(),e,i,s)],0),n)}function Vs(t,e,i){for(var n=[],s=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)n[o]=Xs(t.sel.ranges[o],e[o],null,s);$s(t,vs(n,t.sel.primIndex),i)}function Ws(t,e,i,n){var s=t.sel.ranges.slice(0);s[e]=i,$s(t,vs(s,t.sel.primIndex),n)}function Gs(t,e,i,n){$s(t,bs(e,i),n)}function Us(t,e,i){var n=t.history.done,s=Y(n);s&&s.ranges?(n[n.length-1]=e,qs(t,e,i)):$s(t,e,i)}function $s(t,e,i){qs(t,e,i),As(t,t.sel,t.cm?t.cm.curOp.id:NaN,i)}function qs(t,e,i){(oe(t,"beforeSelectionChange")||t.cm&&oe(t.cm,"beforeSelectionChange"))&&(e=function(t,e,i){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var i=0;i<e.length;i++)this.ranges[i]=new _s(xt(t,e[i].anchor),xt(t,e[i].head))},origin:i&&i.origin};return ie(t,"beforeSelectionChange",t,n),t.cm&&ie(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?vs(n.ranges,n.ranges.length-1):e}(t,e,i)),Ys(t,Qs(t,e,i&&i.bias||(gt(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!t.cm||kn(t.cm)}function Ys(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,se(t.cm)),li(t,"cursorActivity",t))}function Ks(t){Ys(t,Qs(t,t.sel,null,!1))}function Qs(t,e,i,n){for(var s,o=0;o<e.ranges.length;o++){var l=e.ranges[o],r=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],a=Zs(t,l.anchor,r&&r.anchor,i,n),h=Zs(t,l.head,r&&r.head,i,n);(s||a!=l.anchor||h!=l.head)&&(s||(s=e.ranges.slice(0,o)),s[o]=new _s(a,h))}return s?vs(s,e.primIndex):e}function Js(t,e,i,n,s){var o=rt(t,e.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var r=o.markedSpans[l],a=r.marker;if((null==r.from||(a.inclusiveLeft?r.from<=e.ch:r.from<e.ch))&&(null==r.to||(a.inclusiveRight?r.to>=e.ch:r.to>e.ch))){if(s&&(ie(a,"beforeCursorEnter"),a.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(!a.atomic)continue;if(i){var h=a.find(n<0?1:-1),d=void 0;if((n<0?a.inclusiveRight:a.inclusiveLeft)&&(h=to(t,h,-n,h&&h.line==e.line?o:null)),h&&h.line==e.line&&(d=gt(h,i))&&(n<0?d<0:d>0))return Js(t,h,e,n,s)}var c=a.find(n<0?-1:1);return(n<0?a.inclusiveLeft:a.inclusiveRight)&&(c=to(t,c,n,c.line==e.line?o:null)),c?Js(t,c,e,n,s):null}}return e}function Zs(t,e,i,n,s){var o=n||1,l=Js(t,e,i,o,s)||!s&&Js(t,e,i,o,!0)||Js(t,e,i,-o,s)||!s&&Js(t,e,i,-o,!0);return l||(t.cantEdit=!0,mt(t.first,0))}function to(t,e,i,n){return i<0&&0==e.ch?e.line>t.first?xt(t,mt(e.line-1)):null:i>0&&e.ch==(n||rt(t,e.line)).text.length?e.line<t.first+t.size-1?mt(e.line+1,0):null:new mt(e.line,e.ch+i)}function eo(t){t.setSelection(mt(t.firstLine(),0),mt(t.lastLine()),V)}function io(t,e,i){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return n.canceled=!0}};return i&&(n.update=function(e,i,s,o){e&&(n.from=xt(t,e)),i&&(n.to=xt(t,i)),s&&(n.text=s),void 0!==o&&(n.origin=o)}),ie(t,"beforeChange",t,n),t.cm&&ie(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function no(t,e,i){if(t.cm){if(!t.cm.curOp)return $n(t.cm,no)(t,e,i);if(t.cm.state.suppressEdits)return}if(!(oe(t,"beforeChange")||t.cm&&oe(t.cm,"beforeChange"))||(e=io(t,e,!0))){var n=St&&!i&&function(t,e,i){var n=null;if(t.iter(e.line,i.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var i=t.markedSpans[e].marker;!i.readOnly||n&&-1!=F(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var s=[{from:e,to:i}],o=0;o<n.length;++o)for(var l=n[o],r=l.find(0),a=0;a<s.length;++a){var h=s[a];if(!(gt(h.to,r.from)<0||gt(h.from,r.to)>0)){var d=[a,1],c=gt(h.from,r.from),u=gt(h.to,r.to);(c<0||!l.inclusiveLeft&&!c)&&d.push({from:h.from,to:r.from}),(u>0||!l.inclusiveRight&&!u)&&d.push({from:r.to,to:h.to}),s.splice.apply(s,d),a+=d.length-3}}return s}(t,e.from,e.to);if(n)for(var s=n.length-1;s>=0;--s)so(t,{from:n[s].from,to:n[s].to,text:s?[""]:e.text,origin:e.origin});else so(t,e)}}function so(t,e){if(1!=e.text.length||""!=e.text[0]||0!=gt(e.from,e.to)){var i=xs(t,e);js(t,e,i,t.cm?t.cm.curOp.id:NaN),ro(t,e,i,Pt(t,e));var n=[];Ts(t,function(t,i){i||-1!=F(n,t.history)||(uo(t.history,e),n.push(t.history)),ro(t,e,null,Pt(t,e))})}}function oo(t,e,i){if(!t.cm||!t.cm.state.suppressEdits||i){for(var n,s=t.history,o=t.sel,l="undo"==e?s.done:s.undone,r="undo"==e?s.undone:s.done,a=0;a<l.length&&(n=l[a],i?!n.ranges||n.equals(t.sel):n.ranges);a++);if(a!=l.length){for(s.lastOrigin=s.lastSelOrigin=null;(n=l.pop()).ranges;){if(Ls(n,r),i&&!n.equals(t.sel))return void $s(t,n,{clearRedo:!1});o=n}var h=[];Ls(o,r),r.push({changes:h,generation:s.generation}),s.generation=n.generation||++s.maxGeneration;for(var d=oe(t,"beforeChange")||t.cm&&oe(t.cm,"beforeChange"),c=function(i){var s=n.changes[i];if(s.origin=e,d&&!io(t,s,!1))return l.length=0,{};h.push(Ms(t,s));var o=i?xs(t,s):Y(l);ro(t,s,o,Rs(t,s)),!i&&t.cm&&t.cm.scrollIntoView({from:s.from,to:ys(s)});var r=[];Ts(t,function(t,e){e||-1!=F(r,t.history)||(uo(t.history,s),r.push(t.history)),ro(t,s,null,Rs(t,s))})},u=n.changes.length-1;u>=0;--u){var f=c(u);if(f)return f.v}}}}function lo(t,e){if(0!=e&&(t.first+=e,t.sel=new gs(K(t.sel.ranges,function(t){return new _s(mt(t.anchor.line+e,t.anchor.ch),mt(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){Kn(t.cm,t.first,t.first-e,e);for(var i=t.cm.display,n=i.viewFrom;n<i.viewTo;n++)Qn(t.cm,n,"gutter")}}function ro(t,e,i,n){if(t.cm&&!t.cm.curOp)return $n(t.cm,ro)(t,e,i,n);if(e.to.line<t.first)lo(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var s=e.text.length-1-(t.first-e.from.line);lo(t,s),e={from:mt(t.first,0),to:mt(e.to.line+s,e.to.ch),text:[Y(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:mt(o,rt(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=at(t,e.from,e.to),i||(i=xs(t,e)),t.cm?function(t,e,i){var n=t.doc,s=t.display,o=e.from,l=e.to,r=!1,a=o.line;t.options.lineWrapping||(a=ct(Ft(rt(n,o.line))),n.iter(a,l.line+1,function(t){if(t==s.maxLine)return r=!0,!0}));n.sel.contains(e.from,e.to)>-1&&se(t);Ns(n,e,i,sn(t)),t.options.lineWrapping||(n.iter(a,o.line+e.text.length,function(t){var e=Ut(t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,r=!1)}),r&&(t.curOp.updateMaxLine=!0));(function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var i=t.first,n=e-1;n>i;n--){var s=rt(t,n).stateAfter;if(s&&(!(s instanceof Ee)||n+s.lookAhead<e)){i=n+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,i)}})(n,o.line),es(t,400);var h=e.text.length-(l.line-o.line)-1;e.full?Kn(t):o.line!=l.line||1!=e.text.length||Is(t.doc,e)?Kn(t,o.line,l.line+1,h):Qn(t,o.line,"text");var d=oe(t,"changes"),c=oe(t,"change");if(c||d){var u={from:o,to:l,text:e.text,removed:e.removed,origin:e.origin};c&&li(t,"change",t,u),d&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(u)}t.display.selForContextMenu=null}(t.cm,e,n):Ns(t,e,n),qs(t,i,V)}}function ao(t,e,i,n,s){var o;(n||(n=i),gt(n,i)<0)&&(i=(o=[n,i])[0],n=o[1]);"string"==typeof e&&(e=t.splitLines(e)),no(t,{from:i,to:n,text:e,origin:s})}function ho(t,e,i,n){i<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function co(t,e,i,n){for(var s=0;s<t.length;++s){var o=t[s],l=!0;if(o.ranges){o.copied||((o=t[s]=o.deepCopy()).copied=!0);for(var r=0;r<o.ranges.length;r++)ho(o.ranges[r].anchor,e,i,n),ho(o.ranges[r].head,e,i,n)}else{for(var a=0;a<o.changes.length;++a){var h=o.changes[a];if(i<h.from.line)h.from=mt(h.from.line+n,h.from.ch),h.to=mt(h.to.line+n,h.to.ch);else if(e<=h.to.line){l=!1;break}}l||(t.splice(0,s+1),s=0)}}}function uo(t,e){var i=e.from.line,n=e.to.line,s=e.text.length-(n-i)-1;co(t.done,i,n,s),co(t.undone,i,n,s)}function fo(t,e,i,n){var s=e,o=e;return"number"==typeof e?o=rt(t,wt(t,e)):s=ct(e),null==s?null:(n(o,s)&&t.cm&&Qn(t.cm,s,i),o)}function po(t){this.lines=t,this.parent=null;for(var e=0,i=0;i<t.length;++i)t[i].parent=this,e+=t[i].height;this.height=e}function mo(t){this.children=t;for(var e=0,i=0,n=0;n<t.length;++n){var s=t[n];e+=s.chunkSize(),i+=s.height,s.parent=this}this.size=e,this.height=i,this.parent=null}_s.prototype.from=function(){return yt(this.anchor,this.head)},_s.prototype.to=function(){return bt(this.anchor,this.head)},_s.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},po.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var i=t,n=t+e;i<n;++i){var s=this.lines[i];this.height-=s.height,Ue(s),li(s,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,i){for(var n=t+e;t<n;++t)if(i(this.lines[t]))return!0}},mo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var i=0;i<this.children.length;++i){var n=this.children[i],s=n.chunkSize();if(t<s){var o=Math.min(e,s-t),l=n.height;if(n.removeInner(t,o),this.height-=l-n.height,s==o&&(this.children.splice(i--,1),n.parent=null),0==(e-=o))break;t=0}else t-=s}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof po))){var r=[];this.collapse(r),this.children=[new po(r)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,i){this.size+=e.length,this.height+=i;for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(t<=o){if(s.insertInner(t,e,i),s.lines&&s.lines.length>50){for(var l=s.lines.length%25+25,r=l;r<s.lines.length;){var a=new po(s.lines.slice(r,r+=25));s.height-=a.height,this.children.splice(++n,0,a),a.parent=this}s.lines=s.lines.slice(0,l),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new mo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var i=F(t.parent.children,t);t.parent.children.splice(i+1,0,e)}else{var n=new mo(t.children);n.parent=t,t.children=[n,e],t=n}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,i){for(var n=0;n<this.children.length;++n){var s=this.children[n],o=s.chunkSize();if(t<o){var l=Math.min(e,o-t);if(s.iterN(t,l,i))return!0;if(0==(e-=l))break;t=0}else t-=o}}};var go=function(t,e,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=t,this.node=e};function _o(t,e,i){Gt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Sn(t,i)}go.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,i=this.line,n=ct(i);if(null!=n&&e){for(var s=0;s<e.length;++s)e[s]==this&&e.splice(s--,1);e.length||(i.widgets=null);var o=bi(this);dt(i,Math.max(0,i.height-o)),t&&(Un(t,function(){_o(t,i,-o),Qn(t,n,"widget")}),li(t,"lineWidgetCleared",t,this,n))}},go.prototype.changed=function(){var t=this,e=this.height,i=this.doc.cm,n=this.line;this.height=null;var s=bi(this)-e;s&&(dt(n,n.height+s),i&&Un(i,function(){i.curOp.forceUpdate=!0,_o(i,n,s),li(i,"lineWidgetChanged",i,t,ct(n))}))},le(go);var vo=0,bo=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++vo};function yo(t,e,i,n,s){if(n&&n.shared)return function(t,e,i,n,s){(n=H(n)).shared=!1;var o=[yo(t,e,i,n,s)],l=o[0],r=n.widgetNode;return Ts(t,function(t){r&&(n.widgetNode=r.cloneNode(!0)),o.push(yo(t,xt(t,e),xt(t,i),n,s));for(var a=0;a<t.linked.length;++a)if(t.linked[a].isParent)return;l=Y(o)}),new wo(o,l)}(t,e,i,n,s);if(t.cm&&!t.cm.curOp)return $n(t.cm,yo)(t,e,i,n,s);var o=new bo(t,s),l=gt(e,i);if(n&&H(n,o,!1),l>0||0==l&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=D("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Rt(t,e.line,e,i,o)||e.line!=i.line&&Rt(t,i.line,e,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");kt=!0}o.addToHistory&&js(t,{from:e,to:i,origin:"markText"},t.sel,NaN);var r,a=e.line,h=t.cm;if(t.iter(a,i.line+1,function(t){h&&o.collapsed&&!h.options.lineWrapping&&Ft(t)==h.display.maxLine&&(r=!0),o.collapsed&&a!=e.line&&dt(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new It(o,a==e.line?e.ch:null,a==i.line?i.ch:null)),++a}),o.collapsed&&t.iter(e.line,i.line+1,function(e){Vt(t,e)&&dt(e,0)}),o.clearOnEnter&&Zt(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(St=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++vo,o.atomic=!0),h){if(r&&(h.curOp.updateMaxLine=!0),o.collapsed)Kn(h,e.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var d=e.line;d<=i.line;d++)Qn(h,d,"text");o.atomic&&Ks(h.doc),li(h,"markerAdded",h,o)}return o}bo.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Fn(t),oe(this,"clear")){var i=this.find();i&&li(this,"clear",i.from,i.to)}for(var n=null,s=null,o=0;o<this.lines.length;++o){var l=this.lines[o],r=Nt(l.markedSpans,this);t&&!this.collapsed?Qn(t,ct(l),"text"):t&&(null!=r.to&&(s=ct(l)),null!=r.from&&(n=ct(l))),l.markedSpans=Tt(l.markedSpans,r),null==r.from&&this.collapsed&&!Vt(this.doc,l)&&t&&dt(l,Zi(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var h=Ft(this.lines[a]),d=Ut(h);d>t.display.maxLineLength&&(t.display.maxLine=h,t.display.maxLineLength=d,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&Kn(t,n,s+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Ks(t.doc)),t&&li(t,"markerCleared",t,this,n,s),e&&Xn(t),this.parent&&this.parent.clear()}},bo.prototype.find=function(t,e){var i,n;null==t&&"bookmark"==this.type&&(t=1);for(var s=0;s<this.lines.length;++s){var o=this.lines[s],l=Nt(o.markedSpans,this);if(null!=l.from&&(i=mt(e?o:ct(o),l.from),-1==t))return i;if(null!=l.to&&(n=mt(e?o:ct(o),l.to),1==t))return n}return i&&{from:i,to:n}},bo.prototype.changed=function(){var t=this,e=this.find(-1,!0),i=this,n=this.doc.cm;e&&n&&Un(n,function(){var s=e.line,o=ct(e.line),l=Pi(n,o);if(l&&(Li(l),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Vt(i.doc,s)&&null!=i.height){var r=i.height;i.height=null;var a=bi(i)-r;a&&dt(s,s.height+a)}li(n,"markerChanged",n,t)})},bo.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=F(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},bo.prototype.detachLine=function(t){if(this.lines.splice(F(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},le(bo);var wo=function(t,e){this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=this};function xo(t){return t.findMarks(mt(t.first,0),t.clipPos(mt(t.lastLine())),function(t){return t.parent})}function Co(t){for(var e=function(e){var i=t[e],n=[i.primary.doc];Ts(i.primary.doc,function(t){return n.push(t)});for(var s=0;s<i.markers.length;s++){var o=i.markers[s];-1==F(n,o.doc)&&(o.parent=null,i.markers.splice(s--,1))}},i=0;i<t.length;i++)e(i)}wo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();li(this,"clear")}},wo.prototype.find=function(t,e){return this.primary.find(t,e)},le(wo);var So=0,ko=function(t,e,i,n,s){if(!(this instanceof ko))return new ko(t,e,i,n,s);null==i&&(i=0),mo.call(this,[new po([new Ge("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var o=mt(i,0);this.sel=bs(o),this.history=new Os(null),this.id=++So,this.modeOption=e,this.lineSep=n,this.direction="rtl"==s?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Ns(this,{from:o,to:o,text:t}),$s(this,bs(o),V)};ko.prototype=J(mo.prototype,{constructor:ko,iter:function(t,e,i){i?this.iterN(t-this.first,e-t,i):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var i=0,n=0;n<e.length;++n)i+=e[n].height;this.insertInner(t-this.first,e,i)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=ht(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:Yn(function(t){var e=mt(this.first,0),i=this.first+this.size-1;no(this,{from:e,to:mt(i,rt(this,i).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&In(this.cm,0,0),$s(this,bs(e),V)}),replaceRange:function(t,e,i,n){ao(this,t,e=xt(this,e),i=i?xt(this,i):e,n)},getRange:function(t,e,i){var n=at(this,xt(this,t),xt(this,e));return!1===i?n:n.join(i||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(ft(this,t))return rt(this,t)},getLineNumber:function(t){return ct(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=rt(this,t)),Ft(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return xt(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Yn(function(t,e,i){Gs(this,xt(this,"number"==typeof t?mt(t,e||0):t),null,i)}),setSelection:Yn(function(t,e,i){Gs(this,xt(this,t),xt(this,e||t),i)}),extendSelection:Yn(function(t,e,i){zs(this,xt(this,t),e&&xt(this,e),i)}),extendSelections:Yn(function(t,e){Vs(this,Ct(this,t),e)}),extendSelectionsBy:Yn(function(t,e){Vs(this,Ct(this,K(this.sel.ranges,t)),e)}),setSelections:Yn(function(t,e,i){if(t.length){for(var n=[],s=0;s<t.length;s++)n[s]=new _s(xt(this,t[s].anchor),xt(this,t[s].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),$s(this,vs(n,e),i)}}),addSelection:Yn(function(t,e,i){var n=this.sel.ranges.slice(0);n.push(new _s(xt(this,t),xt(this,e||t))),$s(this,vs(n,n.length-1),i)}),getSelection:function(t){for(var e,i=this.sel.ranges,n=0;n<i.length;n++){var s=at(this,i[n].from(),i[n].to());e=e?e.concat(s):s}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],i=this.sel.ranges,n=0;n<i.length;n++){var s=at(this,i[n].from(),i[n].to());!1!==t&&(s=s.join(t||this.lineSeparator())),e[n]=s}return e},replaceSelection:function(t,e,i){for(var n=[],s=0;s<this.sel.ranges.length;s++)n[s]=t;this.replaceSelections(n,e,i||"+input")},replaceSelections:Yn(function(t,e,i){for(var n=[],s=this.sel,o=0;o<s.ranges.length;o++){var l=s.ranges[o];n[o]={from:l.from(),to:l.to(),text:this.splitLines(t[o]),origin:i}}for(var r=e&&"end"!=e&&function(t,e,i){for(var n=[],s=mt(t.first,0),o=s,l=0;l<e.length;l++){var r=e[l],a=Cs(r.from,s,o),h=Cs(ys(r),s,o);if(s=r.to,o=h,"around"==i){var d=t.sel.ranges[l],c=gt(d.head,d.anchor)<0;n[l]=new _s(c?h:a,c?a:h)}else n[l]=new _s(a,a)}return new gs(n,t.sel.primIndex)}(this,n,e),a=n.length-1;a>=0;a--)no(this,n[a]);r?Us(this,r):this.cm&&kn(this.cm)}),undo:Yn(function(){oo(this,"undo")}),redo:Yn(function(){oo(this,"redo")}),undoSelection:Yn(function(){oo(this,"undo",!0)}),redoSelection:Yn(function(){oo(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,i=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var s=0;s<t.undone.length;s++)t.undone[s].ranges||++i;return{undo:e,redo:i}},clearHistory:function(){this.history=new Os(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Fs(this.history.done),undone:Fs(this.history.undone)}},setHistory:function(t){var e=this.history=new Os(this.history.maxGeneration);e.done=Fs(t.done.slice(0),null,!0),e.undone=Fs(t.undone.slice(0),null,!0)},setGutterMarker:Yn(function(t,e,i){return fo(this,t,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=i,!i&&it(n)&&(t.gutterMarkers=null),!0})}),clearGutter:Yn(function(t){var e=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[t]&&fo(e,i,"gutter",function(){return i.gutterMarkers[t]=null,it(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!ft(this,t))return null;if(e=t,!(t=rt(this,t)))return null}else if(null==(e=ct(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Yn(function(t,e,i){return fo(this,t,"gutter"==e?"gutter":"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[n]){if(S(i).test(t[n]))return!1;t[n]+=" "+i}else t[n]=i;return!0})}),removeLineClass:Yn(function(t,e,i){return fo(this,t,"gutter"==e?"gutter":"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",s=t[n];if(!s)return!1;if(null==i)t[n]=null;else{var o=s.match(S(i));if(!o)return!1;var l=o.index+o[0].length;t[n]=s.slice(0,o.index)+(o.index&&l!=s.length?" ":"")+s.slice(l)||null}return!0})}),addLineWidget:Yn(function(t,e,i){return function(t,e,i,n){var s=new go(t,i,n),o=t.cm;return o&&s.noHScroll&&(o.display.alignWidgets=!0),fo(t,e,"widget",function(e){var i=e.widgets||(e.widgets=[]);if(null==s.insertAt?i.push(s):i.splice(Math.min(i.length-1,Math.max(0,s.insertAt)),0,s),s.line=e,o&&!Vt(t,e)){var n=Gt(e)<t.scrollTop;dt(e,e.height+bi(s)),n&&Sn(o,s.height),o.curOp.forceUpdate=!0}return!0}),li(o,"lineWidgetAdded",o,s,"number"==typeof e?e:ct(e)),s}(this,t,e,i)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,i){return yo(this,xt(this,t),xt(this,e),i,i&&i.type||"range")},setBookmark:function(t,e){var i={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return yo(this,t=xt(this,t),t,i,"bookmark")},findMarksAt:function(t){var e=[],i=rt(this,(t=xt(this,t)).line).markedSpans;if(i)for(var n=0;n<i.length;++n){var s=i[n];(null==s.from||s.from<=t.ch)&&(null==s.to||s.to>=t.ch)&&e.push(s.marker.parent||s.marker)}return e},findMarks:function(t,e,i){t=xt(this,t),e=xt(this,e);var n=[],s=t.line;return this.iter(t.line,e.line+1,function(o){var l=o.markedSpans;if(l)for(var r=0;r<l.length;r++){var a=l[r];null!=a.to&&s==t.line&&t.ch>=a.to||null==a.from&&s!=t.line||null!=a.from&&s==e.line&&a.from>=e.ch||i&&!i(a.marker)||n.push(a.marker.parent||a.marker)}++s}),n},getAllMarks:function(){var t=[];return this.iter(function(e){var i=e.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&t.push(i[n].marker)}),t},posFromIndex:function(t){var e,i=this.first,n=this.lineSeparator().length;return this.iter(function(s){var o=s.text.length+n;if(o>t)return e=t,!0;t-=o,++i}),xt(this,mt(i,e))},indexFromPos:function(t){var e=(t=xt(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+i}),e},copy:function(t){var e=new ko(ht(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,i=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<i&&(i=t.to);var n=new ko(ht(this,e,i),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var i=0;i<e.length;i++){var n=e[i],s=n.find(),o=t.clipPos(s.from),l=t.clipPos(s.to);if(gt(o,l)){var r=yo(t,o,l,n.primary,n.primary.type);n.markers.push(r),r.parent=n}}}(n,xo(this)),n},unlinkDoc:function(t){if(t instanceof xl&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Co(xo(this));break}}if(t.history==this.history){var i=[t.id];Ts(t,function(t){return i.push(t.id)},!0),t.history=new Os(null),t.history.done=Fs(this.history.done,i),t.history.undone=Fs(this.history.undone,i)}},iterLinkedDocs:function(t){Ts(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):be(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Yn(function(t){var e;("rtl"!=t&&(t="ltr"),t!=this.direction)&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&Un(e=this.cm,function(){Ds(e),Kn(e)}))})}),ko.prototype.eachLine=ko.prototype.iter;var Io=0;function No(t){var e=this;if(To(e),!ne(e,t)&&!yi(e.display,t)){re(t),l&&(Io=+new Date);var i=ln(e,t,!0),n=t.dataTransfer.files;if(i&&!e.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var s=n.length,o=Array(s),r=0,a=function(t,n){if(!e.options.allowDropFileTypes||-1!=F(e.options.allowDropFileTypes,t.type)){var l=new FileReader;l.onload=$n(e,function(){var t=l.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),o[n]=t,++r==s){var a={from:i=xt(e.doc,i),to:i,text:e.doc.splitLines(o.join(e.doc.lineSeparator())),origin:"paste"};no(e.doc,a),Us(e.doc,bs(i,ys(a)))}}),l.readAsText(t)}},h=0;h<s;++h)a(n[h],h);else{if(e.state.draggingText&&e.doc.sel.contains(i)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var d=t.dataTransfer.getData("Text");if(d){var c;if(e.state.draggingText&&!e.state.draggingText.copy&&(c=e.listSelections()),qs(e.doc,bs(i,i)),c)for(var u=0;u<c.length;++u)ao(e.doc,"",c[u].anchor,c[u].head,"drag");e.replaceSelection(d,"around","paste"),e.display.input.focus()}}catch(t){}}}}function To(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Po(t){if(document.getElementsByClassName)for(var e=document.getElementsByClassName("CodeMirror"),i=0;i<e.length;i++){var n=e[i].CodeMirror;n&&t(n)}}var Do=!1;function Oo(){var t;Do||(Zt(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Po(Mo)},100))}),Zt(window,"blur",function(){return Po(_n)}),Do=!0)}function Mo(t){var e=t.display;e.lastWrapHeight==e.wrapper.clientHeight&&e.lastWrapWidth==e.wrapper.clientWidth||(e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize())}for(var Eo={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},jo=0;jo<10;jo++)Eo[jo+48]=Eo[jo+96]=String(jo);for(var Ao=65;Ao<=90;Ao++)Eo[Ao]=String.fromCharCode(Ao);for(var Lo=1;Lo<=12;Lo++)Eo[Lo+111]=Eo[Lo+63235]="F"+Lo;var Ho={};function Bo(t){var e,i,n,s,o=t.split(/-(?!$)/);t=o[o.length-1];for(var l=0;l<o.length-1;l++){var r=o[l];if(/^(cmd|meta|m)$/i.test(r))s=!0;else if(/^a(lt)?$/i.test(r))e=!0;else if(/^(c|ctrl|control)$/i.test(r))i=!0;else{if(!/^s(hift)?$/i.test(r))throw new Error("Unrecognized modifier name: "+r);n=!0}}return e&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Cmd-"+t),n&&(t="Shift-"+t),t}function Ro(t){var e={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete t[i];continue}for(var s=K(i.split(" "),Bo),o=0;o<s.length;o++){var l=void 0,r=void 0;o==s.length-1?(r=s.join(" "),l=n):(r=s.slice(0,o+1).join(" "),l="...");var a=e[r];if(a){if(a!=l)throw new Error("Inconsistent bindings for "+r)}else e[r]=l}delete t[i]}for(var h in e)t[h]=e[h];return t}function Fo(t,e,i,n){var s=(e=Wo(e)).call?e.call(t,n):e[t];if(!1===s)return"nothing";if("..."===s)return"multi";if(null!=s&&i(s))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Fo(t,e.fallthrough,i,n);for(var o=0;o<e.fallthrough.length;o++){var l=Fo(t,e.fallthrough[o],i,n);if(l)return l}}}function Xo(t){var e="string"==typeof t?t:Eo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function zo(t,e,i){var n=t;return e.altKey&&"Alt"!=n&&(t="Alt-"+t),(x?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(t="Ctrl-"+t),(x?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(t="Cmd-"+t),!i&&e.shiftKey&&"Shift"!=n&&(t="Shift-"+t),t}function Vo(t,e){if(c&&34==t.keyCode&&t.char)return!1;var i=Eo[t.keyCode];return null!=i&&!t.altGraphKey&&zo(i,t,e)}function Wo(t){return"string"==typeof t?Ho[t]:t}function Go(t,e){for(var i=t.doc.sel.ranges,n=[],s=0;s<i.length;s++){for(var o=e(i[s]);n.length&&gt(o.from,Y(n).to)<=0;){var l=n.pop();if(gt(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}Un(t,function(){for(var e=n.length-1;e>=0;e--)ao(t.doc,"",n[e].from,n[e].to,"+delete");kn(t)})}function Uo(t,e,i){var n=ot(t.text,e+i,i);return n<0||n>t.text.length?null:n}function $o(t,e,i){var n=Uo(t,e.ch,i);return null==n?null:new mt(e.line,n,i<0?"after":"before")}function qo(t,e,i,n,s){if(t){var o=Qt(i,e.doc.direction);if(o){var l,r=s<0?Y(o):o[0],a=s<0==(1==r.level)?"after":"before";if(r.level>0||"rtl"==e.doc.direction){var h=Di(e,i);l=s<0?i.text.length-1:0;var d=Oi(e,h,l).top;l=lt(function(t){return Oi(e,h,t).top==d},s<0==(1==r.level)?r.from:r.to-1,l),"before"==a&&(l=Uo(i,l,1))}else l=s<0?r.to:r.from;return new mt(n,l,a)}}return new mt(n,s<0?i.text.length:0,s<0?"before":"after")}Ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ho.default=v?Ho.macDefault:Ho.pcDefault;var Yo={selectAll:eo,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),V)},killLine:function(t){return Go(t,function(e){if(e.empty()){var i=rt(t.doc,e.head.line).text.length;return e.head.ch==i&&e.head.line<t.lastLine()?{from:e.head,to:mt(e.head.line+1,0)}:{from:e.head,to:mt(e.head.line,i)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Go(t,function(e){return{from:mt(e.from().line,0),to:xt(t.doc,mt(e.to().line+1,0))}})},delLineLeft:function(t){return Go(t,function(t){return{from:mt(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return Go(t,function(e){var i=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:i},"div"),to:e.from()}})},delWrappedLineRight:function(t){return Go(t,function(e){var i=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div");return{from:e.from(),to:n}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(mt(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(mt(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Ko(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Qo(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(t,e){var i=rt(t.doc,e),n=function(t){for(var e;e=Bt(t);)t=e.find(1,!0).line;return t}(i);n!=i&&(e=ct(n));return qo(!0,t,i,e,-1)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var i=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:i},"div")},G)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var i=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:i},"div")},G)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var i=t.cursorCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:i},"div");return n.ch<t.getLine(n.line).search(/\S/)?Qo(t,e.head):n},G)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],i=t.listSelections(),n=t.options.tabSize,s=0;s<i.length;s++){var o=i[s].from(),l=B(t.getLine(o.line),o.ch,n);e.push(q(n-l%n))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Un(t,function(){for(var e=t.listSelections(),i=[],n=0;n<e.length;n++)if(e[n].empty()){var s=e[n].head,o=rt(t.doc,s.line).text;if(o)if(s.ch==o.length&&(s=new mt(s.line,s.ch-1)),s.ch>0)s=new mt(s.line,s.ch+1),t.replaceRange(o.charAt(s.ch-1)+o.charAt(s.ch-2),mt(s.line,s.ch-2),s,"+transpose");else if(s.line>t.doc.first){var l=rt(t.doc,s.line-1).text;l&&(s=new mt(s.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+l.charAt(l.length-1),mt(s.line-1,l.length-1),s,"+transpose"))}i.push(new _s(s,s))}t.setSelections(i)})},newlineAndIndent:function(t){return Un(t,function(){for(var e=t.listSelections(),i=e.length-1;i>=0;i--)t.replaceRange(t.doc.lineSeparator(),e[i].anchor,e[i].head,"+input");e=t.listSelections();for(var n=0;n<e.length;n++)t.indentLine(e[n].from().line,null,!0);kn(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Ko(t,e){var i=rt(t.doc,e),n=Ft(i);return n!=i&&(e=ct(n)),qo(!0,t,n,e,1)}function Qo(t,e){var i=Ko(t,e.line),n=rt(t.doc,i.line),s=Qt(n,t.doc.direction);if(!s||0==s[0].level){var o=Math.max(0,n.text.search(/\S/)),l=e.line==i.line&&e.ch<=o&&e.ch;return mt(i.line,l?0:o,i.sticky)}return i}function Jo(t,e,i){if("string"==typeof e&&!(e=Yo[e]))return!1;t.display.input.ensurePolled();var n=t.display.shift,s=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i&&(t.display.shift=!1),s=e(t)!=z}finally{t.display.shift=n,t.state.suppressEdits=!1}return s}var Zo=new R;function tl(t,e,i,n){var s=t.state.keySeq;if(s){if(Xo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:Zo.set(50,function(){t.state.keySeq==s&&(t.state.keySeq=null,t.display.input.reset())}),el(t,s+" "+e,i,n))return!0}return el(t,e,i,n)}function el(t,e,i,n){var s=function(t,e,i){for(var n=0;n<t.state.keyMaps.length;n++){var s=Fo(e,t.state.keyMaps[n],i,t);if(s)return s}return t.options.extraKeys&&Fo(e,t.options.extraKeys,i,t)||Fo(e,t.options.keyMap,i,t)}(t,e,n);return"multi"==s&&(t.state.keySeq=e),"handled"==s&&li(t,"keyHandled",t,e,i),"handled"!=s&&"multi"!=s||(re(i),fn(t)),!!s}function il(t,e){var i=Vo(e,!0);return!!i&&(e.shiftKey&&!t.state.keySeq?tl(t,"Shift-"+i,e,function(e){return Jo(t,e,!0)})||tl(t,i,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Jo(t,e)}):tl(t,i,e,function(e){return Jo(t,e)}))}var nl=null;function sl(t){var e=this;if(e.curOp.focus=M(),!ne(e,t)){l&&r<11&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var n=il(e,t);c&&(nl=n?i:null,!n&&88==i&&!we&&(v?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function i(t){18!=t.keyCode&&t.altKey||(I(e,"CodeMirror-crosshair"),ee(document,"keyup",i),ee(document,"mouseover",i))}E(e,"CodeMirror-crosshair"),Zt(document,"keyup",i),Zt(document,"mouseover",i)}(e)}}function ol(t){16==t.keyCode&&(this.doc.sel.shift=!1),ne(this,t)}function ll(t){var e=this;if(!(yi(e.display,t)||ne(e,t)||t.ctrlKey&&!t.altKey||v&&t.metaKey)){var i=t.keyCode,n=t.charCode;if(c&&i==nl)return nl=null,void re(t);if(!c||t.which&&!(t.which<10)||!il(e,t)){var s=String.fromCharCode(null==n?i:n);"\b"!=s&&(function(t,e,i){return tl(t,"'"+i+"'",e,function(e){return Jo(t,e,!0)})}(e,t,s)||e.display.input.onKeyPress(t))}}}var rl,al,hl=function(t,e,i){this.time=t,this.pos=e,this.button=i};function dl(t){var e=this,i=e.display;if(!(ne(e,t)||i.activeTouch&&i.input.supportsTouch()))if(i.input.ensurePolled(),i.shift=t.shiftKey,yi(i,t))a||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));else if(!fl(e,t)){var n=ln(e,t),s=ue(t),o=n?function(t,e){var i=+new Date;return al&&al.compare(i,t,e)?(rl=al=null,"triple"):rl&&rl.compare(i,t,e)?(al=new hl(i,t,e),rl=null,"double"):(rl=new hl(i,t,e),al=null,"single")}(n,s):"single";window.focus(),1==s&&e.state.selectingText&&e.state.selectingText(t),n&&function(t,e,i,n,s){var o="Click";"double"==n?o="Double"+o:"triple"==n&&(o="Triple"+o);return tl(t,zo(o=(1==e?"Left":2==e?"Middle":"Right")+o,s),s,function(e){if("string"==typeof e&&(e=Yo[e]),!e)return!1;var n=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n=e(t,i)!=z}finally{t.state.suppressEdits=!1}return n})}(e,s,n,o,t)||(1==s?n?function(t,e,i,n){l?setTimeout(L(pn,t),0):t.curOp.focus=M();var s,o=function(t,e,i){var n=t.getOption("configureMouse"),s=n?n(t,e,i):{};if(null==s.unit){var o=b?i.shiftKey&&i.metaKey:i.altKey;s.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}(null==s.extend||t.doc.extend)&&(s.extend=t.doc.extend||i.shiftKey);null==s.addNew&&(s.addNew=v?i.metaKey:i.ctrlKey);null==s.moveOnDrag&&(s.moveOnDrag=!(v?i.altKey:i.ctrlKey));return s}(t,i,n),h=t.doc.sel;t.options.dragDrop&&me&&!t.isReadOnly()&&"single"==i&&(s=h.contains(e))>-1&&(gt((s=h.ranges[s]).from(),e)<0||e.xRel>0)&&(gt(s.to(),e)>0||e.xRel<0)?function(t,e,i,n){var s=t.display,o=!1,h=$n(t,function(e){a&&(s.scroller.draggable=!1),t.state.draggingText=!1,ee(document,"mouseup",h),ee(document,"mousemove",d),ee(s.scroller,"dragstart",c),ee(s.scroller,"drop",h),o||(re(e),n.addNew||zs(t.doc,i,null,null,n.extend),a||l&&9==r?setTimeout(function(){document.body.focus(),s.input.focus()},20):s.input.focus())}),d=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},c=function(){return o=!0};a&&(s.scroller.draggable=!0);t.state.draggingText=h,h.copy=!n.moveOnDrag,s.scroller.dragDrop&&s.scroller.dragDrop();Zt(document,"mouseup",h),Zt(document,"mousemove",d),Zt(s.scroller,"dragstart",c),Zt(s.scroller,"drop",h),mn(t),setTimeout(function(){return s.input.focus()},20)}(t,n,e,o):function(t,e,i,n){var s=t.display,o=t.doc;re(e);var l,r,a=o.sel,h=a.ranges;n.addNew&&!n.extend?(r=o.sel.contains(i),l=r>-1?h[r]:new _s(i,i)):(l=o.sel.primary(),r=o.sel.primIndex);if("rectangle"==n.unit)n.addNew||(l=new _s(i,i)),i=ln(t,e,!0,!0),r=-1;else{var d=cl(t,i,n.unit);l=n.extend?Xs(l,d.anchor,d.head,n.extend):d}n.addNew?-1==r?(r=h.length,$s(o,vs(h.concat([l]),r),{scroll:!1,origin:"*mouse"})):h.length>1&&h[r].empty()&&"char"==n.unit&&!n.extend?($s(o,vs(h.slice(0,r).concat(h.slice(r+1)),0),{scroll:!1,origin:"*mouse"}),a=o.sel):Ws(o,r,l,W):(r=0,$s(o,new gs([l],0),W),a=o.sel);var c=i;function u(e){if(0!=gt(c,e))if(c=e,"rectangle"==n.unit){for(var s=[],h=t.options.tabSize,d=B(rt(o,i.line).text,i.ch,h),u=B(rt(o,e.line).text,e.ch,h),f=Math.min(d,u),p=Math.max(d,u),m=Math.min(i.line,e.line),g=Math.min(t.lastLine(),Math.max(i.line,e.line));m<=g;m++){var _=rt(o,m).text,v=U(_,f,h);f==p?s.push(new _s(mt(m,v),mt(m,v))):_.length>v&&s.push(new _s(mt(m,v),mt(m,U(_,p,h))))}s.length||s.push(new _s(i,i)),$s(o,vs(a.ranges.slice(0,r).concat(s),r),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,y=l,w=cl(t,e,n.unit),x=y.anchor;gt(w.anchor,x)>0?(b=w.head,x=yt(y.from(),w.anchor)):(b=w.anchor,x=bt(y.to(),w.head));var C=a.ranges.slice(0);C[r]=function(t,e){var i=e.anchor,n=e.head,s=rt(t.doc,i.line);if(0==gt(i,n)&&i.sticky==n.sticky)return e;var o=Qt(s);if(!o)return e;var l=Yt(o,i.ch,i.sticky),r=o[l];if(r.from!=i.ch&&r.to!=i.ch)return e;var a,h=l+(r.from==i.ch==(1!=r.level)?0:1);if(0==h||h==o.length)return e;if(n.line!=i.line)a=(n.line-i.line)*("ltr"==t.doc.direction?1:-1)>0;else{var d=Yt(o,n.ch,n.sticky),c=d-l||(n.ch-i.ch)*(1==r.level?-1:1);a=d==h-1||d==h?c<0:c>0}var u=o[h+(a?-1:0)],f=a==(1==u.level),p=f?u.from:u.to,m=f?"after":"before";return i.ch==p&&i.sticky==m?e:new _s(new mt(i.line,p,m),n)}(t,new _s(xt(o,x),b)),$s(o,vs(C,r),W)}}var f=s.wrapper.getBoundingClientRect(),p=0;function m(e){t.state.selectingText=!1,p=1/0,re(e),s.input.focus(),ee(document,"mousemove",g),ee(document,"mouseup",_),o.history.lastSelOrigin=null}var g=$n(t,function(e){ue(e)?function e(i){var l=++p;var r=ln(t,i,!0,"rectangle"==n.unit);if(!r)return;if(0!=gt(r,c)){t.curOp.focus=M(),u(r);var a=yn(s,o);(r.line>=a.to||r.line<a.from)&&setTimeout($n(t,function(){p==l&&e(i)}),150)}else{var h=i.clientY<f.top?-20:i.clientY>f.bottom?20:0;h&&setTimeout($n(t,function(){p==l&&(s.scroller.scrollTop+=h,e(i))}),50)}}(e):m(e)}),_=$n(t,m);t.state.selectingText=_,Zt(document,"mousemove",g),Zt(document,"mouseup",_)}(t,n,e,o)}(e,n,o,t):ce(t)==i.scroller&&re(t):2==s?(n&&zs(e.doc,n),setTimeout(function(){return i.input.focus()},20)):3==s&&(C?pl(e,t):mn(e)))}}function cl(t,e,i){if("char"==i)return new _s(e,e);if("word"==i)return t.findWordAt(e);if("line"==i)return new _s(mt(e.line,0),xt(t.doc,mt(e.line+1,0)));var n=i(t,e);return new _s(n.from,n.to)}function ul(t,e,i,n){var s,o;if(e.touches)s=e.touches[0].clientX,o=e.touches[0].clientY;else try{s=e.clientX,o=e.clientY}catch(e){return!1}if(s>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&re(e);var l=t.display,r=l.lineDiv.getBoundingClientRect();if(o>r.bottom||!oe(t,i))return he(e);o-=r.top-l.viewOffset;for(var a=0;a<t.options.gutters.length;++a){var h=l.gutters.childNodes[a];if(h&&h.getBoundingClientRect().right>=s)return ie(t,i,t,ut(t.doc,o),t.options.gutters[a],e),he(e)}}function fl(t,e){return ul(t,e,"gutterClick",!0)}function pl(t,e){yi(t.display,e)||function(t,e){if(!oe(t,"gutterContextMenu"))return!1;return ul(t,e,"gutterContextMenu",!1)}(t,e)||ne(t,e,"contextmenu")||t.display.input.onContextMenu(e)}function ml(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bi(t)}hl.prototype.compare=function(t,e,i){return this.time+400>t&&0==gt(e,this.pos)&&i==this.button};var gl={toString:function(){return"CodeMirror.Init"}},_l={},vl={};function bl(t){hs(t),Kn(t),wn(t)}function yl(t,e,i){if(!e!=!(i&&i!=gl)){var n=t.display.dragFunctions,s=e?Zt:ee;s(t.display.scroller,"dragstart",n.start),s(t.display.scroller,"dragenter",n.enter),s(t.display.scroller,"dragover",n.over),s(t.display.scroller,"dragleave",n.leave),s(t.display.scroller,"drop",n.drop)}}function wl(t){t.options.lineWrapping?(E(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(I(t.display.wrapper,"CodeMirror-wrap"),$t(t)),on(t),Kn(t),Bi(t),setTimeout(function(){return An(t)},100)}function xl(t,e){var n=this;if(!(this instanceof xl))return new xl(t,e);this.options=e=e?H(e):{},H(_l,e,!1),ds(e);var s=e.value;"string"==typeof s&&(s=new ko(s,e.mode,null,e.lineSeparator,e.direction)),this.doc=s;var o=new xl.inputStyles[e.inputStyle](this),h=this.display=new function(t,e,n){var s=this;this.input=n,s.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),s.scrollbarFiller.setAttribute("cm-not-content","true"),s.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),s.gutterFiller.setAttribute("cm-not-content","true"),s.lineDiv=D("div",null,"CodeMirror-code"),s.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),s.cursorDiv=P("div",null,"CodeMirror-cursors"),s.measure=P("div",null,"CodeMirror-measure"),s.lineMeasure=P("div",null,"CodeMirror-measure"),s.lineSpace=D("div",[s.measure,s.lineMeasure,s.selectionDiv,s.cursorDiv,s.lineDiv],null,"position: relative; outline: none");var o=D("div",[s.lineSpace],"CodeMirror-lines");s.mover=P("div",[o],null,"position: relative"),s.sizer=P("div",[s.mover],"CodeMirror-sizer"),s.sizerWidth=null,s.heightForcer=P("div",null,null,"position: absolute; height: "+X+"px; width: 1px;"),s.gutters=P("div",null,"CodeMirror-gutters"),s.lineGutter=null,s.scroller=P("div",[s.sizer,s.heightForcer,s.gutters],"CodeMirror-scroll"),s.scroller.setAttribute("tabIndex","-1"),s.wrapper=P("div",[s.scrollbarFiller,s.gutterFiller,s.scroller],"CodeMirror"),l&&r<8&&(s.gutters.style.zIndex=-1,s.scroller.style.paddingRight=0),a||i&&_||(s.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(s.wrapper):t(s.wrapper)),s.viewFrom=s.viewTo=e.first,s.reportedViewFrom=s.reportedViewTo=e.first,s.view=[],s.renderedView=null,s.externalMeasured=null,s.viewOffset=0,s.lastWrapHeight=s.lastWrapWidth=0,s.updateLineNumbers=null,s.nativeBarWidth=s.barHeight=s.barWidth=0,s.scrollbarsClipped=!1,s.lineNumWidth=s.lineNumInnerWidth=s.lineNumChars=null,s.alignWidgets=!1,s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.maxLine=null,s.maxLineLength=0,s.maxLineChanged=!1,s.wheelDX=s.wheelDY=s.wheelStartX=s.wheelStartY=null,s.shift=!1,s.selForContextMenu=null,s.activeTouch=null,n.init(s)}(t,s,o);for(var d in h.wrapper.CodeMirror=this,hs(this),ml(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Bn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new R,keySeq:null,specialChars:null},e.autofocus&&!_&&h.input.focus(),l&&r<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(t){var e=t.display;Zt(e.scroller,"mousedown",$n(t,dl)),Zt(e.scroller,"dblclick",l&&r<11?$n(t,function(e){if(!ne(t,e)){var i=ln(t,e);if(i&&!fl(t,e)&&!yi(t.display,e)){re(e);var n=t.findWordAt(i);zs(t.doc,n.anchor,n.head)}}}):function(e){return ne(t,e)||re(e)});C||Zt(e.scroller,"contextmenu",function(e){return pl(t,e)});var i,n={end:0};function s(){e.activeTouch&&(i=setTimeout(function(){return e.activeTouch=null},1e3),(n=e.activeTouch).end=+new Date)}function o(t,e){if(null==e.left)return!0;var i=e.left-t.left,n=e.top-t.top;return i*i+n*n>400}Zt(e.scroller,"touchstart",function(s){if(!ne(t,s)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(s)&&!fl(t,s)){e.input.ensurePolled(),clearTimeout(i);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==s.touches.length&&(e.activeTouch.left=s.touches[0].pageX,e.activeTouch.top=s.touches[0].pageY)}}),Zt(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),Zt(e.scroller,"touchend",function(i){var n=e.activeTouch;if(n&&!yi(e,i)&&null!=n.left&&!n.moved&&new Date-n.start<300){var l,r=t.coordsChar(e.activeTouch,"page");l=!n.prev||o(n,n.prev)?new _s(r,r):!n.prev.prev||o(n,n.prev.prev)?t.findWordAt(r):new _s(mt(r.line,0),xt(t.doc,mt(r.line+1,0))),t.setSelection(l.anchor,l.head),t.focus(),re(i)}s()}),Zt(e.scroller,"touchcancel",s),Zt(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Pn(t,e.scroller.scrollTop),On(t,e.scroller.scrollLeft,!0),ie(t,"scroll",t))}),Zt(e.scroller,"mousewheel",function(e){return ms(t,e)}),Zt(e.scroller,"DOMMouseScroll",function(e){return ms(t,e)}),Zt(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(e){ne(t,e)||de(e)},over:function(e){ne(t,e)||(!function(t,e){var i=ln(t,e);if(i){var n=document.createDocumentFragment();dn(t,i,n),t.display.dragCursor||(t.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),T(t.display.dragCursor,n)}}(t,e),de(e))},start:function(e){return function(t,e){if(l&&(!t.state.draggingText||+new Date-Io<100))de(e);else if(!ne(t,e)&&!yi(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!u)){var i=P("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),c&&i.parentNode.removeChild(i)}}(t,e)},drop:$n(t,No),leave:function(e){ne(t,e)||To(t)}};var a=e.input.getField();Zt(a,"keyup",function(e){return ol.call(t,e)}),Zt(a,"keydown",$n(t,sl)),Zt(a,"keypress",$n(t,ll)),Zt(a,"focus",function(e){return gn(t,e)}),Zt(a,"blur",function(e){return _n(t,e)})}(this),Oo(),Fn(this),this.curOp.forceUpdate=!0,Ps(this,s),e.autofocus&&!_||this.hasFocus()?setTimeout(L(gn,this),20):_n(this),vl)vl.hasOwnProperty(d)&&vl[d](n,e[d],gl);xn(this),e.finishInit&&e.finishInit(this);for(var f=0;f<Cl.length;++f)Cl[f](n);Xn(this),a&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(h.lineDiv).textRendering&&(h.lineDiv.style.textRendering="auto")}xl.defaults=_l,xl.optionHandlers=vl;var Cl=[];function Sl(t,e,i,n){var s,o=t.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?s=He(t,e).state:i="prev");var l=t.options.tabSize,r=rt(o,e),a=B(r.text,null,l);r.stateAfter&&(r.stateAfter=null);var h,d=r.text.match(/^\s*/)[0];if(n||/\S/.test(r.text)){if("smart"==i&&((h=o.mode.indent(s,r.text.slice(d.length),r.text))==z||h>150)){if(!n)return;i="prev"}}else h=0,i="not";"prev"==i?h=e>o.first?B(rt(o,e-1).text,null,l):0:"add"==i?h=a+t.options.indentUnit:"subtract"==i?h=a-t.options.indentUnit:"number"==typeof i&&(h=a+i),h=Math.max(0,h);var c="",u=0;if(t.options.indentWithTabs)for(var f=Math.floor(h/l);f;--f)u+=l,c+="\t";if(u<h&&(c+=q(h-u)),c!=d)return ao(o,c,mt(e,0),mt(e,d.length),"+input"),r.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==e&&m.head.ch<d.length){var g=mt(e,d.length);Ws(o,p,new _s(g,g));break}}}xl.defineInitHook=function(t){return Cl.push(t)};var kl=null;function Il(t){kl=t}function Nl(t,e,i,n,s){var o=t.doc;t.display.shift=!1,n||(n=o.sel);var l,r=t.state.pasteIncoming||"paste"==s,a=be(e),h=null;if(r&&n.ranges.length>1)if(kl&&kl.text.join("\n")==e){if(n.ranges.length%kl.text.length==0){h=[];for(var d=0;d<kl.text.length;d++)h.push(o.splitLines(kl.text[d]))}}else a.length==n.ranges.length&&t.options.pasteLinesPerSelection&&(h=K(a,function(t){return[t]}));for(var c=n.ranges.length-1;c>=0;c--){var u=n.ranges[c],f=u.from(),p=u.to();u.empty()&&(i&&i>0?f=mt(f.line,f.ch-i):t.state.overwrite&&!r?p=mt(p.line,Math.min(rt(o,p.line).text.length,p.ch+Y(a).length)):kl&&kl.lineWise&&kl.text.join("\n")==e&&(f=p=mt(f.line,0))),l=t.curOp.updateInput;var m={from:f,to:p,text:h?h[c%h.length]:a,origin:s||(r?"paste":t.state.cutIncoming?"cut":"+input")};no(t.doc,m),li(t,"inputRead",t,m)}e&&!r&&Pl(t,e),kn(t),t.curOp.updateInput=l,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function Tl(t,e){var i=t.clipboardData&&t.clipboardData.getData("Text");if(i)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Un(e,function(){return Nl(e,i,0,null,"paste")}),!0}function Pl(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var i=t.doc.sel,n=i.ranges.length-1;n>=0;n--){var s=i.ranges[n];if(!(s.head.ch>100||n&&i.ranges[n-1].head.line==s.head.line)){var o=t.getModeAt(s.head),l=!1;if(o.electricChars){for(var r=0;r<o.electricChars.length;r++)if(e.indexOf(o.electricChars.charAt(r))>-1){l=Sl(t,s.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(rt(t.doc,s.head.line).text.slice(0,s.head.ch))&&(l=Sl(t,s.head.line,"smart"));l&&li(t,"electricInput",t,s.head.line)}}}function Dl(t){for(var e=[],i=[],n=0;n<t.doc.sel.ranges.length;n++){var s=t.doc.sel.ranges[n].head.line,o={anchor:mt(s,0),head:mt(s+1,0)};i.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:i}}function Ol(t,e){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!!e)}function Ml(){var t=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=P("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return a?t.style.width="1000px":t.setAttribute("wrap","off"),m&&(t.style.border="1px solid black"),Ol(t),e}function El(t,e,i,n,s){var o=e,l=i,r=rt(t,e.line);function a(n){var o,l;if(null==(o=s?function(t,e,i,n){var s=Qt(e,t.doc.direction);if(!s)return $o(e,i,n);i.ch>=e.text.length?(i.ch=e.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var o=Yt(s,i.ch,i.sticky),l=s[o];if("ltr"==t.doc.direction&&l.level%2==0&&(n>0?l.to>i.ch:l.from<i.ch))return $o(e,i,n);var r,a=function(t,i){return Uo(e,t instanceof mt?t.ch:t,i)},h=function(i){return t.options.lineWrapping?(r=r||Di(t,e),Ki(t,e,r,i)):{begin:0,end:e.text.length}},d=h("before"==i.sticky?a(i,-1):i.ch);if("rtl"==t.doc.direction||1==l.level){var c=1==l.level==n<0,u=a(i,c?1:-1);if(null!=u&&(c?u<=l.to&&u<=d.end:u>=l.from&&u>=d.begin)){var f=c?"before":"after";return new mt(i.line,u,f)}}var p=function(t,e,n){for(var o=function(t,e){return e?new mt(i.line,a(t,1),"before"):new mt(i.line,t,"after")};t>=0&&t<s.length;t+=e){var l=s[t],r=e>0==(1!=l.level),h=r?n.begin:a(n.end,-1);if(l.from<=h&&h<l.to)return o(h,r);if(h=r?l.from:a(l.to,-1),n.begin<=h&&h<n.end)return o(h,r)}},m=p(o+n,n,d);if(m)return m;var g=n>0?d.end:a(d.begin,-1);return null==g||n>0&&g==e.text.length||!(m=p(n>0?0:s.length-1,n,h(g)))?null:m}(t.cm,r,e,i):$o(r,e,i))){if(n||(l=e.line+i)<t.first||l>=t.first+t.size||(e=new mt(l,e.ch,e.sticky),!(r=rt(t,l))))return!1;e=qo(s,t.cm,r,e.line,i)}else e=o;return!0}if("char"==n)a();else if("column"==n)a(!0);else if("word"==n||"group"==n)for(var h=null,d="group"==n,c=t.cm&&t.cm.getHelper(e,"wordChars"),u=!0;!(i<0)||a(!u);u=!1){var f=r.text.charAt(e.ch)||"\n",p=et(f,c)?"w":d&&"\n"==f?"n":!d||/\s/.test(f)?null:"p";if(!d||u||p||(p="s"),h&&h!=p){i<0&&(i=1,a(),e.sticky="after");break}if(p&&(h=p),i>0&&!a(!u))break}var m=Zs(t,e,o,l,!0);return _t(o,m)&&(m.hitSide=!0),m}function jl(t,e,i,n){var s,o,l=t.doc,r=e.left;if("page"==n){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),h=Math.max(a-.5*Zi(t.display),3);s=(i>0?e.bottom:e.top)+i*h}else"line"==n&&(s=i>0?e.bottom+3:e.top-3);for(;(o=qi(t,r,s)).outside;){if(i<0?s<=0:s>=l.height){o.hitSide=!0;break}s+=5*i}return o}var Al=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new R,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ll(t,e){var i=Pi(t,e.line);if(!i||i.hidden)return null;var n=rt(t.doc,e.line),s=Ni(i,n,e.line),o=Qt(n,t.doc.direction),l="left";o&&(l=Yt(o,e.ch)%2?"right":"left");var r=ji(s.map,e.ch,l);return r.offset="right"==r.collapse?r.end:r.start,r}function Hl(t,e){return e&&(t.bad=!0),t}function Bl(t,e,i){var n;if(e==t.display.lineDiv){if(!(n=t.display.lineDiv.childNodes[i]))return Hl(t.clipPos(mt(t.display.viewTo-1)),!0);e=null,i=0}else for(n=e;;n=n.parentNode){if(!n||n==t.display.lineDiv)return null;if(n.parentNode&&n.parentNode==t.display.lineDiv)break}for(var s=0;s<t.display.view.length;s++){var o=t.display.view[s];if(o.node==n)return Rl(o,e,i)}}function Rl(t,e,i){var n=t.text.firstChild,s=!1;if(!e||!O(n,e))return Hl(mt(ct(t.line),0),!0);if(e==n&&(s=!0,e=n.childNodes[i],i=0,!e)){var o=t.rest?Y(t.rest):t.line;return Hl(mt(ct(o),o.text.length),s)}var l=3==e.nodeType?e:null,r=e;for(l||1!=e.childNodes.length||3!=e.firstChild.nodeType||(l=e.firstChild,i&&(i=l.nodeValue.length));r.parentNode!=n;)r=r.parentNode;var a=t.measure,h=a.maps;function d(e,i,n){for(var s=-1;s<(h?h.length:0);s++)for(var o=s<0?a.map:h[s],l=0;l<o.length;l+=3){var r=o[l+2];if(r==e||r==i){var d=ct(s<0?t.line:t.rest[s]),c=o[l]+n;return(n<0||r!=e)&&(c=o[l+(n?1:0)]),mt(d,c)}}}var c=d(l,r,i);if(c)return Hl(c,s);for(var u=r.nextSibling,f=l?l.nodeValue.length-i:0;u;u=u.nextSibling){if(c=d(u,u.firstChild,0))return Hl(mt(c.line,c.ch-f),s);f+=u.textContent.length}for(var p=r.previousSibling,m=i;p;p=p.previousSibling){if(c=d(p,p.firstChild,-1))return Hl(mt(c.line,c.ch+m),s);m+=p.textContent.length}}Al.prototype.init=function(t){var e=this,i=this,n=i.cm,s=i.div=t.lineDiv;function o(t){if(!ne(n,t)){if(n.somethingSelected())Il({lineWise:!1,text:n.getSelections()}),"cut"==t.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var e=Dl(n);Il({lineWise:!0,text:e.text}),"cut"==t.type&&n.operation(function(){n.setSelections(e.ranges,0,V),n.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var o=kl.text.join("\n");if(t.clipboardData.setData("Text",o),t.clipboardData.getData("Text")==o)return void t.preventDefault()}var l=Ml(),r=l.firstChild;n.display.lineSpace.insertBefore(l,n.display.lineSpace.firstChild),r.value=kl.text.join("\n");var a=document.activeElement;A(r),setTimeout(function(){n.display.lineSpace.removeChild(l),a.focus(),a==s&&i.showPrimarySelection()},50)}}Ol(s,n.options.spellcheck),Zt(s,"paste",function(t){ne(n,t)||Tl(t,n)||r<=11&&setTimeout($n(n,function(){return e.updateFromDOM()}),20)}),Zt(s,"compositionstart",function(t){e.composing={data:t.data,done:!1}}),Zt(s,"compositionupdate",function(t){e.composing||(e.composing={data:t.data,done:!1})}),Zt(s,"compositionend",function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),Zt(s,"touchstart",function(){return i.forceCompositionEnd()}),Zt(s,"input",function(){e.composing||e.readFromDOMSoon()}),Zt(s,"copy",o),Zt(s,"cut",o)},Al.prototype.prepareSelection=function(){var t=hn(this.cm,!1);return t.focus=this.cm.state.focused,t},Al.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Al.prototype.showPrimarySelection=function(){var t=window.getSelection(),e=this.cm,n=e.doc.sel.primary(),s=n.from(),o=n.to();if(e.display.viewTo==e.display.viewFrom||s.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var l=Bl(e,t.anchorNode,t.anchorOffset),r=Bl(e,t.focusNode,t.focusOffset);if(!l||l.bad||!r||r.bad||0!=gt(yt(l,r),s)||0!=gt(bt(l,r),o)){var a=e.display.view,h=s.line>=e.display.viewFrom&&Ll(e,s)||{node:a[0].measure.map[2],offset:0},d=o.line<e.display.viewTo&&Ll(e,o);if(!d){var c=a[a.length-1].measure,u=c.maps?c.maps[c.maps.length-1]:c.map;d={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}if(h&&d){var f,p=t.rangeCount&&t.getRangeAt(0);try{f=k(h.node,h.offset,d.offset,d.node)}catch(t){}f&&(!i&&e.state.focused?(t.collapse(h.node,h.offset),f.collapsed||(t.removeAllRanges(),t.addRange(f))):(t.removeAllRanges(),t.addRange(f)),p&&null==t.anchorNode?t.addRange(p):i&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},Al.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Al.prototype.showMultipleSelections=function(t){T(this.cm.display.cursorDiv,t.cursors),T(this.cm.display.selectionDiv,t.selection)},Al.prototype.rememberSelection=function(){var t=window.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Al.prototype.selectionInEditor=function(){var t=window.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return O(this.div,e)},Al.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Al.prototype.blur=function(){this.div.blur()},Al.prototype.getField=function(){return this.div},Al.prototype.supportsTouch=function(){return!0},Al.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Un(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},Al.prototype.selectionChanged=function(){var t=window.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Al.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=window.getSelection(),e=this.cm;if(g&&d&&this.cm.options.gutters.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=Bl(e,t.anchorNode,t.anchorOffset),n=Bl(e,t.focusNode,t.focusOffset);i&&n&&Un(e,function(){$s(e.doc,bs(i,n),V),(i.bad||n.bad)&&(e.curOp.selectionChanged=!0)})}}},Al.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,i,n=this.cm,s=n.display,o=n.doc.sel.primary(),l=o.from(),r=o.to();if(0==l.ch&&l.line>n.firstLine()&&(l=mt(l.line-1,rt(n.doc,l.line-1).length)),r.ch==rt(n.doc,r.line).text.length&&r.line<n.lastLine()&&(r=mt(r.line+1,0)),l.line<s.viewFrom||r.line>s.viewTo-1)return!1;l.line==s.viewFrom||0==(t=rn(n,l.line))?(e=ct(s.view[0].line),i=s.view[0].node):(e=ct(s.view[t].line),i=s.view[t-1].node.nextSibling);var a,h,d=rn(n,r.line);if(d==s.view.length-1?(a=s.viewTo-1,h=s.lineDiv.lastChild):(a=ct(s.view[d+1].line)-1,h=s.view[d+1].node.previousSibling),!i)return!1;for(var c=n.doc.splitLines(function(t,e,i,n,s){var o="",l=!1,r=t.doc.lineSeparator();function a(){l&&(o+=r,l=!1)}function h(t){t&&(a(),o+=t)}function d(e){if(1==e.nodeType){var i=e.getAttribute("cm-text");if(null!=i)return void h(i||e.textContent.replace(/\u200b/g,""));var o,c=e.getAttribute("cm-marker");if(c){var u=t.findMarks(mt(n,0),mt(s+1,0),(m=+c,function(t){return t.id==m}));return void(u.length&&(o=u[0].find(0))&&h(at(t.doc,o.from,o.to).join(r)))}if("false"==e.getAttribute("contenteditable"))return;var f=/^(pre|div|p)$/i.test(e.nodeName);f&&a();for(var p=0;p<e.childNodes.length;p++)d(e.childNodes[p]);f&&(l=!0)}else 3==e.nodeType&&h(e.nodeValue);var m}for(;d(e),e!=i;)e=e.nextSibling;return o}(n,i,h,e,a)),u=at(n.doc,mt(e,0),mt(a,rt(n.doc,a).text.length));c.length>1&&u.length>1;)if(Y(c)==Y(u))c.pop(),u.pop(),a--;else{if(c[0]!=u[0])break;c.shift(),u.shift(),e++}for(var f=0,p=0,m=c[0],g=u[0],_=Math.min(m.length,g.length);f<_&&m.charCodeAt(f)==g.charCodeAt(f);)++f;for(var v=Y(c),b=Y(u),y=Math.min(v.length-(1==c.length?f:0),b.length-(1==u.length?f:0));p<y&&v.charCodeAt(v.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==c.length&&1==u.length&&e==l.line)for(;f&&f>l.ch&&v.charCodeAt(v.length-p-1)==b.charCodeAt(b.length-p-1);)f--,p++;c[c.length-1]=v.slice(0,v.length-p).replace(/^\u200b+/,""),c[0]=c[0].slice(f).replace(/\u200b+$/,"");var w=mt(e,f),x=mt(a,u.length?Y(u).length-p:0);return c.length>1||c[0]||gt(w,x)?(ao(n.doc,c,w,x,"+input"),!0):void 0},Al.prototype.ensurePolled=function(){this.forceCompositionEnd()},Al.prototype.reset=function(){this.forceCompositionEnd()},Al.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Al.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Al.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Un(this.cm,function(){return Kn(t.cm)})},Al.prototype.setUneditable=function(t){t.contentEditable="false"},Al.prototype.onKeyPress=function(t){0!=t.charCode&&(t.preventDefault(),this.cm.isReadOnly()||$n(this.cm,Nl)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Al.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Al.prototype.onContextMenu=function(){},Al.prototype.resetPosition=function(){},Al.prototype.needsContentAttribute=!0;var Fl=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new R,this.hasSelection=!1,this.composing=null};Fl.prototype.init=function(t){var e=this,i=this,n=this.cm,s=this.wrapper=Ml(),o=this.textarea=s.firstChild;function a(t){if(!ne(n,t)){if(n.somethingSelected())Il({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var e=Dl(n);Il({lineWise:!0,text:e.text}),"cut"==t.type?n.setSelections(e.ranges,null,V):(i.prevInput="",o.value=e.text.join("\n"),A(o))}"cut"==t.type&&(n.state.cutIncoming=!0)}}t.wrapper.insertBefore(s,t.wrapper.firstChild),m&&(o.style.width="0px"),Zt(o,"input",function(){l&&r>=9&&e.hasSelection&&(e.hasSelection=null),i.poll()}),Zt(o,"paste",function(t){ne(n,t)||Tl(t,n)||(n.state.pasteIncoming=!0,i.fastPoll())}),Zt(o,"cut",a),Zt(o,"copy",a),Zt(t.scroller,"paste",function(e){yi(t,e)||ne(n,e)||(n.state.pasteIncoming=!0,i.focus())}),Zt(t.lineSpace,"selectstart",function(e){yi(t,e)||re(e)}),Zt(o,"compositionstart",function(){var t=n.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:n.markText(t,n.getCursor("to"),{className:"CodeMirror-composing"})}}),Zt(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Fl.prototype.prepareSelection=function(){var t=this.cm,e=t.display,i=t.doc,n=hn(t);if(t.options.moveInputWithCursor){var s=Gi(t,i.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),l=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,s.top+l.top-o.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,s.left+l.left-o.left))}return n},Fl.prototype.showSelection=function(t){var e=this.cm.display;T(e.cursorDiv,t.cursors),T(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Fl.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var i=e.getSelection();this.textarea.value=i,e.state.focused&&A(this.textarea),l&&r>=9&&(this.hasSelection=i)}else t||(this.prevInput=this.textarea.value="",l&&r>=9&&(this.hasSelection=null))}},Fl.prototype.getField=function(){return this.textarea},Fl.prototype.supportsTouch=function(){return!1},Fl.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!_||M()!=this.textarea))try{this.textarea.focus()}catch(t){}},Fl.prototype.blur=function(){this.textarea.blur()},Fl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Fl.prototype.receivedFocus=function(){this.slowPoll()},Fl.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},Fl.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,function i(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,i))})},Fl.prototype.poll=function(){var t=this,e=this.cm,i=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||ye(i)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var s=i.value;if(s==n&&!e.somethingSelected())return!1;if(l&&r>=9&&this.hasSelection===s||v&&/[\uf700-\uf7ff]/.test(s))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=s.charCodeAt(0);if(8203!=o||n||(n=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,h=Math.min(n.length,s.length);a<h&&n.charCodeAt(a)==s.charCodeAt(a);)++a;return Un(e,function(){Nl(e,s.slice(a),n.length-a,null,t.composing?"*compose":null),s.length>1e3||s.indexOf("\n")>-1?i.value=t.prevInput="":t.prevInput=s,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Fl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Fl.prototype.onKeyPress=function(){l&&r>=9&&(this.hasSelection=null),this.fastPoll()},Fl.prototype.onContextMenu=function(t){var e=this,i=e.cm,n=i.display,s=e.textarea,o=ln(i,t),h=n.scroller.scrollTop;if(o&&!c){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(o)&&$n(i,$s)(i.doc,bs(o),V);var d=s.style.cssText,u=e.wrapper.style.cssText;e.wrapper.style.cssText="position: absolute";var f,p=e.wrapper.getBoundingClientRect();if(s.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(l?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",a&&(f=window.scrollY),n.input.focus(),a&&window.scrollTo(null,f),n.input.reset(),i.somethingSelected()||(s.value=e.prevInput=" "),e.contextMenuPending=!0,n.selForContextMenu=i.doc.sel,clearTimeout(n.detectingSelectAll),l&&r>=9&&g(),C){de(t);var m=function(){ee(window,"mouseup",m),setTimeout(_,20)};Zt(window,"mouseup",m)}else setTimeout(_,50)}function g(){if(null!=s.selectionStart){var t=i.somethingSelected(),o=""+(t?s.value:"");s.value="",s.value=o,e.prevInput=t?"":"",s.selectionStart=1,s.selectionEnd=o.length,n.selForContextMenu=i.doc.sel}}function _(){if(e.contextMenuPending=!1,e.wrapper.style.cssText=u,s.style.cssText=d,l&&r<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=h),null!=s.selectionStart){(!l||l&&r<9)&&g();var t=0,o=function(){n.selForContextMenu==i.doc.sel&&0==s.selectionStart&&s.selectionEnd>0&&""==e.prevInput?$n(i,eo)(i):t++<10?n.detectingSelectAll=setTimeout(o,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(o,200)}}},Fl.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},Fl.prototype.setUneditable=function(){},Fl.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function i(i,n,s,o){t.defaults[i]=n,s&&(e[i]=o?function(t,e,i){i!=gl&&s(t,e,i)}:s)}t.defineOption=i,t.Init=gl,i("value","",function(t,e){return t.setValue(e)},!0),i("mode",null,function(t,e){t.doc.modeOption=e,Ss(t)},!0),i("indentUnit",2,Ss,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(t){ks(t),Bi(t),Kn(t)},!0),i("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var i=[],n=t.doc.first;t.doc.iter(function(t){for(var s=0;;){var o=t.text.indexOf(e,s);if(-1==o)break;s=o+e.length,i.push(mt(n,o))}n++});for(var s=i.length-1;s>=0;s--)ao(t.doc,e,i[s],mt(i[s].line,i[s].ch+e.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,i){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),i!=gl&&t.refresh()}),i("specialCharPlaceholder",Qe,function(t){return t.refresh()},!0),i("electricChars",!0),i("inputStyle",_?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),i("rtlMoveVisually",!y),i("wholeLineUpdateBefore",!0),i("theme","default",function(t){ml(t),bl(t)},!0),i("keyMap","default",function(t,e,i){var n=Wo(e),s=i!=gl&&Wo(i);s&&s.detach&&s.detach(t,n),n.attach&&n.attach(t,s||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,wl,!0),i("gutters",[],function(t){ds(t.options),bl(t)},!0),i("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?nn(t.display)+"px":"0",t.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(t){return An(t)},!0),i("scrollbarStyle","native",function(t){Bn(t),An(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),i("lineNumbers",!1,function(t){ds(t.options),bl(t)},!0),i("firstLineNumber",1,bl,!0),i("lineNumberFormatter",function(t){return t},bl,!0),i("showCursorWhenSelecting",!1,an,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("readOnly",!1,function(t,e){"nocursor"==e&&(_n(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),i("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),i("dragDrop",!0,yl),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,an,!0),i("singleCursorHeightPerLine",!0,an,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,ks,!0),i("addModeClass",!1,ks,!0),i("pollInterval",100),i("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),i("historyEventDelay",1250),i("viewportMargin",10,function(t){return t.refresh()},!0),i("maxHighlightLength",1e4,ks,!0),i("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),i("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),i("autofocus",null),i("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0)}(xl),function(t){var e=t.optionHandlers,i=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,i){var n=this.options,s=n[t];n[t]==i&&"mode"!=t||(n[t]=i,e.hasOwnProperty(t)&&$n(this,e[t])(this,i,s),ie(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Wo(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,i=0;i<e.length;++i)if(e[i]==t||e[i].name==t)return e.splice(i,1),!0},addOverlay:qn(function(e,i){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");!function(t,e,i){for(var n=0,s=i(e);n<t.length&&i(t[n])<=s;)n++;t.splice(n,0,e)}(this.state.overlays,{mode:n,modeSpec:e,opaque:i&&i.opaque,priority:i&&i.priority||0},function(t){return t.priority}),this.state.modeGen++,Kn(this)}),removeOverlay:qn(function(t){for(var e=this.state.overlays,i=0;i<e.length;++i){var n=e[i].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(i,1),this.state.modeGen++,void Kn(this)}}),indentLine:qn(function(t,e,i){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),ft(this.doc,t)&&Sl(this,t,e,i)}),indentSelection:qn(function(t){for(var e=this.doc.sel.ranges,i=-1,n=0;n<e.length;n++){var s=e[n];if(s.empty())s.head.line>i&&(Sl(this,s.head.line,t,!0),i=s.head.line,n==this.doc.sel.primIndex&&kn(this));else{var o=s.from(),l=s.to(),r=Math.max(i,o.line);i=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var a=r;a<i;++a)Sl(this,a,t);var h=this.doc.sel.ranges;0==o.ch&&e.length==h.length&&h[n].from().ch>0&&Ws(this.doc,n,new _s(o,h[n].to()),V)}}}),getTokenAt:function(t,e){return ze(this,t,e)},getLineTokens:function(t,e){return ze(this,mt(t),e,!0)},getTokenTypeAt:function(t){t=xt(this.doc,t);var e,i=Le(this,rt(this.doc,t.line)),n=0,s=(i.length-1)/2,o=t.ch;if(0==o)e=i[2];else for(;;){var l=n+s>>1;if((l?i[2*l-1]:0)>=o)s=l;else{if(!(i[2*l+1]<o)){e=i[2*l+2];break}n=l+1}}var r=e?e.indexOf("overlay "):-1;return r<0?e:0==r?null:e.slice(0,r-1)},getModeAt:function(e){var i=this.doc.mode;return i.innerMode?t.innerMode(i,this.getTokenAt(e).state).mode:i},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!i.hasOwnProperty(e))return n;var s=i[e],o=this.getModeAt(t);if("string"==typeof o[e])s[o[e]]&&n.push(s[o[e]]);else if(o[e])for(var l=0;l<o[e].length;l++){var r=s[o[e][l]];r&&n.push(r)}else o.helperType&&s[o.helperType]?n.push(s[o.helperType]):s[o.name]&&n.push(s[o.name]);for(var a=0;a<s._global.length;a++){var h=s._global[a];h.pred(o,this)&&-1==F(n,h.val)&&n.push(h.val)}return n},getStateAfter:function(t,e){var i=this.doc;return He(this,(t=wt(i,null==t?i.first+i.size-1:t))+1,e).state},cursorCoords:function(t,e){var i=this.doc.sel.primary();return Gi(this,null==t?i.head:"object"==typeof t?xt(this.doc,t):t?i.from():i.to(),e||"page")},charCoords:function(t,e){return Wi(this,xt(this.doc,t),e||"page")},coordsChar:function(t,e){return qi(this,(t=Vi(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Vi(this,{top:t,left:0},e||"page").top,ut(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,i){var n,s=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,s=!0),n=rt(this.doc,t)}else n=t;return zi(this,n,{top:0,left:0},e||"page",i||s).top+(s?this.doc.height-Gt(n):0)},defaultTextHeight:function(){return Zi(this.display)},defaultCharWidth:function(){return tn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,i,n,s){var o,l,r,a=this.display,h=(t=Gi(this,xt(this.doc,t))).bottom,d=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),a.sizer.appendChild(e),"over"==n)h=t.top;else if("above"==n||"near"==n){var c=Math.max(a.wrapper.clientHeight,this.doc.height),u=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>c)&&t.top>e.offsetHeight?h=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=c&&(h=t.bottom),d+e.offsetWidth>u&&(d=u-e.offsetWidth)}e.style.top=h+"px",e.style.left=e.style.right="","right"==s?(d=a.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==s?d=0:"middle"==s&&(d=(a.sizer.clientWidth-e.offsetWidth)/2),e.style.left=d+"px"),i&&(o=this,l={left:d,top:h,right:d+e.offsetWidth,bottom:h+e.offsetHeight},null!=(r=Cn(o,l)).scrollTop&&Pn(o,r.scrollTop),null!=r.scrollLeft&&On(o,r.scrollLeft))},triggerOnKeyDown:qn(sl),triggerOnKeyPress:qn(ll),triggerOnKeyUp:ol,triggerOnMouseDown:qn(dl),execCommand:function(t){if(Yo.hasOwnProperty(t))return Yo[t].call(null,this)},triggerElectric:qn(function(t){Pl(this,t)}),findPosH:function(t,e,i,n){var s=1;e<0&&(s=-1,e=-e);for(var o=xt(this.doc,t),l=0;l<e&&!(o=El(this.doc,o,s,i,n)).hitSide;++l);return o},moveH:qn(function(t,e){var i=this;this.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?El(i.doc,n.head,t,e,i.options.rtlMoveVisually):t<0?n.from():n.to()},G)}),deleteH:qn(function(t,e){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Go(this,function(i){var s=El(n,i.head,t,e,!1);return t<0?{from:s,to:i.head}:{from:i.head,to:s}})}),findPosV:function(t,e,i,n){var s=1,o=n;e<0&&(s=-1,e=-e);for(var l=xt(this.doc,t),r=0;r<e;++r){var a=Gi(this,l,"div");if(null==o?o=a.left:a.left=o,(l=jl(this,a,s,i)).hitSide)break}return l},moveV:qn(function(t,e){var i=this,n=this.doc,s=[],o=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return t<0?l.from():l.to();var r=Gi(i,l.head,"div");null!=l.goalColumn&&(r.left=l.goalColumn),s.push(r.left);var a=jl(i,r,t,e);return"page"==e&&l==n.sel.primary()&&Sn(i,Wi(i,a,"div").top-r.top),a},G),s.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=s[l]}),findWordAt:function(t){var e=rt(this.doc,t.line).text,i=t.ch,n=t.ch;if(e){var s=this.getHelper(t,"wordChars");"before"!=t.sticky&&n!=e.length||!i?++n:--i;for(var o=e.charAt(i),l=et(o,s)?function(t){return et(t,s)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!et(t)};i>0&&l(e.charAt(i-1));)--i;for(;n<e.length&&l(e.charAt(n));)++n}return new _s(mt(t.line,i),mt(t.line,n))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?E(this.display.cursorDiv,"CodeMirror-overwrite"):I(this.display.cursorDiv,"CodeMirror-overwrite"),ie(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==M()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:qn(function(t,e){In(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Si(this)-this.display.barHeight,width:t.scrollWidth-Si(this)-this.display.barWidth,clientHeight:Ii(this),clientWidth:ki(this)}},scrollIntoView:qn(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:mt(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Nn(t),t.curOp.scrollToPos=e}(this,t):Tn(this,t.from,t.to,t.margin)}),setSize:qn(function(t,e){var i=this,n=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&Hi(this);var s=this.display.viewFrom;this.doc.iter(s,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){Qn(i,s,"widget");break}++s}),this.curOp.forceUpdate=!0,ie(this,"refresh",this)}),operation:function(t){return Un(this,t)},startOperation:function(){return Fn(this)},endOperation:function(){return Xn(this)},refresh:qn(function(){var t=this.display.cachedTextHeight;Kn(this),this.curOp.forceUpdate=!0,Bi(this),In(this,this.doc.scrollLeft,this.doc.scrollTop),rs(this),(null==t||Math.abs(t-Zi(this.display))>.5)&&on(this),ie(this,"refresh",this)}),swapDoc:qn(function(t){var e=this.doc;return e.cm=null,Ps(this,t),Bi(this),this.display.input.reset(),In(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,li(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},le(t),t.registerHelper=function(e,n,s){i.hasOwnProperty(e)||(i[e]=t[e]={_global:[]}),i[e][n]=s},t.registerGlobalHelper=function(e,n,s,o){t.registerHelper(e,n,o),i[e]._global.push({pred:s,val:o})}}(xl);var Xl,zl="iter insert remove copy getEditor constructor".split(" ");for(var Vl in ko.prototype)ko.prototype.hasOwnProperty(Vl)&&F(zl,Vl)<0&&(xl.prototype[Vl]=function(t){return function(){return t.apply(this.doc,arguments)}}(ko.prototype[Vl]));return le(ko),xl.inputStyles={textarea:Fl,contenteditable:Al},xl.defineMode=function(t){xl.defaults.mode||"null"==t||(xl.defaults.mode=t),function(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Ce[t]=e}.apply(this,arguments)},xl.defineMIME=function(t,e){Se[t]=e},xl.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),xl.defineMIME("text/plain","null"),xl.defineExtension=function(t,e){xl.prototype[t]=e},xl.defineDocExtension=function(t,e){ko.prototype[t]=e},xl.fromTextArea=function(t,e){if((e=e?H(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=M();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}function n(){t.value=r.getValue()}var s;if(t.form&&(Zt(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var o=t.form;s=o.submit;try{var l=o.submit=function(){n(),o.submit=s,o.submit(),o.submit=l}}catch(t){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(ee(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=s))}},t.style.display="none";var r=xl(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return r},(Xl=xl).off=ee,Xl.on=Zt,Xl.wheelEventPixels=ps,Xl.Doc=ko,Xl.splitLines=be,Xl.countColumn=B,Xl.findColumn=U,Xl.isWordChar=tt,Xl.Pass=z,Xl.signal=ie,Xl.Line=Ge,Xl.changeEnd=ys,Xl.scrollbarModel=Hn,Xl.Pos=mt,Xl.cmpPos=gt,Xl.modes=Ce,Xl.mimeModes=Se,Xl.resolveMode=ke,Xl.getMode=Ie,Xl.modeExtensions=Ne,Xl.extendMode=Te,Xl.copyState=Pe,Xl.startState=Oe,Xl.innerMode=De,Xl.commands=Yo,Xl.keyMap=Ho,Xl.keyName=Vo,Xl.isModifierKey=Xo,Xl.lookupKey=Fo,Xl.normalizeKeyMap=Ro,Xl.StringStream=Me,Xl.SharedTextMarker=wo,Xl.TextMarker=bo,Xl.LineWidget=go,Xl.e_preventDefault=re,Xl.e_stopPropagation=ae,Xl.e_stop=de,Xl.addClass=E,Xl.contains=O,Xl.rmClass=I,Xl.keyNames=Eo,xl.version="5.32.1",xl}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("javascript",function(e,i){var n,s,o=e.indentUnit,l=i.statementIndent,r=i.jsonld,a=i.json||r,h=i.typescript,d=i.wordCharacters||/[\w$\xa1-\uffff]/,c=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),i=t("keyword b"),n=t("keyword c"),s=t("keyword d"),o=t("operator"),l={type:"atom",style:"atom"},r={if:t("if"),while:e,with:e,else:i,do:i,try:i,finally:i,return:s,break:s,continue:s,new:t("new"),delete:n,void:n,throw:n,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:l,false:l,null:l,undefined:l,NaN:l,Infinity:l,this:t("this"),class:t("class"),super:t("atom"),yield:n,export:t("export"),import:t("import"),extends:n,await:n};if(h){var a={type:"variable",style:"type"},d={interface:t("class"),implements:n,namespace:n,public:t("modifier"),private:t("modifier"),protected:t("modifier"),abstract:t("modifier"),readonly:t("modifier"),string:a,number:a,boolean:a,any:a};for(var c in d)r[c]=d[c]}return r}(),u=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(t,e,i){return n=t,s=i,e}function m(t,e){var i,n=t.next();if('"'==n||"'"==n)return e.tokenize=(i=n,function(t,e){var n,s=!1;if(r&&"@"==t.peek()&&t.match(f))return e.tokenize=m,p("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=i||s);)s=!s&&"\\"==n;return s||(e.tokenize=m),p("string","string")}),e.tokenize(t,e);if("."==n&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return p("number","number");if("."==n&&t.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return p(n);if("="==n&&t.eat(">"))return p("=>","operator");if("0"==n&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),p("number","number");if("0"==n&&t.eat(/o/i))return t.eatWhile(/[0-7]/i),p("number","number");if("0"==n&&t.eat(/b/i))return t.eatWhile(/[01]/i),p("number","number");if(/\d/.test(n))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),p("number","number");if("/"==n)return t.eat("*")?(e.tokenize=g,g(t,e)):t.eat("/")?(t.skipToEnd(),p("comment","comment")):Bt(t,e,1)?(function(t){for(var e,i=!1,n=!1;null!=(e=t.next());){if(!i){if("/"==e&&!n)return;"["==e?n=!0:n&&"]"==e&&(n=!1)}i=!i&&"\\"==e}}(t),t.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),p("regexp","string-2")):(t.eat("="),p("operator","operator",t.current()));if("`"==n)return e.tokenize=_,_(t,e);if("#"==n)return t.skipToEnd(),p("error","error");if(u.test(n))return">"==n&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=n&&"="!=n||t.eat("="):/[<>*+\-]/.test(n)&&(t.eat(n),">"==n&&t.eat(n))),p("operator","operator",t.current());if(d.test(n)){t.eatWhile(d);var s=t.current();if("."!=e.lastType){if(c.propertyIsEnumerable(s)){var o=c[s];return p(o.type,o.style,s)}if("async"==s&&t.match(/^(\s|\/\*.*?\*\/)*[\(\w]/,!1))return p("async","keyword",s)}return p("variable","variable",s)}}function g(t,e){for(var i,n=!1;i=t.next();){if("/"==i&&n){e.tokenize=m;break}n="*"==i}return p("comment","comment")}function _(t,e){for(var i,n=!1;null!=(i=t.next());){if(!n&&("`"==i||"$"==i&&t.eat("{"))){e.tokenize=m;break}n=!n&&"\\"==i}return p("quasi","string-2",t.current())}var v="([{}])";function b(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var i=t.string.indexOf("=>",t.start);if(!(i<0)){if(h){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,i));n&&(i=n.index)}for(var s=0,o=!1,l=i-1;l>=0;--l){var r=t.string.charAt(l),a=v.indexOf(r);if(a>=0&&a<3){if(!s){++l;break}if(0==--s){"("==r&&(o=!0);break}}else if(a>=3&&a<6)++s;else if(d.test(r))o=!0;else{if(/["'\/]/.test(r))return;if(o&&!s){++l;break}}}o&&!s&&(e.fatArrowAt=l)}}var y={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(t,e,i,n,s,o){this.indented=t,this.column=e,this.type=i,this.prev=s,this.info=o,null!=n&&(this.align=n)}function x(t,e){for(var i=t.localVars;i;i=i.next)if(i.name==e)return!0;for(var n=t.context;n;n=n.prev)for(i=n.vars;i;i=i.next)if(i.name==e)return!0}var C={state:null,column:null,marked:null,cc:null};function S(){for(var t=arguments.length-1;t>=0;t--)C.cc.push(arguments[t])}function k(){return S.apply(null,arguments),!0}function I(t){function e(e){for(var i=e;i;i=i.next)if(i.name==t)return!0;return!1}var n=C.state;if(C.marked="def",n.context){if(e(n.localVars))return;n.localVars={name:t,next:n.localVars}}else{if(e(n.globalVars))return;i.globalVars&&(n.globalVars={name:t,next:n.globalVars})}}var N={name:"this",next:{name:"arguments"}};function T(){C.state.context={prev:C.state.context,vars:C.state.localVars},C.state.localVars=N}function P(){C.state.localVars=C.state.context.vars,C.state.context=C.state.context.prev}function D(t,e){var i=function(){var i=C.state,n=i.indented;if("stat"==i.lexical.type)n=i.lexical.indented;else for(var s=i.lexical;s&&")"==s.type&&s.align;s=s.prev)n=s.indented;i.lexical=new w(n,C.stream.column(),t,null,i.lexical,e)};return i.lex=!0,i}function O(){var t=C.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function M(t){return function e(i){return i==t?k():";"==t?S():k(e)}}function E(t,e){return"var"==t?k(D("vardef",e.length),ut,M(";"),O):"keyword a"==t?k(D("form"),L,E,O):"keyword b"==t?k(D("form"),E,O):"keyword d"==t?C.stream.match(/^\s*$/,!1)?k():k(D("stat"),B,M(";"),O):"debugger"==t?k(M(";")):"{"==t?k(D("}"),tt,O):";"==t?k():"if"==t?("else"==C.state.lexical.info&&C.state.cc[C.state.cc.length-1]==O&&C.state.cc.pop()(),k(D("form"),L,E,O,_t)):"function"==t?k(Ct):"for"==t?k(D("form"),vt,E,O):"variable"==t?h&&"type"==e?(C.marked="keyword",k(st,M("operator"),st,M(";"))):h&&"declare"==e?(C.marked="keyword",k(E)):h&&("module"==e||"enum"==e)&&C.stream.match(/^\s*\w/,!1)?(C.marked="keyword",k(D("form"),ft,M("{"),D("}"),tt,O,O)):k(D("stat"),$):"switch"==t?k(D("form"),L,M("{"),D("}","switch"),tt,O,O):"case"==t?k(j,M(":")):"default"==t?k(M(":")):"catch"==t?k(D("form"),T,M("("),St,M(")"),E,O,P):"class"==t?k(D("form"),It,O):"export"==t?k(D("stat"),Dt,O):"import"==t?k(D("stat"),Mt,O):"async"==t?k(E):"@"==e?k(j,E):S(D("stat"),j,M(";"),O)}function j(t){return H(t,!1)}function A(t){return H(t,!0)}function L(t){return"("!=t?S():k(D(")"),j,M(")"),O)}function H(t,e){if(C.state.fatArrowAt==C.stream.start){var i=e?W:V;if("("==t)return k(T,D(")"),J(St,")"),O,M("=>"),i,P);if("variable"==t)return S(T,ft,M("=>"),i,P)}var n=e?F:R;return y.hasOwnProperty(t)?k(n):"function"==t?k(Ct,n):"class"==t?k(D("form"),kt,O):"keyword c"==t||"async"==t?k(e?A:j):"("==t?k(D(")"),B,M(")"),O,n):"operator"==t||"spread"==t?k(e?A:j):"["==t?k(D("]"),Ht,O,n):"{"==t?Z(Y,"}",null,n):"quasi"==t?S(X,n):"new"==t?k(function(t){return function(e){return"."==e?k(t?U:G):"variable"==e&&h?k(ht,t?F:R):S(t?A:j)}}(e)):k()}function B(t){return t.match(/[;\}\)\],]/)?S():S(j)}function R(t,e){return","==t?k(j):F(t,e,!1)}function F(t,e,i){var n=0==i?R:F,s=0==i?j:A;return"=>"==t?k(T,i?W:V,P):"operator"==t?/\+\+|--/.test(e)||h&&"!"==e?k(n):h&&"<"==e&&C.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?k(D(">"),J(st,">"),O,n):"?"==e?k(j,M(":"),s):k(s):"quasi"==t?S(X,n):";"!=t?"("==t?Z(A,")","call",n):"."==t?k(q,n):"["==t?k(D("]"),B,M("]"),O,n):h&&"as"==e?(C.marked="keyword",k(st,n)):"regexp"==t?(C.state.lastType=C.marked="operator",C.stream.backUp(C.stream.pos-C.stream.start-1),k(s)):void 0:void 0}function X(t,e){return"quasi"!=t?S():"${"!=e.slice(e.length-2)?k(X):k(j,z)}function z(t){if("}"==t)return C.marked="string-2",C.state.tokenize=_,k(X)}function V(t){return b(C.stream,C.state),S("{"==t?E:j)}function W(t){return b(C.stream,C.state),S("{"==t?E:A)}function G(t,e){if("target"==e)return C.marked="keyword",k(R)}function U(t,e){if("target"==e)return C.marked="keyword",k(F)}function $(t){return":"==t?k(O,E):S(R,M(";"),O)}function q(t){if("variable"==t)return C.marked="property",k()}function Y(t,e){if("async"==t)return C.marked="property",k(Y);if("variable"==t||"keyword"==C.style){return C.marked="property","get"==e||"set"==e?k(K):(h&&C.state.fatArrowAt==C.stream.start&&(i=C.stream.match(/^\s*:\s*/,!1))&&(C.state.fatArrowAt=C.stream.pos+i[0].length),k(Q));var i}else{if("number"==t||"string"==t)return C.marked=r?"property":C.style+" property",k(Q);if("jsonld-keyword"==t)return k(Q);if("modifier"==t)return k(Y);if("["==t)return k(j,M("]"),Q);if("spread"==t)return k(A,Q);if("*"==e)return C.marked="keyword",k(Y);if(":"==t)return S(Q)}}function K(t){return"variable"!=t?S(Q):(C.marked="property",k(Ct))}function Q(t){return":"==t?k(A):"("==t?S(Ct):void 0}function J(t,e,i){function n(s,o){if(i?i.indexOf(s)>-1:","==s){var l=C.state.lexical;return"call"==l.info&&(l.pos=(l.pos||0)+1),k(function(i,n){return i==e||n==e?S():S(t)},n)}return s==e||o==e?k():k(M(e))}return function(i,s){return i==e||s==e?k():S(t,n)}}function Z(t,e,i){for(var n=3;n<arguments.length;n++)C.cc.push(arguments[n]);return k(D(e,i),J(t,e),O)}function tt(t){return"}"==t?k():S(E,tt)}function et(t,e){if(h){if(":"==t)return k(st);if("?"==e)return k(et)}}function it(t){if(h&&":"==t)return C.stream.match(/^\s*\w+\s+is\b/,!1)?k(j,nt,st):k(st)}function nt(t,e){if("is"==e)return C.marked="keyword",k()}function st(t,e){return"variable"==t||"void"==e?"keyof"==e?(C.marked="keyword",k(st)):(C.marked="type",k(at)):"string"==t||"number"==t||"atom"==t?k(at):"["==t?k(D("]"),J(st,"]",","),O,at):"{"==t?k(D("}"),J(lt,"}",",;"),O,at):"("==t?k(J(rt,")"),ot):void 0}function ot(t){if("=>"==t)return k(st)}function lt(t,e){return"variable"==t||"keyword"==C.style?(C.marked="property",k(lt)):"?"==e?k(lt):":"==t?k(st):"["==t?k(j,et,M("]"),lt):void 0}function rt(t){return"variable"==t?k(rt):":"==t?k(st):void 0}function at(t,e){return"<"==e?k(D(">"),J(st,">"),O,at):"|"==e||"."==t?k(st):"["==t?k(M("]"),at):"extends"==e?k(st):void 0}function ht(t,e){if("<"==e)return k(D(">"),J(st,">"),O,at)}function dt(){return S(st,ct)}function ct(t,e){if("="==e)return k(st)}function ut(){return S(ft,et,mt,gt)}function ft(t,e){return"modifier"==t?k(ft):"variable"==t?(I(e),k()):"spread"==t?k(ft):"["==t?Z(ft,"]"):"{"==t?Z(pt,"}"):void 0}function pt(t,e){return"variable"!=t||C.stream.match(/^\s*:/,!1)?("variable"==t&&(C.marked="property"),"spread"==t?k(ft):"}"==t?S():k(M(":"),ft,mt)):(I(e),k(mt))}function mt(t,e){if("="==e)return k(A)}function gt(t){if(","==t)return k(ut)}function _t(t,e){if("keyword b"==t&&"else"==e)return k(D("form","else"),E,O)}function vt(t){if("("==t)return k(D(")"),bt,M(")"),O)}function bt(t){return"var"==t?k(ut,M(";"),wt):";"==t?k(wt):"variable"==t?k(yt):S(j,M(";"),wt)}function yt(t,e){return"in"==e||"of"==e?(C.marked="keyword",k(j)):k(R,wt)}function wt(t,e){return";"==t?k(xt):"in"==e||"of"==e?(C.marked="keyword",k(j)):S(j,M(";"),xt)}function xt(t){")"!=t&&k(j)}function Ct(t,e){return"*"==e?(C.marked="keyword",k(Ct)):"variable"==t?(I(e),k(Ct)):"("==t?k(T,D(")"),J(St,")"),O,it,E,P):h&&"<"==e?k(D(">"),J(dt,">"),O,Ct):void 0}function St(t,e){return"@"==e&&k(j,St),"spread"==t||"modifier"==t?k(St):S(ft,et,mt)}function kt(t,e){return"variable"==t?It(t,e):Nt(t,e)}function It(t,e){if("variable"==t)return I(e),k(Nt)}function Nt(t,e){return"<"==e?k(D(">"),J(dt,">"),O,Nt):"extends"==e||"implements"==e||h&&","==t?k(h?st:j,Nt):"{"==t?k(D("}"),Tt,O):void 0}function Tt(t,e){return"modifier"==t||"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e)&&C.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(C.marked="keyword",k(Tt)):"variable"==t||"keyword"==C.style?(C.marked="property",k(h?Pt:Ct,Tt)):"["==t?k(j,M("]"),h?Pt:Ct,Tt):"*"==e?(C.marked="keyword",k(Tt)):";"==t?k(Tt):"}"==t?k():"@"==e?k(j,Tt):void 0}function Pt(t,e){return"?"==e?k(Pt):":"==t?k(st,mt):"="==e?k(A):S(Ct)}function Dt(t,e){return"*"==e?(C.marked="keyword",k(Lt,M(";"))):"default"==e?(C.marked="keyword",k(j,M(";"))):"{"==t?k(J(Ot,"}"),Lt,M(";")):S(E)}function Ot(t,e){return"as"==e?(C.marked="keyword",k(M("variable"))):"variable"==t?S(A,Ot):void 0}function Mt(t){return"string"==t?k():S(Et,jt,Lt)}function Et(t,e){return"{"==t?Z(Et,"}"):("variable"==t&&I(e),"*"==e&&(C.marked="keyword"),k(At))}function jt(t){if(","==t)return k(Et,jt)}function At(t,e){if("as"==e)return C.marked="keyword",k(Et)}function Lt(t,e){if("from"==e)return C.marked="keyword",k(j)}function Ht(t){return"]"==t?k():S(J(A,"]"))}function Bt(t,e,i){return e.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(i||0)))}return O.lex=!0,{startState:function(t){var e={tokenize:m,lastType:"sof",cc:[],lexical:new w((t||0)-o,0,"block",!1),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:t||0};return i.globalVars&&"object"==typeof i.globalVars&&(e.globalVars=i.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),b(t,e)),e.tokenize!=g&&t.eatSpace())return null;var i=e.tokenize(t,e);return"comment"==n?i:(e.lastType="operator"!=n||"++"!=s&&"--"!=s?n:"incdec",function(t,e,i,n,s){var o=t.cc;for(C.state=t,C.stream=s,C.marked=null,C.cc=o,C.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;)if((o.length?o.pop():a?j:E)(i,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return C.marked?C.marked:"variable"==i&&x(t,n)?"variable-2":e}}(e,i,n,s,t))},indent:function(e,n){if(e.tokenize==g)return t.Pass;if(e.tokenize!=m)return 0;var s,r=n&&n.charAt(0),a=e.lexical;if(!/^\s*else\b/.test(n))for(var h=e.cc.length-1;h>=0;--h){var d=e.cc[h];if(d==O)a=a.prev;else if(d!=_t)break}for(;("stat"==a.type||"form"==a.type)&&("}"==r||(s=e.cc[e.cc.length-1])&&(s==R||s==F)&&!/^[,\.=+\-*:?[\(]/.test(n));)a=a.prev;l&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var c=a.type,f=r==c;return"vardef"==c?a.indented+("operator"==e.lastType||","==e.lastType?a.info+1:0):"form"==c&&"{"==r?a.indented:"form"==c?a.indented+o:"stat"==c?a.indented+(function(t,e){return"operator"==t.lastType||","==t.lastType||u.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}(e,n)?l||o:0):"switch"!=a.info||f||0==i.doubleIndentSwitch?a.align?a.column+(f?0:1):a.indented+(f?0:o):a.indented+(/^(?:case|default)\b/.test(n)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",blockCommentContinue:a?null:" * ",lineComment:a?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:a?"json":"javascript",jsonldMode:r,jsonMode:a,expressionAllowed:Bt,skipExpression:function(t){var e=t.cc[t.cc.length-1];e!=j&&e!=A||t.cc.pop()}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t){for(var e={},i=0;i<t.length;++i)e[t[i].toLowerCase()]=!0;return e}t.defineMode("css",function(e,i){var n=i.inline;i.propertyKeywords||(i=t.resolveMode("text/css"));var s,o,l=e.indentUnit,r=i.tokenHooks,a=i.documentTypes||{},h=i.mediaTypes||{},d=i.mediaFeatures||{},c=i.mediaValueKeywords||{},u=i.propertyKeywords||{},f=i.nonStandardPropertyKeywords||{},p=i.fontProperties||{},m=i.counterDescriptors||{},g=i.colorKeywords||{},_=i.valueKeywords||{},v=i.allowNested,b=i.lineComment,y=!0===i.supportsAtComponent;function w(t,e){return s=e,t}function x(t){return function(e,i){for(var n,s=!1;null!=(n=e.next());){if(n==t&&!s){")"==t&&e.backUp(1);break}s=!s&&"\\"==n}return(n==t||!s&&")"!=t)&&(i.tokenize=null),w("string","string")}}function C(t,e){return t.next(),t.match(/\s*[\"\')]/,!1)?e.tokenize=null:e.tokenize=x(")"),w(null,"(")}function S(t,e,i){this.type=t,this.indent=e,this.prev=i}function k(t,e,i,n){return t.context=new S(i,e.indentation()+(!1===n?0:l),t.context),i}function I(t){return t.context.prev&&(t.context=t.context.prev),t.context.type}function N(t,e,i){return D[i.context.type](t,e,i)}function T(t,e,i,n){for(var s=n||1;s>0;s--)i.context=i.context.prev;return N(t,e,i)}function P(t){var e=t.current().toLowerCase();o=_.hasOwnProperty(e)?"atom":g.hasOwnProperty(e)?"keyword":"variable"}var D={top:function(t,e,i){if("{"==t)return k(i,e,"block");if("}"==t&&i.context.prev)return I(i);if(y&&/@component/i.test(t))return k(i,e,"atComponentBlock");if(/^@(-moz-)?document$/i.test(t))return k(i,e,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(t))return k(i,e,"atBlock");if(/^@(font-face|counter-style)/i.test(t))return i.stateArg=t,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(t))return"keyframes";if(t&&"@"==t.charAt(0))return k(i,e,"at");if("hash"==t)o="builtin";else if("word"==t)o="tag";else{if("variable-definition"==t)return"maybeprop";if("interpolation"==t)return k(i,e,"interpolation");if(":"==t)return"pseudo";if(v&&"("==t)return k(i,e,"parens")}return i.context.type},block:function(t,e,i){if("word"==t){var n=e.current().toLowerCase();return u.hasOwnProperty(n)?(o="property","maybeprop"):f.hasOwnProperty(n)?(o="string-2","maybeprop"):v?(o=e.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==t?"block":v||"hash"!=t&&"qualifier"!=t?D.top(t,e,i):(o="error","block")},maybeprop:function(t,e,i){return":"==t?k(i,e,"prop"):N(t,e,i)},prop:function(t,e,i){if(";"==t)return I(i);if("{"==t&&v)return k(i,e,"propBlock");if("}"==t||"{"==t)return T(t,e,i);if("("==t)return k(i,e,"parens");if("hash"!=t||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(e.current())){if("word"==t)P(e);else if("interpolation"==t)return k(i,e,"interpolation")}else o+=" error";return"prop"},propBlock:function(t,e,i){return"}"==t?I(i):"word"==t?(o="property","maybeprop"):i.context.type},parens:function(t,e,i){return"{"==t||"}"==t?T(t,e,i):")"==t?I(i):"("==t?k(i,e,"parens"):"interpolation"==t?k(i,e,"interpolation"):("word"==t&&P(e),"parens")},pseudo:function(t,e,i){return"meta"==t?"pseudo":"word"==t?(o="variable-3",i.context.type):N(t,e,i)},documentTypes:function(t,e,i){return"word"==t&&a.hasOwnProperty(e.current())?(o="tag",i.context.type):D.atBlock(t,e,i)},atBlock:function(t,e,i){if("("==t)return k(i,e,"atBlock_parens");if("}"==t||";"==t)return T(t,e,i);if("{"==t)return I(i)&&k(i,e,v?"block":"top");if("interpolation"==t)return k(i,e,"interpolation");if("word"==t){var n=e.current().toLowerCase();o="only"==n||"not"==n||"and"==n||"or"==n?"keyword":h.hasOwnProperty(n)?"attribute":d.hasOwnProperty(n)?"property":c.hasOwnProperty(n)?"keyword":u.hasOwnProperty(n)?"property":f.hasOwnProperty(n)?"string-2":_.hasOwnProperty(n)?"atom":g.hasOwnProperty(n)?"keyword":"error"}return i.context.type},atComponentBlock:function(t,e,i){return"}"==t?T(t,e,i):"{"==t?I(i)&&k(i,e,v?"block":"top",!1):("word"==t&&(o="error"),i.context.type)},atBlock_parens:function(t,e,i){return")"==t?I(i):"{"==t||"}"==t?T(t,e,i,2):D.atBlock(t,e,i)},restricted_atBlock_before:function(t,e,i){return"{"==t?k(i,e,"restricted_atBlock"):"word"==t&&"@counter-style"==i.stateArg?(o="variable","restricted_atBlock_before"):N(t,e,i)},restricted_atBlock:function(t,e,i){return"}"==t?(i.stateArg=null,I(i)):"word"==t?(o="@font-face"==i.stateArg&&!p.hasOwnProperty(e.current().toLowerCase())||"@counter-style"==i.stateArg&&!m.hasOwnProperty(e.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(t,e,i){return"word"==t?(o="variable","keyframes"):"{"==t?k(i,e,"top"):N(t,e,i)},at:function(t,e,i){return";"==t?I(i):"{"==t||"}"==t?T(t,e,i):("word"==t?o="tag":"hash"==t&&(o="builtin"),"at")},interpolation:function(t,e,i){return"}"==t?I(i):"{"==t||";"==t?T(t,e,i):("word"==t?o="variable":"variable"!=t&&"("!=t&&")"!=t&&(o="error"),"interpolation")}};return{startState:function(t){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new S(n?"block":"top",t||0,null)}},token:function(t,e){if(!e.tokenize&&t.eatSpace())return null;var i=(e.tokenize||function(t,e){var i=t.next();if(r[i]){var n=r[i](t,e);if(!1!==n)return n}return"@"==i?(t.eatWhile(/[\w\\\-]/),w("def",t.current())):"="==i||("~"==i||"|"==i)&&t.eat("=")?w(null,"compare"):'"'==i||"'"==i?(e.tokenize=x(i),e.tokenize(t,e)):"#"==i?(t.eatWhile(/[\w\\\-]/),w("atom","hash")):"!"==i?(t.match(/^\s*\w*/),w("keyword","important")):/\d/.test(i)||"."==i&&t.eat(/\d/)?(t.eatWhile(/[\w.%]/),w("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?w(null,"select-op"):"."==i&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?w("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?w(null,i):("u"==i||"U"==i)&&t.match(/rl(-prefix)?\(/i)||("d"==i||"D"==i)&&t.match("omain(",!0,!0)||("r"==i||"R"==i)&&t.match("egexp(",!0,!0)?(t.backUp(1),e.tokenize=C,w("property","word")):/[\w\\\-]/.test(i)?(t.eatWhile(/[\w\\\-]/),w("property","word")):w(null,null):/[\d.]/.test(t.peek())?(t.eatWhile(/[\w.%]/),w("number","unit")):t.match(/^-[\w\\\-]+/)?(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?w("variable-2","variable-definition"):w("variable-2","variable")):t.match(/^\w+-/)?w("meta","meta"):void 0})(t,e);return i&&"object"==typeof i&&(s=i[1],i=i[0]),o=i,"comment"!=s&&(e.state=D[e.state](s,t,e)),o},indent:function(t,e){var i=t.context,n=e&&e.charAt(0),s=i.indent;return"prop"!=i.type||"}"!=n&&")"!=n||(i=i.prev),i.prev&&("}"!=n||"block"!=i.type&&"top"!=i.type&&"interpolation"!=i.type&&"restricted_atBlock"!=i.type?(")"!=n||"parens"!=i.type&&"atBlock_parens"!=i.type)&&("{"!=n||"at"!=i.type&&"atBlock"!=i.type)||(s=Math.max(0,i.indent-l)):s=(i=i.prev).indent),s},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}});var i=["domain","regexp","url","url-prefix"],n=e(i),s=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=e(s),l=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],r=e(l),a=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],h=e(a),d=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=e(d),u=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],f=e(u),p=e(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),m=e(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],_=e(g),v=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=e(v),y=i.concat(s).concat(l).concat(a).concat(d).concat(u).concat(g).concat(v);function w(t,e){for(var i,n=!1;null!=(i=t.next());){if(n&&"/"==i){e.tokenize=null;break}n="*"==i}return["comment","comment"]}t.registerHelper("hintWords","css",y),t.defineMIME("text/css",{documentTypes:n,mediaTypes:o,mediaFeatures:r,mediaValueKeywords:h,propertyKeywords:c,nonStandardPropertyKeywords:f,fontProperties:p,counterDescriptors:m,colorKeywords:_,valueKeywords:b,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=w,w(t,e))}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:r,mediaValueKeywords:h,propertyKeywords:c,nonStandardPropertyKeywords:f,colorKeywords:_,valueKeywords:b,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=w,w(t,e)):["operator","operator"]},":":function(t){return!!t.match(/\s*\{/,!1)&&[null,null]},$:function(t){return t.match(/^[\w-]+/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(t){return!!t.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:r,mediaValueKeywords:h,propertyKeywords:c,nonStandardPropertyKeywords:f,colorKeywords:_,valueKeywords:b,fontProperties:p,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=w,w(t,e)):["operator","operator"]},"@":function(t){return t.eat("{")?[null,"interpolation"]:!t.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:o,mediaFeatures:r,propertyKeywords:c,nonStandardPropertyKeywords:f,fontProperties:p,counterDescriptors:m,colorKeywords:_,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=w,w(t,e))}},name:"css",helperType:"gss"})}),function(t){var e;t.widget("linkundlink.mediacenter",{options:{version:.95,active:!0,uniqueID:null,datasource:null,mode:3,modeselector:"",userIDs:null,userNames:null,fileGrid:null,query:new Object,startmode:7,startscope:1,currentFilter:"",usageFilter:0,colJSON:null,cols:null,itemsInDatabase:0,overwriteExistingUpload:!0,allowedMediaTypes:[7,5,6,14,11],uac:{editGlobalMetadata:!1,editProjectMetadata:!0,uploadProjectScope:!0,uploadGlobalScope:!0,deleteProjectScope:!0,deleteGlobalScope:!0,downloadProjectScope:!0,downloadGlobalScope:!0,hideProjectTimeStamps:!1,hideGlobalTimeStamps:!1},scopes:[1,2],languagetoken:"de",translationpath:"",colTranslation:{}},closeMC:function(t,e,i){var n="",s="",o="";switch(this.options.mode){case moCenter:n="mediencenter",o="MC";break;case moAssi:n="medienassi",o="MA";break;case moBrowser:n="medienbrowser",o="MB"}switch(t){case 1:s=mrOK;break;case 2:s=mrCancel;break;case 3:s=mrClose}""!=o&&(this.options.query.filters.Scope.length>=1&&IUser._SetUserSetting(o,"Scope",this.options.query.filters.Scope[0]),IUser._SetUserSetting(o,"MVType",this.options.query.filters.MetavarType)),IMC._OnMCClose(n,s,e,i),this.options.currentFilter=""},destroy:function(){this.options.fileGrid.destructor(),this.element.unbind(),this.element.removeClass("mediacenter"),this.element.removeClass(this.options.uniqueID),this.element.empty(),t.Widget.prototype.destroy.call(this),jQuery("#mediacenter_dialog").dialog("destroy")},escapeRegEx:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},_init:function(){e=this,this.options.active=!0;var i=new Date;this.options.uniqueID="mc"+i.getTime(),this.element.addClass("mediacenter"),this.element.addClass(this.options.uniqueID),this.options.modeselector=this.options.mode==moCenter?".mediacentermode":this.options.mode==moAssi?".mediaassimode":".mediabrowsermode",this.options.colTranslation=_getLanguageChapter("MedienCenter"),this.options.uac.hideProjectTimeStamps=AnyToBool(""==IRF._HasActionRealized("30730")),this.options.uac.hideGlobalTimeStamps=AnyToBool(""==IRF._HasActionRealized("30720")),this._prepareHTML();var n={definitions:[{filetype:mtPicture,extensions:/(\.|\/)(asd)$/i,config:[{colName:"",colType:"ch",attribName:"",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_PREVIEW",colType:"img",attribName:"previewCol",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_NICENAME",colType:"ro",attribName:"NiceName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_FILENAME",colType:"ro",attribName:"FileName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_FORMAT",colType:"ro",attribName:"MimeType",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_DELETE",colType:"img",attribName:"custDELETE",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_EDIT",colType:"img",attribName:"custEDIT",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_UPLOADDATE",colType:"ro",attribName:"UploadDate",sorttype:"date",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_UPLOADER",colType:"ro",attribName:"UploadUser",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_USAGE",colType:"linkStyle",attribName:"Usage",sorttype:"string",readonly:!0,visibility_big:{visibleInGrid:AnyToBool(""!=IRF._HasActionRealized("70105")),visibleInDetailView:!1},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!1}},{colName:"COL_PATH",colType:"ro",attribName:"path",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"",colType:"ro",attribName:"completeNameWithMetavar",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"META_WIDTH",colType:"ro",attribName:"mwidth",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"META_HEIGHT",colType:"ro",attribName:"mheight",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_COPYRIGHT",colType:"ro",attribName:"Copyright",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}}],htmlbutton:{id:"btn_mediatype_img",caption:"BTN_IMG",handler:function(t,e){this.switchMode(t),this.tabColorizer(e)}}},{filetype:mtAudio,extensions:/(\.|\/)(mp3)$/i,config:[{colName:"",colType:"ch",attribName:"",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_NICENAME",colType:"ro",attribName:"NiceName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_FILENAME",colType:"ro",attribName:"FileName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_FORMAT",colType:"ro",attribName:"MimeType",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_DELETE",colType:"img",attribName:"custDELETE",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_EDIT",colType:"img",attribName:"custEDIT",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_UPLOADDATE",colType:"ro",attribName:"UploadDate",sorttype:"date",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_UPLOADER",colType:"ro",attribName:"UploadUser",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_USAGE",colType:"linkStyle",attribName:"Usage",sorttype:"string",readonly:!0,visibility_big:{visibleInGrid:AnyToBool(""!=IRF._HasActionRealized("70105")),visibleInDetailView:!1},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!1}},{colName:"COL_PATH",colType:"ro",attribName:"path",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_METAVARTEMP",colType:"ro",attribName:"completeNameWithMetavar",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_COPYRIGHT",colType:"ro",attribName:"Copyright",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}}],htmlbutton:{id:"btn_mediatype_audio",caption:"BTN_AUDIO",handler:function(t,e){this.switchMode(t),this.tabColorizer(e)}}},{filetype:mtVideo,extensions:/(\.|\/)(wmv|avi|mp4|flv)$/i,config:[{colName:"",colType:"ch",attribName:"",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_NICENAME",colType:"ro",attribName:"NiceName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_FILENAME",colType:"ro",attribName:"FileName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_FORMAT",colType:"ro",attribName:"MimeType",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_DELETE",colType:"img",attribName:"custDELETE",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_EDIT",colType:"img",attribName:"custEDIT",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_UPLOADDATE",colType:"ro",attribName:"UploadDate",sorttype:"date",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_UPLOADER",colType:"ro",attribName:"UploadUser",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_USAGE",colType:"linkStyle",attribName:"Usage",sorttype:"string",readonly:!0,visibility_big:{visibleInGrid:AnyToBool(""!=IRF._HasActionRealized("70105")),visibleInDetailView:!1},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!1}},{colName:"COL_PATH",colType:"ro",attribName:"path",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_METAVARTEMP",colType:"ro",attribName:"completeNameWithMetavar",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_COPYRIGHT",colType:"ro",attribName:"Copyright",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}}],htmlbutton:{id:"btn_mediatype_video",caption:"BTN_VIDEO",handler:function(t,e){this.switchMode(t),this.tabColorizer(e)}}},{filetype:mtPdf,extensions:/(\.|\/)(pdf)$/i,config:[{colName:"",colType:"ch",attribName:"",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_NICENAME",colType:"ro",attribName:"NiceName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_FILENAME",colType:"ro",attribName:"FileName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_FORMAT",colType:"ro",attribName:"MimeType",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_DELETE",colType:"img",attribName:"custDELETE",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_EDIT",colType:"img",attribName:"custEDIT",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_UPLOADDATE",colType:"ro",attribName:"UploadDate",sorttype:"date",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_UPLOADER",colType:"ro",attribName:"UploadUser",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_USAGE",colType:"linkStyle",attribName:"Usage",sorttype:"string",readonly:!0,visibility_big:{visibleInGrid:AnyToBool(""!=IRF._HasActionRealized("70105")),visibleInDetailView:!1},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!1}},{colName:"COL_PATH",colType:"ro",attribName:"path",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_METAVARTEMP",colType:"ro",attribName:"completeNameWithMetavar",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_COPYRIGHT",colType:"ro",attribName:"Copyright",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}}],htmlbutton:{id:"btn_mediatype_doc",caption:"BTN_DOC",handler:function(t,e){this.switchMode(t),this.tabColorizer(e)}}},{filetype:mtFlash,extensions:/(\.|\/)(swf)$/i,config:[{colName:"",colType:"ch",attribName:"",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_NICENAME",colType:"ro",attribName:"NiceName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_FILENAME",colType:"ro",attribName:"FileName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_DELETE",colType:"img",attribName:"custDELETE",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_EDIT",colType:"img",attribName:"custEDIT",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_UPLOADDATE",colType:"ro",attribName:"UploadDate",sorttype:"date",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_UPLOADER",colType:"ro",attribName:"UploadUser",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_USAGE",colType:"linkStyle",attribName:"Usage",sorttype:"string",readonly:!0,visibility_big:{visibleInGrid:AnyToBool(""!=IRF._HasActionRealized("70105")),visibleInDetailView:!1},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!1}},{colName:"COL_PATH",colType:"ro",attribName:"path",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_METAVARTEMP",colType:"ro",attribName:"completeNameWithMetavar",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_COPYRIGHT",colType:"ro",attribName:"Copyright",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}}],htmlbutton:{id:"btn_mediatype_flash",caption:"BTN_FLASH",handler:function(t,e){this.switchMode(t),this.tabColorizer(e)}}},{filetype:mtLLApp,extensions:/(\.|\/)(xls)$/i,config:[{colName:"",colType:"ch",attribName:"",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_NICENAME",colType:"ro",attribName:"NiceName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_FILENAME",colType:"ro",attribName:"FileName",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_FORMAT",colType:"ro",attribName:"MimeType",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!0}},{colName:"COL_DELETE",colType:"img",attribName:"custDELETE",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_EDIT",colType:"img",attribName:"custEDIT",sorttype:"na",readonly:!1,visibility_big:{visibleInGrid:!0,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_UPLOADDATE",colType:"ro",attribName:"UploadDate",sorttype:"date",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}},{colName:"COL_UPLOADER",colType:"ro",attribName:"UploadUser",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!0,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_USAGE",colType:"linkStyle",attribName:"Usage",sorttype:"string",readonly:!0,visibility_big:{visibleInGrid:AnyToBool(""!=IRF._HasActionRealized("70105")),visibleInDetailView:!1},visibility_small:{visibleInSmallView:!0,visibleInSmallDetailView:!1}},{colName:"COL_PATH",colType:"ro",attribName:"path",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_METAVARTEMP",colType:"ro",attribName:"completeNameWithMetavar",sorttype:"na",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!1},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!1}},{colName:"COL_COPYRIGHT",colType:"ro",attribName:"Copyright",sorttype:"str",readonly:!0,visibility_big:{visibleInGrid:!1,visibleInDetailView:!0},visibility_small:{visibleInSmallView:!1,visibleInSmallDetailView:!0}}],htmlbutton:{id:"btn_mediatype_other",caption:"BTN_OTHER",handler:function(t,e){this.switchMode(t),this.tabColorizer(e)}}}]};if(null==this.options.colJSON){this.options.colJSON=n;for(var s=0;s<this.options.colJSON.definitions.length;s++){var o="(\\.|\\/)("+IMC._MetavarType2Extensions(this.options.colJSON.definitions[s].filetype)+")$";this.options.colJSON.definitions[s].extensions=new RegExp(o,"i")}}switch(this.options.cols=this.loadColDefinitions(this.options.colJSON),this.options.filetypes=this.loadFiletypes(this.options.colJSON),this.options.mode){case moBrowser:case moCenter:t("."+this.options.uniqueID).find("#content").css("width","1200px").css("height","730px"),t("."+this.options.uniqueID).find("#div_grid").css("width","100%").css("height","100%").css("overflow","hidden!important"),this.options.fileGrid=new dhtmlXGridObject("div_grid")}this.options.mode!=moAssi&&(this.options.fileGrid.setImagePath(IDEAWASGRIDIMAGSDIR),this.options.fileGrid.enableAutoHeight(!1),this.options.fileGrid.enableAutoWidth(!1),this.options.fileGrid.setSizes(),this.options.fileGrid.setHeader(""),this.options.fileGrid.setInitWidths("30,200,8,8,8,*"),this.options.fileGrid.setColAlign("left, right"),this.options.fileGrid.init(),this.options.fileGrid.setSkin("ideateam"),this._createGridEventHandler(),this.options.mode==moCenter&&this.options.fileGrid.enableMultiselect(!0),this.options.mode==moBrowser&&this.options.fileGrid.attachEvent("onRowDblClicked",jQuery.proxy(function(t,e){var i="",n=this.options.fileGrid.cells(this.options.fileGrid.getSelectedRowId(),this.options.fileGrid.getColIndexById("completeNameWithMetavar")).getValue();switch(this.options.mode){case moCenter:i="MC";break;case moAssi:i="MA";break;case moBrowser:i="MB"}""!=i&&(this.options.query.filters.Scope.length>=1&&IUser._SetUserSetting(i,"Scope",this.options.query.filters.Scope[0]),IUser._SetUserSetting(i,"MVType",this.options.query.filters.MetavarType)),IMC._OnMCClose("medienbrowser",mrOK,n,this.options.query.type==mtPicture?this.getImageDimensions(this.options.fileGrid.getSelectedRowId()):"",this.options.fileGrid.getSelectedRowId()),_hideMediaCenterDialog(this.getMediaCenterDialogID())},this))),this._createQuery(),this._createHTML()},_createHTML:function(){var e=expandmetavarEx("$(CourseDir)$","CV"),i="",n="",s="",o="",l="",r="",a=this.options.mode==moCenter?"mediacentermode":this.options.mode==moAssi?"mediaassimode":"mediabrowsermode";switch(this.options.mode){case moAssi:i=(r=".mediaassimode")+"#div_small_navarea",n=r+"#div_small_filterarea",s=r+"#div_small_filterarea",o=r+"#div_small_buttonarea",l="#div_small_filterarea","mediabrowser_buttons selectedTab","mediabrowser_buttons deselectedTab";break;default:case moBrowser:r=".mediabrowsermode";case moCenter:this.options.mode!=moBrowser&&t((r=".mediacentermode")+"#div_elemActions").append(t("<button>").attr("type","button").attr("name","btn_selectAll").attr("id","btn_selectAll").addClass("btn_default").addClass("IdeaComponent").addClass("button").attr("title",this.translate("TIT_SELECT")).append(t("<img>").attr("src",e+"bilder/select_all.png"))).append(t("<button>").attr("type","button").attr("name","btn_removeSelection").attr("id","btn_removeSelection").addClass("btn_default").addClass("IdeaComponent").addClass("button").attr("title",this.translate("TIT_DESELECT")).append(t("<img>").attr("src",e+"bilder/unselect_all.png"))),s=r+"#div_filter_right",o=r+"#div_filter_left_buttons",t(r+"#div_metahead").append(this.translate("TXT_METADATA")),t(r+"#div_filter_right").append('<div id="searcharea"></div>'),this.options.uac.editCatList&&this.options.mode!=moBrowser||t(r+"#btn_edit_cat").hide(),this.options.mode==moCenter?(t(r+"#mce_closebuttons").append(t("<button>").attr("id","btn_close").addClass("btn_default").addClass("IdeaComponent").addClass("button").attr("name","btn_close").attr("title",this.translate("BTN_CLOSE")).text(this.translate("BTN_CLOSE"))),this.appendClasses(),t(r+"#btn_close").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_close").attr("title",this.translate("BTN_CLOSE"))):(t(r+"#mce_closebuttons").append(t("<button>").attr("id","btn_close_ok").addClass("btn_default").addClass("IdeaComponent").addClass("button").attr("name","btn_close_ok").attr("title",this.translate("BTN_OK")).text(this.translate("BTN_OK"))).append(t("<button>").attr("id","btn_close_cancel").addClass("btn_default").addClass("IdeaComponent").addClass("button").attr("name","btn_close_cancel").attr("title",this.translate("BTN_CANCEL")).text(this.translate("BTN_CANCEL"))),this.appendClasses(),t(r+"#btn_close_cancel").attr("title",this.translate("TIT_CLOSE_CANCEL")).on("click",{grid:this.options.fileGrid},jQuery.proxy(function(t){if(null!=this.options.fileGrid.getSelectedRowId()){var e=this.options.fileGrid.cells(this.options.fileGrid.getSelectedRowId(),this.options.fileGrid.getColIndexById("completeNameWithMetavar")).getValue();switch(this.options.mode){case moCenter:sSetting="MC";break;case moAssi:sSetting="MA";break;case moBrowser:sSetting="MB"}""!=sSetting&&(this.options.query.filters.Scope.length>=1&&IUser._SetUserSetting(sSetting,"Scope",this.options.query.filters.Scope[0]),IUser._SetUserSetting(sSetting,"MVType",this.options.query.filters.MetavarType)),IMC._OnMCClose("medienbrowser",mrCancel,e,this.options.query.type==mtPicture?this.getImageDimensions(this.options.fileGrid.getSelectedRowId()):"",this.options.fileGrid.getSelectedRowId()),this.options.active=!1}this.pausePlayback(),_hideMediaCenterDialog(this.getMediaCenterDialogID())},this)),t(r+"#btn_close_ok").attr("title",this.translate("TIT_CLOSE_OK")).on("click",{grid:this.options.fileGrid},jQuery.proxy(function(t){if(null!=this.options.fileGrid.getSelectedRowId()){var e="",i=this.options.fileGrid.cells(this.options.fileGrid.getSelectedRowId(),this.options.fileGrid.getColIndexById("completeNameWithMetavar")).getValue();switch(this.options.mode){case moCenter:e="MC";break;case moAssi:e="MA";break;case moBrowser:e="MB"}""!=e&&(this.options.query.filters.Scope.length>=1&&IUser._SetUserSetting(e,"Scope",this.options.query.filters.Scope[0]),IUser._SetUserSetting(e,"MVType",this.options.query.filters.MetavarType)),IMC._OnMCClose("medienbrowser",mrOK,i,this.options.query.type==mtPicture?this.getImageDimensions(this.options.fileGrid.getSelectedRowId()):"",this.options.fileGrid.getSelectedRowId()),this.pausePlayback(),_hideMediaCenterDialog(this.getMediaCenterDialogID())}else IAL._aMsgDlg(this.translate("TXT_MEDIASELECT"),this.translate("TXT_MEDIA"),"300","info");this.options.active=!1},this))),i=r+"#div_scrolling",r+"#div_mediatype",n=r+"#searcharea",l=".hdr",this.translate("BTN_IMG"),this.translate("BTN_AUDIO"),this.translate("BTN_VIDEO"),this.translate("BTN_DOC"),this.translate("BTN_FLASH"),"mediatypebtn selectedTab","mediatypebtn deselectedTab";var h=r+" #div_elemActions";this.options.mode==moCenter&&(t(h).show(),t(h).append(t("<button>").attr("type","button").attr("name","btn_delete").attr("id","btn_delete").addClass("btn_default").addClass("IdeaComponent").addClass("button").attr("title",this.translate("DELETE_SELECTED")).append(t("<img>").attr("src",e+"bilder/bt_del_sm.png"))).append(t("<button>").attr("type","button").attr("name","btn_edit").attr("id","btn_edit").addClass("btn_default").addClass("IdeaComponent").addClass("button").attr("title",this.translate("EDIT_SELECTED")).append(t("<img>").attr("src",e+"bilder/bt_blu_edit.png"))).append(t("<div>").addClass("mcespacer")),(this.options.startscope==stProject&&!this.options.uac.editProjectMetadata||this.options.startscope==stGlobal&&!this.options.uac.editGlobalMetadata)&&t("#btn_edit").hide(),(this.options.startscope==stProject&&!this.options.uac.deleteProjectScope||this.options.startscope==stGlobal&&!this.options.uac.deleteGlobalScope)&&t("#btn_delete").hide()),t(h).append(t("<button>").attr("type","button").attr("id","btn_upload").attr("name","btn_upload").attr("title",this.translate("BTN_UPLOAD")).addClass(a).addClass("IdeaComponent").addClass("button").append(t("<img>").attr("src",e+"bilder/bt_entry_add.png").addClass(a))),this.options.startscope==stProject?t(r+"#btn_upload").css(this.options.uac.uploadProjectScope?{display:"inline-block"}:{display:"none"}):t(r+"#btn_upload").css(this.options.uac.uploadGlobalScope?{display:"inline-block"}:{display:"none"}),t(h).append(t("<button>").attr("type","button").attr("id","btn_download").attr("name","btn_download").attr("title",this.translate("BTN_DOWNLOAD")).addClass(a).addClass("IdeaComponent").addClass("button").append(t("<img>").attr("src",e+"bilder/bt_mc_down.png").addClass(a))),this.options.startscope==stProject?t(r+"#btn_download").css(this.options.uac.downloadProjectScope?{display:"inline-block"}:{display:"none"}):t(r+"#btn_download").css(this.options.uac.downloadGlobalScope?{display:"inline-block"}:{display:"none"});var d=this.options.query.itemsnum;t(r+"#div_media_per_page").append(this.translate("TXT_ENTRIES_PER_PAGE")).append(t("<select>").attr("id","sel_itemsnum").addClass("IdeaComponent").addClass("compNT").attr("title",this.translate("TXT_ITEMPERPAGE")).append('<option value="25" '+(25==d?'selected="selected"':"")+">25</option>").append('<option value="50" '+(50==d?'selected="selected"':"")+">50</option>").append('<option value="100" '+(100==d?'selected="selected"':"")+">100</option>")),this.appendClasses()}if(t(i).append(this._createButton(this.translate("BTN_TO_BEGIN"),"to_begin","btn_navigation IdeaComponent button",e+"bilder/mcFBwd.gif")).append(this._createButton(this.translate("BTN_BACK"),"back","btn_navigation IdeaComponent button",e+"bilder/mcBwd.gif")).append(this.getPagesSelect(0)).append(this._createButton(this.translate("BTN_FORWARD"),"forward","btn_navigation IdeaComponent button",e+"bilder/mcFwd.gif")).append(this._createButton(this.translate("BTN_TO_END"),"to_end","btn_navigation IdeaComponent button",e+"bilder/mcFFwd.gif")),t(n).append('<input type="text" name="txt_search" id="txt_search" placeholder="'+this.translate("TXT_SEARCH")+'"/>'),this.options.mode==moAssi){d=parseInt(IUser._GetUserSetting("mediaassi","itemsonpage",25));t(i).append(t("<select>").attr("id","sel_itemsnum").addClass("IdeaComponent").addClass("CompNT").append(t("<option>").attr("value","25").text("25")).append(t("<option>").attr("value","50").text("50")).append(t("<option>").attr("value","100").text("100"))),t('#sel_itemsnum option[value="'+d+'"]').prop("selected",!0)}(t(n).append(t("<button>").attr("type","button").attr("name","btn_search").attr("id","btn_search").attr("title",this.translate("BTN_STARTSEARCH")).addClass("btn_default").append(t("<img>").attr("src",e+"bilder/ico_search2.gif"))),t(s).append(t("<div>").attr("id","filterarea").addClass(a).append(t("<input>").attr("type","checkbox").attr("name","useCatFilter").attr("id","chk_use_cat_filter").attr("title",this.translate("CHK_ACTIVATEFILTER")).addClass(a))),t(r+"#filterarea").append(t("<button>").attr("type","button").attr("name","btn_filter_cat").attr("id","btn_filter_cat").attr("title",this.translate("TIT_FILTER_CAT")).addClass("btn_default").addClass("IdeaComponent").addClass("button").append(t("<img>").attr("src",e+"bilder/filter_up.png"))).addClass(a),this.options.mode!=moAssi)?t("."+this.options.uniqueID).find("#div_grid").find(".hdr").find("td").find(":visible").filter(":last").append(t("<img>").attr("src",e+"bilder/ic_refresh.png").attr("id","randombuttonid").addClass("refreshbuttonunique")):t("."+this.options.uniqueID).find(l).append(t("<button>").attr("type","button").attr("name","mce_refresh").attr("id","mce_refresh").attr("title",this.translate("BTN_RELOADGRID")).addClass("btn_default").addClass("IdeaComponent").addClass("button").append(t("<img>").attr("src",e+"bilder/ic_refresh_blk.png")));this.appendClasses();t(r+"#btn_to_begin").attr("title",this.translate("TIT_BEGIN")),t(r+"#btn_back").attr("title",this.translate("TIT_RWD")),t(r+"#btn_forward").attr("title",this.translate("TIT_FWD")),t(r+"#btn_to_end").attr("title",this.translate("TIT_END")),t(r+"#txt_search").keypress(jQuery.proxy(function(t){if(13==t.which){var e=new Object,i=new Object;return i.id="btn_search",e.target=i,this.buttonHandler(e),t.preventDefault(),!1}},this)),t(r+"#txt_search").on("focusin",function(t){}),t(r+"#mce_refresh").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+".refreshbuttonunique").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#chk_use_cat_filter").on("change",jQuery.proxy(function(){var e=this.options.query;if(1!=t(r+"#chk_use_cat_filter")[0].checked)delete e.filters.Cat,this.options.currentFilter="",this.options.usageFilter=0;else{var i=AnyToObject(IPL._LoadModalDialog("FilterDlg",this.options.currentFilter?this.options.currentFilter:"",this.options.uniqueID));i._SetupDlg(i._dlgTypeMC(),this.options.currentFilter?this.options.currentFilter:"",this.options.usageFilter?this.options.usageFilter:0)}this.doQuery()},this)),t(r+"#sel_scopechange").on("change",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_searchreset").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_search").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#sel_itemsnum").on("change",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_forward").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_back").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_to_begin").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_to_end").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#sel_pageselect").on("change",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_upload").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_download").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_scopemove").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_delete").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_edit").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_selectAll").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_removeSelection").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_filter_cat").on("click",jQuery.proxy(function(){var t=AnyToObject(IPL._LoadModalDialog("FilterDlg",this.options.currentFilter?this.options.currentFilter:"",this.options.uniqueID));t._SetupDlg(t._dlgTypeMC(),this.options.currentFilter?this.options.currentFilter:"",this.options.usageFilter?this.options.usageFilter:0)},this)),this.appendClasses();var c=t("<div>").attr("id","div_scopecontainer"),u=this.options.scopes;if(u.indexOf(1)>-1||u.indexOf(3)>-1||u.indexOf(5)>-1||u.indexOf(7)>-1){var f="deselectedTab";this.options.startscope==stProject&&(f="selectedTab"),c.append(t("<div>").attr("id","btn_filter_project").addClass("scopefilter").addClass(f).html(this.translate("BTN_PROJECT")))}if(u.indexOf(2)>-1||u.indexOf(3)>-1||u.indexOf(6)>-1||u.indexOf(7)>-1){f="deselectedTab";this.options.startscope==stGlobal&&(f="selectedTab"),c.append(t("<div>").attr("id","btn_filter_global").addClass("scopefilter").addClass(f).html(this.translate("BTN_GLOBAL")))}if((u.indexOf(4)>-1||u.indexOf(5)>-1||u.indexOf(6)>-1||u.indexOf(7)>-1)&&c.append(t("<div>").attr("id","btn_filter_referenced").addClass("scopefilter").addClass("deselectedTab").html(this.translate("BTN_REFERENCED"))),t(o).append(c),this.options.mode!==moBrowser){var p=this.getMediaButtons(this.options.colJSON);t(o).append(p),this.registerEventHandler(this.options.colJSON,r)}else t(o).append('<div id="mediatypecaption">'+this.options.query.type+"</div>");this.appendClasses(),t(r+"#btn_filter_project").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),t(r+"#btn_filter_global").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this)),this.appendClasses(),this.switchMode(this.options.startmode)},appendClasses:function(){switch(this.options.mode){case moCenter:this.element.find("*").addClass("mediacentermode");break;case moAssi:this.element.find("*").addClass("mediaassimode");break;case moBrowser:this.element.find("*").addClass("mediabrowsermode")}},_createQuery:function(){var t="";switch(this.options.mode){case moCenter:t="mediacenter";break;case moAssi:t="mediaassi";break;case moBrowser:t="mediabrowser"}this.options.query.itemsnum=parseInt(IUser._GetUserSetting(t,"itemsonpage",25)),this.options.query.type="",this.options.query.itemsfrom=0,this.options.query.filters=new Object,this.options.startscope==stProject&&(this.options.query.scope="project",this.options.query.filters.Scope=[stProject]),this.options.startscope==stGlobal?(this.options.query.scope="global",this.options.query.filters.Scope=[stGlobal]):(this.options.query.scope="project",this.options.query.filters.Scope=[stProject]),this.options.query.sortkey="NiceName",this.options.query.sortingdirection="asc",this.options.query.sortcolindex=2,this.options.query.update=new Object,this.options.query.update.mode=!1,this.options.query.update.updateobject=null,this.options.query.currentpage=1,this.options.query.searchvalue="",this.options.query.getPagesFromTo=jQuery.proxy(function(){var t=this.options.query,e=parseInt(t.itemsfrom),i=parseInt(e)+t.itemsnum;return parseInt(this.options.itemsInDatabase)<parseInt(i)?e+1+"-"+(i=this.options.itemsInDatabase):e+1+"-"+i},this)},getNiceDateString:function(t){var e=t,i="";return i+=e.substr(6,2)+".",i+=e.substr(4,2)+".",i+=e.substr(0,4)+" ",i+=e.substr(8,2)+":",i+=e.substr(10,2)},_createGridEventHandler:function(){this.options.fileGrid.attachEvent("onSelectStateChanged",jQuery.proxy(this.selectionHandler,this)),this.options.fileGrid.attachEvent("onRowSelect",jQuery.proxy(this.gridInlineButtonHandler,this));this.options.fileGrid.attachEvent("onCheck",jQuery.proxy(function(t,e,i){i?this.options.fileGrid.selectRowById(t,!0,!0,!1):this.deselectRowById(t)},this));this.options.fileGrid.attachEvent("onBeforeSorting",jQuery.proxy(function(t,e){var i=this.options.query;if(i.sortcolindex=t,i.sortkey!=this.options.cols[i.type][t].attribName)i.sortingdirection="asc";else switch(i.sortingdirection){case"asc":i.sortingdirection="desc";break;case"desc":i.sortingdirection="asc"}return this.options.fileGrid.setSortImgState(!0,t,i.sortingdirection),i.sortkey=this.options.cols[i.type][t].attribName,this.doQuery(),!1},this))},getModeSelector:function(){return this.options.modeselector},deselectRowById:function(i){var n=(e=this.options.fileGrid).getRowIndex(i),s=e.render_row(n);e.doClick(s.childNodes[0],!1,2,!0);var o=e.getCheckedRows(this.getCheckboxCol());null!=o&&""!=o||t(this.getModeSelector()+"#div_preview").empty()},translate:function(t){return""==t?"":t in this.options.colTranslation?this.options.colTranslation[t]:t},tabColorizer:function(e){var i=this.getModeSelector()+"#"+e;t(i).parent().find("div").removeClass("selectedTab").addClass("deselectedTab"),t(i).addClass("selectedTab")},getMediaButtons:function(e){for(var i=t("<div>").attr("id","div_mediatypebuttoncontainer"),n=0;n<e.definitions.length;n++)jQuery.inArray(e.definitions[n].filetype,this.options.allowedMediaTypes)>-1&&i.append(t("<div>").attr("id",e.definitions[n].htmlbutton.id).attr("title",this.translate(e.definitions[n].htmlbutton.caption)).attr("medtype",e.definitions[n].filetype).addClass("mediatypebtn").addClass("selectedTab"));return i},registerEventHandler:function(e,i){for(var n=0;n<e.definitions.length;n++){var s=e.definitions[n].htmlbutton.id,o=e.definitions[n].filetype;t(i+" #"+s).on("click",{grid:this.options.fileGrid},jQuery.proxy(e.definitions[n].htmlbutton.handler,this,o,s))}e.definitions.length>0&&t(i+"#"+e.definitions[0].htmlbutton.id).removeClass("mediatypebtn deselectedTab").addClass("mediatypebtn selectedTab")},loadFiletypes:function(t){for(var e={},i=0;i<t.definitions.length;i++)e[t.definitions[i].filetype]=t.definitions[i].extensions;return e},loadColDefinitions:function(t){for(var e=[],i=0;i<t.definitions.length;i++){e[t.definitions[i].filetype]=new Array;for(var n=0;n<t.definitions[i].config.length;n++)e[t.definitions[i].filetype][n]={},e[t.definitions[i].filetype][n].colName=this.translate(t.definitions[i].config[n].colName),e[t.definitions[i].filetype][n].colType=t.definitions[i].config[n].colType,e[t.definitions[i].filetype][n].attribName=t.definitions[i].config[n].attribName,e[t.definitions[i].filetype][n].sorttype=t.definitions[i].config[n].sorttype,e[t.definitions[i].filetype][n].readonly=t.definitions[i].config[n].readonly,e[t.definitions[i].filetype][n].visibility_big=t.definitions[i].config[n].visibility_big,e[t.definitions[i].filetype][n].visibility_small=t.definitions[i].config[n].visibility_small}return e},buttonHandler:function(e){var i=this.options.fileGrid,n=this.options.query,s=this.options.uac;switch("IMG"==e.target.tagName&&"randombuttonid"!=e.target.id&&(e.target.id=e.target.parentNode.id),e.target.id){case"randombuttonid":case"mce_refresh":this.doQuery(),e.preventDefault(),e.stopPropagation();break;case"btn_uplClose":t("#"+this.options.uniqueID+"UploaderDialog").dialog("close");break;case"btn_scopemove":this.changeSelectedScope();break;case"sel_scopechange":var o="";switch(this.options.query.scope){case"project":o=this.translate("DLG_MOVE_GLOBAL");break;case"global":o=this.translate("DLG_MOVE_PROJECT")}var l="Mediencenter",r="&questoken=mediacenter&mchandle="+this.options.uniqueID,a="moveconfirm";IAL._aQuesDlg(o,l,"",mrYes,mrNo,"",r,a);break;case"btn_selectAll":i.selectAll(),i.checkAll();var h=i.getSelectedRowId();this.selectionHandler(h,null);break;case"btn_removeSelection":e.data.grid.clearSelection();for(var d=i.getRowsNum(),c=0;c<d;c++)i.cells(i.getRowId(c),this.getCheckboxCol()).setChecked(!1);this.emptyMetaPreview();break;case"btn_edit":this.showEditDlg();break;case"btn_usage":this.showUsageDlg();break;case"btn_download":var u="";if(null!=(u=this.options.fileGrid.getSelectedRowId())){if((u=u.split(",")).length<=0)break;var f=this.getFileNameOfId(u);if(1==u.length){(p=document.createElement("a")).href="./"+IMC._MediaID2Url("",u[0],"",""),p.download=f[0],document.body.appendChild(p),p.click(),jQuery(p).remove();break}if(u.length>1){var p,m=AnyToStr(u.join()),g=IMC._ExportMediaList(m,IAL._PrjHandle());(p=document.createElement("a")).href="./"+g,p.download="exportlist.zip",document.body.appendChild(p),p.click(),jQuery(p).remove();break}break}break;case"btn_search":this.options.query.searchvalue=t(this.getModeSelector()+"#txt_search").val(),this.doQuery();break;case"btn_searchreset":this.resetSearch(),this.doQuery();break;case"btn_delete":u="";if(null!=(u=this.options.fileGrid.getSelectedRowId())){o=this.translate("DLG_DELETE");u=u.split(","),o+=" <br/><br/>";f=this.getFileNameOfId(u);if(u.length>1){for(c=0;c<f.length&&c<3;c++)o+=f[c]+"<br/>";f.length>3&&(o+="...")}else 1==u.length&&(o+=f[0]);l="Mediencenter",r="&questoken=mediacenter&mchandle="+this.options.uniqueID,a="deleteconfirm";IAL._aQuesDlg(o,l,"",mrYes,mrNo,"",r,a)}break;case"btn_filter_project":n.filters.Scope=[stProject+""],n.itemsfrom=0,this.options.query.scope="project",this.options.mode!=moAssi&&this._setColumns(this.options.cols[this.options.query.type]),IUser._SetUserSetting("MA","Scope",stProject),this.tabColorizer(e.target.id),this.emptyMetaPreview(),this.doQuery(),t(this.getModeSelector()+"#sel_opt_glob").removeAttr("selected"),t(this.getModeSelector()+"#sel_opt_proj").attr("selected","selected"),s.uploadProjectScope?t(this.getModeSelector()+"#btn_upload").show():t(this.getModeSelector()+"#btn_upload").hide(),s.downloadProjectScope?t(this.getModeSelector()+"#btn_download").show():t(this.getModeSelector()+"#btn_download").hide(),s.deleteProjectScope?t(this.getModeSelector()+"#btn_delete").show():t(this.getModeSelector()+"#btn_delete").hide(),s.deleteProjectScope&&s.uploadGlobalScope?t(this.getModeSelector()+"#sel_scopechange").show():t(this.getModeSelector()+"#sel_scopechange").hide(),s.editProjectMetadata?t(this.getModeSelector()+"#btn_edit").show():t(this.getModeSelector()+"#btn_edit").hide(),t(this.getModeSelector()+"#scopespan img").attr("src",expandmetavarEx("$(CourseDir)$","CV")+"bilder/ico_LocToGlo.png"),t(this.getModeSelector()+"#scopespan button").attr("title",this.translate("TIT_LOCTOGLO")),k=(k=IMC._GetUploadDir("",this.options.query.type,stProject)).substr(7),t("#fileupload").attr("action","server/index.php?path="+k),this.options.mode!=moAssi&&this.selectFirstGridItem();break;case"btn_filter_global":n.filters.Scope=[stGlobal+""],n.itemsfrom=0,this.options.query.scope="global",this.options.mode!=moAssi&&this._setColumns(this.options.cols[this.options.query.type]),IUser._SetUserSetting("MA","Scope",stGlobal),this.tabColorizer(e.target.id),this.emptyMetaPreview(),this.doQuery(),t(this.getModeSelector()+"#sel_opt_proj").removeAttr("selected"),t(this.getModeSelector()+"#sel_opt_glob").attr("selected","selected"),s.uploadGlobalScope?t(this.getModeSelector()+"#btn_upload").show():t(this.getModeSelector()+"#btn_upload").hide(),s.downloadGlobalScope?t(this.getModeSelector()+"#btn_download").show():t(this.getModeSelector()+"#btn_download").hide(),s.deleteGlobalScope?t(this.getModeSelector()+"#btn_delete").show():t(this.getModeSelector()+"#btn_delete").hide(),s.deleteGlobalScope&&s.uploadProjectScope?t(this.getModeSelector()+"#sel_scopechange").show():t(this.getModeSelector()+"#sel_scopechange").hide(),s.editGlobalMetadata?t(this.getModeSelector()+"#btn_edit").show():t(this.getModeSelector()+"#btn_edit").hide(),t(this.getModeSelector()+"#scopespan img").attr("src",expandmetavarEx("$(CourseDir)$","CV")+"bilder/ico_GloToLoc.png"),t(this.getModeSelector()+"#scopespan button").attr("title",this.translate("TIT_GLOTOLOC")),k=(k=IMC._GetUploadDir("",this.options.query.type,stGlobal)).substr(7),t(this.getModeSelector()+"#fileupload").attr("action","server/index.php?path="+k),this.options.mode!=moAssi&&this.selectFirstGridItem();break;case"btn_to_begin":n.itemsfrom=0,this.emptyMetaPreview(),this.doQuery();break;case"btn_to_end":var _=this.options.itemsInDatabase;d=this.options.query.itemsnum;n.itemsfrom=Math.floor(_/d)*d,this.doQuery();break;case"btn_back":_=this.options.itemsInDatabase;var v=n.itemsfrom,b=(d=n.itemsnum,parseInt(t(this.getModeSelector()+"#div_scrolling").find("#sel_pageselect").val())),y=0;v-d<0||(y=v-d),n.itemsfrom=y,this.emptyMetaPreview(),this.doQuery();break;case"btn_forward":_=this.options.itemsInDatabase,v=n.itemsfrom,d=n.itemsnum,b=parseInt(t(this.getModeSelector()+"#div_scrolling").find("#sel_pageselect").val());v+d<_&&(n.itemsfrom=parseInt(v+d)),this.emptyMetaPreview(),this.doQuery();break;case"btn_upload":jQuery("#fileupload_filelister").empty();var w=this.options.uniqueID+"UploaderDialog",x=this.options.uniqueID+" .uploader_dialog";jQuery("."+x).attr("id",w);var C=this,S=IMC._MetavarType2Extensions(this.options.query.type),k=document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/mediabrowser/index.php?overwrite="+(this.options.overwriteExistingUpload?"yes":"no")+"&filetypes="+this.options.query.type+"&path="+IMC._GetUploadDir("",this.options.query.type,this.options.query.filters.Scope[0]).substr(7)+"&accept="+S,I=this.options.filetypes[this.options.query.type],N=this.options.query.filters.Scope[0];jQuery("#"+w).find(".fileupload").fileupload({url:k,acceptFileTypes:I,sequentialUploads:!0,add:function(t,e){e.submit()},singleFileUploads:!1}).bind("fileuploaddone",function(t,e){for(var i=C.options.query.type,n=[],s=e.result.files,o=0;o<s.length;o++){var l=s[o],r={};r.Scope=N,r.FileName=IMC._MediaType2MetaVar(i,r.Scope)+l.name;var a=e.originalFiles[o].name;if(r.NiceName=a.substr(0,a.lastIndexOf(".")),i==mtPicture){var h=C.getImageDimensions("",C,l.url).split(",");r.mwidth=h[0],r.mheight=h[1]}n.push(r)}var d=IMC._AddMediaList("",JSON.stringify(n),"1");C.options.query.sortkey="UploadDate",C.options.query.sortingdirection="desc",C.doQuery(!1,d.split(","))}),jQuery("#"+w).find("#btn_uplClose").click(jQuery.proxy(this.buttonHandler,this)),jQuery("#"+w).dialog({title:this.translate("ADD_MEDIA"),width:"700px",modal:!0,resizable:!1}),jQuery(".ui-front").css("z-index",maxZ+=1);break;case"sel_filter":n.searchkeys=new Array,t(this.getModeSelector()+"#div_filter_right").find("select :selected").each(function(e,i){n.searchkeys[e]=t(i).attr("value")});break;case"btn_close":this.closeMC(mrOK,this.getFilenames(),null),this.pausePlayback(),_hideMediaCenterDialog(this.getMediaCenterDialogID());break;case"sel_itemsnum":n.itemsnum=parseInt(t(this.getModeSelector()+"#sel_itemsnum").val());var T="";switch(this.options.mode){case moCenter:T="mediacenter";break;case moAssi:T="mediaassi";break;case moBrowser:T="mediabrowser"}IUser._SetUserSetting(T,"itemsonpage",n.itemsnum),n.itemsnum=parseInt(t(this.getModeSelector()+"#sel_itemsnum").val()),t(this.getModeSelector()+"#sel_pageselect").empty(),this.updatePagesSelect(),n.itemsfrom=0,n.currentpage=1,this.doQuery(),t(this.getModeSelector()+"#txt_page").attr("value","1-"+n.itemsnum),t(this.getModeSelector()+"#sel_pageselect").val(n.currentpage);break;case"sel_pageselect":v=n.itemsfrom,d=n.itemsnum,_=this.options.itemsInDatabase,b=parseInt(t(this.getModeSelector()+"#sel_pageselect").val());n.currentpage=b;var P=(v=(b-1)*d)+d-1;P>_&&(P=_),t(this.getModeSelector()+"#txt_page").attr("value",v+"-"+P),n.itemsfrom=v,this.doQuery(),t(this.getModeSelector()+"#sel_pageselect").val(b)}e.data&&e.data.callback&&"function"==typeof e.data.callback&&e.data.callback()},getCheckboxCol:function(){for(var t=this.options.fileGrid.getColumnsNum(),e=0;e<t;e++)if("ch"==this.options.cols[this.options.query.type][e].colType)return e;return-1},getFilenames:function(){var t=this.options.fileGrid.getSelectedRowId(),e="";if(null!=t&&(t=t.split(",")).length>0){var i=this.options.fileGrid.cells(t[0],3).getValue(),n=this.options.query.type,s="";switch(this.options.query.scope){case"project":s=stProject;break;case"global":s=stGlobal}e=IMC._MediaType2MetaVar(n,s)+i}return e},createThumb:function(t,e){var i=IMC._GetUploadDir("",this.options.query.type,this.options.query.filters.Scope[0]);i=i.substr(7),i=document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/mediabrowser/index.php?onlyThumb=1&fileURL="+t+"&path="+i;jQuery.ajax({type:"GET",url:i,async:!0,success:function(t){e&&e()}})},_setColumns:function(t){var e=this.options.fileGrid;this.deleteAllRows();for(var i=e.getColumnsNum();0!=i;)e.deleteColumn(0),i--;for(var n=0,s=0;s<t.length;s++){e.insertColumn(s,t[s].colName,t[s].colType,null,t[s].sorttype),e.setColumnHidden(s,!t[s].visibility_big.visibleInGrid),e.setColumnId(s,t[s].attribName);var o=this.options.query.scope.charAt(0).toUpperCase();o+=this.options.query.scope.slice(1),"UploadDate"==t[s].attribName&&e.setColumnHidden(s,this.options.uac["hide"+o+"TimeStamps"]),"custDELETE"==t[s].attribName&&this.options.fileGrid.setColumnHidden(s,!this.options.uac["delete"+o+"Scope"]),"custEDIT"==t[s].attribName&&this.options.fileGrid.setColumnHidden(s,!this.options.uac["edit"+o+"Metadata"]),"Usage"==t[s].attribName&&(this.options.fileGrid.setColumnHidden(s,AnyToBool(""==IRF._HasActionRealized("70105"))),t[s].visibility_big.visibleInGrid=AnyToBool(""!=IRF._HasActionRealized("70105")))}for(this.options.mode==moBrowser&&e.setColumnHidden(0,!0),i=e.getColumnsNum()+1,n=0,e.setColWidth(n,20),n++;n<i-1;){if(7==this.options.query.type)switch(n){case 0:case 5:case 6:e.setColWidth(n,30);break;case 4:e.setColWidth(n,35);break;case 1:e.setColWidth(n,40);break;case 9:e.setColWidth(n,60);break;default:e.setColWidth(n,120)}else if(11==this.options.query.type)switch(n){case 0:case 4:e.setColWidth(n,30);break;case 3:e.setColWidth(n,35);break;case 7:e.setColWidth(n,60);break;default:e.setColWidth(n,120)}else switch(n){case 0:case 4:case 5:e.setColWidth(n,30);break;case 3:e.setColWidth(n,35);break;case 8:e.setColWidth(n,60);break;default:e.setColWidth(n,120)}n++}},switchMode:function(e){this.tabColorizer(t(this.getModeSelector()+".mediatypebtn[medtype='"+e+"']").attr("id"));var i=this.options.query,n="";if(this.resetSearch(),this.options.query.type=e,this.options.mode!=moAssi)switch(this._setColumns(this.options.cols[e]),t(this.getModeSelector()+"#div_filter_left_buttons .selectedTab").attr("id")){case"btn_filter_referenced":n=stReferenced,this.options.fileGrid.setColumnHidden(5,!0),this.options.fileGrid.setColumnHidden(4,!0)}switch(this.options.mode){case moCenter:case moBrowser:this.options.fileGrid.setSortImgState(!0,this.options.query.sortcolindex,this.options.query.sortingdirection);for(var s=0,o=0;o<this.options.cols[e].length;o++)this.options.cols[e][o].visibility_big.visibleInGrid&&(s=o);t(this.getModeSelector()+" #div_grid .hdr td:nth-child("+(s+1)+") div").append('<img src="'+expandmetavarEx("$(CourseDir)$","CV")+'bilder/ic_refresh.png" id="randombuttonid" title="'+this.translate("BTN_RELOADGRID")+'" class="refreshbuttonunique" >'),t(this.getModeSelector()+" #div_grid .hdr td:nth-child("+(s+1)+") div img").on("click",{grid:this.options.fileGrid},jQuery.proxy(this.buttonHandler,this));case moAssi:this.emptyMetaPreview(),i.itemsfrom=0}var l=IMC._GetUploadDir("",e,n);l=l.substr(7),t("#fileupload").attr("action","server/index.php?path="+l),this.doQuery()},selectFirstGridItem:function(t){var e=!1;if(null!=t){t=t.split(","),this.options.fileGrid.clearSelection();for(var i=0;i<t.length;i++)-1!=this.options.fileGrid.getRowIndex(t[i])&&(this.options.fileGrid.selectRowById(t[i],!0,!1,!0),e=!0)}this.options.mode==moAssi||e||this.options.fileGrid.selectRow(0,!0,!1,!0)},syncSelectionCheckbox:function(){var t=this.options.fileGrid,e=this.getCheckboxCol(),i=t.getSelectedRowId();if(null!=i)var n=i.split(",");if(t.checkAll(!1),null!=n)for(var s=0;s<n.length;s++)t.cells(n[s],e).setChecked(!0)},deleteAllRows:function(){for(var t=this.options.fileGrid.getAllRowIds(",").split(","),e=0;e<t.length;e++)this.options.fileGrid.deleteRow(t[e])},setDataFromArray:function(e){var i=stGlobal,n=stProject;this.options.userIDs=IUser._AllUserIDs().split(","),this.options.userNames=IUser._AllUserNames().split(",");var s=new Object;s.global=IMC._GetUploadDir("",this.options.query.type,i),s.project=IMC._GetUploadDir("",this.options.query.type,n),s.projectthumb=s.project+"thumbs/",s.globalthumb=s.global+"thumbs/",s.prj=n,s.glo=i,this.options.mode==moAssi&&t(this.getModeSelector()+"#div_small_gridarea").empty();for(var o=0;o<e.length;o++)this._setObjectdataInGrid(e[o],o,s,i,n);if(this.options.mode==moAssi){var l=this.options.query;t(this.getModeSelector()+"#div_small_gridarea .mediaelement").draggable({revert:!0,revertDuration:1,cursor:"crosshair",cursorAt:{left:2,top:2},grid:[5,5],appendTo:"body",helper:"clone"}).on("click",{mce:this},function(t){t.data.mce.selectionHandler(0,0,t.data.mce,this)}).on("dragstart",{query:l,getImageMeta:this.getImageDimensions,mce:this},function(e,i){i.helper.css("z-index",maxZ+1);var n="1, "+e.data.query.type+","+t(this).attr("completenamewithmetavar")+","+e.data.getImageMeta(t(this).attr("objectid"),e.data.mce,t(this).attr("completepath"));n=(n=n+","+t(this).attr("objectid")).replace(", ",","),SetVariableEx("Global","DragValue",n,"CV")}).on("dragstop",function(t,e){var i=pages[IMC._GetPageEditor()].Container2,n=i.obj,s=0,o=0;do{o+=n.offsetTop-n.scrollTop||0,s+=n.offsetLeft-n.scrollLeft||0,n=n.offsetParent}while(n);var l=s+i.obj.scrollLeft,r=o+i.obj.scrollTop;i&&e.position.left>l&&e.position.left<l+i.Width()&&e.position.top>r&&e.position.top<r+i.Height()&&(i._OnMediaDrop(e.position.left-s,e.position.top-o,GetVariableEx("Global","DragValue","","CV")),SetVariableEx("Global","DragValue","","CV"))})}},deleteSelectedObject:function(){var t=new Object;t.target=new Object,t.target.id="btn_delete",this.buttonHandler(t)},editButtonGrid:function(){setTimeout(this.showEditDlg(),500)},showEditDlg:function(){var t=this.options.fileGrid.getSelectedRowId(),e="";switch(this.options.query.scope){case"project":e=stProject;break;case"global":e=stGlobal}var i=this.options.query.type+"";if(null!=t)var n=t.split(",");if(void 0!==n){for(var s="",o="",l=0,r=0,a=this.options.cols[this.options.query.type],h=0;h<a.length;h++)"NiceName"==a[h].attribName&&(l=h),"FileName"==a[h].attribName&&(r=h);for(h=0;h+1<n.length;h++)s+=this.options.fileGrid.cellById(n[h],r).getValue()+",",o+=this.options.fileGrid.cellById(n[h],l).getValue()+",";s+=this.options.fileGrid.cellById(n[n.length-1],r).getValue(),o+=this.options.fileGrid.cellById(n[n.length-1],l).getValue(),IMC._EditMetaData(t,e,i,s,o,this.options.uniqueID)}},showUsageDlg:function(){var t=this.options.fileGrid.getSelectedRowId(),e="";switch(this.options.query.scope){case"project":e=stProject;break;case"global":e=stGlobal}var i=this.options.query.type+"";if(null!=t)var n=t.split(",");if(void 0!==n){for(var s="",o="",l=0,r=0,a=this.options.cols[this.options.query.type],h=0;h<a.length;h++)"NiceName"==a[h].attribName&&(l=h),"FileName"==a[h].attribName&&(r=h);for(h=0;h+1<n.length;h++)s+=this.options.fileGrid.cellById(n[h],r).getValue()+",",o+=this.options.fileGrid.cellById(n[h],l).getValue()+",";s+=this.options.fileGrid.cellById(n[n.length-1],r).getValue(),o+=this.options.fileGrid.cellById(n[n.length-1],l).getValue(),IMC._EditMetaData(t,e,i,s,o,this.options.uniqueID)}},getFileNameOfId:function(t){for(var e=0,i=this.options.cols[this.options.query.type],n=0;n<i.length;n++)"FileName"==i[n].attribName&&(e=n);var s=Array();if(t.constructor==Array)for(n=0;n<t.length;n++)s.push(this.options.fileGrid.cellById(t[n],e).getValue());return s},gridInlineButtonHandler:function(t,e){if(e>2&&e<=9){var i=-1,n=-1,s=-1;switch(parseInt(this.options.query.type)){case mtPicture:i=5,n=6,s=9;break;case mtFlash:i=3,n=4,s=7;break;default:i=4,n=5,s=8}if(e==s){for(var o=-1,l=this.options.cols[this.options.query.type],r=0;r<l.length;r++)"Usage"==l[r].attribName&&(o=r);if(usage=this.options.fileGrid.cellById(t,o).getValue(),usage<=0)return!1;var a=-1;1==(h="project"==this.options.query.scope?stProject:stGlobal)&&(a=this.options.query.filters.ProjectID),AnyToObject(IPL._LoadModalDialog("UsageDlg"))._SetupDlg(t,a)}if(e==n){var h="project"==this.options.query.scope?stProject:stGlobal,d=0,c=0;for(l=this.options.cols[this.options.query.type],r=0;r<l.length;r++)"NiceName"==l[r].attribName&&(d=r),"FileName"==l[r].attribName&&(c=r);var u=this.options.fileGrid.cellById(t,c).getValue(),f=this.options.fileGrid.cellById(t,d).getValue(),p=this.options.query.type+"";IMC._EditMetaData(t,h,p,u,f,this.options.uniqueID)}e==i&&this.deleteSelectedObject()}},_setObjectdataInGrid:function(e,i,n,s,o){var l=this.options.cols[this.options.query.type].length,r="",a=new Array,h=e.FileName.split("$")[e.FileName.split("$").length-1];switch(t(this.getModeSelector()+"#div_filter_left .selectedTab").attr("id")){case"btn_filter_project":s;break;case"btn_filter_global":o}("UploadUser"in e&&(e.UploadUser=this.options.userNames[this.options.userIDs.indexOf(e.UploadUser)]),"UploadDate"in e&&(e.UploadDate=this.getNiceDateString(e.UploadDate)),"MimeType"in e&&(e.MimeType=e.FileName.split(".").pop()),e.custDELETE=expandmetavarEx("$(CourseDir)$","CV")+"bilder/bt_del_sm.png",e.custEDIT=expandmetavarEx("$(CourseDir)$","CV")+"bilder/bt_blu_edit.png",7==this.options.query.type)&&(203!=e.MimeType?e.previewCol=(e.Scope==n.prj?n.projectthumb:n.globalthumb)+h:e.previewCol=IMC._GetUploadDir("",e.MetavarType,e.Scope)+h,d=e.previewCol,c=jQuery.proxy(function(t){if(404===t){new Date;this.createThumb(h,function(){jQuery('img[src="'+e.previewCol+'"]').attr("src",escape(e.previewCol))})}},this),t.ajax({url:d,dataType:"text",type:"GET",async:!0,complete:function(t){"function"==typeof c&&c.apply(this,[t.status])}}));var d,c;if("undefined"!=typeof IMC&&(e.completeNameWithMetavar=e.FileName,e.FileName=h,temp=e.FileName.split(".")),this.options.mode!=moAssi){for(var u=0;u<l;u++)"ch"==this.options.cols[this.options.query.type][u].colType&&u+1<l?a.push(" ,"):(this.options.cols[this.options.query.type][u].attribName in e?a.push(e[this.options.cols[this.options.query.type][u].attribName]):a.push(""),u+1<l&&a.push(","));r=a.join(""),this.options.fileGrid.addRow(e.ID,r)}else{var f,p=new Array;for(u=0;u<l;u++){var m=this.options.cols[this.options.query.type][u].attribName;m in e&&"ID"!=m&&"custdelete"!=m&&"custedit"!=m&&p.push(" ",m,'="',e[m],'"')}f=p.join("");var g=i%2==0?"even":"odd",_=new Array;if(_.push('<div class="mediaelement ',g,'" objectid="',e.ID,'" '),_.push('objectindex="',i,'" ',f," "),_.push('completepath="',e.Scope==n.prj?n.project:n.global,e.FileName,'">'),7==this.options.query.type){var v="";(function(e,i){t.ajax({url:e,dataType:"text",type:"GET",async:!1,complete:function(t){"function"==typeof i&&i.apply(this,[t.status])}})})(v=203!=e.MimeType?(e.Scope==n.prj?n.projectthumb:n.globalthumb)+h:IMC._GetUploadDir("",e.MetavarType,e.Scope)+h,jQuery.proxy(function(t){404===t&&this.createThumb(e.FileName)},this)),_.push('<div class="thumbnail">','<img src="',escape(v),'"/>',"</div>")}_.push('<div class="mediacaption">','<div class="filename">',e.NiceName,"</div>"),_.push('<div class="nicename">',e.FileName,"</div>","</div>","</div>");var b=_.join("");t(this.getModeSelector()+"#div_small_gridarea").append(b)}},changeSelectedScope:function(){var t=new Object;t.target=new Object,t.target.id="sel_scopechange",this.buttonHandler(t)},_createButton:function(t,e,i,n){return'<button value="'+t+'" name="btn_'+e+'" id="btn_'+e+'" class="'+i+'"><img src="'+n+'"></img></button>'},setSyncCheckboxes:function(){var t=this.options.fileGrid,e=t.getCheckedRows(this.getCheckboxCol()),i=t.getSelectedRowId();if(null==i||null==e&&""==e){if(null==i&&null!=e&&""!=e){e=e.split(",");for(n=0;n<e.length;n++)this.setCheckbox(e[n],!1)}}else{i=i.split(","),e=e.split(",");for(var n=0;n<i.length;n++)-1==e.indexOf(i[n])&&this.setCheckbox(i[n],!0);if(null!=(e=t.getCheckedRows(this.getCheckboxCol()))){e=e.split(",");for(var n=0;n<e.length;n++)-1==i.indexOf(e[n])&&this.setCheckbox(e[n],!1)}}},setCheckbox:function(t,e){this.options.fileGrid.cells(t,this.getCheckboxCol()).setChecked(e)},resetSearch:function(){this.options.query.searchvalue="",t(this.getModeSelector()+"#txt_search").val("")},selectionHandler:function(e,i,n,s){var o,l=0,r=null==n?this:n,a=this.options.mode==moCenter?"mediacentermode":this.options.mode==moAssi?"mediaassimode":"mediabrowsermode";switch(o=r.options.query,r.options.mode){case moBrowser:case moCenter:var h=r.options.fileGrid;if(r.setSyncCheckboxes(),null!=h.getSelectedRowId()){for(var d=h.getSelectedRowId().split(","),c=d.length,u=(l=h.getColumnsNum(),'<table class="metatable" id="mce_metadata_table">'),f=this.options.cols,p=new Array,m=0;m<l;m++)if("ch"!=h.getColType(m)&&1==f[o.type][m].visibility_big.visibleInDetailView){var g=f[o.type][m].attribName,_=this.options.query.scope.charAt(0).toUpperCase();if(_+=this.options.query.scope.slice(1),"UploadDate"==g&&r.options.uac["hide"+_+"TimeStamps"]);else{var v=h.getColumnLabel(m);if(c<=1)var b=h.cells(e,m).getValue();else if(c>1){b=h.cells(d[0],m).getValue();for(var y=1;y<c;y++)if(h.cells(d[y],m).getValue()!=b){b=this.translate("TXT_MULTIPLE_VALUES");break}}u=(u=u+"<tr><th>"+v+"</th>")+'<td class="td_ro">'+b+"</td>",u+="</tr>"}}else h.getColType(m);u+="<tr><th>Tags:</th>";var w=[],x=IMC._GetMediaCatList(e);if(""!=x&&(w=JSON.parse(x)),0==w.length)u+='<td class="td_ro">-</td>';else{u+='<td class="td_ro">',u+="<div>";for(m=0;m<w.length;m++)2==m&&(u+='<span id="tags" style="display:none">'),u+=w[m],m!=w.length-1&&(u+=", ");u+="</span>";var C=w.length-2;w.length>2&&(u=u+'<a href="#" id="morebtn" onClick="jQuery(\'#tags\').show(); jQuery(this).hide(); jQuery(\'#lessbtn\').show();" style="color:blue">['+C+" weitere]</a>",u+='<a href="#" id="lessbtn" onClick="jQuery(\'#tags\').hide(); jQuery(this).hide(); jQuery(\'#morebtn\').show();" style="color:blue; display:none"> [weniger]</a>'),u+="</div></td>"}if(u+="</table>",t("."+r.options.uniqueID).find("#div_metaattribs").empty(),t("."+a+"#div_metaattribs").append(u),this.appendClasses(),c<=1){t("."+a+"#div_preview").empty();var S="./"+IMC._MediaID2Url("",e,"","");switch(parseInt(o.type)){case mtPicture:var k=S.lastIndexOf("/"),I=(new Date).getTime(),N=([S.slice(0,k),"/thumbs",S.slice(k)].join(""),"showImageInLightBox('"+S+"'); ");N+="jQuery('.ui-lightbox-bg').css('z-index', maxZ + 1); ",N+="jQuery('.ui-lightbox-fg').css('z-index', maxZ + 1); ","svg"!=S.split(".").pop()?t("."+a+"#div_preview").append(t("<a>").attr("href","#").attr("onClick",N).append(t("<img>").attr("src",S))):t("."+a+"#div_preview").append(t("<img>").attr("src",S));break;case mtAudio:if(supports_mp3())t("."+a+"#div_preview").append(t("<audio>").addClass("ideamcemediaplayer").attr("src",S).attr("controls","controls").text("Ihr Browser untersttzt diesen Vorschautyp leider nicht"));else{S=document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/"+IMC._MediaID2Url("",e,"","");var T=t("<object>").attr("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000").attr("width","270").attr("height","50").attr("id","movie_name").attr("align","middle").attr("codebase","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0").append(t("<param>").attr("name","movie").attr("value",document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/script/StrobeMediaPlayback.swf")).append(t("<param>").attr("name","FlashVars").attr("value","src="+S)).append(t("<param>").attr("name","allowFullScreen").attr("value","false")).append(t("<embed>").attr("src",document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/script/StrobeMediaPlayback.swf").attr("type","application/x-shockwave-flash").attr("allowfullscreen","false").attr("width","270").attr("height","200").attr("FlashVars","src="+S));t("."+a+"#div_preview").append(T)}break;case mtVideo:T="";var P=S.substr(S.lastIndexOf(".")+1);T=!supports_video()||"mp4"!=P&&"webm"!=P&&"ogg"!=P?t("<object>").attr("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000").attr("width","270").attr("height","200").attr("id","movie_name").attr("align","middle").attr("codebase","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0").append(t("<param>").attr("name","movie").attr("value",document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/script/StrobeMediaPlayback.swf")).append(t("<param>").attr("name","FlashVars").attr("value","src="+S)).append(t("<param>").attr("name","allowFullScreen").attr("value","false")).append(t("<embed>").attr("src",document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/script/StrobeMediaPlayback.swf").attr("type","application/x-shockwave-flash").attr("allowfullscreen","false").attr("width","270").attr("height","200").attr("FlashVars","src="+S)):t("<video>").attr("width","270").attr("height","200").attr("controls","controls").append(t("<source>").attr("src",S).attr("type","video/"+P)),t("."+a+"#div_preview").append(T);break;case mtPdf:t("."+a+"#div_preview").append(t("<a>").attr("id","pdfbutton").attr("href",S).append(t("<img>").attr("src","script/img/ico_pdf_g.png")).append("<br/>").append(t("<span>").text(this.translate("CLICK4PREVIEW")))),t("."+a+'#div_preview a[href$=".pdf"]').attr("target","_blank");break;case mtFlash:S=""+IMC._MediaID2Url("",e,"","");var D="";D=t("<object>").attr("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000").attr("width","270").attr("height","200").attr("id","movie_name").attr("align","middle").append(t("<param>").attr("name","movie").attr("value",S)).append("\x3c!--[if !IE]>--\x3e").append(t("<object>").attr("type","application/x-shockwave-flash").attr("data",S).attr("width","270").attr("height","200").append(t("<param>").attr("name","movie").attr("value",S)).append("<!<![endif]--\x3e").append(t("<a>").attr("href","http://www.adobe.com/go/getflash").append(t("<img>").attr("src","http://www.adobe.com/de/images/shared/download_buttons/get_flash_player.gif").attr("alt","Get Adobe Flash Player"))).append("\x3c!--[if !IE]>--\x3e")).append("<!<![endif]--\x3e"),t("."+a+"#div_preview").append(D);break;case mtLLApp:var O="script/img/ico_doc_g.png";switch(S.split(".").pop()){case"pdf":O="script/img/ico_pdf_g.png"}var M=t("<a>").attr("id","other_preview").attr("href",S).append(t("<img>").attr("src",O)).append("<br/>").append(t("<span>").text(this.translate("CLICK4DOWNLOAD")));t("."+a+"#div_preview").append(M),t("."+a+"#div_preview a").attr("target","_blank")}}else{t("."+a+"#div_preview").empty();for(m=0;m<p.length;m++)p[m]}}else t("#div_metaattribs").empty(),t("#div_div_preview").empty();break;case moAssi:try{t("."+a+"#div_small_metahead").empty(),t("."+a+"#div_small_previewarea").empty(),t("."+a+"#div_small_meta").empty(),t("."+a+"#div_small_gridarea").find(".selected").removeClass("selected"),t(s).addClass("selected");e=t(s).attr("objectid"),t(s).attr("objectindex"),S=t(s).attr("completepath"),f=this.options.cols;Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e});for(l=Object.keys(f).length,u='<div class="metatable_small">',m=0;m<l;m++){if(1==f[o.type][m].visibility_small.visibleInSmallDetailView&&"ch"!=f[o.type][m].colType)if("UploadDate"==g&&r.options.uac["hide"+_+"TimeStamps"]);else if(void 0!=t(s).attr(f[o.type][m].attribName))u+='<div class="metaview_small_item"><span class="metaview_small_itemhead">'+(v=f[o.type][m].colName)+'</span><span class="metaview_small_itemcontent">'+t(s).attr(f[o.type][m].attribName)+"</span></div>"}switch(u+="</div>",t("."+a+"#div_small_meta").append(u),parseInt(o.type)){case mtPicture:if(void 0!==S){k=S.lastIndexOf("/"),[S.slice(0,k),"/thumbs",S.slice(k)].join("");t("."+a+"#div_small_meta").append('<div id="metadata_small_imageprvw" class="metadata_small previewimage"></div>'),r.appendClasses(),"svg"!=S.split(".").pop()?t("."+a+"#metadata_small_imageprvw").append('<a href="#" onClick="showImageInLightBox(\''+S+'\')"><img src="'+S+'"/></a>'):t("."+a+"#metadata_small_imageprvw").append('<a href="#" onClick="alert(\''+this.translate("VIEW_NOT_SUPPORTED_FOR_THIS_FILETYPE")+'\');"><img src="'+S+'"/></a>')}break;case mtAudio:t("."+a+"#div_small_meta").append('<audio class="ideamcemediaplayer" src="'+S+'" controls>Ihr Browser untersttzt diesen Vorschautyp leider nicht.</audio>');break;case mtVideo:P=(S=document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/"+IMC._MediaID2Url("",e,"","")).substr(S.lastIndexOf(".")+1),D="";!supports_video()||"mp4"!=P&&"webm"!=P&&"ogg"!=P?(player=deconcept.SWFObjectUtil.getPlayerVersion().major>=10&&deconcept.SWFObjectUtil.getPlayerVersion().minor>=1?"script/StrobeMediaPlayback.swf":"script/StrobeMediaPlayback10.swf",D='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="270" height="200" id="movie_name" align="middle" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0"><param name="movie" value="'+document.location.href.substring(0,document.location.href.lastIndexOf("/"))+'/script/StrobeMediaPlayback.swf"></param><param name="FlashVars" value="src='+S+'"></param><param name="allowFullScreen" value="true"></param><embed src="'+document.location.href.substring(0,document.location.href.lastIndexOf("/"))+'/script/StrobeMediaPlayback.swf" type="application/x-shockwave-flash" allowfullscreen="true" width="270" height="200" FlashVars="src='+S+'"></embed></object>'):D=t("<video>").attr("width","270").attr("height","200").attr("controls","controls").append(t("<source>").attr("src",S).attr("type","video/"+P)),t("."+a+"#div_small_meta").append(D);break;case mtPdf:t("."+a+"#div_small_meta").append('<a id="pdfbutton" href="'+S+'"><img src="script/img/ico_pdf_g.gif"/></a>'),t("."+a+'#div_small_meta a[href$=".pdf"]').attr("target","_blank");break;case mtFlash:D="";D='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="270" height="200" id="movie_name" align="middle">     <param name="movie" value="'+(S=""+IMC._MediaID2Url("",e,"",""))+'"/>     \x3c!--[if !IE]>--\x3e     <object type="application/x-shockwave-flash" data="'+S+'" width="270" height="200">         <param name="movie" value='+S+'"/>     <!<![endif]--\x3e         <a href="http://www.adobe.com/go/getflash">             <img src="http://www.adobe.com/de/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/>         </a>     \x3c!--[if !IE]>--\x3e     </object>     <!<![endif]--\x3e </object>',t("."+a+"#div_small_meta").append(D)}}catch(t){}}},emptyMetaPreview:function(){this.options.mode!=moAssi?(t(this.getModeSelector()+"#div_metaattribs").empty(),t(this.getModeSelector()+"#div_preview").empty()):t(this.getModeSelector()+"#div_small_meta").empty()},getImageDimensions:function(e,i,n){var s="";""==e&&(e=(null==i?this:i).options.fileGrid.getSelectedRowId());var o="0, 0",l=(s=null==typeof n||void 0==n?document.location.href.substring(0,document.location.href.lastIndexOf("/"))+"/"+IMC._MediaID2Url("",e,"",""):n).lastIndexOf("/"),r=[s.slice(0,l),"/thumbs",s.slice(l)].join("");return r+="inf",t(document).ajaxError(function(t,e,i){}),t.ajax({url:r,async:!1}).done(function(t){var e=t.split(";");e.length>0&&(o=e[0]+","+e[1])}),o},getPagesSelect:function(t){var e='<select id="sel_pageselect" class="IdeaComponent CompNT" title="'+this.translate("TXT_CHOOSE_PAGE")+'">';return e+="</select>"},updatePagesSelect:function(){var e=this.options.itemsInDatabase,i="";if(e>0)for(var n=Math.ceil(e/this.options.query.itemsnum),s=1;s<=n;s++)i+='<option value="'+s+'">'+s+"/"+n+"</option>";else 0==e&&(i+='<option value="-1">-</option>');t(this.getModeSelector()+"#sel_pageselect").empty(),t(this.getModeSelector()+"#sel_pageselect").append(i)},setSelectToCurrentPage:function(){var e=this.options.query.itemsfrom,i=this.options.query.itemsnum,n=Math.floor(e/i)+1;t(this.getModeSelector()+"#sel_pageselect [value="+n+"]").attr("selected","selected")},syncScopeButtons:function(){"btn_filter_global"==t(this.getModeSelector()+"#div_filter_left_buttons .selectedTab").attr("id")?(t(this.getModeSelector()+"#sel_opt_proj").removeAttr("selected"),t(this.getModeSelector()+"#sel_opt_glob").attr("selected","selected")):(t(this.getModeSelector()+"#sel_opt_glob").removeAttr("selected"),t(this.getModeSelector()+"#sel_opt_proj").attr("selected","selected"))},doQuery:function(e,i){var n=this.options.query,s=this.options.datasource,o=n.filters;o.MetavarType=n.type,"project"==this.options.query.scope?o.ProjectID=""+IAL._PrjHandle():"ProjectID"in o&&delete o.ProjectID,null!=s&&void 0===s.thePageName||(s=IMC._GetMediaList(n.sortkey,"asc"==n.sortingdirection?soAsc:soDesc,n.itemsfrom,n.itemsnum,JSON.stringify(o),this.options.query.searchvalue,0,0,0,1,this.options.usageFilter));try{var l=jQuery.parseJSON(s)}catch(t){return 0}var r="";if(this.options.mode!=moAssi&&(r=this.options.fileGrid.getSelectedRowId(),this.options.fileGrid.clearAll()),this.options.mode!=moAssi){var a=this.options.fileGrid.getSelectedRowId();null!=a&&(a=a.split(",")),this.deleteAllRows()}if(null!=l&&this.setDataFromArray(l),this.options.itemsInDatabase=IMC._GetMediaCount(JSON.stringify(n.filters),this.options.query.searchvalue,0,this.options.usageFilter),this.options.itemsInDatabase<=this.options.query.itemsfrom&&0!=this.options.itemsInDatabase&&(this.options.query.itemsfrom=this.options.query.itemsfrom-this.options.query.itemsnum,this.options.query.itemsfrom=this.options.query.itemsfrom<0?0:this.options.query.itemsfrom,this.doQuery()),t(this.getModeSelector()+"#txt_page").val(n.getPagesFromTo()),this.updatePagesSelect(),null!=i&&(r=i.join(",")),this.options.mode!=moAssi)if(this.refreshLinkColumns(),null!=a)for(var h=a.length,d=0;d<h;d++)this.options.fileGrid.selectRowById(a[d],!0,!1,!0);else this.emptyMetaPreview();else this.emptyMetaPreview();this.syncScopeButtons(),this.setSelectToCurrentPage(),this.options.mode!=moAssi&&!e&&this.selectFirstGridItem(r)},refreshLinkColumns:function(){jQuery(this.getModeSelector()+"#div_grid").find("a").each(function(t){jQuery(this).attr("onClick",jQuery(this).attr("href")),jQuery(this).attr("href","#")})},dialogHandler:function(e,i,n,s){var o=this.options.query,l=this.options.fileGrid;switch(maxZ+=1,jQuery(".ui-front").css("z-index",maxZ),e){case"MCMetaEditDlg":var r=l.getSelectedRowId().split(",");this.doQuery(!0);for(var a=0;a<r.length;a++)l.selectRowById(r[a],!0,!1,!1);break;case"MCFilterDlg":this.options.currentFilter=n;var h=""==n,d=n.replace(/'/g,'"');if(" "==d||h)delete o.filters.Cat,this.options.currentFilter="",t(this.getModeSelector()+"#chk_use_cat_filter")[0].checked=!1;else{var c=JSON.parse(d);"Cat"in o.filters||(o.filters.Cat=new Array),o.filters.Cat=c,t(this.getModeSelector()+"#chk_use_cat_filter")[0].checked=!0}this.options.usageFilter=s,t(this.getModeSelector()+"#chk_use_cat_filter")[0].checked=!0,this.doQuery();break;case"MCMetadataDlg":c=JSON.parse(n.replace(/'/g,'"'));var u=this.options.fileGrid.getSelectedRowId();u=u.split(",");var f=new Object;f.Cat=new Array;for(a=0;a<c.length;a++)f.Cat.push(c[a]);for(a=0;a<u.length;a++){var p=JSON.stringify(f);IMC._ModifyMediaData("",u[a],p)}this.doQuery()}var m=mrYes;switch(s){case"deleteconfirm":if(parseInt(i)==parseInt(m)){var g=l.getSelectedRowId();IMC._DeleteMediaList(g,IAL._PrjHandle()),this.emptyMetaPreview(),this.doQuery()}break;case"moveconfirm":if(parseInt(i)==parseInt(m))if(null!=(r=l.getSelectedRowId())){r=r.split(",");var _="";switch(t(this.getModeSelector()+"#div_filter_left .selectedTab").attr("id")){case"btn_filter_project":_=stGlobal;break;case"btn_filter_global":_=stProject}var v=new Object;v.Scope=[_];for(a=0;a<r.length;a++){p=JSON.stringify(v);IMC._ModifyMediaData("",r[a],p)}this.options.query.itemsfrom=0,this.doQuery()}}},getMediaCenterDialogID:function(){return t("."+this.options.uniqueID).parent().attr("id")},isActive:function(){return this.options.active},pausePlayback:function(){try{for(var e=t(".ideamcemediaplayer"),i=0;i<e.length;i++)e[i].pause()}catch(t){}jQuery("#div_preview video").remove(),jQuery("#movie_name").remove()},_prepareHTML:function(){switch(t("."+this.options.uniqueID).append('<div id="div_edit_modal_form"></div><div id="div_edit_multiple_confirm"></div><div id="content"><div class="ui-layout-north" id="div_filtercontainer" style="height: 30px;">\x3c!-- die Filter am ganz obersten Rand --\x3e<div class="ui-layout-center" style="height: 30px;"><div id="div_filter" class="filter" style="height: 30px;"><div id="div_filter_left" class="left filter" style="height: 30px;"><div id="div_filter_left_buttons" class="filter filterbuttons"></div><div id="div_filter_left_search" class="filter filtersearch"></div></div><div id="div_filter_right" class="right filter" style="height: 30px;"></div></div></div></div><div class="ui-layout-center" id="div_datadisplay">\x3c!-- weitere Layouts mit dem Grid und Preview --\x3e<div class="ui-layout-center" id="div_fileselector">\x3c!-- Layout fr GRID und Selectorbuttons --\x3e<div class="ui-layout-north"><div id="div_grid"></div></div><div class="ui-layout-center"><div id="div_elemActions" class="left"></div><div id="div_scrolling" class="left"></div><div id="div_media_per_page" class="right"></div><div id="div_close" class="right"></div></div></div><div class="ui-layout-west"><div id="div_mediatype"></div></div><div class="ui-layout-east" id="div_metadatapreview">\x3c!-- Layout fr Metadaten und Dateivorschau --\x3e<div class="ui-layout-center"><div id="div_meta"><div id="div_metahead" class="div_metahead"></div><div id="div_metaattribs"></div><div id="div_btn_metaedit"></div></div><div id="div_small_buttonarea"></div><div id="div_small_filterarea"></div><div id="div_small_gridarea"></div><div id="div_small_navarea"></div></div><div class="ui-layout-south"><div id="div_preview" class="cl_preview"></div><div id="div_small_metahead"></div><div id="div_small_previewarea"></div><div id="div_small_meta"></div></div></div></div></div><div id="mce_closebuttons"></div>                <div class="uploader_dialog" style="display:none;"><form class="fileupload" action="server/index.php?path=" method="POST" enctype="multipart/form-data">\x3c!-- Redirect browsers with JavaScript disabled to the origin page --\x3e<noscript><input type="hidden" name="redirect" value="http://blueimp.github.io/jQuery-File-Upload/"></noscript>\x3c!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload --\x3e<div class="row fileupload-buttonbar"><div class="span7">\x3c!-- The fileinput-button span is used to style the file input field as button --\x3e<span class="btn btn-success fileinput-button IdeaComponent button"><i class="icon-plus icon-white"></i><span>'+this.translate("UPL_ADD_FILES")+'</span><input type="file" name="files[]" multiple></span>\x3c!--<button type="submit" class="btn btn-primary start IdeaComponent button"><i class="icon-upload icon-white"></i><span>'+this.translate("UPL_START_UPLOAD")+'</span></button>--\x3e\x3c!--<button type="reset" class="btn btn-warning cancel IdeaComponent button"><i class="icon-ban-circle icon-white"></i><span>'+this.translate("UPL_CANCEL")+'</span></button>--\x3e\x3c!--<button type="button" class="btn btn-danger delete"><i class="icon-trash icon-white"></i><span>'+this.translate("UPL_DELETE")+'</span></button>--\x3e\x3c!--<input type="checkbox" class="toggle">--\x3e\x3c!-- The loading indicator is shown during file processing --\x3e<span class="fileupload-loading"></span></div>\x3c!-- The global progress information --\x3e<div class="span5 fileupload-progress fade">\x3c!-- The global progress bar --\x3e<div id="uploader_global_progress_replace" style="display: none;">'+this.translate("UPL_NOPROGRESSBAR")+'</div><div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100"><div class="bar" style="width:0%;"></div></div>\x3c!-- The extended global progress information --\x3e<div class="progress-extended">&nbsp;</div></div></div>\x3c!-- The table listing the files available for upload/download --\x3e<table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery" id="fileupload_filelister"></tbody></table></form><div id="uploader_button_area"><button type="button" name="btn_uplClose" id="btn_uplClose" class="btn_default" title="'+this.translate("BTN_CLOSE")+'">'+this.translate("BTN_CLOSE")+'</button></div></div>\x3c!-- The template to display files available for upload --\x3e<script id="template-upload" type="text/x-tmpl">{% for (var i=0, file; file=o.files[i]; i++) { %}<tr class="template-upload fade"><td><span class="preview"></span></td><td><p class="name">{%=file.name%}</p>{% if (file.error) { %}<div><span class="label label-important">'+this.translate("UPL_ERROR")+'</span> {%=file.error%}</div>{% } %}</td><td><p class="size">{%=o.formatFileSize(file.size)%}</p>{% if (!o.files.error) { %}<div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>{% } %}</td><td>{% if (!o.files.error && !i && !o.options.autoUpload) { %}<button class="btn btn-primary start"><i class="icon-upload icon-white"></i><span>'+this.translate("UPL_START")+'</span></button>{% } %}{% if (!i) { %}<button class="btn btn-warning cancel"><i class="icon-ban-circle icon-white"></i><span>'+this.translate("UPL_SINGLE_CANCEL")+'</span></button>{% } %}</td></tr>{% } %}<\/script>\x3c!-- The template to display files available for download --\x3e<script id="template-download" type="text/x-tmpl">{% for (var i=0, file; file=o.files[i]; i++) { %}<tr class="template-download fade"><td><span class="preview">{% if (file.thumbnail_url) { %}<a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>{% } %}</span></td><td><p class="name"><a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&\'gallery\'%}" download="{%=file.name%}">{%=file.name%}</a></p>{% if (file.error) { %}<div><span class="label label-important">'+this.translate("UPL_ERROR")+'</span> {%=file.error%}</div>{% } %}</td><td><span class="size">{%=o.formatFileSize(file.size)%}</span></td>\x3c!--<td><button class="btn btn-danger delete" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields=\'{"withCredentials":true}\'{% } %}><i class="icon-trash icon-white"></i><span>'+this.translate("UPL_DELETE")+'</span></button><input type="checkbox" name="delete" value="1" class="toggle"></td>--\x3e</tr>{% } %}<\/script>'),this.options.mode){case moCenter:this.element.find("*").addClass("mediacentermode");break;case moAssi:this.element.find("*").addClass("mediaassimode");break;case moBrowser:this.element.find("*").addClass("mediabrowsermode")}}})}(jQuery),jQuery.extend(jQuery.linkundlink.mediacenter,{version:"1.0"}),eXcell_linkStyle.prototype=new eXcell,eXcell_linkStyle2.prototype=new eXcell;var _Debug=!1,_NoError=0,_GeneralException=101,_ServerBusy=102,_InvalidArgumentError=201,_ElementCannotHaveChildren=202,_ElementIsNotAnArray=203,_NotInitialized=301,_NotImplementedError=401,_InvalidSetValue=402,_ElementIsReadOnly=403,_ElementIsWriteOnly=404,_IncorrectDataType=405,apiHandle=null,API=null,findAPITries=0;function doLMSInitialize(){var t=getAPIHandle();if(null==t)return"false";var e=t.LMSInitialize("");if("true"!=e.toString())ErrorHandler();return e.toString()}function doLMSFinish(){var t=getAPIHandle();if(null==t)return"false";var e=t.LMSFinish("");if("true"!=e.toString())ErrorHandler();return bClosed=!0,e.toString()}function doLMSGetValue(t){var e=getAPIHandle();if(null==e)return"";var i=e.LMSGetValue(t),n=e.LMSGetLastError().toString();if(n!=_NoError){var s=e.LMSGetErrorString(n);return alert("LMSGetValue("+t+") failed. \n"+s),""}return i.toString()}function doLMSSetValue(t,e){var i="false",n=getAPIHandle();if(null==n)return i;if("true"!=(i=n.LMSSetValue(t,e)).toString())ErrorHandler();return i.toString()}function doLMSCommit(){var t=getAPIHandle();if(null==t)return"false";var e=t.LMSCommit("");if("true"!=e)ErrorHandler();return e.toString()}function doLMSGetLastError(){var t=getAPIHandle();return null==t?_GeneralError:t.LMSGetLastError().toString()}function doLMSGetErrorString(t){var e=getAPIHandle();return e.LMSGetErrorString(t).toString()}function doLMSGetDiagnostic(t){var e=getAPIHandle();return e.LMSGetDiagnostic(t).toString()}function LMSIsInitialized(){var t=getAPIHandle();if(null==t)return!1;t.LMSGetValue("cmi.core.student_name");return t.LMSGetLastError().toString()!=_NotInitialized}function ErrorHandler(){var t=getAPIHandle();if(null!=t){var e=t.LMSGetLastError().toString();if(e!=_NoError){var i=t.LMSGetErrorString(e);1==_Debug&&(i+="\n",i+=t.LMSGetDiagnostic(null)),alert(i)}return e}}function getAPIHandle(){return null==apiHandle&&(apiHandle=getAPI()),apiHandle}function findAPI(t){for(;null==t.API&&null!=t.parent&&t.parent!=t;){if(++findAPITries>7)return null;t=t.parent}return t.API}function getAPI(){try{var t=findAPI(window);return null==t&&null!=window.opener&&void 0!==window.opener&&(t=findAPI(window.opener)),t}catch(t){return null}}(function(){"use strict";var t=this,e=t.Chart,i=function(t){return this.canvas=t.canvas,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};i.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},i.types={};var n=i.helpers={},s=n.each=function(t,e,i){var n=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var s;for(s=0;s<t.length;s++)e.apply(i,[t[s],s].concat(n))}else for(var o in t)e.apply(i,[t[o],o].concat(n))},o=n.clone=function(t){var e={};return s(t,function(i,n){t.hasOwnProperty(n)&&(e[n]=i)}),e},l=n.extend=function(t){return s(Array.prototype.slice.call(arguments,1),function(e){s(e,function(i,n){e.hasOwnProperty(n)&&(t[n]=i)})}),t},r=n.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),l.apply(null,t)},a=n.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},h=(n.where=function(t,e){var i=[];return n.each(t,function(t){e(t)&&i.push(t)}),i},n.findNextWhere=function(t,e,i){i||(i=-1);for(var n=i+1;n<t.length;n++){var s=t[n];if(e(s))return s}},n.findPreviousWhere=function(t,e,i){i||(i=t.length);for(var n=i-1;n>=0;n--){var s=t[n];if(e(s))return s}},n.inherits=function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=h,t&&l(i.prototype,t),i.__super__=e.prototype,i}),d=n.noop=function(){},c=n.uid=function(){var t=0;return function(){return"chart-"+t++}}(),u=n.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},f=n.amd="function"==typeof t.define&&t.define.amd,p=n.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},m=n.max=function(t){return Math.max.apply(Math,t)},g=n.min=function(t){return Math.min.apply(Math,t)},_=(n.cap=function(t,e,i){if(p(e)){if(t>e)return e}else if(p(i)&&i>t)return i;return t},n.getDecimalPlaces=function(t){return t%1!=0&&p(t)?t.toString().split(".")[1].length:0}),v=n.radians=function(t){return t*(Math.PI/180)},b=(n.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n),o=2*Math.PI+Math.atan2(n,i);return 0>i&&0>n&&(o+=2*Math.PI),{angle:o,distance:s}},n.aliasPixel=function(t){return t%2==0?0:.5}),y=(n.splineCurve=function(t,e,i,n){var s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),l=n*s/(s+o),r=n*o/(s+o);return{inner:{x:e.x-l*(i.x-t.x),y:e.y-l*(i.y-t.y)},outer:{x:e.x+r*(i.x-t.x),y:e.y+r*(i.y-t.y)}}},n.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(n.calculateScaleRange=function(t,e,i,n,s){var o=Math.floor(e/(1.5*i)),l=2>=o,r=m(t),a=g(t);r===a&&(r+=.5,a>=.5&&!n?a-=.5:r+=.5);for(var h=Math.abs(r-a),d=y(h),c=Math.ceil(r/(1*Math.pow(10,d)))*Math.pow(10,d),u=n?0:Math.floor(a/(1*Math.pow(10,d)))*Math.pow(10,d),f=c-u,p=Math.pow(10,d),_=Math.round(f/p);(_>o||o>2*_)&&!l;)if(_>o)p*=2,(_=Math.round(f/p))%1!=0&&(l=!0);else if(s&&d>=0){if(p/2%1!=0)break;p/=2,_=Math.round(f/p)}else p/=2,_=Math.round(f/p);return l&&(p=f/(_=2)),{steps:_,stepValue:p,min:u,max:u+_*p}},n.template=function(t,e){if(t instanceof Function)return t(e);var i={};return function(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}(t,e)}),x=(n.generateLabels=function(t,e,i,n){var o=new Array(e);return labelTemplateString&&s(o,function(e,s){o[s]=w(t,{value:i+n*(s+1)})}),o},n.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*((1+(e*=1.525))*t-e):.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-x.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*x.easeInBounce(2*t):.5*x.easeOutBounce(2*t-1)+.5}}),C=n.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},S=(n.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)},n.animationLoop=function(t,e,i,n,s,o){var l=0,r=x[i]||x.linear,a=function(){var i=++l/e,h=r(i);t.call(o,h,i,l),n.call(o,h,i),e>l?o.animationFrame=C(a):s.apply(o)};C(a)},n.getRelativePosition=function(t){var e,i,n=t.originalEvent||t,s=(t.currentTarget||t.srcElement).getBoundingClientRect();return n.touches?(e=n.touches[0].clientX-s.left,i=n.touches[0].clientY-s.top):(e=n.clientX-s.left,i=n.clientY-s.top),{x:e,y:i}},n.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}),k=n.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=d},I=(n.bindEvents=function(t,e,i){t.events||(t.events={}),s(e,function(e){t.events[e]=function(){i.apply(t,arguments)},S(t.chart.canvas,e,t.events[e])})},n.unbindEvents=function(t,e){s(e,function(e,i){k(t.chart.canvas,i,e)})}),N=n.getMaximumWidth=function(t){return t.parentNode.clientWidth},T=n.getMaximumHeight=function(t){return t.parentNode.clientHeight},P=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(t){var e=t.ctx,i=t.canvas.width,n=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=i+"px",e.canvas.style.height=n+"px",e.canvas.height=n*window.devicePixelRatio,e.canvas.width=i*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),D=n.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},O=n.fontString=function(t,e,i){return e+" "+t+"px "+i},M=n.longestText=function(t,e,i){t.font=e;var n=0;return s(i,function(e){var i=t.measureText(e).width;n=i>n?i:n}),n},E=n.drawRoundedRectangle=function(t,e,i,n,s,o){t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.quadraticCurveTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+s-o),t.quadraticCurveTo(e+n,i+s,e+n-o,i+s),t.lineTo(e+o,i+s),t.quadraticCurveTo(e,i+s,e,i+s-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+o,i),t.closePath()};i.instances={},l((i.Type=function(t,e,n){this.options=e,this.chart=n,this.id=c(),i.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)}).prototype,{initialize:function(){return this},clear:function(){return D(this.chart),this},stop:function(){return n.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,i=N(this.chart.canvas),n=this.options.maintainAspectRatio?i/this.chart.aspectRatio:T(this.chart.canvas);return e.width=this.chart.width=i,e.height=this.chart.height=n,P(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:d,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),I(this,this.events),delete i.instances[this.id]},showTooltip:function(t,e){if(void 0===this.activeElements&&(this.activeElements=[]),function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(s(t,function(t,i){t!==this.activeElements[i]&&(e=!0)},this),e)}.call(this,t)||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var o,l,r=this.datasets.length-1;r>=0&&(o=this.datasets[r].points||this.datasets[r].bars||this.datasets[r].segments,-1===(l=a(o,t[0])));r--);var h=[],d=[],c=function(){var t,e,i,s,o,r=[],a=[],c=[];return n.each(this.datasets,function(e){(t=e.points||e.bars||e.segments)[l]&&t[l].hasValue()&&r.push(t[l])}),n.each(r,function(t){a.push(t.x),c.push(t.y),h.push(n.template(this.options.multiTooltipTemplate,t)),d.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=g(c),i=m(c),s=g(a),e=m(a),{x:s>this.chart.width/2?s:e,y:(o+i)/2}}.call(this,l);new i.MultiTooltip({x:c.x,y:c.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:h,legendColors:d,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else s(t,function(t){var e=t.tooltipPosition();new i.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),i.Type.extend=function(t){var e=this,n=function(){return e.apply(this,arguments)};if(n.prototype=o(e.prototype),l(n.prototype,t),n.extend=i.Type.extend,t.name||e.prototype.name){var s=t.name||e.prototype.name,a=i.defaults[e.prototype.name]?o(i.defaults[e.prototype.name]):{};i.defaults[s]=l(a,t.defaults),i.types[s]=n,i.prototype[s]=function(t,e){var o=r(i.defaults.global,i.defaults[s],e||{});return new n(t,o,this)}}else u("Name not provided for this chart, so it hasn't been registered");return e},l((i.Element=function(t){l(this,t),this.initialize.apply(this,arguments),this.save()}).prototype,{initialize:function(){},restore:function(t){return t?s(t,function(t){this[t]=this._saved[t]},this):l(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return s(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return s(t,function(t,i){this[i]=(t-this._saved[i])*e+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),i.Element.extend=h,i.Point=i.Element.extend({display:!0,inRange:function(t,e){var i=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),i.Arc=i.Element.extend({inRange:function(t,e){var i=n.getAngleFromPoint(this,{x:t,y:e}),s=i.angle>=this.startAngle&&i.angle<=this.endAngle,o=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return s&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),i.Rectangle=i.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,i=this.x-e,n=this.x+e,s=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(i+=o,n-=o,s+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(i,this.base),t.lineTo(i,s),t.lineTo(n,s),t.lineTo(n,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),i.Tooltip=i.Element.extend({draw:function(){var t=this.chart.ctx;t.font=O(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,n=i+this.caretHeight+2;this.x+e/2>this.chart.width?this.xAlign="left":this.x-e/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var s=this.x-e/2,o=this.y-n;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-2),t.lineTo(this.x+this.caretHeight,this.y-(2+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(2+this.caretHeight)),t.closePath(),t.fill();break;case"below":o=this.y+2+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+2),t.lineTo(this.x+this.caretHeight,this.y+2+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+2+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":s=this.x-e+(this.cornerRadius+this.caretHeight);break;case"right":s=this.x-(this.cornerRadius+this.caretHeight)}E(t,s,o,e,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,s+e/2,o+i/2)}}),i.MultiTooltip=i.Element.extend({initialize:function(){this.font=O(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=O(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=M(this.ctx,this.font,this.labels)+this.fontSize+3,i=m([e,t]);this.width=i+2*this.xPadding;var n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,i=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){E(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,n.each(this.labels,function(e,i){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[i].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),i.Scale=i.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=_(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?M(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var n,s=M(this.ctx,this.font,this.xLabels);this.xLabelWidth=s;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)(n=Math.cos(v(this.xLabelRotation)))*i,(t=n*e)+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=n*s;this.xLabelRotation>0&&(this.endPoint-=Math.sin(v(this.xLabelRotation))*s+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:d,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/(this.valuesCount-(this.offsetGridLines?0:1)),i=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=e/2),Math.round(i)},update:function(t){n.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,i=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,s(this.yLabels,function(s,o){var l=this.endPoint-e*o,r=Math.round(l);t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(s,i-10,l),t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),r+=n.aliasPixel(t.lineWidth),t.moveTo(i,r),t.lineTo(this.width,r),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(i-5,r),t.lineTo(i,r),t.stroke(),t.closePath()},this),s(this.xLabels,function(e,i){var n=this.calculateX(i)+b(this.lineWidth),s=this.calculateX(i-(this.offsetGridLines?.5:0))+b(this.lineWidth),o=this.xLabelRotation>0;t.beginPath(),i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(s,this.endPoint),t.lineTo(s,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(s,this.endPoint),t.lineTo(s,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(n,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*v(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),i.RadialScale=i.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=_(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,i,n,s,o,l,r,a,h,d,c,u=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),f=this.width,m=0;for(this.ctx.font=O(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,u),i=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(n=i/2,t.x+n>f&&(f=t.x+n,s=e),t.x-n<m&&(m=t.x-n,l=e)):e<this.valuesCount/2?t.x+i>f&&(f=t.x+i,s=e):e>this.valuesCount/2&&t.x-i<m&&(m=t.x-i,l=e);a=m,h=Math.ceil(f-this.width),o=this.getIndexAngle(s),r=this.getIndexAngle(l),d=h/Math.sin(o+Math.PI/2),c=a/Math.sin(r+Math.PI/2),d=p(d)?d:0,c=p(c)?c:0,this.drawingArea=u-(c+d)/2,this.setCenterPoint(c,d)},setCenterPoint:function(t,e){var i=this.width-e-this.drawingArea,n=t+this.drawingArea;this.xCenter=(n+i)/2,this.yCenter=this.height/2},getIndexAngle:function(t){return t*(2*Math.PI/this.valuesCount)-Math.PI/2},getPointPosition:function(t,e){var i=this.getIndexAngle(t);return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(s(this.yLabels,function(e,i){if(i>0){var n,s=i*(this.drawingArea/this.steps),o=this.yCenter-s;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,s,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var l=0;l<this.valuesCount;l++)n=this.getPointPosition(l,this.calculateCenterOffset(this.min+i*this.stepValue)),0===l?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=O(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var r=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-r/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,r+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var i=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(i.x,i.y),t.stroke(),t.closePath()}var n=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=O(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,l=this.labels.length/2,r=l/2,a=r>e||e>o-r,h=e===r||e===o-r;t.textAlign=0===e?"center":e===l?"center":l>e?"left":"right",t.textBaseline=h?"middle":a?"bottom":"top",t.fillText(this.labels[e],n.x,n.y)}}}}}),n.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){s(i.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),f?define(function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),t.Chart=i,i.noConflict=function(){return t.Chart=e,i}}).call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(i){var n=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,i){var s=this.calculateBaseWidth(),o=this.calculateX(i)-s/2,l=this.calculateBarWidth(t);return o+l*e+e*n.barDatasetSpacing+l/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*n.barValueSpacing},calculateBarWidth:function(t){return(this.calculateBaseWidth()-(t-1)*n.barDatasetSpacing)/t}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),e.each(i.datasets,function(t){var n={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(n),e.each(t.data,function(e,s){n.bars.push(new this.BarClass({value:e,label:i.labels[s],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this),this.buildScale(i.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,i,n){e.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,n,i),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){e.each(this.datasets,function(i,n){e.each(i.bars,t,this,n)},this)},getBarsAtEvent:function(t){for(var i,n=[],s=e.getRelativePosition(t),o=function(t){n.push(t.bars[i])},l=0;l<this.datasets.length;l++)for(i=0;i<this.datasets[l].bars.length;i++)if(this.datasets[l].bars[i].inRange(s.x,s.y))return e.each(this.datasets,o),n;return n},buildScale:function(t){var i=this,n=function(){var t=[];return i.eachBars(function(e){t.push(e.value)}),t},s={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(s,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(s)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:i,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){e.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear(),this.chart.ctx,this.scale.draw(i),e.each(this.datasets,function(t,n){e.each(t.bars,function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,n,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:i,initialize:function(i){this.segments=[],this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.calculateTotal(i),e.each(i,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var i=[],n=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(n.x,n.y)&&i.push(t)},this),i},addData:function(t,e,i){var n=e||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),i||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),e.each(this.activeElements,function(t){t.restore(["fillColor"])}),e.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,e.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:e.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(i.datasets,function(t){var n={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(n),e.each(t.data,function(e,s){n.points.push(new this.PointClass({value:e,label:i.labels[s],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this),this.buildScale(i.labels),this.eachPoints(function(t,i){e.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],n=e.getRelativePosition(t);return e.each(this.datasets,function(t){e.each(t.points,function(t){t.inRange(n.x,n.y)&&i.push(t)})},this),i},buildScale:function(i){var n=this,s={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:i.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(function(){var t=[];return n.eachPoints(function(e){t.push(e.value)}),t}(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:i,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(s,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(s)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();var n=this.chart.ctx,s=function(t){return null!==t.value},o=function(t,i,n){return e.findPreviousWhere(i,s,n)||t};this.scale.draw(i),e.each(this.datasets,function(t){var l=e.where(t.points,s);e.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},i)},this),this.options.bezierCurve&&e.each(l,function(t,i){var n=i>0&&i<l.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(o(t,l,i),t,function(t,i,n){return e.findNextWhere(i,s,n)||t}(t,l,i),n),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),e.each(l,function(t,e){if(0===e)n.moveTo(t.x,t.y);else if(this.options.bezierCurve){var i=o(t,l,e);n.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else n.lineTo(t.x,t.y)},this),n.stroke(),this.options.datasetFill&&l.length>0&&(n.lineTo(l[l.length-1].x,this.scale.endPoint),n.lineTo(l[0].x,this.scale.endPoint),n.fillStyle=t.fillColor,n.closePath(),n.fill()),e.each(l,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},initialize:function(i){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:i.length}),this.updateScaleRange(i),this.scale.update(),e.each(i,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.render()},getSegmentsAtEvent:function(t){var i=[],n=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(n.x,n.y)&&i.push(t)},this),i},addData:function(t,e,i){var n=e||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[];e.each(t,function(t){i.push(t.value)});var n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,n,{size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),e.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),e.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),e.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var i=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},i),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this.Chart,e=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(i),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(i.datasets,function(t){var n={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(n),e.each(t.data,function(e,s){var o;this.scale.animation||(o=this.scale.getPointPosition(s,this.scale.calculateCenterOffset(e))),n.points.push(new this.PointClass({value:e,label:i.labels[s],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=e.getRelativePosition(t),n=e.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},i),s=2*Math.PI/this.scale.valuesCount,o=Math.round((n.angle-1.5*Math.PI)/s),l=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),n.distance<=this.scale.drawingArea&&e.each(this.datasets,function(t){l.push(t.points[o])}),l},buildScale:function(e){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:e.labels,valuesCount:e.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(e.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return e.each(t,function(t){t.data?i=i.concat(t.data):e.each(t.points,function(t){i.push(t.value)})}),i}(),n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,n)},addData:function(t,i){this.scale.valuesCount++,e.each(t,function(t,e){var n=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:n.x,y:n.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.labels.push(i),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),e.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var i=t||1,n=this.chart.ctx;this.clear(),this.scale.draw(),e.each(this.datasets,function(t){e.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),i)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),e.each(t.points,function(t,e){0===e?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y)},this),n.closePath(),n.stroke(),n.fillStyle=t.fillColor,n.fill(),e.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),function(t){var e={init:function(e){e=t.extend(!0,{set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,alwaysShowScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},e);return this.each(function(){var i=t(this);if(e.set_width&&i.css("width",e.set_width),e.set_height&&i.css("height",e.set_height),t(document).data("mCustomScrollbar-index")){var n=parseInt(t(document).data("mCustomScrollbar-index"));t(document).data("mCustomScrollbar-index",n+1)}else t(document).data("mCustomScrollbar-index","1");i.wrapInner("<div class='mCustomScrollBox mCS-"+e.theme+"' id='mCSB_"+t(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+t(document).data("mCustomScrollbar-index"));var s=i.children(".mCustomScrollBox");if(e.horizontalScroll){s.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var o=s.children(".mCSB_h_wrapper");o.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:o.children().outerWidth(),position:"relative"}).unwrap()}else s.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var l=s.children(".mCSB_container");t.support.touch&&l.addClass("mCS_touch"),l.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var r=s.children(".mCSB_scrollTools"),a=r.children(".mCSB_draggerContainer").children(".mCSB_dragger");if(e.horizontalScroll?a.data("minDraggerWidth",a.width()):a.data("minDraggerHeight",a.height()),e.scrollButtons.enable&&(e.horizontalScroll?r.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):r.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),s.bind("scroll",function(){i.is(".mCS_disabled")||s.scrollTop(0).scrollLeft(0)}),i.data({mCS_Init:!0,mCustomScrollbarIndex:t(document).data("mCustomScrollbar-index"),horizontalScroll:e.horizontalScroll,scrollInertia:e.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:e.mouseWheel,mouseWheelPixels:e.mouseWheelPixels,autoDraggerLength:e.autoDraggerLength,autoHideScrollbar:e.autoHideScrollbar,alwaysShowScrollbar:e.alwaysShowScrollbar,snapAmount:e.snapAmount,snapOffset:e.snapOffset,scrollButtons_enable:e.scrollButtons.enable,scrollButtons_scrollType:e.scrollButtons.scrollType,scrollButtons_scrollSpeed:e.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:e.scrollButtons.scrollAmount,autoExpandHorizontalScroll:e.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:e.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:e.advanced.normalizeMouseWheelDelta,contentTouchScroll:e.contentTouchScroll,onScrollStart_Callback:e.callbacks.onScrollStart,onScroll_Callback:e.callbacks.onScroll,onTotalScroll_Callback:e.callbacks.onTotalScroll,onTotalScrollBack_Callback:e.callbacks.onTotalScrollBack,onTotalScroll_Offset:e.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:e.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:e.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),e.horizontalScroll)"none"!==i.css("max-width")&&(e.advanced.updateOnContentResize||(e.advanced.updateOnContentResize=!0));else if("none"!==i.css("max-height")){var h=!1,d=parseInt(i.css("max-height"));i.css("max-height").indexOf("%")>=0&&(h=d,d=i.parent().height()*h/100),i.css("overflow","hidden"),s.css("max-height",d)}if(i.mCustomScrollbar("update"),e.advanced.updateOnBrowserResize){var c,u=t(window).width(),f=t(window).height();t(window).bind("resize."+i.data("mCustomScrollbarIndex"),function(){c&&clearTimeout(c),c=setTimeout(function(){if(!i.is(".mCS_disabled")&&!i.is(".mCS_destroyed")){var e=t(window).width(),n=t(window).height();u===e&&f===n||("none"!==i.css("max-height")&&h&&s.css("max-height",i.parent().height()*h/100),i.mCustomScrollbar("update"),u=e,f=n)}},150)})}if(e.advanced.updateOnContentResize){if(e.horizontalScroll)var p=l.outerWidth();else p=l.outerHeight();setInterval(function(){if(e.horizontalScroll){e.advanced.autoExpandHorizontalScroll&&l.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:l.outerWidth(),position:"relative"}).unwrap();var t=l.outerWidth()}else t=l.outerHeight();t!=p&&(i.mCustomScrollbar("update"),p=t)},300)}})},update:function(){var e=t(this),i=e.children(".mCustomScrollBox"),n=i.children(".mCSB_container");n.removeClass("mCS_no_scrollbar"),e.removeClass("mCS_disabled mCS_destroyed"),i.scrollTop(0).scrollLeft(0);var s=i.children(".mCSB_scrollTools"),o=s.children(".mCSB_draggerContainer"),l=o.children(".mCSB_dragger");if(e.data("horizontalScroll")){var r=s.children(".mCSB_buttonLeft"),a=s.children(".mCSB_buttonRight"),h=i.width();e.data("autoExpandHorizontalScroll")&&n.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:n.outerWidth(),position:"relative"}).unwrap();var d=n.outerWidth()}else var c=s.children(".mCSB_buttonUp"),u=s.children(".mCSB_buttonDown"),f=i.height(),p=n.outerHeight();if(p>f&&!e.data("horizontalScroll")){s.css("display","block");var m=o.height();if(e.data("autoDraggerLength")){var g=Math.round(f/p*m),_=l.data("minDraggerHeight");if(g<=_)l.css({height:_});else if(g>=m-10){var v=m-10;l.css({height:v})}else l.css({height:g});l.children(".mCSB_dragger_bar").css({"line-height":l.height()+"px"})}var b=(p-f)/(m-l.height());e.data("scrollAmount",b).mCustomScrollbar("scrolling",i,n,o,l,c,u,r,a);var y=Math.abs(n.position().top);e.mCustomScrollbar("scrollTo",y,{scrollInertia:0,trigger:"internal"})}else if(d>h&&e.data("horizontalScroll")){s.css("display","block");var w=o.width();if(e.data("autoDraggerLength")){var x=Math.round(h/d*w),C=l.data("minDraggerWidth");if(x<=C)l.css({width:C});else if(x>=w-10){var S=w-10;l.css({width:S})}else l.css({width:x})}b=(d-h)/(w-l.width());e.data("scrollAmount",b).mCustomScrollbar("scrolling",i,n,o,l,c,u,r,a);y=Math.abs(n.position().left);e.mCustomScrollbar("scrollTo",y,{scrollInertia:0,trigger:"internal"})}else i.unbind("mousewheel focusin"),e.data("horizontalScroll")?l.add(n).css("left",0):l.add(n).css("top",0),e.data("alwaysShowScrollbar")?e.data("horizontalScroll")?e.data("horizontalScroll")&&l.css({width:o.width()}):l.css({height:o.height()}):(s.css("display","none"),n.addClass("mCS_no_scrollbar")),e.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(e,n,s,o,l,r,a,h){var d,c,u,f,p,m,g,_,v,b,y,w,x=t(this);x.data("bindEvent_scrollbar_drag")||(t.support.pointer?(u="pointerdown",f="pointermove",p="pointerup"):t.support.msPointer&&(u="MSPointerDown",f="MSPointerMove",p="MSPointerUp"),t.support.pointer||t.support.msPointer?(o.bind(u,function(e){e.preventDefault(),x.data({on_drag:!0}),o.addClass("mCSB_dragger_onDrag");var i=t(this),n=i.offset(),s=e.originalEvent.pageX-n.left,l=e.originalEvent.pageY-n.top;s<i.width()&&s>0&&l<i.height()&&l>0&&(d=l,c=s)}),t(document).bind(f+"."+x.data("mCustomScrollbarIndex"),function(t){if(t.preventDefault(),x.data("on_drag")){var e=o.offset(),i=t.originalEvent.pageX-e.left,n=t.originalEvent.pageY-e.top;C(d,c,n,i)}}).bind(p+"."+x.data("mCustomScrollbarIndex"),function(t){x.data({on_drag:!1}),o.removeClass("mCSB_dragger_onDrag")})):(o.bind("mousedown touchstart",function(e){e.preventDefault(),e.stopImmediatePropagation();var i,n,s=t(this),l=s.offset();if("touchstart"===e.type){var r=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];i=r.pageX-l.left,n=r.pageY-l.top}else x.data({on_drag:!0}),o.addClass("mCSB_dragger_onDrag"),i=e.pageX-l.left,n=e.pageY-l.top;i<s.width()&&i>0&&n<s.height()&&n>0&&(d=n,c=i)}).bind("touchmove",function(e){e.preventDefault(),e.stopImmediatePropagation();var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n=t(this).offset(),s=i.pageX-n.left,o=i.pageY-n.top;C(d,c,o,s)}),t(document).bind("mousemove."+x.data("mCustomScrollbarIndex"),function(t){if(x.data("on_drag")){var e=o.offset(),i=t.pageX-e.left,n=t.pageY-e.top;C(d,c,n,i)}}).bind("mouseup."+x.data("mCustomScrollbarIndex"),function(t){x.data({on_drag:!1}),o.removeClass("mCSB_dragger_onDrag")})),x.data({bindEvent_scrollbar_drag:!0}));function C(t,e,i,n){x.data("horizontalScroll")?x.mCustomScrollbar("scrollTo",o.position().left-e+n,{moveDragger:!0,trigger:"internal"}):x.mCustomScrollbar("scrollTo",o.position().top-t+i,{moveDragger:!0,trigger:"internal"})}t.support.touch&&x.data("contentTouchScroll")&&(x.data("bindEvent_content_touch")||(n.bind("touchstart",function(e){e.stopImmediatePropagation(),m=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],g=t(this),_=g.offset(),b=m.pageX-_.left,v=m.pageY-_.top,y=v,w=b}),n.bind("touchmove",function(e){e.preventDefault(),e.stopImmediatePropagation(),m=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],g=t(this).parent(),_=g.offset(),b=m.pageX-_.left,v=m.pageY-_.top,x.data("horizontalScroll")?x.mCustomScrollbar("scrollTo",w-b,{trigger:"internal"}):x.mCustomScrollbar("scrollTo",y-v,{trigger:"internal"})})));if(x.data("bindEvent_scrollbar_click")||(s.bind("click",function(e){var i=(e.pageY-s.offset().top)*x.data("scrollAmount"),n=t(e.target);x.data("horizontalScroll")&&(i=(e.pageX-s.offset().left)*x.data("scrollAmount")),(n.hasClass("mCSB_draggerContainer")||n.hasClass("mCSB_draggerRail"))&&x.mCustomScrollbar("scrollTo",i,{trigger:"internal",scrollEasing:"draggerRailEase"})}),x.data({bindEvent_scrollbar_click:!0})),x.data("mouseWheel")&&(x.data("bindEvent_mousewheel")||(e.bind("mousewheel",function(t,e){var i,l=x.data("mouseWheelPixels"),r=Math.abs(n.position().top),a=o.position().top,h=s.height()-o.height();x.data("normalizeMouseWheelDelta")&&(e=e<0?-1:1),"auto"===l&&(l=100+Math.round(x.data("scrollAmount")/2)),x.data("horizontalScroll")&&(a=o.position().left,h=s.width()-o.width(),r=Math.abs(n.position().left)),(e>0&&0!==a||e<0&&a!==h)&&(t.preventDefault(),t.stopImmediatePropagation()),i=r-e*l,x.mCustomScrollbar("scrollTo",i,{trigger:"internal"})}),x.data({bindEvent_mousewheel:!0}))),x.data("scrollButtons_enable"))if("pixels"===x.data("scrollButtons_scrollType")){function S(t){o.data("preventAction")||(o.data("preventAction",!0),x.mCustomScrollbar("scrollTo",t,{trigger:"internal"}))}x.data("horizontalScroll")?(h.add(a).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",k,I),x.data({bindEvent_buttonsContinuous_x:!1}),x.data("bindEvent_buttonsPixels_x")||(h.bind("click",function(t){t.preventDefault(),S(Math.abs(n.position().left)+x.data("scrollButtons_scrollAmount"))}),a.bind("click",function(t){t.preventDefault(),S(Math.abs(n.position().left)-x.data("scrollButtons_scrollAmount"))}),x.data({bindEvent_buttonsPixels_x:!0}))):(r.add(l).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",k,I),x.data({bindEvent_buttonsContinuous_y:!1}),x.data("bindEvent_buttonsPixels_y")||(r.bind("click",function(t){t.preventDefault(),S(Math.abs(n.position().top)+x.data("scrollButtons_scrollAmount"))}),l.bind("click",function(t){t.preventDefault(),S(Math.abs(n.position().top)-x.data("scrollButtons_scrollAmount"))}),x.data({bindEvent_buttonsPixels_y:!0})))}else{if(x.data("horizontalScroll")){if(h.add(a).unbind("click"),x.data({bindEvent_buttonsPixels_x:!1}),!x.data("bindEvent_buttonsContinuous_x")){h.bind("mousedown touchstart MSPointerDown pointerdown",function(t){t.preventDefault();var e=N();x.data({mCSB_buttonScrollRight:setInterval(function(){x.mCustomScrollbar("scrollTo",Math.abs(n.position().left)+e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var k=function(t){t.preventDefault(),clearInterval(x.data("mCSB_buttonScrollRight"))};h.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",k),a.bind("mousedown touchstart MSPointerDown pointerdown",function(t){t.preventDefault();var e=N();x.data({mCSB_buttonScrollLeft:setInterval(function(){x.mCustomScrollbar("scrollTo",Math.abs(n.position().left)-e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var I=function(t){t.preventDefault(),clearInterval(x.data("mCSB_buttonScrollLeft"))};a.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",I),x.data({bindEvent_buttonsContinuous_x:!0})}}else if(r.add(l).unbind("click"),x.data({bindEvent_buttonsPixels_y:!1}),!x.data("bindEvent_buttonsContinuous_y")){r.bind("mousedown touchstart MSPointerDown pointerdown",function(t){t.preventDefault();var e=N();x.data({mCSB_buttonScrollDown:setInterval(function(){x.mCustomScrollbar("scrollTo",Math.abs(n.position().top)+e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});r.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",function(t){t.preventDefault(),clearInterval(x.data("mCSB_buttonScrollDown"))}),l.bind("mousedown touchstart MSPointerDown pointerdown",function(t){t.preventDefault();var e=N();x.data({mCSB_buttonScrollUp:setInterval(function(){x.mCustomScrollbar("scrollTo",Math.abs(n.position().top)-e,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});l.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",function(t){t.preventDefault(),clearInterval(x.data("mCSB_buttonScrollUp"))}),x.data({bindEvent_buttonsContinuous_y:!0})}function N(){var t=x.data("scrollButtons_scrollSpeed");return"auto"===x.data("scrollButtons_scrollSpeed")&&(t=Math.round((x.data("scrollInertia")+100)/40)),t}}x.data("autoScrollOnFocus")&&(x.data("bindEvent_focusin")||(e.bind("focusin",function(){e.scrollTop(0).scrollLeft(0);var i=t(document.activeElement);if(i.is("input,textarea,select,button,a[tabindex],area,object")){var s=n.position().top,o=i.position().top,l=e.height()-i.outerHeight();x.data("horizontalScroll")&&(s=n.position().left,o=i.position().left,l=e.width()-i.outerWidth()),(s+o<0||s+o>l)&&x.mCustomScrollbar("scrollTo",o,{trigger:"internal"})}}),x.data({bindEvent_focusin:!0}))),x.data("autoHideScrollbar")&&!x.data("alwaysShowScrollbar")&&(x.data("bindEvent_autoHideScrollbar")||(e.bind("mouseenter",function(t){e.addClass("mCS-mouse-over"),i.showScrollbar.call(e.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(t){e.removeClass("mCS-mouse-over"),"mouseleave"===t.type&&i.hideScrollbar.call(e.children(".mCSB_scrollTools"))}),x.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(e,n){var s,o,l,r,a,h=t(this),d={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:h.data("scrollInertia"),scrollEasing:h.data("scrollEasing")},c=(n=t.extend(d,n),h.children(".mCustomScrollBox")),u=c.children(".mCSB_container"),f=c.children(".mCSB_scrollTools"),p=f.children(".mCSB_draggerContainer"),m=p.children(".mCSB_dragger"),g=draggerSpeed=n.scrollInertia;if(!u.hasClass("mCS_no_scrollbar")&&(h.data({mCS_trigger:n.trigger}),h.data("mCS_Init")&&(n.callbacks=!1),e||0===e)){var _,v;if("number"==typeof e)n.moveDragger?(s=e,e=h.data("horizontalScroll")?m.position().left*h.data("scrollAmount"):m.position().top*h.data("scrollAmount"),draggerSpeed=0):s=e/h.data("scrollAmount");else if("string"==typeof e)s=1===(_="top"===e?0:"bottom"!==e||h.data("horizontalScroll")?"left"===e?0:"right"===e&&h.data("horizontalScroll")?u.outerWidth()-c.width():"first"===e?h.find(".mCSB_container").find(":first"):"last"===e?h.find(".mCSB_container").find(":last"):h.find(e):u.outerHeight()-c.height()).length?(e=h.data("horizontalScroll")?_.position().left:_.position().top)/h.data("scrollAmount"):e=_;if(h.data("horizontalScroll"))h.data("onTotalScrollBack_Offset")&&(l=-h.data("onTotalScrollBack_Offset")),h.data("onTotalScroll_Offset")&&(a=c.width()-u.outerWidth()+h.data("onTotalScroll_Offset")),s<0?(s=e=0,clearInterval(h.data("mCSB_buttonScrollLeft")),l||(o=!0)):s>=p.width()-m.width()?(s=p.width()-m.width(),e=c.width()-u.outerWidth(),clearInterval(h.data("mCSB_buttonScrollRight")),a||(r=!0)):e=-e,(v=h.data("snapAmount"))&&(e=Math.round(e/v)*v-h.data("snapOffset")),i.mTweenAxis.call(this,m[0],"left",Math.round(s),draggerSpeed,n.scrollEasing),i.mTweenAxis.call(this,u[0],"left",Math.round(e),g,n.scrollEasing,{onStart:function(){n.callbacks&&!h.data("mCS_tweenRunning")&&b("onScrollStart"),h.data("autoHideScrollbar")&&!h.data("alwaysShowScrollbar")&&i.showScrollbar.call(f)},onUpdate:function(){n.callbacks&&b("whileScrolling")},onComplete:function(){n.callbacks&&(b("onScroll"),(o||l&&u.position().left>=l)&&b("onTotalScrollBack"),(r||a&&u.position().left<=a)&&b("onTotalScroll")),m.data("preventAction",!1),h.data("mCS_tweenRunning",!1),h.data("autoHideScrollbar")&&!h.data("alwaysShowScrollbar")&&(c.hasClass("mCS-mouse-over")||i.hideScrollbar.call(f))}});else h.data("onTotalScrollBack_Offset")&&(l=-h.data("onTotalScrollBack_Offset")),h.data("onTotalScroll_Offset")&&(a=c.height()-u.outerHeight()+h.data("onTotalScroll_Offset")),s<0?(s=e=0,clearInterval(h.data("mCSB_buttonScrollUp")),l||(o=!0)):s>=p.height()-m.height()?(s=p.height()-m.height(),e=c.height()-u.outerHeight(),clearInterval(h.data("mCSB_buttonScrollDown")),a||(r=!0)):e=-e,(v=h.data("snapAmount"))&&(e=Math.round(e/v)*v-h.data("snapOffset")),i.mTweenAxis.call(this,m[0],"top",Math.round(s),draggerSpeed,n.scrollEasing),i.mTweenAxis.call(this,u[0],"top",Math.round(e),g,n.scrollEasing,{onStart:function(){n.callbacks&&!h.data("mCS_tweenRunning")&&b("onScrollStart"),h.data("autoHideScrollbar")&&!h.data("alwaysShowScrollbar")&&i.showScrollbar.call(f)},onUpdate:function(){n.callbacks&&b("whileScrolling")},onComplete:function(){n.callbacks&&(b("onScroll"),(o||l&&u.position().top>=l)&&b("onTotalScrollBack"),(r||a&&u.position().top<=a)&&b("onTotalScroll")),m.data("preventAction",!1),h.data("mCS_tweenRunning",!1),h.data("autoHideScrollbar")&&!h.data("alwaysShowScrollbar")&&(c.hasClass("mCS-mouse-over")||i.hideScrollbar.call(f))}});h.data("mCS_Init")&&h.data({mCS_Init:!1})}function b(t){if(h.data("mCustomScrollbarIndex"))switch(this.mcs={top:u.position().top,left:u.position().left,draggerTop:m.position().top,draggerLeft:m.position().left,topPct:Math.round(100*Math.abs(u.position().top)/Math.abs(u.outerHeight()-c.height())),leftPct:Math.round(100*Math.abs(u.position().left)/Math.abs(u.outerWidth()-c.width()))},t){case"onScrollStart":h.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(h,this.mcs);break;case"whileScrolling":h.data("whileScrolling_Callback").call(h,this.mcs);break;case"onScroll":h.data("onScroll_Callback").call(h,this.mcs);break;case"onTotalScrollBack":h.data("onTotalScrollBack_Callback").call(h,this.mcs);break;case"onTotalScroll":h.data("onTotalScroll_Callback").call(h,this.mcs)}}},stop:function(){var e=t(this),n=e.children().children(".mCSB_container"),s=e.children().children().children().children(".mCSB_dragger");i.mTweenAxisStop.call(this,n[0]),i.mTweenAxisStop.call(this,s[0])},disable:function(e){var i=t(this),n=i.children(".mCustomScrollBox"),s=n.children(".mCSB_container"),o=n.children(".mCSB_scrollTools"),l=o.children().children(".mCSB_dragger");n.unbind("mousewheel focusin mouseenter mouseleave touchend"),s.unbind("touchstart touchmove"),e&&(i.data("horizontalScroll")?l.add(s).css("left",0):l.add(s).css("top",0)),o.css("display","none"),s.addClass("mCS_no_scrollbar"),i.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var e=t(this);e.removeClass("mCustomScrollbar _mCS_"+e.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),t(document).unbind("mousemove."+e.data("mCustomScrollbarIndex")+" mouseup."+e.data("mCustomScrollbarIndex")+" MSPointerMove."+e.data("mCustomScrollbarIndex")+" MSPointerUp."+e.data("mCustomScrollbarIndex")),t(window).unbind("resize."+e.data("mCustomScrollbarIndex"))}},i={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(t,e,i,n,s,o){var l,r=(o=o||{}).onStart||function(){},a=o.onUpdate||function(){},h=o.onComplete||function(){},d=m(),c=0,u=t.offsetTop,f=t.style;"left"===e&&(u=t.offsetLeft);var p=i-u;function m(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function g(){c||r.call(),c=m()-d,_(),c>=t._time&&(t._time=c>t._time?c+l-(c-t._time):c+l-1,t._time<c+1&&(t._time=c+1)),t._time<n?t._id=_request(g):h.call()}function _(){n>0?(t.currVal=function(t,e,i,n,s){switch(s){case"linear":return i*t/n+e;case"easeOutQuad":return-i*(t/=n)*(t-2)+e;case"easeInOutQuad":return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e;case"easeOutCubic":return t/=n,i*(--t*t*t+1)+e;case"easeOutQuart":return t/=n,-i*(--t*t*t*t-1)+e;case"easeOutQuint":return t/=n,i*(--t*t*t*t*t+1)+e;case"easeOutCirc":return t/=n,t--,i*Math.sqrt(1-t*t)+e;case"easeOutSine":return i*Math.sin(t/n*(Math.PI/2))+e;case"easeOutExpo":return i*(1-Math.pow(2,-10*t/n))+e;case"mcsEaseOut":var o=(t/=n)*t,l=o*t;return e+i*(.499999999999997*l*o+-2.5*o*o+5.5*l+-6.5*o+4*t);case"draggerRailEase":return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}}(t._time,u,p,n,s),f[e]=Math.round(t.currVal)+"px"):f[e]=i+"px",a.call()}!function(){if(null==t._id)return;window.requestAnimationFrame?window.cancelAnimationFrame(t._id):clearTimeout(t._id);t._id=null}(),l=1e3/60,t._time=c+l,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return _(),setTimeout(t,.01)},t._id=_request(g)},mTweenAxisStop:function(t){null!=t._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._id):clearTimeout(t._id),t._id=null)},rafPolyfill:function(){for(var t=["ms","moz","webkit","o"],e=t.length;--e>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"]}};i.rafPolyfill.call(),t.support.touch=!!("ontouchstart"in window),t.support.pointer=window.navigator.pointerEnabled,t.support.msPointer=window.navigator.msPointerEnabled;document.location.protocol;t.event.special.mousewheel||document.write('<script src="script/jquery/jquery.mousewheel.min.js"><\/script>'),t.fn.mCustomScrollbar=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void t.error("Method "+i+" does not exist"):e.init.apply(this,arguments)}}(jQuery);var EXANIMO=EXANIMO||{};!function(){EXANIMO.managers=EXANIMO.managers||{};var t,e,i,n=!1,s=!1,o="EXANIMO-managers-StateManager-iFrame";function l(){return EXANIMO.managers.StateManager}var r=-1!=navigator.appName.indexOf("Microsoft Internet")?"IFRAME":"HASH";function a(){return document.location.href.split("#")[1]||l().defaultStateID}function h(e,n){var s;(e=e||l().defaultStateID,t)?n||t.dispatchStateChangeEvents(e):(i={id:e},(s=l().onstatechange)&&(i.type="stateChange",s(i)),n?(s=l().onstateset)&&(i.type="stateSet",s(i)):(s=l().onstaterevisit)&&(i.type="stateRevisit",s(i)),i=null)}var d=function(){switch(r){case"HASH":return function(t){document.location.hash=t==l().defaultStateID?"#":t,e=t};case"IFRAME":return function(t){s=!0;document.getElementById(o);frames[o].document.open(),frames[o].document.write('<script>parent.document.location.hash = "'+(t==l().defaultStateID?"#":t)+'"; /* Wait for IE to impose its title before setting ours. */ setTimeout( function(){ parent.EXANIMO.managers.StateManager._updateIFrame("'+t+'"); }, 0);<\/script>'),frames[o].document.close()};case"LINK":return function(t){s=!0;var e=document.createElement("a");e.setAttribute("href",t==l().defaultStateID?"#":"#"+t);var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),e.dispatchEvent(i),document.location.EXANIMO.managers.StateManager.stateList.push(t)}}}();EXANIMO.managers.StateManager={CHECK_RATE:100,onstatechange:null,onstateset:null,onstaterevisit:null,DEFAULT_STATE:"defaultState",defaultStateID:"defaultState",initialize:function(i){if(!n)switch(n=!0,t=1==i?function(){for(var t=["object","embed"],e=0;e<t.length;e++)for(var i=document.getElementsByTagName(t[e]),n=0;n<i.length;n++)if(i[n].dispatchStateChangeEvents)return i[n]}():i,r){case"HASH":e=a()==l().defaultStateID?l().defaultStateID:null;setInterval(function(){var t=a();t!=e&&(e=t,h(t))},l().CHECK_RATE);break;case"IFRAME":s=!0;var d=document.createElement("iframe");d.setAttribute("src","about:blank"),d.setAttribute("name",o),d.setAttribute("id",o),d.style.visibility="hidden",d.style.width="0",d.style.height="0",d.style.position="absolute",d.style.overflow="hidden",document.body.appendChild(d);var c=a();c!=l().defaultStateID&&setTimeout(function(){h(c)},0),frames[o].document.open(),c?frames[o].document.write('<script>parent.document.location.hash = "'+(c==l().defaultStateID?"":c)+'"; parent.EXANIMO.managers.StateManager._updateIFrame("'+c+'");<\/script>'):frames[o].document.write('<script>parent.document.location.hash = ""; parent.EXANIMO.managers.StateManager._updateIFrame();<\/script>'),frames[o].document.close();break;case"LINK":document.location.EXANIMO=document.location.EXANIMO||{},document.location.EXANIMO.managers=document.location.EXANIMO.managers||{},document.location.EXANIMO.managers.StateManager=document.location.EXANIMO.managers.StateManager||{};var u=document.location.EXANIMO.managers.StateManager;if(window.onunload=function(){u.oldHistoryLength=-1},u.deepLink&&u.deepLink!=l().defaultStateID&&(u.oldHistoryLength=-1,u.deepLink=null),void 0===u.stateList){for(u.stateList=[a()||l().defaultStateID],u.deepLink=u.stateList[0],u.offset=history.length-1;u.offset;)u.stateList.unshift(null),u.offset--;delete u.offset,u.oldHistoryLength=document.location.hash?-1:history.length}setInterval(function(){var t=document.location.EXANIMO.managers.StateManager;if(s)return s=!1,void(t.oldHistoryLength=history.length);history.length!=t.oldHistoryLength&&(h(t.stateList[history.length-1]),t.oldHistoryLength=history.length)},l().CHECK_RATE)}},setState:function(t,e){e&&l().setTitle(e),i||(d(t),h(t,!0))},setTitle:function(t){window.document.title=t||" "},_updateIFrame:function(t){s||h(t),s=!1}}}(),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper"],t):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=t(window.blueimp.helper||window.jQuery))}(function(t){"use strict";function e(t,i){return!(!t||!t.length||void 0===document.body.style.maxHeight)&&(this&&this.options===e.prototype.options?(this.list=t,this.num=t.length,this.initOptions(i),void this.initialize()):new e(t,i))}return t.extend(e.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},support:function(t){var e,i,n,s={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},o={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(e in o)if(o.hasOwnProperty(e)&&void 0!==t.style[e]){(i=o[e]).name=e,s.transition=i;break}return document.body.appendChild(t),i&&(e=i.name.slice(0,-9)+"ransform",void 0!==t.style[e]&&(t.style[e]="translateZ(0)",n=window.getComputedStyle(t).getPropertyValue(i.prefix+"transform"),s.transform={prefix:i.prefix,name:e,translate:!0,translateZ:n&&"none"!==n})),void 0!==t.style.backgroundSize&&(t.style.backgroundSize="contain",s.backgroundSize={contain:"contain"===window.getComputedStyle(t).getPropertyValue("background-size")}),document.body.removeChild(t),s}(document.createElement("div")),initialize:function(){return this.initStartIndex(),!1!==this.initWidget()&&(this.initEventListeners(),this.options.onopen&&this.options.onopen.call(this),this.onslide(this.index),this.ontransitionend(),void(this.options.startSlideshow&&this.play()))},slide:function(t,e){window.clearTimeout(this.timeout);var i,n,s,o=this.index;if(o!==t&&1!==this.num){if(e||(e=this.options.transitionSpeed),this.support.transition){for(this.options.continuous||(t=this.circle(t)),i=Math.abs(o-t)/(o-t),this.options.continuous&&(n=i,(i=-this.positions[this.circle(t)]/this.slideWidth)!==n&&(t=-i*this.num+t)),s=Math.abs(o-t)-1;s;)s-=1,this.move(this.circle((t>o?t:o)-s-1),this.slideWidth*i,0);t=this.circle(t),this.move(o,this.slideWidth*i,e),this.move(t,0,e),this.options.continuous&&this.move(this.circle(t-i),-this.slideWidth*i,0)}else t=this.circle(t),this.animate(o*-this.slideWidth,t*-this.slideWidth,e);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(this.slide,[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(t){var e;for(this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-t.length;e<this.num;e+=1)this.addSlide(e),this.positionSlide(e);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.slides=[]},close:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclose&&this.options.onclose.call(this)},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,e,i){this.translateX(t,e,i),this.positions[t]=e},translate:function(t,e,i,n){var s=this.slides[t].style,o=this.support.transition,l=this.support.transform;s[o.name+"Duration"]=n+"ms",s[l.name]="translate("+e+"px, "+i+"px)"+(l.translateZ?" translateZ(0)":"")},translateX:function(t,e,i){this.translate(t,e,0,i)},translateY:function(t,e,i){this.translate(t,0,e,i)},animate:function(t,e,i){if(i)var n=this,s=(new Date).getTime(),o=window.setInterval(function(){var l=(new Date).getTime()-s;return l>i?(n.slidesContainer[0].style.left=e+"px",n.ontransitionend(),void window.clearInterval(o)):void(n.slidesContainer[0].style.left=(e-t)*(Math.floor(l/i*100)/100)+t+"px")},4);else this.slidesContainer[0].style.left=e+"px"},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&(t.touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&(t.touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(e){if(this.touchStart){var i=e.target,n=e.relatedTarget;(!n||n!==i&&!t.contains(i,n))&&this.onmouseup(e)}},ontouchstart:function(t){var e=t.touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){this.options.disableScroll&&t.preventDefault();var e,i,n=t.touches[0],s=this.index;if(this.touchDelta={x:n.pageX-this.touchStart.x,y:n.pageY-this.touchStart.y},e=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(e)<Math.abs(this.touchDelta.y)),this.isScrolling)this.options.closeOnSwipeUpOrDown&&this.translateY(s,this.touchDelta.y+this.positions[s],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?i=[this.circle(s+1),s,this.circle(s-1)]:(this.touchDelta.x=e/=!s&&e>0||s===this.num-1&&0>e?Math.abs(e)/this.slideWidth+1:1,i=[s],s&&i.push(s-1),s<this.num-1&&i.unshift(s+1));i.length;)s=i.pop(),this.translateX(s,e+this.positions[s],0)}},ontouchend:function(){var t,e,i,n,s,o=this.index,l=this.options.transitionSpeed,r=this.slideWidth,a=Number(Date.now()-this.touchStart.time)<250,h=a&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>r/2,d=!o&&this.touchDelta.x>0||o===this.num-1&&this.touchDelta.x<0,c=!h&&this.options.closeOnSwipeUpOrDown&&(a&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(d=!1),t=this.touchDelta.x<0?-1:1,this.isScrolling?c?this.close():this.translateY(o,0,l):h&&!d?(e=o+t,i=o-t,n=r*t,s=-r*t,this.options.continuous?(this.move(this.circle(e),n,0),this.move(this.circle(o-2*t),s,0)):e>=0&&e<this.num&&this.move(e,n,0),this.move(o,this.positions[o]+n,l),this.move(this.circle(i),this.positions[this.circle(i)]+n,l),o=this.circle(i),this.onslide(o)):this.options.continuous?(this.move(this.circle(o-1),-r,l),this.move(o,0,l),this.move(this.circle(o+1),r,l)):(o&&this.move(o-1,-r,l),this.move(o,0,l),o<this.num-1&&this.move(o+1,r,l))},ontransitionend:function(t){var e=this.slides[this.index];t&&e!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(e){var i,n=e.target||e.srcElement,s=n&&n.parentNode;n&&s&&(i=this.getNodeIndex(s),t(s).removeClass(this.options.slideLoadingClass),"error"===e.type?(t(s).addClass(this.options.slideErrorClass),this.elements[i]=3):this.elements[i]=2,n.clientHeight>this.container[0].clientHeight&&(n.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===s&&this.play(),this.setTimeout(this.options.onslidecomplete,[i,s]))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(e){var i=this.options,n=e.target||e.srcElement,s=n.parentNode,o=function(e){return t(n).hasClass(e)||t(s).hasClass(e)};s===this.slidesContainer[0]?(this.preventDefault(e),i.closeOnSlideClick?this.close():this.toggleControls()):s.parentNode&&s.parentNode===this.slidesContainer[0]?(this.preventDefault(e),this.toggleControls()):o(i.toggleClass)?(this.preventDefault(e),this.toggleControls()):o(i.prevClass)?(this.preventDefault(e),this.prev()):o(i.nextClass)?(this.preventDefault(e),this.next()):o(i.closeClass)?(this.preventDefault(e),this.close()):o(i.playPauseClass)&&(this.preventDefault(e),this.toggleSlideshow())},onclick:function(t){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?void delete this.touchDelta:this.handleClick(t)},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var e=this.slides[t].firstChild.title,i=this.titleElement;i.length&&(this.titleElement.empty(),e&&i[0].appendChild(document.createTextNode(e)))},setTimeout:function(t,e,i){var n=this;return t&&window.setTimeout(function(){t.apply(n,e||[])},i||0)},imageFactory:function(e,i){var n,s,o,l=this,r=this.imagePrototype.cloneNode(!1),a=e,h=this.options.stretchImages&&this.support.backgroundSize&&this.support.backgroundSize.contain,d=function(e){if(!n){if(e={type:e.type,target:s},!s.parentNode)return l.setTimeout(d,[e]);n=!0,t(r).off("load error",d),h&&"load"===e.type&&(s.style.background='url("'+a+'") center no-repeat',s.style.backgroundSize="contain"),i(e)}};return"string"!=typeof a&&(a=this.getItemProperty(e,this.options.urlProperty),o=this.getItemProperty(e,this.options.titleProperty)),h?s=this.elementPrototype.cloneNode(!1):(s=r,r.draggable=!1),o&&(s.title=o),t(r).on("load error",d),r.src=a,s},createElement:function(e,i){var n=e&&this.getItemProperty(e,this.options.typeProperty),s=n&&this[n.split("/")[0]+"Factory"]||this.imageFactory,o=e&&s.call(this,e,i);return o||(o=this.elementPrototype.cloneNode(!1),this.setTimeout(i,[{type:"error",target:o}])),t(o).addClass(this.options.slideContentClass),o},loadElement:function(e){this.elements[e]||(this.slides[e].firstChild?this.elements[e]=t(this.slides[e]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[e]=1,t(this.slides[e]).addClass(this.options.slideLoadingClass),this.slides[e].appendChild(this.createElement(this.list[e],this.proxyListener))))},loadElements:function(t){var e,i=Math.min(this.num,2*this.options.preloadRange+1),n=t;for(e=0;i>e;e+=1)n+=e*(0==e%2?-1:1),n=this.circle(n),this.loadElement(n)},unloadElements:function(t){var e,i,n;for(e in this.elements)this.elements.hasOwnProperty(e)&&((n=Math.abs(t-e))>this.options.preloadRange&&n+this.options.preloadRange<this.num&&((i=this.slides[e]).removeChild(i.firstChild),delete this.elements[e]))},addSlide:function(t){var e=this.slidePrototype.cloneNode(!1);e.setAttribute("data-index",t),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(t){var e=this.slides[t];e.style.width=this.slideWidth+"px",this.support.transition&&(e.style.left=t*-this.slideWidth+"px",this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(e){var i,n;for(e||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),t(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,i=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",i&&this.resetSlides(),n=0;n<this.num;n+=1)i&&this.addSlide(n),this.positionSlide(n);this.options.continuous&&this.support.transition&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transition||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute("data-index"),10)},getNestedProperty:function(t,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(e,i,n,s,o){var l=o||i||n||s&&parseInt(s,10);e&&t&&(t=t[l])}),t},getItemProperty:function(t,e){return t[e]||t.getAttribute&&t.getAttribute("data-"+e)||this.getNestedProperty(t,e)},initStartIndex:function(){var t,e=this.options.index,i=this.options.urlProperty;if(e&&"number"!=typeof e)for(t=0;t<this.num;t+=1)if(this.list[t]===e||this.getItemProperty(this.list[t],i)===this.getItemProperty(e,i)){e=t;break}this.index=this.circle(parseInt(e,10)||0)},initEventListeners:function(){var e=this,i=this.slidesContainer,n=function(t){var i=e.support.transition&&e.support.transition.end===t.type?"transitionend":t.type;e["on"+i](t)};t(window).on("resize",n),t(document.body).on("keydown",n),this.container.on("click",n),this.support.touch?i.on("touchstart touchmove touchend",n):this.options.emulateTouchEvents&&this.support.transition&&i.on("mousedown mousemove mouseup mouseout",n),this.support.transition&&i.on(this.support.transition.end,n),this.proxyListener=n},destroyEventListeners:function(){var e=this.slidesContainer,i=this.proxyListener;t(window).off("resize",i),t(document.body).off("keydown",i),this.container.off("click",i),this.support.touch?e.off("touchstart touchmove touchend",i):this.options.emulateTouchEvents&&this.support.transition&&e.off("mousedown mousemove mouseup mouseout",i),this.support.transition&&e.off(this.support.transition.end,i)},initWidget:function(){return this.container=t(this.options.container),!!this.container.length&&(this.slidesContainer=this.container.find(this.options.slidesContainer),!!this.slidesContainer.length&&(this.titleElement=this.container.find(this.options.titleElement),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),1===this.num&&this.container.addClass(this.options.singleClass),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)))},initOptions:function(e){this.options=t.extend({},this.options),(e&&e.carousel||this.options.carousel&&(!e||!1!==e.carousel))&&t.extend(this.options,this.carouselOptions),t.extend(this.options,e),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";t.extend(e.prototype.options,{fullScreen:!1});var i=e.prototype.initialize,n=e.prototype.close;return t.extend(e.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},requestFullScreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},initialize:function(){i.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),n.call(this)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";t.extend(e.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var i=e.prototype.initSlides,n=e.prototype.addSlide,s=e.prototype.resetSlides,o=e.prototype.handleClick,l=e.prototype.handleSlide,r=e.prototype.close;return t.extend(e.prototype,{createIndicator:function(e){var i,n,s=this.indicatorPrototype.cloneNode(!1),o=this.getItemProperty(e,this.options.titleProperty),l=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&((n=e.getElementsByTagName&&t(e).find("img")[0])?i=n.src:l&&(i=this.getItemProperty(e,l)),i&&(s.style.backgroundImage='url("'+i+'")')),o&&(s.title=o),s},addIndicator:function(t){if(this.indicatorContainer.length){var e=this.createIndicator(this.list[t]);e.setAttribute("data-index",t),this.indicatorContainer[0].appendChild(e),this.indicators.push(e)}},setActiveIndicator:function(e){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=t(this.indicators[e]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),i.call(this,t)},addSlide:function(t){n.call(this,t),this.addIndicator(t)},resetSlides:function(){s.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var e=t.target||t.srcElement,i=e.parentNode;if(i===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(e));else{if(i.parentNode!==this.indicatorContainer[0])return o.call(this,t);this.preventDefault(t),this.slide(this.getNodeIndex(i))}},handleSlide:function(t){l.call(this,t),this.setActiveIndicator(t)},close:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),r.call(this)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";return t.extend(e.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"}),e.prototype.videoFactory=function(e,i){var n,s,o,l,r,a=this,h=this.options,d=this.elementPrototype.cloneNode(!1),c=t(d),u=[{type:"error",target:d}],f=document.createElement("video"),p=this.getItemProperty(e,h.urlProperty),m=this.getItemProperty(e,h.typeProperty),g=this.getItemProperty(e,h.titleProperty),_=this.getItemProperty(e,h.videoPosterProperty),v=this.getItemProperty(e,h.videoSourcesProperty);if(c.addClass(h.videoContentClass),g&&(d.title=g),f.canPlayType)if(p&&m&&f.canPlayType(m))f.src=p;else if(v)for("string"==typeof v&&(v=t.parseJSON(v));v&&v.length;)if(s=v.shift(),p=this.getItemProperty(s,h.urlProperty),m=this.getItemProperty(s,h.typeProperty),p&&m&&f.canPlayType(m)){f.src=p;break}return _&&(f.setAttribute("poster",_),n=this.imagePrototype.cloneNode(!1),t(n).addClass(h.toggleClass),n.src=_,n.draggable=!1,d.appendChild(n)),(o=document.createElement("a")).setAttribute("target","_blank"),o.setAttribute("download",g),o.href=p,f.src&&(f.controls=!0,t(f).on("error",function(){a.setTimeout(i,u)}).on("pause",function(){l=!1,c.removeClass(a.options.videoLoadingClass).removeClass(a.options.videoPlayingClass),r&&a.container.addClass(a.options.controlsClass),a.interval&&a.play()}).on("playing",function(){l=!1,c.removeClass(a.options.videoLoadingClass).addClass(a.options.videoPlayingClass),a.container.hasClass(a.options.controlsClass)?(r=!0,a.container.removeClass(a.options.controlsClass)):r=!1}).on("play",function(){window.clearTimeout(a.timeout),l=!0,c.addClass(a.options.videoLoadingClass)}),t(o).on("click",function(t){t.preventDefault(),l?f.pause():f.play()}),d.appendChild(f)),d.appendChild(o),this.setTimeout(i,[{type:"load",target:d}]),d},e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery.js"],t):t(window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";t(document.body).on("click","[data-gallery]",function(i){var n=t(this).data("gallery"),s=t(n),o=s.length&&s||t(e.prototype.options.container),l=t.extend(o.data(),{container:o[0],index:this,event:i,onopen:function(){o.data("gallery",this).trigger("open",arguments)},onslide:function(){o.trigger("slide",arguments)},onslideend:function(){o.trigger("slideend",arguments)},onslidecomplete:function(){o.trigger("slidecomplete",arguments)},onclose:function(){o.trigger("close").removeData("gallery")}}),r=t('[data-gallery="'+n+'"]');return l.filter&&(r=r.filter(l.filter)),new e(r,l)})});